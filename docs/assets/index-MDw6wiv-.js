(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();function V5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uh={exports:{}},sl={};var hy;function Px(){if(hy)return sl;hy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,r){var c=null;if(r!==void 0&&(c=""+r),a.key!==void 0&&(c=""+a.key),"key"in a){r={};for(var d in a)d!=="key"&&(r[d]=a[d])}else r=a;return a=r.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:r}}return sl.Fragment=e,sl.jsx=n,sl.jsxs=n,sl}var py;function Lx(){return py||(py=1,uh.exports=Px()),uh.exports}var h=Lx(),dh={exports:{}},Xe={};var my;function Ox(){if(my)return Xe;my=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,N={};function k(U,W,de){this.props=U,this.context=W,this.refs=N,this.updater=de||w}k.prototype.isReactComponent={},k.prototype.setState=function(U,W){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,W,"setState")},k.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function L(){}L.prototype=k.prototype;function R(U,W,de){this.props=U,this.context=W,this.refs=N,this.updater=de||w}var O=R.prototype=new L;O.constructor=R,E(O,k.prototype),O.isPureReactComponent=!0;var I=Array.isArray;function G(){}var P={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function F(U,W,de){var te=de.ref;return{$$typeof:t,type:U,key:W,ref:te!==void 0?te:null,props:de}}function B(U,W){return F(U.type,W,U.props)}function H(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function z(U){var W={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(de){return W[de]})}var j=/\/+/g;function $(U,W){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):W.toString(36)}function oe(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(G,G):(U.status="pending",U.then(function(W){U.status==="pending"&&(U.status="fulfilled",U.value=W)},function(W){U.status==="pending"&&(U.status="rejected",U.reason=W)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function q(U,W,de,te,A){var C=typeof U;(C==="undefined"||C==="boolean")&&(U=null);var he=!1;if(U===null)he=!0;else switch(C){case"bigint":case"string":case"number":he=!0;break;case"object":switch(U.$$typeof){case t:case e:he=!0;break;case g:return he=U._init,q(he(U._payload),W,de,te,A)}}if(he)return A=A(U),he=te===""?"."+$(U,0):te,I(A)?(de="",he!=null&&(de=he.replace(j,"$&/")+"/"),q(A,W,de,"",function(Ee){return Ee})):A!=null&&(H(A)&&(A=B(A,de+(A.key==null||U&&U.key===A.key?"":(""+A.key).replace(j,"$&/")+"/")+he)),W.push(A)),1;he=0;var ue=te===""?".":te+":";if(I(U))for(var Le=0;Le<U.length;Le++)te=U[Le],C=ue+$(te,Le),he+=q(te,W,de,C,A);else if(Le=S(U),typeof Le=="function")for(U=Le.call(U),Le=0;!(te=U.next()).done;)te=te.value,C=ue+$(te,Le++),he+=q(te,W,de,C,A);else if(C==="object"){if(typeof U.then=="function")return q(oe(U),W,de,te,A);throw W=String(U),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return he}function Z(U,W,de){if(U==null)return U;var te=[],A=0;return q(U,te,"","",function(C){return W.call(de,C,A++)}),te}function Q(U){if(U._status===-1){var W=U._result;W=W(),W.then(function(de){(U._status===0||U._status===-1)&&(U._status=1,U._result=de)},function(de){(U._status===0||U._status===-1)&&(U._status=2,U._result=de)}),U._status===-1&&(U._status=0,U._result=W)}if(U._status===1)return U._result.default;throw U._result}var re=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},fe={map:Z,forEach:function(U,W,de){Z(U,function(){W.apply(this,arguments)},de)},count:function(U){var W=0;return Z(U,function(){W++}),W},toArray:function(U){return Z(U,function(W){return W})||[]},only:function(U){if(!H(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Xe.Activity=_,Xe.Children=fe,Xe.Component=k,Xe.Fragment=n,Xe.Profiler=a,Xe.PureComponent=R,Xe.StrictMode=i,Xe.Suspense=p,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(U){return P.H.useMemoCache(U)}},Xe.cache=function(U){return function(){return U.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(U,W,de){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var te=E({},U.props),A=U.key;if(W!=null)for(C in W.key!==void 0&&(A=""+W.key),W)!M.call(W,C)||C==="key"||C==="__self"||C==="__source"||C==="ref"&&W.ref===void 0||(te[C]=W[C]);var C=arguments.length-2;if(C===1)te.children=de;else if(1<C){for(var he=Array(C),ue=0;ue<C;ue++)he[ue]=arguments[ue+2];te.children=he}return F(U.type,A,te)},Xe.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:r,_context:U},U},Xe.createElement=function(U,W,de){var te,A={},C=null;if(W!=null)for(te in W.key!==void 0&&(C=""+W.key),W)M.call(W,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(A[te]=W[te]);var he=arguments.length-2;if(he===1)A.children=de;else if(1<he){for(var ue=Array(he),Le=0;Le<he;Le++)ue[Le]=arguments[Le+2];A.children=ue}if(U&&U.defaultProps)for(te in he=U.defaultProps,he)A[te]===void 0&&(A[te]=he[te]);return F(U,C,A)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(U){return{$$typeof:d,render:U}},Xe.isValidElement=H,Xe.lazy=function(U){return{$$typeof:g,_payload:{_status:-1,_result:U},_init:Q}},Xe.memo=function(U,W){return{$$typeof:f,type:U,compare:W===void 0?null:W}},Xe.startTransition=function(U){var W=P.T,de={};P.T=de;try{var te=U(),A=P.S;A!==null&&A(de,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(G,re)}catch(C){re(C)}finally{W!==null&&de.types!==null&&(W.types=de.types),P.T=W}},Xe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Xe.use=function(U){return P.H.use(U)},Xe.useActionState=function(U,W,de){return P.H.useActionState(U,W,de)},Xe.useCallback=function(U,W){return P.H.useCallback(U,W)},Xe.useContext=function(U){return P.H.useContext(U)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(U,W){return P.H.useDeferredValue(U,W)},Xe.useEffect=function(U,W){return P.H.useEffect(U,W)},Xe.useEffectEvent=function(U){return P.H.useEffectEvent(U)},Xe.useId=function(){return P.H.useId()},Xe.useImperativeHandle=function(U,W,de){return P.H.useImperativeHandle(U,W,de)},Xe.useInsertionEffect=function(U,W){return P.H.useInsertionEffect(U,W)},Xe.useLayoutEffect=function(U,W){return P.H.useLayoutEffect(U,W)},Xe.useMemo=function(U,W){return P.H.useMemo(U,W)},Xe.useOptimistic=function(U,W){return P.H.useOptimistic(U,W)},Xe.useReducer=function(U,W,de){return P.H.useReducer(U,W,de)},Xe.useRef=function(U){return P.H.useRef(U)},Xe.useState=function(U){return P.H.useState(U)},Xe.useSyncExternalStore=function(U,W,de){return P.H.useSyncExternalStore(U,W,de)},Xe.useTransition=function(){return P.H.useTransition()},Xe.version="19.2.0",Xe}var gy;function Gh(){return gy||(gy=1,dh.exports=Ox()),dh.exports}var V=Gh();const dl=V5(V);var fh={exports:{}},il={},hh={exports:{}},ph={};var yy;function Ux(){return yy||(yy=1,(function(t){function e(q,Z){var Q=q.length;q.push(Z);e:for(;0<Q;){var re=Q-1>>>1,fe=q[re];if(0<a(fe,Z))q[re]=Z,q[Q]=fe,Q=re;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Z=q[0],Q=q.pop();if(Q!==Z){q[0]=Q;e:for(var re=0,fe=q.length,U=fe>>>1;re<U;){var W=2*(re+1)-1,de=q[W],te=W+1,A=q[te];if(0>a(de,Q))te<fe&&0>a(A,de)?(q[re]=A,q[te]=Q,re=te):(q[re]=de,q[W]=Q,re=W);else if(te<fe&&0>a(A,Q))q[re]=A,q[te]=Q,re=te;else break e}}return Z}function a(q,Z){var Q=q.sortIndex-Z.sortIndex;return Q!==0?Q:q.id-Z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var p=[],f=[],g=1,_=null,b=3,S=!1,w=!1,E=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(q){for(var Z=n(f);Z!==null;){if(Z.callback===null)i(f);else if(Z.startTime<=q)i(f),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=n(f)}}function I(q){if(E=!1,O(q),!w)if(n(p)!==null)w=!0,G||(G=!0,z());else{var Z=n(f);Z!==null&&oe(I,Z.startTime-q)}}var G=!1,P=-1,M=5,F=-1;function B(){return N?!0:!(t.unstable_now()-F<M)}function H(){if(N=!1,G){var q=t.unstable_now();F=q;var Z=!0;try{e:{w=!1,E&&(E=!1,L(P),P=-1),S=!0;var Q=b;try{t:{for(O(q),_=n(p);_!==null&&!(_.expirationTime>q&&B());){var re=_.callback;if(typeof re=="function"){_.callback=null,b=_.priorityLevel;var fe=re(_.expirationTime<=q);if(q=t.unstable_now(),typeof fe=="function"){_.callback=fe,O(q),Z=!0;break t}_===n(p)&&i(p),O(q)}else i(p);_=n(p)}if(_!==null)Z=!0;else{var U=n(f);U!==null&&oe(I,U.startTime-q),Z=!1}}break e}finally{_=null,b=Q,S=!1}Z=void 0}}finally{Z?z():G=!1}}}var z;if(typeof R=="function")z=function(){R(H)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=H,z=function(){$.postMessage(null)}}else z=function(){k(H,0)};function oe(q,Z){P=k(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(q){switch(b){case 1:case 2:case 3:var Z=3;break;default:Z=b}var Q=b;b=Z;try{return q()}finally{b=Q}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=b;b=q;try{return Z()}finally{b=Q}},t.unstable_scheduleCallback=function(q,Z,Q){var re=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,q){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Q+fe,q={id:g++,callback:Z,priorityLevel:q,startTime:Q,expirationTime:fe,sortIndex:-1},Q>re?(q.sortIndex=Q,e(f,q),n(p)===null&&q===n(f)&&(E?(L(P),P=-1):E=!0,oe(I,Q-re))):(q.sortIndex=fe,e(p,q),w||S||(w=!0,G||(G=!0,z()))),q},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(q){var Z=b;return function(){var Q=b;b=Z;try{return q.apply(this,arguments)}finally{b=Q}}}})(ph)),ph}var vy;function qx(){return vy||(vy=1,hh.exports=Ux()),hh.exports}var mh={exports:{}},Nn={};var _y;function Vx(){if(_y)return Nn;_y=1;var t=Gh();function e(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(p,f,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:p,containerInfo:f,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(p,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return r(p,f,null,g)},Nn.flushSync=function(p){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=f,i.p=g,i.d.f()}},Nn.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(p,f))},Nn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Nn.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var g=f.as,_=d(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:S}):g==="script"&&i.d.X(p,{crossOrigin:_,integrity:b,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Nn.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=d(f.as,f.crossOrigin);i.d.M(p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(p)},Nn.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,_=d(g,f.crossOrigin);i.d.L(p,g,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Nn.preloadModule=function(p,f){if(typeof p=="string")if(f){var g=d(f.as,f.crossOrigin);i.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(p)},Nn.requestFormReset=function(p){i.d.r(p)},Nn.unstable_batchedUpdates=function(p,f){return p(f)},Nn.useFormState=function(p,f,g){return c.H.useFormState(p,f,g)},Nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nn.version="19.2.0",Nn}var xy;function Fx(){if(xy)return mh.exports;xy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mh.exports=Vx(),mh.exports}var by;function Gx(){if(by)return il;by=1;var t=qx(),e=Gh(),n=Fx();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function r(s){var o=s,l=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(l=o.return),s=o.return;while(s)}return o.tag===3?l:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function p(s){if(r(s)!==s)throw Error(i(188))}function f(s){var o=s.alternate;if(!o){if(o=r(s),o===null)throw Error(i(188));return o!==s?null:s}for(var l=s,u=o;;){var v=l.return;if(v===null)break;var x=v.alternate;if(x===null){if(u=v.return,u!==null){l=u;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===l)return p(v),s;if(x===u)return p(v),o;x=x.sibling}throw Error(i(188))}if(l.return!==u.return)l=v,u=x;else{for(var T=!1,D=v.child;D;){if(D===l){T=!0,l=v,u=x;break}if(D===u){T=!0,u=v,l=x;break}D=D.sibling}if(!T){for(D=x.child;D;){if(D===l){T=!0,l=x,u=v;break}if(D===u){T=!0,u=x,l=v;break}D=D.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var j=Symbol.for("react.client.reference");function $(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===j?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case I:return"Suspense";case G:return"SuspenseList";case F:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case R:return s.displayName||"Context";case L:return(s._context.displayName||"Context")+".Consumer";case O:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return o=s.displayName||null,o!==null?o:$(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return $(s(o))}catch{}}return null}var oe=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},re=[],fe=-1;function U(s){return{current:s}}function W(s){0>fe||(s.current=re[fe],re[fe]=null,fe--)}function de(s,o){fe++,re[fe]=s.current,s.current=o}var te=U(null),A=U(null),C=U(null),he=U(null);function ue(s,o){switch(de(C,o),de(A,s),de(te,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Og(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Og(o),s=Ug(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(te),de(te,s)}function Le(){W(te),W(A),W(C)}function Ee(s){s.memoizedState!==null&&de(he,s);var o=te.current,l=Ug(o,s.type);o!==l&&(de(A,s),de(te,l))}function Ge(s){A.current===s&&(W(te),W(A)),he.current===s&&(W(he),$r._currentValue=Q)}var we,Ve;function Re(s){if(we===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);we=o&&o[1]||"",Ve=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+we+s+Ve}var ae=!1;function _e(s,o){if(!s||ae)return"";ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(le){var ie=le}Reflect.construct(s,[],ge)}else{try{ge.call()}catch(le){ie=le}s.call(ge.prototype)}}else{try{throw Error()}catch(le){ie=le}(ge=s())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(le){if(le&&ie&&typeof le.stack=="string")return[le.stack,ie.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),T=x[0],D=x[1];if(T&&D){var Y=T.split(`
`),se=D.split(`
`);for(v=u=0;u<Y.length&&!Y[u].includes("DetermineComponentFrameRoot");)u++;for(;v<se.length&&!se[v].includes("DetermineComponentFrameRoot");)v++;if(u===Y.length||v===se.length)for(u=Y.length-1,v=se.length-1;1<=u&&0<=v&&Y[u]!==se[v];)v--;for(;1<=u&&0<=v;u--,v--)if(Y[u]!==se[v]){if(u!==1||v!==1)do if(u--,v--,0>v||Y[u]!==se[v]){var pe=`
`+Y[u].replace(" at new "," at ");return s.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",s.displayName)),pe}while(1<=u&&0<=v);break}}}finally{ae=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Re(l):""}function Be(s,o){switch(s.tag){case 26:case 27:case 5:return Re(s.type);case 16:return Re("Lazy");case 13:return s.child!==o&&o!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return _e(s.type,!1);case 11:return _e(s.type.render,!1);case 1:return _e(s.type,!0);case 31:return Re("Activity");default:return""}}function Fe(s){try{var o="",l=null;do o+=Be(s,l),l=s,s=s.return;while(s);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Oe=Object.prototype.hasOwnProperty,X=t.unstable_scheduleCallback,K=t.unstable_cancelCallback,ye=t.unstable_shouldYield,Se=t.unstable_requestPaint,xe=t.unstable_now,Me=t.unstable_getCurrentPriorityLevel,ut=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,Ue=t.unstable_NormalPriority,Ht=t.unstable_LowPriority,Lt=t.unstable_IdlePriority,kt=t.log,Rt=t.unstable_setDisableYieldValue,Yt=null,Ot=null;function Tn(s){if(typeof kt=="function"&&Rt(s),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Yt,s)}catch{}}var Qt=Math.clz32?Math.clz32:Pe,ve=Math.log,Ie=Math.LN2;function Pe(s){return s>>>=0,s===0?32:31-(ve(s)/Ie|0)|0}var Je=256,mt=262144,Ze=4194304;function It(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function an(s,o,l){var u=s.pendingLanes;if(u===0)return 0;var v=0,x=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var D=u&134217727;return D!==0?(u=D&~x,u!==0?v=It(u):(T&=D,T!==0?v=It(T):l||(l=D&~s,l!==0&&(v=It(l))))):(D=u&~x,D!==0?v=It(D):T!==0?v=It(T):l||(l=u&~s,l!==0&&(v=It(l)))),v===0?0:o!==0&&o!==v&&(o&x)===0&&(x=v&-v,l=o&-o,x>=l||x===32&&(l&4194048)!==0)?o:v}function Vn(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Oi(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(){var s=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),s}function Ui(s){for(var o=[],l=0;31>l;l++)o.push(s);return o}function En(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Gs(s,o,l,u,v,x){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var D=s.entanglements,Y=s.expirationTimes,se=s.hiddenUpdates;for(l=T&~l;0<l;){var pe=31-Qt(l),ge=1<<pe;D[pe]=0,Y[pe]=-1;var ie=se[pe];if(ie!==null)for(se[pe]=null,pe=0;pe<ie.length;pe++){var le=ie[pe];le!==null&&(le.lane&=-536870913)}l&=~ge}u!==0&&ea(s,u,0),x!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=x&~(T&~o))}function ea(s,o,l){s.pendingLanes|=o,s.suspendedLanes&=~o;var u=31-Qt(o);s.entangledLanes|=o,s.entanglements[u]=s.entanglements[u]|1073741824|l&261930}function Gt(s,o){var l=s.entangledLanes|=o;for(s=s.entanglements;l;){var u=31-Qt(l),v=1<<u;v&o|s[u]&o&&(s[u]|=o),l&=~v}}function ai(s,o){var l=o&-o;return l=(l&42)!==0?1:Bs(l),(l&(s.suspendedLanes|o))!==0?0:l}function Bs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function js(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function us(){var s=Z.p;return s!==0?s:(s=window.event,s===void 0?32:ay(s.type))}function zs(s,o){var l=Z.p;try{return Z.p=s,o()}finally{Z.p=l}}var je=Math.random().toString(36).slice(2),$e="__reactFiber$"+je,st="__reactProps$"+je,hn="__reactContainer$"+je,qi="__reactEvents$"+je,Cs="__reactListeners$"+je,Eo="__reactHandles$"+je,dr="__reactResources$"+je,Vi="__reactMarker$"+je;function Dn(s){delete s[$e],delete s[st],delete s[qi],delete s[Cs],delete s[Eo]}function Fn(s){var o=s[$e];if(o)return o;for(var l=s.parentNode;l;){if(o=l[hn]||l[$e]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(s=zg(s);s!==null;){if(l=s[$e])return l;s=zg(s)}return o}s=l,l=s.parentNode}return null}function Qn(s){if(s=s[$e]||s[hn]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function No(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Hs(s){var o=s[dr];return o||(o=s[dr]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function rn(s){s[Vi]=!0}var Pl=new Set,Ll={};function ri(s,o){Fi(s,o),Fi(s+"Capture",o)}function Fi(s,o){for(Ll[s]=o,s=0;s<o.length;s++)Pl.add(o[s])}var Ol=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},Gi={};function od(s){return Oe.call(Gi,s)?!0:Oe.call(Ul,s)?!1:Ol.test(s)?Gi[s]=!0:(Ul[s]=!0,!1)}function ta(s,o,l){if(od(o))if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+l)}}function Bi(s,o,l){if(l===null)s.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+l)}}function Ss(s,o,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(o,l,""+u)}}function Pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ql(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ad(s,o,l){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,x=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(T){l=""+T,x.call(this,T)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function na(s){if(!s._valueTracker){var o=ql(s)?"checked":"value";s._valueTracker=ad(s,o,""+s[o])}}function fr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var l=o.getValue(),u="";return s&&(u=ql(s)?s.checked?"true":"false":s.value),s=u,s!==l?(o.setValue(s),!0):!1}function sa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var rd=/[\n"\\]/g;function Gn(s){return s.replace(rd,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ia(s,o,l,u,v,x,T,D){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),o!=null?T==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Pn(o)):s.value!==""+Pn(o)&&(s.value=""+Pn(o)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),o!=null?oa(s,T,Pn(o)):l!=null?oa(s,T,Pn(l)):u!=null&&s.removeAttribute("value"),v==null&&x!=null&&(s.defaultChecked=!!x),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+Pn(D):s.removeAttribute("name")}function hr(s,o,l,u,v,x,T,D){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.type=x),o!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||o!=null)){na(s);return}l=l!=null?""+Pn(l):"",o=o!=null?""+Pn(o):l,D||o===s.value||(s.value=o),s.defaultValue=o}u=u??v,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=D?s.checked:!!u,s.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),na(s)}function oa(s,o,l){o==="number"&&sa(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function li(s,o,l,u){if(s=s.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<s.length;l++)v=o.hasOwnProperty("$"+s[l].value),s[l].selected!==v&&(s[l].selected=v),v&&u&&(s[l].defaultSelected=!0)}else{for(l=""+Pn(l),o=null,v=0;v<s.length;v++){if(s[v].value===l){s[v].selected=!0,u&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function pr(s,o,l){if(o!=null&&(o=""+Pn(o),o!==s.value&&(s.value=o),l==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=l!=null?""+Pn(l):""}function Vl(s,o,l,u){if(o==null){if(u!=null){if(l!=null)throw Error(i(92));if(oe(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),o=l}l=Pn(o),s.defaultValue=l,u=s.textContent,u===l&&u!==""&&u!==null&&(s.value=u),na(s)}function ji(s,o){if(o){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=o;return}}s.textContent=o}var ld=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fl(s,o,l){var u=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":u?s.setProperty(o,l):typeof l!="number"||l===0||ld.has(o)?o==="float"?s.cssFloat=l:s[o]=(""+l).trim():s[o]=l+"px"}function Gl(s,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var v in o)u=o[v],o.hasOwnProperty(v)&&l[v]!==u&&Fl(s,v,u)}else for(var x in o)o.hasOwnProperty(x)&&Fl(s,x,o[x])}function mr(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ce=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),be=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ce(s){return be.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ye(){}var xt=null;function Bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var wt=null,Bt=null;function $t(s){var o=Qn(s);if(o&&(s=o.stateNode)){var l=s[st]||null;e:switch(s=o.stateNode,o.type){case"input":if(ia(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Gn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var u=l[o];if(u!==s&&u.form===s.form){var v=u[st]||null;if(!v)throw Error(i(90));ia(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)u=l[o],u.form===s.form&&fr(u)}break e;case"textarea":pr(s,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&li(s,!!l.multiple,o,!1)}}}var ws=!1;function Op(s,o,l){if(ws)return s(o,l);ws=!0;try{var u=s(o);return u}finally{if(ws=!1,(wt!==null||Bt!==null)&&(Ac(),wt&&(o=wt,s=Bt,Bt=wt=null,$t(o),s)))for(o=0;o<s.length;o++)$t(s[o])}}function gr(s,o){var l=s.stateNode;if(l===null)return null;var u=l[st]||null;if(u===null)return null;l=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=!1;if(ci)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){cd=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{cd=!1}var zi=null,ud=null,Bl=null;function Up(){if(Bl)return Bl;var s,o=ud,l=o.length,u,v="value"in zi?zi.value:zi.textContent,x=v.length;for(s=0;s<l&&o[s]===v[s];s++);var T=l-s;for(u=1;u<=T&&o[l-u]===v[x-u];u++);return Bl=v.slice(s,1<u?1-u:void 0)}function jl(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function zl(){return!0}function qp(){return!1}function jn(s){function o(l,u,v,x,T){this._reactName=l,this._targetInst=v,this.type=u,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(l=s[D],this[D]=l?l(x):x[D]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?zl:qp,this.isPropagationStopped=qp,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),o}var Ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hl=jn(Ao),vr=_({},Ao,{view:0,detail:0}),I2=jn(vr),dd,fd,_r,Yl=_({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==_r&&(_r&&s.type==="mousemove"?(dd=s.screenX-_r.screenX,fd=s.screenY-_r.screenY):fd=dd=0,_r=s),dd)},movementY:function(s){return"movementY"in s?s.movementY:fd}}),Vp=jn(Yl),D2=_({},Yl,{dataTransfer:0}),P2=jn(D2),L2=_({},vr,{relatedTarget:0}),hd=jn(L2),O2=_({},Ao,{animationName:0,elapsedTime:0,pseudoElement:0}),U2=jn(O2),q2=_({},Ao,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),V2=jn(q2),F2=_({},Ao,{data:0}),Fp=jn(F2),G2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z2(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=j2[s])?!!o[s]:!1}function pd(){return z2}var H2=_({},vr,{key:function(s){if(s.key){var o=G2[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=jl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?B2[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(s){return s.type==="keypress"?jl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?jl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Y2=jn(H2),W2=_({},Yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=jn(W2),J2=_({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),Z2=jn(J2),X2=_({},Ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),K2=jn(X2),Q2=_({},Yl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$2=jn(Q2),e_=_({},Ao,{newState:0,oldState:0}),t_=jn(e_),n_=[9,13,27,32],md=ci&&"CompositionEvent"in window,xr=null;ci&&"documentMode"in document&&(xr=document.documentMode);var s_=ci&&"TextEvent"in window&&!xr,Bp=ci&&(!md||xr&&8<xr&&11>=xr),jp=" ",zp=!1;function Hp(s,o){switch(s){case"keyup":return n_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var aa=!1;function i_(s,o){switch(s){case"compositionend":return Yp(o);case"keypress":return o.which!==32?null:(zp=!0,jp);case"textInput":return s=o.data,s===jp&&zp?null:s;default:return null}}function o_(s,o){if(aa)return s==="compositionend"||!md&&Hp(s,o)?(s=Up(),Bl=ud=zi=null,aa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Bp&&o.locale!=="ko"?null:o.data;default:return null}}var a_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!a_[s.type]:o==="textarea"}function Jp(s,o,l,u){wt?Bt?Bt.push(u):Bt=[u]:wt=u,o=Lc(o,"onChange"),0<o.length&&(l=new Hl("onChange","change",null,l,u),s.push({event:l,listeners:o}))}var br=null,Cr=null;function r_(s){kg(s,0)}function Wl(s){var o=No(s);if(fr(o))return s}function Zp(s,o){if(s==="change")return o}var Xp=!1;if(ci){var gd;if(ci){var yd="oninput"in document;if(!yd){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),yd=typeof Kp.oninput=="function"}gd=yd}else gd=!1;Xp=gd&&(!document.documentMode||9<document.documentMode)}function Qp(){br&&(br.detachEvent("onpropertychange",$p),Cr=br=null)}function $p(s){if(s.propertyName==="value"&&Wl(Cr)){var o=[];Jp(o,Cr,s,Bn(s)),Op(r_,o)}}function l_(s,o,l){s==="focusin"?(Qp(),br=o,Cr=l,br.attachEvent("onpropertychange",$p)):s==="focusout"&&Qp()}function c_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wl(Cr)}function u_(s,o){if(s==="click")return Wl(o)}function d_(s,o){if(s==="input"||s==="change")return Wl(o)}function f_(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var $n=typeof Object.is=="function"?Object.is:f_;function Sr(s,o){if($n(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var l=Object.keys(s),u=Object.keys(o);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var v=l[u];if(!Oe.call(o,v)||!$n(s[v],o[v]))return!1}return!0}function em(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function tm(s,o){var l=em(s);s=0;for(var u;l;){if(l.nodeType===3){if(u=s+l.textContent.length,s<=o&&u>=o)return{node:l,offset:o-s};s=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=em(l)}}function nm(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?nm(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function sm(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=sa(s.document);o instanceof s.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)s=o.contentWindow;else break;o=sa(s.document)}return o}function vd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var h_=ci&&"documentMode"in document&&11>=document.documentMode,ra=null,_d=null,wr=null,xd=!1;function im(s,o,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xd||ra==null||ra!==sa(u)||(u=ra,"selectionStart"in u&&vd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),wr&&Sr(wr,u)||(wr=u,u=Lc(_d,"onSelect"),0<u.length&&(o=new Hl("onSelect","select",null,o,l),s.push({event:o,listeners:u}),o.target=ra)))}function Mo(s,o){var l={};return l[s.toLowerCase()]=o.toLowerCase(),l["Webkit"+s]="webkit"+o,l["Moz"+s]="moz"+o,l}var la={animationend:Mo("Animation","AnimationEnd"),animationiteration:Mo("Animation","AnimationIteration"),animationstart:Mo("Animation","AnimationStart"),transitionrun:Mo("Transition","TransitionRun"),transitionstart:Mo("Transition","TransitionStart"),transitioncancel:Mo("Transition","TransitionCancel"),transitionend:Mo("Transition","TransitionEnd")},bd={},om={};ci&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function ko(s){if(bd[s])return bd[s];if(!la[s])return s;var o=la[s],l;for(l in o)if(o.hasOwnProperty(l)&&l in om)return bd[s]=o[l];return s}var am=ko("animationend"),rm=ko("animationiteration"),lm=ko("animationstart"),p_=ko("transitionrun"),m_=ko("transitionstart"),g_=ko("transitioncancel"),cm=ko("transitionend"),um=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function Ts(s,o){um.set(s,o),ri(o,[s])}var Jl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ds=[],ca=0,Sd=0;function Zl(){for(var s=ca,o=Sd=ca=0;o<s;){var l=ds[o];ds[o++]=null;var u=ds[o];ds[o++]=null;var v=ds[o];ds[o++]=null;var x=ds[o];if(ds[o++]=null,u!==null&&v!==null){var T=u.pending;T===null?v.next=v:(v.next=T.next,T.next=v),u.pending=v}x!==0&&dm(l,v,x)}}function Xl(s,o,l,u){ds[ca++]=s,ds[ca++]=o,ds[ca++]=l,ds[ca++]=u,Sd|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function wd(s,o,l,u){return Xl(s,o,l,u),Kl(s)}function Ro(s,o){return Xl(s,null,null,o),Kl(s)}function dm(s,o,l){s.lanes|=l;var u=s.alternate;u!==null&&(u.lanes|=l);for(var v=!1,x=s.return;x!==null;)x.childLanes|=l,u=x.alternate,u!==null&&(u.childLanes|=l),x.tag===22&&(s=x.stateNode,s===null||s._visibility&1||(v=!0)),s=x,x=x.return;return s.tag===3?(x=s.stateNode,v&&o!==null&&(v=31-Qt(l),s=x.hiddenUpdates,u=s[v],u===null?s[v]=[o]:u.push(o),o.lane=l|536870912),x):null}function Kl(s){if(50<Yr)throw Yr=0,Pf=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ua={};function y_(s,o,l,u){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(s,o,l,u){return new y_(s,o,l,u)}function Td(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ui(s,o){var l=s.alternate;return l===null?(l=es(s.tag,o,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=o,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,o=s.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function fm(s,o){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,o=l.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Ql(s,o,l,u,v,x){var T=0;if(u=s,typeof s=="function")Td(s)&&(T=1);else if(typeof s=="string")T=Cx(s,l,te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case F:return s=es(31,l,o,v),s.elementType=F,s.lanes=x,s;case E:return Io(l.children,v,x,o);case N:T=8,v|=24;break;case k:return s=es(12,l,o,v|2),s.elementType=k,s.lanes=x,s;case I:return s=es(13,l,o,v),s.elementType=I,s.lanes=x,s;case G:return s=es(19,l,o,v),s.elementType=G,s.lanes=x,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:T=10;break e;case L:T=9;break e;case O:T=11;break e;case P:T=14;break e;case M:T=16,u=null;break e}T=29,l=Error(i(130,s===null?"null":typeof s,"")),u=null}return o=es(T,l,o,v),o.elementType=s,o.type=u,o.lanes=x,o}function Io(s,o,l,u){return s=es(7,s,u,o),s.lanes=l,s}function Ed(s,o,l){return s=es(6,s,null,o),s.lanes=l,s}function hm(s){var o=es(18,null,null,0);return o.stateNode=s,o}function Nd(s,o,l){return o=es(4,s.children!==null?s.children:[],s.key,o),o.lanes=l,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var pm=new WeakMap;function fs(s,o){if(typeof s=="object"&&s!==null){var l=pm.get(s);return l!==void 0?l:(o={value:s,source:o,stack:Fe(o)},pm.set(s,o),o)}return{value:s,source:o,stack:Fe(o)}}var da=[],fa=0,$l=null,Tr=0,hs=[],ps=0,Hi=null,Ys=1,Ws="";function di(s,o){da[fa++]=Tr,da[fa++]=$l,$l=s,Tr=o}function mm(s,o,l){hs[ps++]=Ys,hs[ps++]=Ws,hs[ps++]=Hi,Hi=s;var u=Ys;s=Ws;var v=32-Qt(u)-1;u&=~(1<<v),l+=1;var x=32-Qt(o)+v;if(30<x){var T=v-v%5;x=(u&(1<<T)-1).toString(32),u>>=T,v-=T,Ys=1<<32-Qt(o)+v|l<<v|u,Ws=x+s}else Ys=1<<x|l<<v|u,Ws=s}function Ad(s){s.return!==null&&(di(s,1),mm(s,1,0))}function Md(s){for(;s===$l;)$l=da[--fa],da[fa]=null,Tr=da[--fa],da[fa]=null;for(;s===Hi;)Hi=hs[--ps],hs[ps]=null,Ws=hs[--ps],hs[ps]=null,Ys=hs[--ps],hs[ps]=null}function gm(s,o){hs[ps++]=Ys,hs[ps++]=Ws,hs[ps++]=Hi,Ys=o.id,Ws=o.overflow,Hi=s}var _n=null,Ut=null,ct=!1,Yi=null,ms=!1,kd=Error(i(519));function Wi(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Er(fs(o,s)),kd}function ym(s){var o=s.stateNode,l=s.type,u=s.memoizedProps;switch(o[$e]=s,o[st]=u,l){case"dialog":ot("cancel",o),ot("close",o);break;case"iframe":case"object":case"embed":ot("load",o);break;case"video":case"audio":for(l=0;l<Jr.length;l++)ot(Jr[l],o);break;case"source":ot("error",o);break;case"img":case"image":case"link":ot("error",o),ot("load",o);break;case"details":ot("toggle",o);break;case"input":ot("invalid",o),hr(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ot("invalid",o);break;case"textarea":ot("invalid",o),Vl(o,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||u.suppressHydrationWarning===!0||Pg(o.textContent,l)?(u.popover!=null&&(ot("beforetoggle",o),ot("toggle",o)),u.onScroll!=null&&ot("scroll",o),u.onScrollEnd!=null&&ot("scrollend",o),u.onClick!=null&&(o.onclick=Ye),o=!0):o=!1,o||Wi(s,!0)}function vm(s){for(_n=s.return;_n;)switch(_n.tag){case 5:case 31:case 13:ms=!1;return;case 27:case 3:ms=!0;return;default:_n=_n.return}}function ha(s){if(s!==_n)return!1;if(!ct)return vm(s),ct=!0,!1;var o=s.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Zf(s.type,s.memoizedProps)),l=!l),l&&Ut&&Wi(s),vm(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ut=jg(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ut=jg(s)}else o===27?(o=Ut,ro(s.type)?(s=eh,eh=null,Ut=s):Ut=o):Ut=_n?ys(s.stateNode.nextSibling):null;return!0}function Do(){Ut=_n=null,ct=!1}function Rd(){var s=Yi;return s!==null&&(Wn===null?Wn=s:Wn.push.apply(Wn,s),Yi=null),s}function Er(s){Yi===null?Yi=[s]:Yi.push(s)}var Id=U(null),Po=null,fi=null;function Ji(s,o,l){de(Id,o._currentValue),o._currentValue=l}function hi(s){s._currentValue=Id.current,W(Id)}function Dd(s,o,l){for(;s!==null;){var u=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),s===l)break;s=s.return}}function Pd(s,o,l,u){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var x=v.dependencies;if(x!==null){var T=v.child;x=x.firstContext;e:for(;x!==null;){var D=x;x=v;for(var Y=0;Y<o.length;Y++)if(D.context===o[Y]){x.lanes|=l,D=x.alternate,D!==null&&(D.lanes|=l),Dd(x.return,l,s),u||(T=null);break e}x=D.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(i(341));T.lanes|=l,x=T.alternate,x!==null&&(x.lanes|=l),Dd(T,l,s),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===s){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function pa(s,o,l,u){s=null;for(var v=o,x=!1;v!==null;){if(!x){if((v.flags&524288)!==0)x=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var D=v.type;$n(v.pendingProps.value,T.value)||(s!==null?s.push(D):s=[D])}}else if(v===he.current){if(T=v.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push($r):s=[$r])}v=v.return}s!==null&&Pd(o,s,l,u),o.flags|=262144}function ec(s){for(s=s.firstContext;s!==null;){if(!$n(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lo(s){Po=s,fi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function xn(s){return _m(Po,s)}function tc(s,o){return Po===null&&Lo(s),_m(s,o)}function _m(s,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},fi===null){if(s===null)throw Error(i(308));fi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else fi=fi.next=o;return l}var v_=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(l,u){s.push(u)}};this.abort=function(){o.aborted=!0,s.forEach(function(l){return l()})}},__=t.unstable_scheduleCallback,x_=t.unstable_NormalPriority,ln={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new v_,data:new Map,refCount:0}}function Nr(s){s.refCount--,s.refCount===0&&__(x_,function(){s.controller.abort()})}var Ar=null,Od=0,ma=0,ga=null;function b_(s,o){if(Ar===null){var l=Ar=[];Od=0,ma=Ff(),ga={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Od++,o.then(xm,xm),o}function xm(){if(--Od===0&&Ar!==null){ga!==null&&(ga.status="fulfilled");var s=Ar;Ar=null,ma=0,ga=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function C_(s,o){var l=[],u={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return s.then(function(){u.status="fulfilled",u.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(u.status="rejected",u.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),u}var bm=q.S;q.S=function(s,o){ig=xe(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&b_(s,o),bm!==null&&bm(s,o)};var Oo=U(null);function Ud(){var s=Oo.current;return s!==null?s:Mt.pooledCache}function nc(s,o){o===null?de(Oo,Oo.current):de(Oo,o.pool)}function Cm(){var s=Ud();return s===null?null:{parent:ln._currentValue,pool:s}}var ya=Error(i(460)),qd=Error(i(474)),sc=Error(i(542)),ic={then:function(){}};function Sm(s){return s=s.status,s==="fulfilled"||s==="rejected"}function wm(s,o,l){switch(l=s[l],l===void 0?s.push(o):l!==o&&(o.then(Ye,Ye),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Em(s),s;default:if(typeof o.status=="string")o.then(Ye,Ye);else{if(s=Mt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(u){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=u}},function(u){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Em(s),s}throw qo=o,ya}}function Uo(s){try{var o=s._init;return o(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(qo=l,ya):l}}var qo=null;function Tm(){if(qo===null)throw Error(i(459));var s=qo;return qo=null,s}function Em(s){if(s===ya||s===sc)throw Error(i(483))}var va=null,Mr=0;function oc(s){var o=Mr;return Mr+=1,va===null&&(va=[]),wm(va,s,o)}function kr(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function ac(s,o){throw o.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Nm(s){function o(ee,J){if(s){var ne=ee.deletions;ne===null?(ee.deletions=[J],ee.flags|=16):ne.push(J)}}function l(ee,J){if(!s)return null;for(;J!==null;)o(ee,J),J=J.sibling;return null}function u(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function v(ee,J){return ee=ui(ee,J),ee.index=0,ee.sibling=null,ee}function x(ee,J,ne){return ee.index=ne,s?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<J?(ee.flags|=67108866,J):ne):(ee.flags|=67108866,J)):(ee.flags|=1048576,J)}function T(ee){return s&&ee.alternate===null&&(ee.flags|=67108866),ee}function D(ee,J,ne,me){return J===null||J.tag!==6?(J=Ed(ne,ee.mode,me),J.return=ee,J):(J=v(J,ne),J.return=ee,J)}function Y(ee,J,ne,me){var qe=ne.type;return qe===E?pe(ee,J,ne.props.children,me,ne.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===M&&Uo(qe)===J.type)?(J=v(J,ne.props),kr(J,ne),J.return=ee,J):(J=Ql(ne.type,ne.key,ne.props,null,ee.mode,me),kr(J,ne),J.return=ee,J)}function se(ee,J,ne,me){return J===null||J.tag!==4||J.stateNode.containerInfo!==ne.containerInfo||J.stateNode.implementation!==ne.implementation?(J=Nd(ne,ee.mode,me),J.return=ee,J):(J=v(J,ne.children||[]),J.return=ee,J)}function pe(ee,J,ne,me,qe){return J===null||J.tag!==7?(J=Io(ne,ee.mode,me,qe),J.return=ee,J):(J=v(J,ne),J.return=ee,J)}function ge(ee,J,ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Ed(""+J,ee.mode,ne),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return ne=Ql(J.type,J.key,J.props,null,ee.mode,ne),kr(ne,J),ne.return=ee,ne;case w:return J=Nd(J,ee.mode,ne),J.return=ee,J;case M:return J=Uo(J),ge(ee,J,ne)}if(oe(J)||z(J))return J=Io(J,ee.mode,ne,null),J.return=ee,J;if(typeof J.then=="function")return ge(ee,oc(J),ne);if(J.$$typeof===R)return ge(ee,tc(ee,J),ne);ac(ee,J)}return null}function ie(ee,J,ne,me){var qe=J!==null?J.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return qe!==null?null:D(ee,J,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return ne.key===qe?Y(ee,J,ne,me):null;case w:return ne.key===qe?se(ee,J,ne,me):null;case M:return ne=Uo(ne),ie(ee,J,ne,me)}if(oe(ne)||z(ne))return qe!==null?null:pe(ee,J,ne,me,null);if(typeof ne.then=="function")return ie(ee,J,oc(ne),me);if(ne.$$typeof===R)return ie(ee,J,tc(ee,ne),me);ac(ee,ne)}return null}function le(ee,J,ne,me,qe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(ne)||null,D(J,ee,""+me,qe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case S:return ee=ee.get(me.key===null?ne:me.key)||null,Y(J,ee,me,qe);case w:return ee=ee.get(me.key===null?ne:me.key)||null,se(J,ee,me,qe);case M:return me=Uo(me),le(ee,J,ne,me,qe)}if(oe(me)||z(me))return ee=ee.get(ne)||null,pe(J,ee,me,qe,null);if(typeof me.then=="function")return le(ee,J,ne,oc(me),qe);if(me.$$typeof===R)return le(ee,J,ne,tc(J,me),qe);ac(J,me)}return null}function Ne(ee,J,ne,me){for(var qe=null,dt=null,ke=J,Qe=J=0,lt=null;ke!==null&&Qe<ne.length;Qe++){ke.index>Qe?(lt=ke,ke=null):lt=ke.sibling;var ft=ie(ee,ke,ne[Qe],me);if(ft===null){ke===null&&(ke=lt);break}s&&ke&&ft.alternate===null&&o(ee,ke),J=x(ft,J,Qe),dt===null?qe=ft:dt.sibling=ft,dt=ft,ke=lt}if(Qe===ne.length)return l(ee,ke),ct&&di(ee,Qe),qe;if(ke===null){for(;Qe<ne.length;Qe++)ke=ge(ee,ne[Qe],me),ke!==null&&(J=x(ke,J,Qe),dt===null?qe=ke:dt.sibling=ke,dt=ke);return ct&&di(ee,Qe),qe}for(ke=u(ke);Qe<ne.length;Qe++)lt=le(ke,ee,Qe,ne[Qe],me),lt!==null&&(s&&lt.alternate!==null&&ke.delete(lt.key===null?Qe:lt.key),J=x(lt,J,Qe),dt===null?qe=lt:dt.sibling=lt,dt=lt);return s&&ke.forEach(function(ho){return o(ee,ho)}),ct&&di(ee,Qe),qe}function ze(ee,J,ne,me){if(ne==null)throw Error(i(151));for(var qe=null,dt=null,ke=J,Qe=J=0,lt=null,ft=ne.next();ke!==null&&!ft.done;Qe++,ft=ne.next()){ke.index>Qe?(lt=ke,ke=null):lt=ke.sibling;var ho=ie(ee,ke,ft.value,me);if(ho===null){ke===null&&(ke=lt);break}s&&ke&&ho.alternate===null&&o(ee,ke),J=x(ho,J,Qe),dt===null?qe=ho:dt.sibling=ho,dt=ho,ke=lt}if(ft.done)return l(ee,ke),ct&&di(ee,Qe),qe;if(ke===null){for(;!ft.done;Qe++,ft=ne.next())ft=ge(ee,ft.value,me),ft!==null&&(J=x(ft,J,Qe),dt===null?qe=ft:dt.sibling=ft,dt=ft);return ct&&di(ee,Qe),qe}for(ke=u(ke);!ft.done;Qe++,ft=ne.next())ft=le(ke,ee,Qe,ft.value,me),ft!==null&&(s&&ft.alternate!==null&&ke.delete(ft.key===null?Qe:ft.key),J=x(ft,J,Qe),dt===null?qe=ft:dt.sibling=ft,dt=ft);return s&&ke.forEach(function(Dx){return o(ee,Dx)}),ct&&di(ee,Qe),qe}function Nt(ee,J,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===E&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:e:{for(var qe=ne.key;J!==null;){if(J.key===qe){if(qe=ne.type,qe===E){if(J.tag===7){l(ee,J.sibling),me=v(J,ne.props.children),me.return=ee,ee=me;break e}}else if(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===M&&Uo(qe)===J.type){l(ee,J.sibling),me=v(J,ne.props),kr(me,ne),me.return=ee,ee=me;break e}l(ee,J);break}else o(ee,J);J=J.sibling}ne.type===E?(me=Io(ne.props.children,ee.mode,me,ne.key),me.return=ee,ee=me):(me=Ql(ne.type,ne.key,ne.props,null,ee.mode,me),kr(me,ne),me.return=ee,ee=me)}return T(ee);case w:e:{for(qe=ne.key;J!==null;){if(J.key===qe)if(J.tag===4&&J.stateNode.containerInfo===ne.containerInfo&&J.stateNode.implementation===ne.implementation){l(ee,J.sibling),me=v(J,ne.children||[]),me.return=ee,ee=me;break e}else{l(ee,J);break}else o(ee,J);J=J.sibling}me=Nd(ne,ee.mode,me),me.return=ee,ee=me}return T(ee);case M:return ne=Uo(ne),Nt(ee,J,ne,me)}if(oe(ne))return Ne(ee,J,ne,me);if(z(ne)){if(qe=z(ne),typeof qe!="function")throw Error(i(150));return ne=qe.call(ne),ze(ee,J,ne,me)}if(typeof ne.then=="function")return Nt(ee,J,oc(ne),me);if(ne.$$typeof===R)return Nt(ee,J,tc(ee,ne),me);ac(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,J!==null&&J.tag===6?(l(ee,J.sibling),me=v(J,ne),me.return=ee,ee=me):(l(ee,J),me=Ed(ne,ee.mode,me),me.return=ee,ee=me),T(ee)):l(ee,J)}return function(ee,J,ne,me){try{Mr=0;var qe=Nt(ee,J,ne,me);return va=null,qe}catch(ke){if(ke===ya||ke===sc)throw ke;var dt=es(29,ke,null,ee.mode);return dt.lanes=me,dt.return=ee,dt}finally{}}}var Vo=Nm(!0),Am=Nm(!1),Zi=!1;function Vd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fd(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Xi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ki(s,o,l){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(gt&2)!==0){var v=u.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),u.pending=o,o=Kl(s),dm(s,null,l),o}return Xl(s,u,o,l),Kl(s)}function Rr(s,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var u=o.lanes;u&=s.pendingLanes,l|=u,o.lanes=l,Gt(s,l)}}function Gd(s,o){var l=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var v=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?v=x=T:x=x.next=T,l=l.next}while(l!==null);x===null?v=x=o:x=x.next=o}else v=x=o;l={baseState:u.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=o:s.next=o,l.lastBaseUpdate=o}var Bd=!1;function Ir(){if(Bd){var s=ga;if(s!==null)throw s}}function Dr(s,o,l,u){Bd=!1;var v=s.updateQueue;Zi=!1;var x=v.firstBaseUpdate,T=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var Y=D,se=Y.next;Y.next=null,T===null?x=se:T.next=se,T=Y;var pe=s.alternate;pe!==null&&(pe=pe.updateQueue,D=pe.lastBaseUpdate,D!==T&&(D===null?pe.firstBaseUpdate=se:D.next=se,pe.lastBaseUpdate=Y))}if(x!==null){var ge=v.baseState;T=0,pe=se=Y=null,D=x;do{var ie=D.lane&-536870913,le=ie!==D.lane;if(le?(rt&ie)===ie:(u&ie)===ie){ie!==0&&ie===ma&&(Bd=!0),pe!==null&&(pe=pe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Ne=s,ze=D;ie=o;var Nt=l;switch(ze.tag){case 1:if(Ne=ze.payload,typeof Ne=="function"){ge=Ne.call(Nt,ge,ie);break e}ge=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ze.payload,ie=typeof Ne=="function"?Ne.call(Nt,ge,ie):Ne,ie==null)break e;ge=_({},ge,ie);break e;case 2:Zi=!0}}ie=D.callback,ie!==null&&(s.flags|=64,le&&(s.flags|=8192),le=v.callbacks,le===null?v.callbacks=[ie]:le.push(ie))}else le={lane:ie,tag:D.tag,payload:D.payload,callback:D.callback,next:null},pe===null?(se=pe=le,Y=ge):pe=pe.next=le,T|=ie;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;le=D,D=le.next,le.next=null,v.lastBaseUpdate=le,v.shared.pending=null}}while(!0);pe===null&&(Y=ge),v.baseState=Y,v.firstBaseUpdate=se,v.lastBaseUpdate=pe,x===null&&(v.shared.lanes=0),no|=T,s.lanes=T,s.memoizedState=ge}}function Mm(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function km(s,o){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Mm(l[s],o)}var _a=U(null),rc=U(0);function Rm(s,o){s=Ci,de(rc,s),de(_a,o),Ci=s|o.baseLanes}function jd(){de(rc,Ci),de(_a,_a.current)}function zd(){Ci=rc.current,W(_a),W(rc)}var ts=U(null),gs=null;function Qi(s){var o=s.alternate;de(en,en.current&1),de(ts,s),gs===null&&(o===null||_a.current!==null||o.memoizedState!==null)&&(gs=s)}function Hd(s){de(en,en.current),de(ts,s),gs===null&&(gs=s)}function Im(s){s.tag===22?(de(en,en.current),de(ts,s),gs===null&&(gs=s)):$i()}function $i(){de(en,en.current),de(ts,ts.current)}function ns(s){W(ts),gs===s&&(gs=null),W(en)}var en=U(0);function lc(s){for(var o=s;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Qf(l)||$f(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var pi=0,Ke=null,Tt=null,cn=null,cc=!1,xa=!1,Fo=!1,uc=0,Pr=0,ba=null,S_=0;function Wt(){throw Error(i(321))}function Yd(s,o){if(o===null)return!1;for(var l=0;l<o.length&&l<s.length;l++)if(!$n(s[l],o[l]))return!1;return!0}function Wd(s,o,l,u,v,x){return pi=x,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=s===null||s.memoizedState===null?m0:cf,Fo=!1,x=l(u,v),Fo=!1,xa&&(x=Pm(o,l,u,v)),Dm(s),x}function Dm(s){q.H=Ur;var o=Tt!==null&&Tt.next!==null;if(pi=0,cn=Tt=Ke=null,cc=!1,Pr=0,ba=null,o)throw Error(i(300));s===null||un||(s=s.dependencies,s!==null&&ec(s)&&(un=!0))}function Pm(s,o,l,u){Ke=s;var v=0;do{if(xa&&(ba=null),Pr=0,xa=!1,25<=v)throw Error(i(301));if(v+=1,cn=Tt=null,s.updateQueue!=null){var x=s.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}q.H=g0,x=o(l,u)}while(xa);return x}function w_(){var s=q.H,o=s.useState()[0];return o=typeof o.then=="function"?Lr(o):o,s=s.useState()[0],(Tt!==null?Tt.memoizedState:null)!==s&&(Ke.flags|=1024),o}function Jd(){var s=uc!==0;return uc=0,s}function Zd(s,o,l){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~l}function Xd(s){if(cc){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}cc=!1}pi=0,cn=Tt=Ke=null,xa=!1,Pr=uc=0,ba=null}function Ln(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Ke.memoizedState=cn=s:cn=cn.next=s,cn}function tn(){if(Tt===null){var s=Ke.alternate;s=s!==null?s.memoizedState:null}else s=Tt.next;var o=cn===null?Ke.memoizedState:cn.next;if(o!==null)cn=o,Tt=s;else{if(s===null)throw Ke.alternate===null?Error(i(467)):Error(i(310));Tt=s,s={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},cn===null?Ke.memoizedState=cn=s:cn=cn.next=s}return cn}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lr(s){var o=Pr;return Pr+=1,ba===null&&(ba=[]),s=wm(ba,s,o),o=Ke,(cn===null?o.memoizedState:cn.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?m0:cf),s}function fc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Lr(s);if(s.$$typeof===R)return xn(s)}throw Error(i(438,String(s)))}function Kd(s){var o=null,l=Ke.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var u=Ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=dc(),Ke.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(s),u=0;u<s;u++)l[u]=B;return o.index++,l}function mi(s,o){return typeof o=="function"?o(s):o}function hc(s){var o=tn();return Qd(o,Tt,s)}function Qd(s,o,l){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var v=s.baseQueue,x=u.pending;if(x!==null){if(v!==null){var T=v.next;v.next=x.next,x.next=T}o.baseQueue=v=x,u.pending=null}if(x=s.baseState,v===null)s.memoizedState=x;else{o=v.next;var D=T=null,Y=null,se=o,pe=!1;do{var ge=se.lane&-536870913;if(ge!==se.lane?(rt&ge)===ge:(pi&ge)===ge){var ie=se.revertLane;if(ie===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ge===ma&&(pe=!0);else if((pi&ie)===ie){se=se.next,ie===ma&&(pe=!0);continue}else ge={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},Y===null?(D=Y=ge,T=x):Y=Y.next=ge,Ke.lanes|=ie,no|=ie;ge=se.action,Fo&&l(x,ge),x=se.hasEagerState?se.eagerState:l(x,ge)}else ie={lane:ge,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},Y===null?(D=Y=ie,T=x):Y=Y.next=ie,Ke.lanes|=ge,no|=ge;se=se.next}while(se!==null&&se!==o);if(Y===null?T=x:Y.next=D,!$n(x,s.memoizedState)&&(un=!0,pe&&(l=ga,l!==null)))throw l;s.memoizedState=x,s.baseState=T,s.baseQueue=Y,u.lastRenderedState=x}return v===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function $d(s){var o=tn(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var u=l.dispatch,v=l.pending,x=o.memoizedState;if(v!==null){l.pending=null;var T=v=v.next;do x=s(x,T.action),T=T.next;while(T!==v);$n(x,o.memoizedState)||(un=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),l.lastRenderedState=x}return[x,u]}function Lm(s,o,l){var u=Ke,v=tn(),x=ct;if(x){if(l===void 0)throw Error(i(407));l=l()}else l=o();var T=!$n((Tt||v).memoizedState,l);if(T&&(v.memoizedState=l,un=!0),v=v.queue,nf(qm.bind(null,u,v,s),[s]),v.getSnapshot!==o||T||cn!==null&&cn.memoizedState.tag&1){if(u.flags|=2048,Ca(9,{destroy:void 0},Um.bind(null,u,v,l,o),null),Mt===null)throw Error(i(349));x||(pi&127)!==0||Om(u,o,l)}return l}function Om(s,o,l){s.flags|=16384,s={getSnapshot:o,value:l},o=Ke.updateQueue,o===null?(o=dc(),Ke.updateQueue=o,o.stores=[s]):(l=o.stores,l===null?o.stores=[s]:l.push(s))}function Um(s,o,l,u){o.value=l,o.getSnapshot=u,Vm(o)&&Fm(s)}function qm(s,o,l){return l(function(){Vm(o)&&Fm(s)})}function Vm(s){var o=s.getSnapshot;s=s.value;try{var l=o();return!$n(s,l)}catch{return!0}}function Fm(s){var o=Ro(s,2);o!==null&&Jn(o,s,2)}function ef(s){var o=Ln();if(typeof s=="function"){var l=s;if(s=l(),Fo){Tn(!0);try{l()}finally{Tn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:s},o}function Gm(s,o,l,u){return s.baseState=l,Qd(s,Tt,typeof u=="function"?u:mi)}function T_(s,o,l,u,v){if(gc(s))throw Error(i(485));if(s=o.action,s!==null){var x={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};q.T!==null?l(!0):x.isTransition=!1,u(x),l=o.pending,l===null?(x.next=o.pending=x,Bm(o,x)):(x.next=l.next,o.pending=l.next=x)}}function Bm(s,o){var l=o.action,u=o.payload,v=s.state;if(o.isTransition){var x=q.T,T={};q.T=T;try{var D=l(v,u),Y=q.S;Y!==null&&Y(T,D),jm(s,o,D)}catch(se){tf(s,o,se)}finally{x!==null&&T.types!==null&&(x.types=T.types),q.T=x}}else try{x=l(v,u),jm(s,o,x)}catch(se){tf(s,o,se)}}function jm(s,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){zm(s,o,u)},function(u){return tf(s,o,u)}):zm(s,o,l)}function zm(s,o,l){o.status="fulfilled",o.value=l,Hm(o),s.state=l,o=s.pending,o!==null&&(l=o.next,l===o?s.pending=null:(l=l.next,o.next=l,Bm(s,l)))}function tf(s,o,l){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=l,Hm(o),o=o.next;while(o!==u)}s.action=null}function Hm(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Ym(s,o){return o}function Wm(s,o){if(ct){var l=Mt.formState;if(l!==null){e:{var u=Ke;if(ct){if(Ut){t:{for(var v=Ut,x=ms;v.nodeType!==8;){if(!x){v=null;break t}if(v=ys(v.nextSibling),v===null){v=null;break t}}x=v.data,v=x==="F!"||x==="F"?v:null}if(v){Ut=ys(v.nextSibling),u=v.data==="F!";break e}}Wi(u)}u=!1}u&&(o=l[0])}}return l=Ln(),l.memoizedState=l.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:o},l.queue=u,l=f0.bind(null,Ke,u),u.dispatch=l,u=ef(!1),x=lf.bind(null,Ke,!1,u.queue),u=Ln(),v={state:o,dispatch:null,action:s,pending:null},u.queue=v,l=T_.bind(null,Ke,v,x,l),v.dispatch=l,u.memoizedState=s,[o,l,!1]}function Jm(s){var o=tn();return Zm(o,Tt,s)}function Zm(s,o,l){if(o=Qd(s,o,Ym)[0],s=hc(mi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Lr(o)}catch(T){throw T===ya?sc:T}else u=o;o=tn();var v=o.queue,x=v.dispatch;return l!==o.memoizedState&&(Ke.flags|=2048,Ca(9,{destroy:void 0},E_.bind(null,v,l),null)),[u,x,s]}function E_(s,o){s.action=o}function Xm(s){var o=tn(),l=Tt;if(l!==null)return Zm(o,l,s);tn(),o=o.memoizedState,l=tn();var u=l.queue.dispatch;return l.memoizedState=s,[o,u,!1]}function Ca(s,o,l,u){return s={tag:s,create:l,deps:u,inst:o,next:null},o=Ke.updateQueue,o===null&&(o=dc(),Ke.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=s.next=s:(u=l.next,l.next=s,s.next=u,o.lastEffect=s),s}function Km(){return tn().memoizedState}function pc(s,o,l,u){var v=Ln();Ke.flags|=s,v.memoizedState=Ca(1|o,{destroy:void 0},l,u===void 0?null:u)}function mc(s,o,l,u){var v=tn();u=u===void 0?null:u;var x=v.memoizedState.inst;Tt!==null&&u!==null&&Yd(u,Tt.memoizedState.deps)?v.memoizedState=Ca(o,x,l,u):(Ke.flags|=s,v.memoizedState=Ca(1|o,x,l,u))}function Qm(s,o){pc(8390656,8,s,o)}function nf(s,o){mc(2048,8,s,o)}function N_(s){Ke.flags|=4;var o=Ke.updateQueue;if(o===null)o=dc(),Ke.updateQueue=o,o.events=[s];else{var l=o.events;l===null?o.events=[s]:l.push(s)}}function $m(s){var o=tn().memoizedState;return N_({ref:o,nextImpl:s}),function(){if((gt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function e0(s,o){return mc(4,2,s,o)}function t0(s,o){return mc(4,4,s,o)}function n0(s,o){if(typeof o=="function"){s=s();var l=o(s);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function s0(s,o,l){l=l!=null?l.concat([s]):null,mc(4,4,n0.bind(null,o,s),l)}function sf(){}function i0(s,o){var l=tn();o=o===void 0?null:o;var u=l.memoizedState;return o!==null&&Yd(o,u[1])?u[0]:(l.memoizedState=[s,o],s)}function o0(s,o){var l=tn();o=o===void 0?null:o;var u=l.memoizedState;if(o!==null&&Yd(o,u[1]))return u[0];if(u=s(),Fo){Tn(!0);try{s()}finally{Tn(!1)}}return l.memoizedState=[u,o],u}function of(s,o,l){return l===void 0||(pi&1073741824)!==0&&(rt&261930)===0?s.memoizedState=o:(s.memoizedState=l,s=ag(),Ke.lanes|=s,no|=s,l)}function a0(s,o,l,u){return $n(l,o)?l:_a.current!==null?(s=of(s,l,u),$n(s,o)||(un=!0),s):(pi&42)===0||(pi&1073741824)!==0&&(rt&261930)===0?(un=!0,s.memoizedState=l):(s=ag(),Ke.lanes|=s,no|=s,o)}function r0(s,o,l,u,v){var x=Z.p;Z.p=x!==0&&8>x?x:8;var T=q.T,D={};q.T=D,lf(s,!1,o,l);try{var Y=v(),se=q.S;if(se!==null&&se(D,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var pe=C_(Y,u);Or(s,o,pe,os(s))}else Or(s,o,u,os(s))}catch(ge){Or(s,o,{then:function(){},status:"rejected",reason:ge},os())}finally{Z.p=x,T!==null&&D.types!==null&&(T.types=D.types),q.T=T}}function A_(){}function af(s,o,l,u){if(s.tag!==5)throw Error(i(476));var v=l0(s).queue;r0(s,v,o,Q,l===null?A_:function(){return c0(s),l(u)})}function l0(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:Q},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:l},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function c0(s){var o=l0(s);o.next===null&&(o=s.alternate.memoizedState),Or(s,o.next.queue,{},os())}function rf(){return xn($r)}function u0(){return tn().memoizedState}function d0(){return tn().memoizedState}function M_(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var l=os();s=Xi(l);var u=Ki(o,s,l);u!==null&&(Jn(u,o,l),Rr(u,o,l)),o={cache:Ld()},s.payload=o;return}o=o.return}}function k_(s,o,l){var u=os();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},gc(s)?h0(o,l):(l=wd(s,o,l,u),l!==null&&(Jn(l,s,u),p0(l,o,u)))}function f0(s,o,l){var u=os();Or(s,o,l,u)}function Or(s,o,l,u){var v={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(gc(s))h0(o,v);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var T=o.lastRenderedState,D=x(T,l);if(v.hasEagerState=!0,v.eagerState=D,$n(D,T))return Xl(s,o,v,0),Mt===null&&Zl(),!1}catch{}finally{}if(l=wd(s,o,v,u),l!==null)return Jn(l,s,u),p0(l,o,u),!0}return!1}function lf(s,o,l,u){if(u={lane:2,revertLane:Ff(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},gc(s)){if(o)throw Error(i(479))}else o=wd(s,l,u,2),o!==null&&Jn(o,s,2)}function gc(s){var o=s.alternate;return s===Ke||o!==null&&o===Ke}function h0(s,o){xa=cc=!0;var l=s.pending;l===null?o.next=o:(o.next=l.next,l.next=o),s.pending=o}function p0(s,o,l){if((l&4194048)!==0){var u=o.lanes;u&=s.pendingLanes,l|=u,o.lanes=l,Gt(s,l)}}var Ur={readContext:xn,use:fc,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt};Ur.useEffectEvent=Wt;var m0={readContext:xn,use:fc,useCallback:function(s,o){return Ln().memoizedState=[s,o===void 0?null:o],s},useContext:xn,useEffect:Qm,useImperativeHandle:function(s,o,l){l=l!=null?l.concat([s]):null,pc(4194308,4,n0.bind(null,o,s),l)},useLayoutEffect:function(s,o){return pc(4194308,4,s,o)},useInsertionEffect:function(s,o){pc(4,2,s,o)},useMemo:function(s,o){var l=Ln();o=o===void 0?null:o;var u=s();if(Fo){Tn(!0);try{s()}finally{Tn(!1)}}return l.memoizedState=[u,o],u},useReducer:function(s,o,l){var u=Ln();if(l!==void 0){var v=l(o);if(Fo){Tn(!0);try{l(o)}finally{Tn(!1)}}}else v=o;return u.memoizedState=u.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},u.queue=s,s=s.dispatch=k_.bind(null,Ke,s),[u.memoizedState,s]},useRef:function(s){var o=Ln();return s={current:s},o.memoizedState=s},useState:function(s){s=ef(s);var o=s.queue,l=f0.bind(null,Ke,o);return o.dispatch=l,[s.memoizedState,l]},useDebugValue:sf,useDeferredValue:function(s,o){var l=Ln();return of(l,s,o)},useTransition:function(){var s=ef(!1);return s=r0.bind(null,Ke,s.queue,!0,!1),Ln().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,l){var u=Ke,v=Ln();if(ct){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),Mt===null)throw Error(i(349));(rt&127)!==0||Om(u,o,l)}v.memoizedState=l;var x={value:l,getSnapshot:o};return v.queue=x,Qm(qm.bind(null,u,x,s),[s]),u.flags|=2048,Ca(9,{destroy:void 0},Um.bind(null,u,x,l,o),null),l},useId:function(){var s=Ln(),o=Mt.identifierPrefix;if(ct){var l=Ws,u=Ys;l=(u&~(1<<32-Qt(u)-1)).toString(32)+l,o="_"+o+"R_"+l,l=uc++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=S_++,o="_"+o+"r_"+l.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:rf,useFormState:Wm,useActionState:Wm,useOptimistic:function(s){var o=Ln();o.memoizedState=o.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=lf.bind(null,Ke,!0,l),l.dispatch=o,[s,o]},useMemoCache:Kd,useCacheRefresh:function(){return Ln().memoizedState=M_.bind(null,Ke)},useEffectEvent:function(s){var o=Ln(),l={impl:s};return o.memoizedState=l,function(){if((gt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},cf={readContext:xn,use:fc,useCallback:i0,useContext:xn,useEffect:nf,useImperativeHandle:s0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:o0,useReducer:hc,useRef:Km,useState:function(){return hc(mi)},useDebugValue:sf,useDeferredValue:function(s,o){var l=tn();return a0(l,Tt.memoizedState,s,o)},useTransition:function(){var s=hc(mi)[0],o=tn().memoizedState;return[typeof s=="boolean"?s:Lr(s),o]},useSyncExternalStore:Lm,useId:u0,useHostTransitionStatus:rf,useFormState:Jm,useActionState:Jm,useOptimistic:function(s,o){var l=tn();return Gm(l,Tt,s,o)},useMemoCache:Kd,useCacheRefresh:d0};cf.useEffectEvent=$m;var g0={readContext:xn,use:fc,useCallback:i0,useContext:xn,useEffect:nf,useImperativeHandle:s0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:o0,useReducer:$d,useRef:Km,useState:function(){return $d(mi)},useDebugValue:sf,useDeferredValue:function(s,o){var l=tn();return Tt===null?of(l,s,o):a0(l,Tt.memoizedState,s,o)},useTransition:function(){var s=$d(mi)[0],o=tn().memoizedState;return[typeof s=="boolean"?s:Lr(s),o]},useSyncExternalStore:Lm,useId:u0,useHostTransitionStatus:rf,useFormState:Xm,useActionState:Xm,useOptimistic:function(s,o){var l=tn();return Tt!==null?Gm(l,Tt,s,o):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Kd,useCacheRefresh:d0};g0.useEffectEvent=$m;function uf(s,o,l,u){o=s.memoizedState,l=l(u,o),l=l==null?o:_({},o,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var df={enqueueSetState:function(s,o,l){s=s._reactInternals;var u=os(),v=Xi(u);v.payload=o,l!=null&&(v.callback=l),o=Ki(s,v,u),o!==null&&(Jn(o,s,u),Rr(o,s,u))},enqueueReplaceState:function(s,o,l){s=s._reactInternals;var u=os(),v=Xi(u);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=Ki(s,v,u),o!==null&&(Jn(o,s,u),Rr(o,s,u))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var l=os(),u=Xi(l);u.tag=2,o!=null&&(u.callback=o),o=Ki(s,u,l),o!==null&&(Jn(o,s,l),Rr(o,s,l))}};function y0(s,o,l,u,v,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,x,T):o.prototype&&o.prototype.isPureReactComponent?!Sr(l,u)||!Sr(v,x):!0}function v0(s,o,l,u){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,u),o.state!==s&&df.enqueueReplaceState(o,o.state,null)}function Go(s,o){var l=o;if("ref"in o){l={};for(var u in o)u!=="ref"&&(l[u]=o[u])}if(s=s.defaultProps){l===o&&(l=_({},l));for(var v in s)l[v]===void 0&&(l[v]=s[v])}return l}function _0(s){Jl(s)}function x0(s){console.error(s)}function b0(s){Jl(s)}function yc(s,o){try{var l=s.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function C0(s,o,l){try{var u=s.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function ff(s,o,l){return l=Xi(l),l.tag=3,l.payload={element:null},l.callback=function(){yc(s,o)},l}function S0(s){return s=Xi(s),s.tag=3,s}function w0(s,o,l,u){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var x=u.value;s.payload=function(){return v(x)},s.callback=function(){C0(o,l,u)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){C0(o,l,u),typeof v!="function"&&(so===null?so=new Set([this]):so.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function R_(s,o,l,u,v){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=l.alternate,o!==null&&pa(o,l,v,!0),l=ts.current,l!==null){switch(l.tag){case 31:case 13:return gs===null?Mc():l.alternate===null&&Jt===0&&(Jt=3),l.flags&=-257,l.flags|=65536,l.lanes=v,u===ic?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([u]):o.add(u),Uf(s,u,v)),!1;case 22:return l.flags|=65536,u===ic?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([u]):l.add(u)),Uf(s,u,v)),!1}throw Error(i(435,l.tag))}return Uf(s,u,v),Mc(),!1}if(ct)return o=ts.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,u!==kd&&(s=Error(i(422),{cause:u}),Er(fs(s,l)))):(u!==kd&&(o=Error(i(423),{cause:u}),Er(fs(o,l))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,u=fs(u,l),v=ff(s.stateNode,u,v),Gd(s,v),Jt!==4&&(Jt=2)),!1;var x=Error(i(520),{cause:u});if(x=fs(x,l),Hr===null?Hr=[x]:Hr.push(x),Jt!==4&&(Jt=2),o===null)return!0;u=fs(u,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,s=v&-v,l.lanes|=s,s=ff(l.stateNode,u,s),Gd(l,s),!1;case 1:if(o=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(so===null||!so.has(x))))return l.flags|=65536,v&=-v,l.lanes|=v,v=S0(v),w0(v,s,l,u),Gd(l,v),!1}l=l.return}while(l!==null);return!1}var hf=Error(i(461)),un=!1;function bn(s,o,l,u){o.child=s===null?Am(o,null,l,u):Vo(o,s.child,l,u)}function T0(s,o,l,u,v){l=l.render;var x=o.ref;if("ref"in u){var T={};for(var D in u)D!=="ref"&&(T[D]=u[D])}else T=u;return Lo(o),u=Wd(s,o,l,T,x,v),D=Jd(),s!==null&&!un?(Zd(s,o,v),gi(s,o,v)):(ct&&D&&Ad(o),o.flags|=1,bn(s,o,u,v),o.child)}function E0(s,o,l,u,v){if(s===null){var x=l.type;return typeof x=="function"&&!Td(x)&&x.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=x,N0(s,o,x,u,v)):(s=Ql(l.type,null,u,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(x=s.child,!bf(s,v)){var T=x.memoizedProps;if(l=l.compare,l=l!==null?l:Sr,l(T,u)&&s.ref===o.ref)return gi(s,o,v)}return o.flags|=1,s=ui(x,u),s.ref=o.ref,s.return=o,o.child=s}function N0(s,o,l,u,v){if(s!==null){var x=s.memoizedProps;if(Sr(x,u)&&s.ref===o.ref)if(un=!1,o.pendingProps=u=x,bf(s,v))(s.flags&131072)!==0&&(un=!0);else return o.lanes=s.lanes,gi(s,o,v)}return pf(s,o,l,u,v)}function A0(s,o,l,u){var v=u.children,x=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(x=x!==null?x.baseLanes|l:l,s!==null){for(u=o.child=s.child,v=0;u!==null;)v=v|u.lanes|u.childLanes,u=u.sibling;u=v&~x}else u=0,o.child=null;return M0(s,o,x,l,u)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&nc(o,x!==null?x.cachePool:null),x!==null?Rm(o,x):jd(),Im(o);else return u=o.lanes=536870912,M0(s,o,x!==null?x.baseLanes|l:l,l,u)}else x!==null?(nc(o,x.cachePool),Rm(o,x),$i(),o.memoizedState=null):(s!==null&&nc(o,null),jd(),$i());return bn(s,o,v,l),o.child}function qr(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function M0(s,o,l,u,v){var x=Ud();return x=x===null?null:{parent:ln._currentValue,pool:x},o.memoizedState={baseLanes:l,cachePool:x},s!==null&&nc(o,null),jd(),Im(o),s!==null&&pa(s,o,u,!0),o.childLanes=v,null}function vc(s,o){return o=xc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function k0(s,o,l){return Vo(o,s.child,null,l),s=vc(o,o.pendingProps),s.flags|=2,ns(o),o.memoizedState=null,s}function I_(s,o,l){var u=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(ct){if(u.mode==="hidden")return s=vc(o,u),o.lanes=536870912,qr(null,s);if(Hd(o),(s=Ut)?(s=Bg(s,ms),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Hi!==null?{id:Ys,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},l=hm(s),l.return=o,o.child=l,_n=o,Ut=null)):s=null,s===null)throw Wi(o);return o.lanes=536870912,null}return vc(o,u)}var x=s.memoizedState;if(x!==null){var T=x.dehydrated;if(Hd(o),v)if(o.flags&256)o.flags&=-257,o=k0(s,o,l);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(un||pa(s,o,l,!1),v=(l&s.childLanes)!==0,un||v){if(u=Mt,u!==null&&(T=ai(u,l),T!==0&&T!==x.retryLane))throw x.retryLane=T,Ro(s,T),Jn(u,s,T),hf;Mc(),o=k0(s,o,l)}else s=x.treeContext,Ut=ys(T.nextSibling),_n=o,ct=!0,Yi=null,ms=!1,s!==null&&gm(o,s),o=vc(o,u),o.flags|=4096;return o}return s=ui(s.child,{mode:u.mode,children:u.children}),s.ref=o.ref,o.child=s,s.return=o,s}function _c(s,o){var l=o.ref;if(l===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(o.flags|=4194816)}}function pf(s,o,l,u,v){return Lo(o),l=Wd(s,o,l,u,void 0,v),u=Jd(),s!==null&&!un?(Zd(s,o,v),gi(s,o,v)):(ct&&u&&Ad(o),o.flags|=1,bn(s,o,l,v),o.child)}function R0(s,o,l,u,v,x){return Lo(o),o.updateQueue=null,l=Pm(o,u,l,v),Dm(s),u=Jd(),s!==null&&!un?(Zd(s,o,x),gi(s,o,x)):(ct&&u&&Ad(o),o.flags|=1,bn(s,o,l,x),o.child)}function I0(s,o,l,u,v){if(Lo(o),o.stateNode===null){var x=ua,T=l.contextType;typeof T=="object"&&T!==null&&(x=xn(T)),x=new l(u,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=df,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=u,x.state=o.memoizedState,x.refs={},Vd(o),T=l.contextType,x.context=typeof T=="object"&&T!==null?xn(T):ua,x.state=o.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(uf(o,l,T,u),x.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&df.enqueueReplaceState(x,x.state,null),Dr(o,u,x,v),Ir(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(s===null){x=o.stateNode;var D=o.memoizedProps,Y=Go(l,D);x.props=Y;var se=x.context,pe=l.contextType;T=ua,typeof pe=="object"&&pe!==null&&(T=xn(pe));var ge=l.getDerivedStateFromProps;pe=typeof ge=="function"||typeof x.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,pe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(D||se!==T)&&v0(o,x,u,T),Zi=!1;var ie=o.memoizedState;x.state=ie,Dr(o,u,x,v),Ir(),se=o.memoizedState,D||ie!==se||Zi?(typeof ge=="function"&&(uf(o,l,ge,u),se=o.memoizedState),(Y=Zi||y0(o,l,Y,u,ie,se,T))?(pe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=se),x.props=u,x.state=se,x.context=T,u=Y):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{x=o.stateNode,Fd(s,o),T=o.memoizedProps,pe=Go(l,T),x.props=pe,ge=o.pendingProps,ie=x.context,se=l.contextType,Y=ua,typeof se=="object"&&se!==null&&(Y=xn(se)),D=l.getDerivedStateFromProps,(se=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==ge||ie!==Y)&&v0(o,x,u,Y),Zi=!1,ie=o.memoizedState,x.state=ie,Dr(o,u,x,v),Ir();var le=o.memoizedState;T!==ge||ie!==le||Zi||s!==null&&s.dependencies!==null&&ec(s.dependencies)?(typeof D=="function"&&(uf(o,l,D,u),le=o.memoizedState),(pe=Zi||y0(o,l,pe,u,ie,le,Y)||s!==null&&s.dependencies!==null&&ec(s.dependencies))?(se||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,le,Y),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,le,Y)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&ie===s.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&ie===s.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=le),x.props=u,x.state=le,x.context=Y,u=pe):(typeof x.componentDidUpdate!="function"||T===s.memoizedProps&&ie===s.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&ie===s.memoizedState||(o.flags|=1024),u=!1)}return x=u,_c(s,o),u=(o.flags&128)!==0,x||u?(x=o.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,s!==null&&u?(o.child=Vo(o,s.child,null,v),o.child=Vo(o,null,l,v)):bn(s,o,l,v),o.memoizedState=x.state,s=o.child):s=gi(s,o,v),s}function D0(s,o,l,u){return Do(),o.flags|=256,bn(s,o,l,u),o.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(s){return{baseLanes:s,cachePool:Cm()}}function yf(s,o,l){return s=s!==null?s.childLanes&~l:0,o&&(s|=is),s}function P0(s,o,l){var u=o.pendingProps,v=!1,x=(o.flags&128)!==0,T;if((T=x)||(T=s!==null&&s.memoizedState===null?!1:(en.current&2)!==0),T&&(v=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,s===null){if(ct){if(v?Qi(o):$i(),(s=Ut)?(s=Bg(s,ms),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Hi!==null?{id:Ys,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},l=hm(s),l.return=o,o.child=l,_n=o,Ut=null)):s=null,s===null)throw Wi(o);return $f(s)?o.lanes=32:o.lanes=536870912,null}var D=u.children;return u=u.fallback,v?($i(),v=o.mode,D=xc({mode:"hidden",children:D},v),u=Io(u,v,l,null),D.return=o,u.return=o,D.sibling=u,o.child=D,u=o.child,u.memoizedState=gf(l),u.childLanes=yf(s,T,l),o.memoizedState=mf,qr(null,u)):(Qi(o),vf(o,D))}var Y=s.memoizedState;if(Y!==null&&(D=Y.dehydrated,D!==null)){if(x)o.flags&256?(Qi(o),o.flags&=-257,o=_f(s,o,l)):o.memoizedState!==null?($i(),o.child=s.child,o.flags|=128,o=null):($i(),D=u.fallback,v=o.mode,u=xc({mode:"visible",children:u.children},v),D=Io(D,v,l,null),D.flags|=2,u.return=o,D.return=o,u.sibling=D,o.child=u,Vo(o,s.child,null,l),u=o.child,u.memoizedState=gf(l),u.childLanes=yf(s,T,l),o.memoizedState=mf,o=qr(null,u));else if(Qi(o),$f(D)){if(T=D.nextSibling&&D.nextSibling.dataset,T)var se=T.dgst;T=se,u=Error(i(419)),u.stack="",u.digest=T,Er({value:u,source:null,stack:null}),o=_f(s,o,l)}else if(un||pa(s,o,l,!1),T=(l&s.childLanes)!==0,un||T){if(T=Mt,T!==null&&(u=ai(T,l),u!==0&&u!==Y.retryLane))throw Y.retryLane=u,Ro(s,u),Jn(T,s,u),hf;Qf(D)||Mc(),o=_f(s,o,l)}else Qf(D)?(o.flags|=192,o.child=s.child,o=null):(s=Y.treeContext,Ut=ys(D.nextSibling),_n=o,ct=!0,Yi=null,ms=!1,s!==null&&gm(o,s),o=vf(o,u.children),o.flags|=4096);return o}return v?($i(),D=u.fallback,v=o.mode,Y=s.child,se=Y.sibling,u=ui(Y,{mode:"hidden",children:u.children}),u.subtreeFlags=Y.subtreeFlags&65011712,se!==null?D=ui(se,D):(D=Io(D,v,l,null),D.flags|=2),D.return=o,u.return=o,u.sibling=D,o.child=u,qr(null,u),u=o.child,D=s.child.memoizedState,D===null?D=gf(l):(v=D.cachePool,v!==null?(Y=ln._currentValue,v=v.parent!==Y?{parent:Y,pool:Y}:v):v=Cm(),D={baseLanes:D.baseLanes|l,cachePool:v}),u.memoizedState=D,u.childLanes=yf(s,T,l),o.memoizedState=mf,qr(s.child,u)):(Qi(o),l=s.child,s=l.sibling,l=ui(l,{mode:"visible",children:u.children}),l.return=o,l.sibling=null,s!==null&&(T=o.deletions,T===null?(o.deletions=[s],o.flags|=16):T.push(s)),o.child=l,o.memoizedState=null,l)}function vf(s,o){return o=xc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function xc(s,o){return s=es(22,s,null,o),s.lanes=0,s}function _f(s,o,l){return Vo(o,s.child,null,l),s=vf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function L0(s,o,l){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o),Dd(s.return,o,l)}function xf(s,o,l,u,v,x){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:v,treeForkCount:x}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=l,T.tailMode=v,T.treeForkCount=x)}function O0(s,o,l){var u=o.pendingProps,v=u.revealOrder,x=u.tail;u=u.children;var T=en.current,D=(T&2)!==0;if(D?(T=T&1|2,o.flags|=128):T&=1,de(en,T),bn(s,o,u,l),u=ct?Tr:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&L0(s,l,o);else if(s.tag===19)L0(s,l,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)s=l.alternate,s!==null&&lc(s)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),xf(o,!1,v,l,x,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&lc(s)===null){o.child=v;break}s=v.sibling,v.sibling=l,l=v,v=s}xf(o,!0,l,null,x,u);break;case"together":xf(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function gi(s,o,l){if(s!==null&&(o.dependencies=s.dependencies),no|=o.lanes,(l&o.childLanes)===0)if(s!==null){if(pa(s,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,l=ui(s,s.pendingProps),o.child=l,l.return=o;s.sibling!==null;)s=s.sibling,l=l.sibling=ui(s,s.pendingProps),l.return=o;l.sibling=null}return o.child}function bf(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&ec(s)))}function D_(s,o,l){switch(o.tag){case 3:ue(o,o.stateNode.containerInfo),Ji(o,ln,s.memoizedState.cache),Do();break;case 27:case 5:Ee(o);break;case 4:ue(o,o.stateNode.containerInfo);break;case 10:Ji(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Hd(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Qi(o),o.flags|=128,null):(l&o.child.childLanes)!==0?P0(s,o,l):(Qi(o),s=gi(s,o,l),s!==null?s.sibling:null);Qi(o);break;case 19:var v=(s.flags&128)!==0;if(u=(l&o.childLanes)!==0,u||(pa(s,o,l,!1),u=(l&o.childLanes)!==0),v){if(u)return O0(s,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),de(en,en.current),u)break;return null;case 22:return o.lanes=0,A0(s,o,l,o.pendingProps);case 24:Ji(o,ln,s.memoizedState.cache)}return gi(s,o,l)}function U0(s,o,l){if(s!==null)if(s.memoizedProps!==o.pendingProps)un=!0;else{if(!bf(s,l)&&(o.flags&128)===0)return un=!1,D_(s,o,l);un=(s.flags&131072)!==0}else un=!1,ct&&(o.flags&1048576)!==0&&mm(o,Tr,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(s=Uo(o.elementType),o.type=s,typeof s=="function")Td(s)?(u=Go(s,u),o.tag=1,o=I0(null,o,s,u,l)):(o.tag=0,o=pf(null,o,s,u,l));else{if(s!=null){var v=s.$$typeof;if(v===O){o.tag=11,o=T0(null,o,s,u,l);break e}else if(v===P){o.tag=14,o=E0(null,o,s,u,l);break e}}throw o=$(s)||s,Error(i(306,o,""))}}return o;case 0:return pf(s,o,o.type,o.pendingProps,l);case 1:return u=o.type,v=Go(u,o.pendingProps),I0(s,o,u,v,l);case 3:e:{if(ue(o,o.stateNode.containerInfo),s===null)throw Error(i(387));u=o.pendingProps;var x=o.memoizedState;v=x.element,Fd(s,o),Dr(o,u,null,l);var T=o.memoizedState;if(u=T.cache,Ji(o,ln,u),u!==x.cache&&Pd(o,[ln],l,!0),Ir(),u=T.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=D0(s,o,u,l);break e}else if(u!==v){v=fs(Error(i(424)),o),Er(v),o=D0(s,o,u,l);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ut=ys(s.firstChild),_n=o,ct=!0,Yi=null,ms=!0,l=Am(o,null,u,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Do(),u===v){o=gi(s,o,l);break e}bn(s,o,u,l)}o=o.child}return o;case 26:return _c(s,o),s===null?(l=Jg(o.type,null,o.pendingProps,null))?o.memoizedState=l:ct||(l=o.type,s=o.pendingProps,u=Oc(C.current).createElement(l),u[$e]=o,u[st]=s,Cn(u,l,s),rn(u),o.stateNode=u):o.memoizedState=Jg(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ee(o),s===null&&ct&&(u=o.stateNode=Hg(o.type,o.pendingProps,C.current),_n=o,ms=!0,v=Ut,ro(o.type)?(eh=v,Ut=ys(u.firstChild)):Ut=v),bn(s,o,o.pendingProps.children,l),_c(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&ct&&((v=u=Ut)&&(u=cx(u,o.type,o.pendingProps,ms),u!==null?(o.stateNode=u,_n=o,Ut=ys(u.firstChild),ms=!1,v=!0):v=!1),v||Wi(o)),Ee(o),v=o.type,x=o.pendingProps,T=s!==null?s.memoizedProps:null,u=x.children,Zf(v,x)?u=null:T!==null&&Zf(v,T)&&(o.flags|=32),o.memoizedState!==null&&(v=Wd(s,o,w_,null,null,l),$r._currentValue=v),_c(s,o),bn(s,o,u,l),o.child;case 6:return s===null&&ct&&((s=l=Ut)&&(l=ux(l,o.pendingProps,ms),l!==null?(o.stateNode=l,_n=o,Ut=null,s=!0):s=!1),s||Wi(o)),null;case 13:return P0(s,o,l);case 4:return ue(o,o.stateNode.containerInfo),u=o.pendingProps,s===null?o.child=Vo(o,null,u,l):bn(s,o,u,l),o.child;case 11:return T0(s,o,o.type,o.pendingProps,l);case 7:return bn(s,o,o.pendingProps,l),o.child;case 8:return bn(s,o,o.pendingProps.children,l),o.child;case 12:return bn(s,o,o.pendingProps.children,l),o.child;case 10:return u=o.pendingProps,Ji(o,o.type,u.value),bn(s,o,u.children,l),o.child;case 9:return v=o.type._context,u=o.pendingProps.children,Lo(o),v=xn(v),u=u(v),o.flags|=1,bn(s,o,u,l),o.child;case 14:return E0(s,o,o.type,o.pendingProps,l);case 15:return N0(s,o,o.type,o.pendingProps,l);case 19:return O0(s,o,l);case 31:return I_(s,o,l);case 22:return A0(s,o,l,o.pendingProps);case 24:return Lo(o),u=xn(ln),s===null?(v=Ud(),v===null&&(v=Mt,x=Ld(),v.pooledCache=x,x.refCount++,x!==null&&(v.pooledCacheLanes|=l),v=x),o.memoizedState={parent:u,cache:v},Vd(o),Ji(o,ln,v)):((s.lanes&l)!==0&&(Fd(s,o),Dr(o,null,null,l),Ir()),v=s.memoizedState,x=o.memoizedState,v.parent!==u?(v={parent:u,cache:u},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Ji(o,ln,u)):(u=x.cache,Ji(o,ln,u),u!==v.cache&&Pd(o,[ln],l,!0))),bn(s,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function yi(s){s.flags|=4}function Cf(s,o,l,u,v){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(ug())s.flags|=8192;else throw qo=ic,qd}else s.flags&=-16777217}function q0(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!$g(o))if(ug())s.flags|=8192;else throw qo=ic,qd}function bc(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Fs():536870912,s.lanes|=o,Ea|=o)}function Vr(s,o){if(!ct)switch(s.tailMode){case"hidden":o=s.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function qt(s){var o=s.alternate!==null&&s.alternate.child===s.child,l=0,u=0;if(o)for(var v=s.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags&65011712,u|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)l|=v.lanes|v.childLanes,u|=v.subtreeFlags,u|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=u,s.childLanes=l,o}function P_(s,o,l){var u=o.pendingProps;switch(Md(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(o),null;case 1:return qt(o),null;case 3:return l=o.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),hi(ln),Le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ha(o)?yi(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Rd())),qt(o),null;case 26:var v=o.type,x=o.memoizedState;return s===null?(yi(o),x!==null?(qt(o),q0(o,x)):(qt(o),Cf(o,v,null,u,l))):x?x!==s.memoizedState?(yi(o),qt(o),q0(o,x)):(qt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==u&&yi(o),qt(o),Cf(o,v,s,u,l)),null;case 27:if(Ge(o),l=C.current,v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==u&&yi(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return qt(o),null}s=te.current,ha(o)?ym(o):(s=Hg(v,u,l),o.stateNode=s,yi(o))}return qt(o),null;case 5:if(Ge(o),v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==u&&yi(o);else{if(!u){if(o.stateNode===null)throw Error(i(166));return qt(o),null}if(x=te.current,ha(o))ym(o);else{var T=Oc(C.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?T.createElement(v,{is:u.is}):T.createElement(v)}}x[$e]=o,x[st]=u;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=x;e:switch(Cn(x,v,u),v){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&yi(o)}}return qt(o),Cf(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,l),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==u&&yi(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(i(166));if(s=C.current,ha(o)){if(s=o.stateNode,l=o.memoizedProps,u=null,v=_n,v!==null)switch(v.tag){case 27:case 5:u=v.memoizedProps}s[$e]=o,s=!!(s.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Pg(s.nodeValue,l)),s||Wi(o,!0)}else s=Oc(s).createTextNode(u),s[$e]=o,o.stateNode=s}return qt(o),null;case 31:if(l=o.memoizedState,s===null||s.memoizedState!==null){if(u=ha(o),l!==null){if(s===null){if(!u)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[$e]=o}else Do(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;qt(o),s=!1}else l=Rd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return o.flags&256?(ns(o),o):(ns(o),null);if((o.flags&128)!==0)throw Error(i(558))}return qt(o),null;case 13:if(u=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=ha(o),u!==null&&u.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[$e]=o}else Do(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;qt(o),v=!1}else v=Rd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(ns(o),o):(ns(o),null)}return ns(o),(o.flags&128)!==0?(o.lanes=l,o):(l=u!==null,s=s!==null&&s.memoizedState!==null,l&&(u=o.child,v=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(v=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==v&&(u.flags|=2048)),l!==s&&l&&(o.child.flags|=8192),bc(o,o.updateQueue),qt(o),null);case 4:return Le(),s===null&&zf(o.stateNode.containerInfo),qt(o),null;case 10:return hi(o.type),qt(o),null;case 19:if(W(en),u=o.memoizedState,u===null)return qt(o),null;if(v=(o.flags&128)!==0,x=u.rendering,x===null)if(v)Vr(u,!1);else{if(Jt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(x=lc(s),x!==null){for(o.flags|=128,Vr(u,!1),s=x.updateQueue,o.updateQueue=s,bc(o,s),o.subtreeFlags=0,s=l,l=o.child;l!==null;)fm(l,s),l=l.sibling;return de(en,en.current&1|2),ct&&di(o,u.treeForkCount),o.child}s=s.sibling}u.tail!==null&&xe()>Ec&&(o.flags|=128,v=!0,Vr(u,!1),o.lanes=4194304)}else{if(!v)if(s=lc(x),s!==null){if(o.flags|=128,v=!0,s=s.updateQueue,o.updateQueue=s,bc(o,s),Vr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!ct)return qt(o),null}else 2*xe()-u.renderingStartTime>Ec&&l!==536870912&&(o.flags|=128,v=!0,Vr(u,!1),o.lanes=4194304);u.isBackwards?(x.sibling=o.child,o.child=x):(s=u.last,s!==null?s.sibling=x:o.child=x,u.last=x)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=xe(),s.sibling=null,l=en.current,de(en,v?l&1|2:l&1),ct&&di(o,u.treeForkCount),s):(qt(o),null);case 22:case 23:return ns(o),zd(),u=o.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(l&536870912)!==0&&(o.flags&128)===0&&(qt(o),o.subtreeFlags&6&&(o.flags|=8192)):qt(o),l=o.updateQueue,l!==null&&bc(o,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==l&&(o.flags|=2048),s!==null&&W(Oo),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),hi(ln),qt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function L_(s,o){switch(Md(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return hi(ln),Le(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Ge(o),null;case 31:if(o.memoizedState!==null){if(ns(o),o.alternate===null)throw Error(i(340));Do()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(ns(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Do()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return W(en),null;case 4:return Le(),null;case 10:return hi(o.type),null;case 22:case 23:return ns(o),zd(),s!==null&&W(Oo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return hi(ln),null;case 25:return null;default:return null}}function V0(s,o){switch(Md(o),o.tag){case 3:hi(ln),Le();break;case 26:case 27:case 5:Ge(o);break;case 4:Le();break;case 31:o.memoizedState!==null&&ns(o);break;case 13:ns(o);break;case 19:W(en);break;case 10:hi(o.type);break;case 22:case 23:ns(o),zd(),s!==null&&W(Oo);break;case 24:hi(ln)}}function Fr(s,o){try{var l=o.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var v=u.next;l=v;do{if((l.tag&s)===s){u=void 0;var x=l.create,T=l.inst;u=x(),T.destroy=u}l=l.next}while(l!==v)}}catch(D){Ct(o,o.return,D)}}function eo(s,o,l){try{var u=o.updateQueue,v=u!==null?u.lastEffect:null;if(v!==null){var x=v.next;u=x;do{if((u.tag&s)===s){var T=u.inst,D=T.destroy;if(D!==void 0){T.destroy=void 0,v=o;var Y=l,se=D;try{se()}catch(pe){Ct(v,Y,pe)}}}u=u.next}while(u!==x)}}catch(pe){Ct(o,o.return,pe)}}function F0(s){var o=s.updateQueue;if(o!==null){var l=s.stateNode;try{km(o,l)}catch(u){Ct(s,s.return,u)}}}function G0(s,o,l){l.props=Go(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(u){Ct(s,o,u)}}function Gr(s,o){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof l=="function"?s.refCleanup=l(u):l.current=u}}catch(v){Ct(s,o,v)}}function Js(s,o){var l=s.ref,u=s.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(v){Ct(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Ct(s,o,v)}else l.current=null}function B0(s){var o=s.type,l=s.memoizedProps,u=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(v){Ct(s,s.return,v)}}function Sf(s,o,l){try{var u=s.stateNode;sx(u,s.type,l,o),u[st]=o}catch(v){Ct(s,s.return,v)}}function j0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ro(s.type)||s.tag===4}function wf(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||j0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tf(s,o,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(s),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Ye));else if(u!==4&&(u===27&&ro(s.type)&&(l=s.stateNode,o=null),s=s.child,s!==null))for(Tf(s,o,l),s=s.sibling;s!==null;)Tf(s,o,l),s=s.sibling}function Cc(s,o,l){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?l.insertBefore(s,o):l.appendChild(s);else if(u!==4&&(u===27&&ro(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Cc(s,o,l),s=s.sibling;s!==null;)Cc(s,o,l),s=s.sibling}function z0(s){var o=s.stateNode,l=s.memoizedProps;try{for(var u=s.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Cn(o,u,l),o[$e]=s,o[st]=l}catch(x){Ct(s,s.return,x)}}var vi=!1,dn=!1,Ef=!1,H0=typeof WeakSet=="function"?WeakSet:Set,yn=null;function O_(s,o){if(s=s.containerInfo,Wf=jc,s=sm(s),vd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var v=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var T=0,D=-1,Y=-1,se=0,pe=0,ge=s,ie=null;t:for(;;){for(var le;ge!==l||v!==0&&ge.nodeType!==3||(D=T+v),ge!==x||u!==0&&ge.nodeType!==3||(Y=T+u),ge.nodeType===3&&(T+=ge.nodeValue.length),(le=ge.firstChild)!==null;)ie=ge,ge=le;for(;;){if(ge===s)break t;if(ie===l&&++se===v&&(D=T),ie===x&&++pe===u&&(Y=T),(le=ge.nextSibling)!==null)break;ge=ie,ie=ge.parentNode}ge=le}l=D===-1||Y===-1?null:{start:D,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jf={focusedElem:s,selectionRange:l},jc=!1,yn=o;yn!==null;)if(o=yn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,yn=s;else for(;yn!==null;){switch(o=yn,x=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)v=s[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&x!==null){s=void 0,l=o,v=x.memoizedProps,x=x.memoizedState,u=l.stateNode;try{var Ne=Go(l.type,v);s=u.getSnapshotBeforeUpdate(Ne,x),u.__reactInternalSnapshotBeforeUpdate=s}catch(ze){Ct(l,l.return,ze)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,l=s.nodeType,l===9)Kf(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Kf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,yn=s;break}yn=o.return}}function Y0(s,o,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:xi(s,l),u&4&&Fr(5,l);break;case 1:if(xi(s,l),u&4)if(s=l.stateNode,o===null)try{s.componentDidMount()}catch(T){Ct(l,l.return,T)}else{var v=Go(l.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Ct(l,l.return,T)}}u&64&&F0(l),u&512&&Gr(l,l.return);break;case 3:if(xi(s,l),u&64&&(s=l.updateQueue,s!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{km(s,o)}catch(T){Ct(l,l.return,T)}}break;case 27:o===null&&u&4&&z0(l);case 26:case 5:xi(s,l),o===null&&u&4&&B0(l),u&512&&Gr(l,l.return);break;case 12:xi(s,l);break;case 31:xi(s,l),u&4&&Z0(s,l);break;case 13:xi(s,l),u&4&&X0(s,l),u&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=H_.bind(null,l),dx(s,l))));break;case 22:if(u=l.memoizedState!==null||vi,!u){o=o!==null&&o.memoizedState!==null||dn,v=vi;var x=dn;vi=u,(dn=o)&&!x?bi(s,l,(l.subtreeFlags&8772)!==0):xi(s,l),vi=v,dn=x}break;case 30:break;default:xi(s,l)}}function W0(s){var o=s.alternate;o!==null&&(s.alternate=null,W0(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Dn(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var jt=null,zn=!1;function _i(s,o,l){for(l=l.child;l!==null;)J0(s,o,l),l=l.sibling}function J0(s,o,l){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Yt,l)}catch{}switch(l.tag){case 26:dn||Js(l,o),_i(s,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:dn||Js(l,o);var u=jt,v=zn;ro(l.type)&&(jt=l.stateNode,zn=!1),_i(s,o,l),Xr(l.stateNode),jt=u,zn=v;break;case 5:dn||Js(l,o);case 6:if(u=jt,v=zn,jt=null,_i(s,o,l),jt=u,zn=v,jt!==null)if(zn)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(l.stateNode)}catch(x){Ct(l,o,x)}else try{jt.removeChild(l.stateNode)}catch(x){Ct(l,o,x)}break;case 18:jt!==null&&(zn?(s=jt,Fg(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Pa(s)):Fg(jt,l.stateNode));break;case 4:u=jt,v=zn,jt=l.stateNode.containerInfo,zn=!0,_i(s,o,l),jt=u,zn=v;break;case 0:case 11:case 14:case 15:eo(2,l,o),dn||eo(4,l,o),_i(s,o,l);break;case 1:dn||(Js(l,o),u=l.stateNode,typeof u.componentWillUnmount=="function"&&G0(l,o,u)),_i(s,o,l);break;case 21:_i(s,o,l);break;case 22:dn=(u=dn)||l.memoizedState!==null,_i(s,o,l),dn=u;break;default:_i(s,o,l)}}function Z0(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Pa(s)}catch(l){Ct(o,o.return,l)}}}function X0(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Pa(s)}catch(l){Ct(o,o.return,l)}}function U_(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new H0),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new H0),o;default:throw Error(i(435,s.tag))}}function Sc(s,o){var l=U_(s);o.forEach(function(u){if(!l.has(u)){l.add(u);var v=Y_.bind(null,s,u);u.then(v,v)}})}function Hn(s,o){var l=o.deletions;if(l!==null)for(var u=0;u<l.length;u++){var v=l[u],x=s,T=o,D=T;e:for(;D!==null;){switch(D.tag){case 27:if(ro(D.type)){jt=D.stateNode,zn=!1;break e}break;case 5:jt=D.stateNode,zn=!1;break e;case 3:case 4:jt=D.stateNode.containerInfo,zn=!0;break e}D=D.return}if(jt===null)throw Error(i(160));J0(x,T,v),jt=null,zn=!1,x=v.alternate,x!==null&&(x.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)K0(o,s),o=o.sibling}var Es=null;function K0(s,o){var l=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Hn(o,s),Yn(s),u&4&&(eo(3,s,s.return),Fr(3,s),eo(5,s,s.return));break;case 1:Hn(o,s),Yn(s),u&512&&(dn||l===null||Js(l,l.return)),u&64&&vi&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var v=Es;if(Hn(o,s),Yn(s),u&512&&(dn||l===null||Js(l,l.return)),u&4){var x=l!==null?l.memoizedState:null;if(u=s.memoizedState,l===null)if(u===null)if(s.stateNode===null){e:{u=s.type,l=s.memoizedProps,v=v.ownerDocument||v;t:switch(u){case"title":x=v.getElementsByTagName("title")[0],(!x||x[Vi]||x[$e]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=v.createElement(u),v.head.insertBefore(x,v.querySelector("head > title"))),Cn(x,u,l),x[$e]=s,rn(x),u=x;break e;case"link":var T=Kg("link","href",v).get(u+(l.href||""));if(T){for(var D=0;D<T.length;D++)if(x=T[D],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(D,1);break t}}x=v.createElement(u),Cn(x,u,l),v.head.appendChild(x);break;case"meta":if(T=Kg("meta","content",v).get(u+(l.content||""))){for(D=0;D<T.length;D++)if(x=T[D],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(D,1);break t}}x=v.createElement(u),Cn(x,u,l),v.head.appendChild(x);break;default:throw Error(i(468,u))}x[$e]=s,rn(x),u=x}s.stateNode=u}else Qg(v,s.type,s.stateNode);else s.stateNode=Xg(v,u,s.memoizedProps);else x!==u?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,u===null?Qg(v,s.type,s.stateNode):Xg(v,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Sf(s,s.memoizedProps,l.memoizedProps)}break;case 27:Hn(o,s),Yn(s),u&512&&(dn||l===null||Js(l,l.return)),l!==null&&u&4&&Sf(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Hn(o,s),Yn(s),u&512&&(dn||l===null||Js(l,l.return)),s.flags&32){v=s.stateNode;try{ji(v,"")}catch(Ne){Ct(s,s.return,Ne)}}u&4&&s.stateNode!=null&&(v=s.memoizedProps,Sf(s,v,l!==null?l.memoizedProps:v)),u&1024&&(Ef=!0);break;case 6:if(Hn(o,s),Yn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,l=s.stateNode;try{l.nodeValue=u}catch(Ne){Ct(s,s.return,Ne)}}break;case 3:if(Vc=null,v=Es,Es=Uc(o.containerInfo),Hn(o,s),Es=v,Yn(s),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Pa(o.containerInfo)}catch(Ne){Ct(s,s.return,Ne)}Ef&&(Ef=!1,Q0(s));break;case 4:u=Es,Es=Uc(s.stateNode.containerInfo),Hn(o,s),Yn(s),Es=u;break;case 12:Hn(o,s),Yn(s);break;case 31:Hn(o,s),Yn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sc(s,u)));break;case 13:Hn(o,s),Yn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Tc=xe()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sc(s,u)));break;case 22:v=s.memoizedState!==null;var Y=l!==null&&l.memoizedState!==null,se=vi,pe=dn;if(vi=se||v,dn=pe||Y,Hn(o,s),dn=pe,vi=se,Yn(s),u&8192)e:for(o=s.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||Y||vi||dn||Bo(s)),l=null,o=s;;){if(o.tag===5||o.tag===26){if(l===null){Y=l=o;try{if(x=Y.stateNode,v)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{D=Y.stateNode;var ge=Y.memoizedProps.style,ie=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;D.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ne){Ct(Y,Y.return,Ne)}}}else if(o.tag===6){if(l===null){Y=o;try{Y.stateNode.nodeValue=v?"":Y.memoizedProps}catch(Ne){Ct(Y,Y.return,Ne)}}}else if(o.tag===18){if(l===null){Y=o;try{var le=Y.stateNode;v?Gg(le,!0):Gg(Y.stateNode,!1)}catch(Ne){Ct(Y,Y.return,Ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=s.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Sc(s,l))));break;case 19:Hn(o,s),Yn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sc(s,u)));break;case 30:break;case 21:break;default:Hn(o,s),Yn(s)}}function Yn(s){var o=s.flags;if(o&2){try{for(var l,u=s.return;u!==null;){if(j0(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,x=wf(s);Cc(s,x,v);break;case 5:var T=l.stateNode;l.flags&32&&(ji(T,""),l.flags&=-33);var D=wf(s);Cc(s,D,T);break;case 3:case 4:var Y=l.stateNode.containerInfo,se=wf(s);Tf(s,se,Y);break;default:throw Error(i(161))}}catch(pe){Ct(s,s.return,pe)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Q0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Q0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function xi(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Y0(s,o.alternate,o),o=o.sibling}function Bo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:eo(4,o,o.return),Bo(o);break;case 1:Js(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&G0(o,o.return,l),Bo(o);break;case 27:Xr(o.stateNode);case 26:case 5:Js(o,o.return),Bo(o);break;case 22:o.memoizedState===null&&Bo(o);break;case 30:Bo(o);break;default:Bo(o)}s=s.sibling}}function bi(s,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,v=s,x=o,T=x.flags;switch(x.tag){case 0:case 11:case 15:bi(v,x,l),Fr(4,x);break;case 1:if(bi(v,x,l),u=x,v=u.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(se){Ct(u,u.return,se)}if(u=x,v=u.updateQueue,v!==null){var D=u.stateNode;try{var Y=v.shared.hiddenCallbacks;if(Y!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Y.length;v++)Mm(Y[v],D)}catch(se){Ct(u,u.return,se)}}l&&T&64&&F0(x),Gr(x,x.return);break;case 27:z0(x);case 26:case 5:bi(v,x,l),l&&u===null&&T&4&&B0(x),Gr(x,x.return);break;case 12:bi(v,x,l);break;case 31:bi(v,x,l),l&&T&4&&Z0(v,x);break;case 13:bi(v,x,l),l&&T&4&&X0(v,x);break;case 22:x.memoizedState===null&&bi(v,x,l),Gr(x,x.return);break;case 30:break;default:bi(v,x,l)}o=o.sibling}}function Nf(s,o){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Nr(l))}function Af(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Nr(s))}function Ns(s,o,l,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)$0(s,o,l,u),o=o.sibling}function $0(s,o,l,u){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Ns(s,o,l,u),v&2048&&Fr(9,o);break;case 1:Ns(s,o,l,u);break;case 3:Ns(s,o,l,u),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Nr(s)));break;case 12:if(v&2048){Ns(s,o,l,u),s=o.stateNode;try{var x=o.memoizedProps,T=x.id,D=x.onPostCommit;typeof D=="function"&&D(T,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Y){Ct(o,o.return,Y)}}else Ns(s,o,l,u);break;case 31:Ns(s,o,l,u);break;case 13:Ns(s,o,l,u);break;case 23:break;case 22:x=o.stateNode,T=o.alternate,o.memoizedState!==null?x._visibility&2?Ns(s,o,l,u):Br(s,o):x._visibility&2?Ns(s,o,l,u):(x._visibility|=2,Sa(s,o,l,u,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Nf(T,o);break;case 24:Ns(s,o,l,u),v&2048&&Af(o.alternate,o);break;default:Ns(s,o,l,u)}}function Sa(s,o,l,u,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var x=s,T=o,D=l,Y=u,se=T.flags;switch(T.tag){case 0:case 11:case 15:Sa(x,T,D,Y,v),Fr(8,T);break;case 23:break;case 22:var pe=T.stateNode;T.memoizedState!==null?pe._visibility&2?Sa(x,T,D,Y,v):Br(x,T):(pe._visibility|=2,Sa(x,T,D,Y,v)),v&&se&2048&&Nf(T.alternate,T);break;case 24:Sa(x,T,D,Y,v),v&&se&2048&&Af(T.alternate,T);break;default:Sa(x,T,D,Y,v)}o=o.sibling}}function Br(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=s,u=o,v=u.flags;switch(u.tag){case 22:Br(l,u),v&2048&&Nf(u.alternate,u);break;case 24:Br(l,u),v&2048&&Af(u.alternate,u);break;default:Br(l,u)}o=o.sibling}}var jr=8192;function wa(s,o,l){if(s.subtreeFlags&jr)for(s=s.child;s!==null;)eg(s,o,l),s=s.sibling}function eg(s,o,l){switch(s.tag){case 26:wa(s,o,l),s.flags&jr&&s.memoizedState!==null&&Sx(l,Es,s.memoizedState,s.memoizedProps);break;case 5:wa(s,o,l);break;case 3:case 4:var u=Es;Es=Uc(s.stateNode.containerInfo),wa(s,o,l),Es=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=jr,jr=16777216,wa(s,o,l),jr=u):wa(s,o,l));break;default:wa(s,o,l)}}function tg(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function zr(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];yn=u,sg(u,s)}tg(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ng(s),s=s.sibling}function ng(s){switch(s.tag){case 0:case 11:case 15:zr(s),s.flags&2048&&eo(9,s,s.return);break;case 3:zr(s);break;case 12:zr(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,wc(s)):zr(s);break;default:zr(s)}}function wc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var u=o[l];yn=u,sg(u,s)}tg(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:eo(8,o,o.return),wc(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,wc(o));break;default:wc(o)}s=s.sibling}}function sg(s,o){for(;yn!==null;){var l=yn;switch(l.tag){case 0:case 11:case 15:eo(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Nr(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,yn=u;else e:for(l=s;yn!==null;){u=yn;var v=u.sibling,x=u.return;if(W0(u),u===l){yn=null;break e}if(v!==null){v.return=x,yn=v;break e}yn=x}}}var q_={getCacheForType:function(s){var o=xn(ln),l=o.data.get(s);return l===void 0&&(l=s(),o.data.set(s,l)),l},cacheSignal:function(){return xn(ln).controller.signal}},V_=typeof WeakMap=="function"?WeakMap:Map,gt=0,Mt=null,it=null,rt=0,bt=0,ss=null,to=!1,Ta=!1,Mf=!1,Ci=0,Jt=0,no=0,jo=0,kf=0,is=0,Ea=0,Hr=null,Wn=null,Rf=!1,Tc=0,ig=0,Ec=1/0,Nc=null,so=null,pn=0,io=null,Na=null,Si=0,If=0,Df=null,og=null,Yr=0,Pf=null;function os(){return(gt&2)!==0&&rt!==0?rt&-rt:q.T!==null?Ff():us()}function ag(){if(is===0)if((rt&536870912)===0||ct){var s=mt;mt<<=1,(mt&3932160)===0&&(mt=262144),is=s}else is=536870912;return s=ts.current,s!==null&&(s.flags|=32),is}function Jn(s,o,l){(s===Mt&&(bt===2||bt===9)||s.cancelPendingCommit!==null)&&(Aa(s,0),oo(s,rt,is,!1)),En(s,l),((gt&2)===0||s!==Mt)&&(s===Mt&&((gt&2)===0&&(jo|=l),Jt===4&&oo(s,rt,is,!1)),Zs(s))}function rg(s,o,l){if((gt&6)!==0)throw Error(i(327));var u=!l&&(o&127)===0&&(o&s.expiredLanes)===0||Vn(s,o),v=u?B_(s,o):Of(s,o,!0),x=u;do{if(v===0){Ta&&!u&&oo(s,o,0,!1);break}else{if(l=s.current.alternate,x&&!F_(l)){v=Of(s,o,!1),x=!1;continue}if(v===2){if(x=o,s.errorRecoveryDisabledLanes&x)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var D=s;v=Hr;var Y=D.current.memoizedState.isDehydrated;if(Y&&(Aa(D,T).flags|=256),T=Of(D,T,!1),T!==2){if(Mf&&!Y){D.errorRecoveryDisabledLanes|=x,jo|=x,v=4;break e}x=Wn,Wn=v,x!==null&&(Wn===null?Wn=x:Wn.push.apply(Wn,x))}v=T}if(x=!1,v!==2)continue}}if(v===1){Aa(s,0),oo(s,o,0,!0);break}e:{switch(u=s,x=v,x){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:oo(u,o,is,!to);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=Tc+300-xe(),10<v)){if(oo(u,o,is,!to),an(u,0,!0)!==0)break e;Si=o,u.timeoutHandle=qg(lg.bind(null,u,l,Wn,Nc,Rf,o,is,jo,Ea,to,x,"Throttled",-0,0),v);break e}lg(u,l,Wn,Nc,Rf,o,is,jo,Ea,to,x,null,-0,0)}}break}while(!0);Zs(s)}function lg(s,o,l,u,v,x,T,D,Y,se,pe,ge,ie,le){if(s.timeoutHandle=-1,ge=o.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ye},eg(o,x,ge);var Ne=(x&62914560)===x?Tc-xe():(x&4194048)===x?ig-xe():0;if(Ne=wx(ge,Ne),Ne!==null){Si=x,s.cancelPendingCommit=Ne(gg.bind(null,s,o,x,l,u,v,T,D,Y,pe,ge,null,ie,le)),oo(s,x,T,!se);return}}gg(s,o,x,l,u,v,T,D,Y)}function F_(s){for(var o=s;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var v=l[u],x=v.getSnapshot;v=v.value;try{if(!$n(x(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function oo(s,o,l,u){o&=~kf,o&=~jo,s.suspendedLanes|=o,s.pingedLanes&=~o,u&&(s.warmLanes|=o),u=s.expirationTimes;for(var v=o;0<v;){var x=31-Qt(v),T=1<<x;u[x]=-1,v&=~T}l!==0&&ea(s,l,o)}function Ac(){return(gt&6)===0?(Wr(0),!1):!0}function Lf(){if(it!==null){if(bt===0)var s=it.return;else s=it,fi=Po=null,Xd(s),va=null,Mr=0,s=it;for(;s!==null;)V0(s.alternate,s),s=s.return;it=null}}function Aa(s,o){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,ax(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Si=0,Lf(),Mt=s,it=l=ui(s.current,null),rt=o,bt=0,ss=null,to=!1,Ta=Vn(s,o),Mf=!1,Ea=is=kf=jo=no=Jt=0,Wn=Hr=null,Rf=!1,(o&8)!==0&&(o|=o&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=o;0<u;){var v=31-Qt(u),x=1<<v;o|=s[v],u&=~x}return Ci=o,Zl(),l}function cg(s,o){Ke=null,q.H=Ur,o===ya||o===sc?(o=Tm(),bt=3):o===qd?(o=Tm(),bt=4):bt=o===hf?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ss=o,it===null&&(Jt=1,yc(s,fs(o,s.current)))}function ug(){var s=ts.current;return s===null?!0:(rt&4194048)===rt?gs===null:(rt&62914560)===rt||(rt&536870912)!==0?s===gs:!1}function dg(){var s=q.H;return q.H=Ur,s===null?Ur:s}function fg(){var s=q.A;return q.A=q_,s}function Mc(){Jt=4,to||(rt&4194048)!==rt&&ts.current!==null||(Ta=!0),(no&134217727)===0&&(jo&134217727)===0||Mt===null||oo(Mt,rt,is,!1)}function Of(s,o,l){var u=gt;gt|=2;var v=dg(),x=fg();(Mt!==s||rt!==o)&&(Nc=null,Aa(s,o)),o=!1;var T=Jt;e:do try{if(bt!==0&&it!==null){var D=it,Y=ss;switch(bt){case 8:Lf(),T=6;break e;case 3:case 2:case 9:case 6:ts.current===null&&(o=!0);var se=bt;if(bt=0,ss=null,Ma(s,D,Y,se),l&&Ta){T=0;break e}break;default:se=bt,bt=0,ss=null,Ma(s,D,Y,se)}}G_(),T=Jt;break}catch(pe){cg(s,pe)}while(!0);return o&&s.shellSuspendCounter++,fi=Po=null,gt=u,q.H=v,q.A=x,it===null&&(Mt=null,rt=0,Zl()),T}function G_(){for(;it!==null;)hg(it)}function B_(s,o){var l=gt;gt|=2;var u=dg(),v=fg();Mt!==s||rt!==o?(Nc=null,Ec=xe()+500,Aa(s,o)):Ta=Vn(s,o);e:do try{if(bt!==0&&it!==null){o=it;var x=ss;t:switch(bt){case 1:bt=0,ss=null,Ma(s,o,x,1);break;case 2:case 9:if(Sm(x)){bt=0,ss=null,pg(o);break}o=function(){bt!==2&&bt!==9||Mt!==s||(bt=7),Zs(s)},x.then(o,o);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Sm(x)?(bt=0,ss=null,pg(o)):(bt=0,ss=null,Ma(s,o,x,7));break;case 5:var T=null;switch(it.tag){case 26:T=it.memoizedState;case 5:case 27:var D=it;if(T?$g(T):D.stateNode.complete){bt=0,ss=null;var Y=D.sibling;if(Y!==null)it=Y;else{var se=D.return;se!==null?(it=se,kc(se)):it=null}break t}}bt=0,ss=null,Ma(s,o,x,5);break;case 6:bt=0,ss=null,Ma(s,o,x,6);break;case 8:Lf(),Jt=6;break e;default:throw Error(i(462))}}j_();break}catch(pe){cg(s,pe)}while(!0);return fi=Po=null,q.H=u,q.A=v,gt=l,it!==null?0:(Mt=null,rt=0,Zl(),Jt)}function j_(){for(;it!==null&&!ye();)hg(it)}function hg(s){var o=U0(s.alternate,s,Ci);s.memoizedProps=s.pendingProps,o===null?kc(s):it=o}function pg(s){var o=s,l=o.alternate;switch(o.tag){case 15:case 0:o=R0(l,o,o.pendingProps,o.type,void 0,rt);break;case 11:o=R0(l,o,o.pendingProps,o.type.render,o.ref,rt);break;case 5:Xd(o);default:V0(l,o),o=it=fm(o,Ci),o=U0(l,o,Ci)}s.memoizedProps=s.pendingProps,o===null?kc(s):it=o}function Ma(s,o,l,u){fi=Po=null,Xd(o),va=null,Mr=0;var v=o.return;try{if(R_(s,v,o,l,rt)){Jt=1,yc(s,fs(l,s.current)),it=null;return}}catch(x){if(v!==null)throw it=v,x;Jt=1,yc(s,fs(l,s.current)),it=null;return}o.flags&32768?(ct||u===1?s=!0:Ta||(rt&536870912)!==0?s=!1:(to=s=!0,(u===2||u===9||u===3||u===6)&&(u=ts.current,u!==null&&u.tag===13&&(u.flags|=16384))),mg(o,s)):kc(o)}function kc(s){var o=s;do{if((o.flags&32768)!==0){mg(o,to);return}s=o.return;var l=P_(o.alternate,o,Ci);if(l!==null){it=l;return}if(o=o.sibling,o!==null){it=o;return}it=o=s}while(o!==null);Jt===0&&(Jt=5)}function mg(s,o){do{var l=L_(s.alternate,s);if(l!==null){l.flags&=32767,it=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(s=s.sibling,s!==null)){it=s;return}it=s=l}while(s!==null);Jt=6,it=null}function gg(s,o,l,u,v,x,T,D,Y){s.cancelPendingCommit=null;do Rc();while(pn!==0);if((gt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(x=o.lanes|o.childLanes,x|=Sd,Gs(s,l,x,T,D,Y),s===Mt&&(it=Mt=null,rt=0),Na=o,io=s,Si=l,If=x,Df=v,og=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,W_(Ue,function(){return bg(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=q.T,q.T=null,v=Z.p,Z.p=2,T=gt,gt|=4;try{O_(s,o,l)}finally{gt=T,Z.p=v,q.T=u}}pn=1,yg(),vg(),_g()}}function yg(){if(pn===1){pn=0;var s=io,o=Na,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=q.T,q.T=null;var u=Z.p;Z.p=2;var v=gt;gt|=4;try{K0(o,s);var x=Jf,T=sm(s.containerInfo),D=x.focusedElem,Y=x.selectionRange;if(T!==D&&D&&D.ownerDocument&&nm(D.ownerDocument.documentElement,D)){if(Y!==null&&vd(D)){var se=Y.start,pe=Y.end;if(pe===void 0&&(pe=se),"selectionStart"in D)D.selectionStart=se,D.selectionEnd=Math.min(pe,D.value.length);else{var ge=D.ownerDocument||document,ie=ge&&ge.defaultView||window;if(ie.getSelection){var le=ie.getSelection(),Ne=D.textContent.length,ze=Math.min(Y.start,Ne),Nt=Y.end===void 0?ze:Math.min(Y.end,Ne);!le.extend&&ze>Nt&&(T=Nt,Nt=ze,ze=T);var ee=tm(D,ze),J=tm(D,Nt);if(ee&&J&&(le.rangeCount!==1||le.anchorNode!==ee.node||le.anchorOffset!==ee.offset||le.focusNode!==J.node||le.focusOffset!==J.offset)){var ne=ge.createRange();ne.setStart(ee.node,ee.offset),le.removeAllRanges(),ze>Nt?(le.addRange(ne),le.extend(J.node,J.offset)):(ne.setEnd(J.node,J.offset),le.addRange(ne))}}}}for(ge=[],le=D;le=le.parentNode;)le.nodeType===1&&ge.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ge.length;D++){var me=ge[D];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}jc=!!Wf,Jf=Wf=null}finally{gt=v,Z.p=u,q.T=l}}s.current=o,pn=2}}function vg(){if(pn===2){pn=0;var s=io,o=Na,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=q.T,q.T=null;var u=Z.p;Z.p=2;var v=gt;gt|=4;try{Y0(s,o.alternate,o)}finally{gt=v,Z.p=u,q.T=l}}pn=3}}function _g(){if(pn===4||pn===3){pn=0,Se();var s=io,o=Na,l=Si,u=og;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?pn=5:(pn=0,Na=io=null,xg(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(so=null),js(l),o=o.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Yt,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=q.T,v=Z.p,Z.p=2,q.T=null;try{for(var x=s.onRecoverableError,T=0;T<u.length;T++){var D=u[T];x(D.value,{componentStack:D.stack})}}finally{q.T=o,Z.p=v}}(Si&3)!==0&&Rc(),Zs(s),v=s.pendingLanes,(l&261930)!==0&&(v&42)!==0?s===Pf?Yr++:(Yr=0,Pf=s):Yr=0,Wr(0)}}function xg(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Nr(o)))}function Rc(){return yg(),vg(),_g(),bg()}function bg(){if(pn!==5)return!1;var s=io,o=If;If=0;var l=js(Si),u=q.T,v=Z.p;try{Z.p=32>l?32:l,q.T=null,l=Df,Df=null;var x=io,T=Si;if(pn=0,Na=io=null,Si=0,(gt&6)!==0)throw Error(i(331));var D=gt;if(gt|=4,ng(x.current),$0(x,x.current,T,l),gt=D,Wr(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Yt,x)}catch{}return!0}finally{Z.p=v,q.T=u,xg(s,o)}}function Cg(s,o,l){o=fs(l,o),o=ff(s.stateNode,o,2),s=Ki(s,o,2),s!==null&&(En(s,2),Zs(s))}function Ct(s,o,l){if(s.tag===3)Cg(s,s,l);else for(;o!==null;){if(o.tag===3){Cg(o,s,l);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(so===null||!so.has(u))){s=fs(l,s),l=S0(2),u=Ki(o,l,2),u!==null&&(w0(l,u,o,s),En(u,2),Zs(u));break}}o=o.return}}function Uf(s,o,l){var u=s.pingCache;if(u===null){u=s.pingCache=new V_;var v=new Set;u.set(o,v)}else v=u.get(o),v===void 0&&(v=new Set,u.set(o,v));v.has(l)||(Mf=!0,v.add(l),s=z_.bind(null,s,o,l),o.then(s,s))}function z_(s,o,l){var u=s.pingCache;u!==null&&u.delete(o),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,Mt===s&&(rt&l)===l&&(Jt===4||Jt===3&&(rt&62914560)===rt&&300>xe()-Tc?(gt&2)===0&&Aa(s,0):kf|=l,Ea===rt&&(Ea=0)),Zs(s)}function Sg(s,o){o===0&&(o=Fs()),s=Ro(s,o),s!==null&&(En(s,o),Zs(s))}function H_(s){var o=s.memoizedState,l=0;o!==null&&(l=o.retryLane),Sg(s,l)}function Y_(s,o){var l=0;switch(s.tag){case 31:case 13:var u=s.stateNode,v=s.memoizedState;v!==null&&(l=v.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(o),Sg(s,l)}function W_(s,o){return X(s,o)}var Ic=null,ka=null,qf=!1,Dc=!1,Vf=!1,ao=0;function Zs(s){s!==ka&&s.next===null&&(ka===null?Ic=ka=s:ka=ka.next=s),Dc=!0,qf||(qf=!0,Z_())}function Wr(s,o){if(!Vf&&Dc){Vf=!0;do for(var l=!1,u=Ic;u!==null;){if(s!==0){var v=u.pendingLanes;if(v===0)var x=0;else{var T=u.suspendedLanes,D=u.pingedLanes;x=(1<<31-Qt(42|s)+1)-1,x&=v&~(T&~D),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,Ng(u,x))}else x=rt,x=an(u,u===Mt?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Vn(u,x)||(l=!0,Ng(u,x));u=u.next}while(l);Vf=!1}}function J_(){wg()}function wg(){Dc=qf=!1;var s=0;ao!==0&&ox()&&(s=ao);for(var o=xe(),l=null,u=Ic;u!==null;){var v=u.next,x=Tg(u,o);x===0?(u.next=null,l===null?Ic=v:l.next=v,v===null&&(ka=l)):(l=u,(s!==0||(x&3)!==0)&&(Dc=!0)),u=v}pn!==0&&pn!==5||Wr(s),ao!==0&&(ao=0)}function Tg(s,o){for(var l=s.suspendedLanes,u=s.pingedLanes,v=s.expirationTimes,x=s.pendingLanes&-62914561;0<x;){var T=31-Qt(x),D=1<<T,Y=v[T];Y===-1?((D&l)===0||(D&u)!==0)&&(v[T]=Oi(D,o)):Y<=o&&(s.expiredLanes|=D),x&=~D}if(o=Mt,l=rt,l=an(s,s===o?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,l===0||s===o&&(bt===2||bt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&K(u),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Vn(s,l)){if(o=l&-l,o===s.callbackPriority)return o;switch(u!==null&&K(u),js(l)){case 2:case 8:l=tt;break;case 32:l=Ue;break;case 268435456:l=Lt;break;default:l=Ue}return u=Eg.bind(null,s),l=X(l,u),s.callbackPriority=o,s.callbackNode=l,o}return u!==null&&u!==null&&K(u),s.callbackPriority=2,s.callbackNode=null,2}function Eg(s,o){if(pn!==0&&pn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Rc()&&s.callbackNode!==l)return null;var u=rt;return u=an(s,s===Mt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(rg(s,u,o),Tg(s,xe()),s.callbackNode!=null&&s.callbackNode===l?Eg.bind(null,s):null)}function Ng(s,o){if(Rc())return null;rg(s,o,!0)}function Z_(){rx(function(){(gt&6)!==0?X(ut,J_):wg()})}function Ff(){if(ao===0){var s=ma;s===0&&(s=Je,Je<<=1,(Je&261888)===0&&(Je=256)),ao=s}return ao}function Ag(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ce(""+s)}function Mg(s,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,s.id&&l.setAttribute("form",s.id),o.parentNode.insertBefore(l,o),s=new FormData(s),l.parentNode.removeChild(l),s}function X_(s,o,l,u,v){if(o==="submit"&&l&&l.stateNode===v){var x=Ag((v[st]||null).action),T=u.submitter;T&&(o=(o=T[st]||null)?Ag(o.formAction):T.getAttribute("formAction"),o!==null&&(x=o,T=null));var D=new Hl("action","action",null,u,v);s.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ao!==0){var Y=T?Mg(v,T):new FormData(v);af(l,{pending:!0,data:Y,method:v.method,action:x},null,Y)}}else typeof x=="function"&&(D.preventDefault(),Y=T?Mg(v,T):new FormData(v),af(l,{pending:!0,data:Y,method:v.method,action:x},x,Y))},currentTarget:v}]})}}for(var Gf=0;Gf<Cd.length;Gf++){var Bf=Cd[Gf],K_=Bf.toLowerCase(),Q_=Bf[0].toUpperCase()+Bf.slice(1);Ts(K_,"on"+Q_)}Ts(am,"onAnimationEnd"),Ts(rm,"onAnimationIteration"),Ts(lm,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(p_,"onTransitionRun"),Ts(m_,"onTransitionStart"),Ts(g_,"onTransitionCancel"),Ts(cm,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jr));function kg(s,o){o=(o&4)!==0;for(var l=0;l<s.length;l++){var u=s[l],v=u.event;u=u.listeners;e:{var x=void 0;if(o)for(var T=u.length-1;0<=T;T--){var D=u[T],Y=D.instance,se=D.currentTarget;if(D=D.listener,Y!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=se;try{x(v)}catch(pe){Jl(pe)}v.currentTarget=null,x=Y}else for(T=0;T<u.length;T++){if(D=u[T],Y=D.instance,se=D.currentTarget,D=D.listener,Y!==x&&v.isPropagationStopped())break e;x=D,v.currentTarget=se;try{x(v)}catch(pe){Jl(pe)}v.currentTarget=null,x=Y}}}}function ot(s,o){var l=o[qi];l===void 0&&(l=o[qi]=new Set);var u=s+"__bubble";l.has(u)||(Rg(o,s,2,!1),l.add(u))}function jf(s,o,l){var u=0;o&&(u|=4),Rg(l,s,u,o)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function zf(s){if(!s[Pc]){s[Pc]=!0,Pl.forEach(function(l){l!=="selectionchange"&&($_.has(l)||jf(l,!1,s),jf(l,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Pc]||(o[Pc]=!0,jf("selectionchange",!1,o))}}function Rg(s,o,l,u){switch(ay(o)){case 2:var v=Nx;break;case 8:v=Ax;break;default:v=oh}l=v.bind(null,o,l,s),v=void 0,!cd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),u?v!==void 0?s.addEventListener(o,l,{capture:!0,passive:v}):s.addEventListener(o,l,!0):v!==void 0?s.addEventListener(o,l,{passive:v}):s.addEventListener(o,l,!1)}function Hf(s,o,l,u,v){var x=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var D=u.stateNode.containerInfo;if(D===v)break;if(T===4)for(T=u.return;T!==null;){var Y=T.tag;if((Y===3||Y===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;D!==null;){if(T=Fn(D),T===null)return;if(Y=T.tag,Y===5||Y===6||Y===26||Y===27){u=x=T;continue e}D=D.parentNode}}u=u.return}Op(function(){var se=x,pe=Bn(l),ge=[];e:{var ie=um.get(s);if(ie!==void 0){var le=Hl,Ne=s;switch(s){case"keypress":if(jl(l)===0)break e;case"keydown":case"keyup":le=Y2;break;case"focusin":Ne="focus",le=hd;break;case"focusout":Ne="blur",le=hd;break;case"beforeblur":case"afterblur":le=hd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=P2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Z2;break;case am:case rm:case lm:le=U2;break;case cm:le=K2;break;case"scroll":case"scrollend":le=I2;break;case"wheel":le=$2;break;case"copy":case"cut":case"paste":le=V2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Gp;break;case"toggle":case"beforetoggle":le=t_}var ze=(o&4)!==0,Nt=!ze&&(s==="scroll"||s==="scrollend"),ee=ze?ie!==null?ie+"Capture":null:ie;ze=[];for(var J=se,ne;J!==null;){var me=J;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||ee===null||(me=gr(J,ee),me!=null&&ze.push(Zr(J,me,ne))),Nt)break;J=J.return}0<ze.length&&(ie=new le(ie,Ne,null,l,pe),ge.push({event:ie,listeners:ze}))}}if((o&7)===0){e:{if(ie=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",ie&&l!==xt&&(Ne=l.relatedTarget||l.fromElement)&&(Fn(Ne)||Ne[hn]))break e;if((le||ie)&&(ie=pe.window===pe?pe:(ie=pe.ownerDocument)?ie.defaultView||ie.parentWindow:window,le?(Ne=l.relatedTarget||l.toElement,le=se,Ne=Ne?Fn(Ne):null,Ne!==null&&(Nt=r(Ne),ze=Ne.tag,Ne!==Nt||ze!==5&&ze!==27&&ze!==6)&&(Ne=null)):(le=null,Ne=se),le!==Ne)){if(ze=Vp,me="onMouseLeave",ee="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(ze=Gp,me="onPointerLeave",ee="onPointerEnter",J="pointer"),Nt=le==null?ie:No(le),ne=Ne==null?ie:No(Ne),ie=new ze(me,J+"leave",le,l,pe),ie.target=Nt,ie.relatedTarget=ne,me=null,Fn(pe)===se&&(ze=new ze(ee,J+"enter",Ne,l,pe),ze.target=ne,ze.relatedTarget=Nt,me=ze),Nt=me,le&&Ne)t:{for(ze=ex,ee=le,J=Ne,ne=0,me=ee;me;me=ze(me))ne++;me=0;for(var qe=J;qe;qe=ze(qe))me++;for(;0<ne-me;)ee=ze(ee),ne--;for(;0<me-ne;)J=ze(J),me--;for(;ne--;){if(ee===J||J!==null&&ee===J.alternate){ze=ee;break t}ee=ze(ee),J=ze(J)}ze=null}else ze=null;le!==null&&Ig(ge,ie,le,ze,!1),Ne!==null&&Nt!==null&&Ig(ge,Nt,Ne,ze,!0)}}e:{if(ie=se?No(se):window,le=ie.nodeName&&ie.nodeName.toLowerCase(),le==="select"||le==="input"&&ie.type==="file")var dt=Zp;else if(Wp(ie))if(Xp)dt=d_;else{dt=c_;var ke=l_}else le=ie.nodeName,!le||le.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?se&&mr(se.elementType)&&(dt=Zp):dt=u_;if(dt&&(dt=dt(s,se))){Jp(ge,dt,l,pe);break e}ke&&ke(s,ie,se),s==="focusout"&&se&&ie.type==="number"&&se.memoizedProps.value!=null&&oa(ie,"number",ie.value)}switch(ke=se?No(se):window,s){case"focusin":(Wp(ke)||ke.contentEditable==="true")&&(ra=ke,_d=se,wr=null);break;case"focusout":wr=_d=ra=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,im(ge,l,pe);break;case"selectionchange":if(h_)break;case"keydown":case"keyup":im(ge,l,pe)}var Qe;if(md)e:{switch(s){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else aa?Hp(s,l)&&(lt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(lt="onCompositionStart");lt&&(Bp&&l.locale!=="ko"&&(aa||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&aa&&(Qe=Up()):(zi=pe,ud="value"in zi?zi.value:zi.textContent,aa=!0)),ke=Lc(se,lt),0<ke.length&&(lt=new Fp(lt,s,null,l,pe),ge.push({event:lt,listeners:ke}),Qe?lt.data=Qe:(Qe=Yp(l),Qe!==null&&(lt.data=Qe)))),(Qe=s_?i_(s,l):o_(s,l))&&(lt=Lc(se,"onBeforeInput"),0<lt.length&&(ke=new Fp("onBeforeInput","beforeinput",null,l,pe),ge.push({event:ke,listeners:lt}),ke.data=Qe)),X_(ge,s,se,l,pe)}kg(ge,o)})}function Zr(s,o,l){return{instance:s,listener:o,currentTarget:l}}function Lc(s,o){for(var l=o+"Capture",u=[];s!==null;){var v=s,x=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||x===null||(v=gr(s,l),v!=null&&u.unshift(Zr(s,v,x)),v=gr(s,o),v!=null&&u.push(Zr(s,v,x))),s.tag===3)return u;s=s.return}return[]}function ex(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ig(s,o,l,u,v){for(var x=o._reactName,T=[];l!==null&&l!==u;){var D=l,Y=D.alternate,se=D.stateNode;if(D=D.tag,Y!==null&&Y===u)break;D!==5&&D!==26&&D!==27||se===null||(Y=se,v?(se=gr(l,x),se!=null&&T.unshift(Zr(l,se,Y))):v||(se=gr(l,x),se!=null&&T.push(Zr(l,se,Y)))),l=l.return}T.length!==0&&s.push({event:o,listeners:T})}var tx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function Dg(s){return(typeof s=="string"?s:""+s).replace(tx,`
`).replace(nx,"")}function Pg(s,o){return o=Dg(o),Dg(s)===o}function Et(s,o,l,u,v,x){switch(l){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||ji(s,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&ji(s,""+u);break;case"className":Bi(s,"class",u);break;case"tabIndex":Bi(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(s,l,u);break;case"style":Gl(s,u,x);break;case"data":if(o!=="object"){Bi(s,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||l!=="href")){s.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Ce(""+u),s.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(o!=="input"&&Et(s,o,"name",v.name,v,null),Et(s,o,"formEncType",v.formEncType,v,null),Et(s,o,"formMethod",v.formMethod,v,null),Et(s,o,"formTarget",v.formTarget,v,null)):(Et(s,o,"encType",v.encType,v,null),Et(s,o,"method",v.method,v,null),Et(s,o,"target",v.target,v,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(l);break}u=Ce(""+u),s.setAttribute(l,u);break;case"onClick":u!=null&&(s.onclick=Ye);break;case"onScroll":u!=null&&ot("scroll",s);break;case"onScrollEnd":u!=null&&ot("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}l=Ce(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""+u):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":u===!0?s.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(l,u):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(l,u):s.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(l):s.setAttribute(l,u);break;case"popover":ot("beforetoggle",s),ot("toggle",s),ta(s,"popover",u);break;case"xlinkActuate":Ss(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ss(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ss(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ss(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ss(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ss(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ss(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ss(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ss(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ta(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ce.get(l)||l,ta(s,l,u))}}function Yf(s,o,l,u,v,x){switch(l){case"style":Gl(s,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof u=="string"?ji(s,u):(typeof u=="number"||typeof u=="bigint")&&ji(s,""+u);break;case"onScroll":u!=null&&ot("scroll",s);break;case"onScrollEnd":u!=null&&ot("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Ye);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ll.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),x=s[st]||null,x=x!=null?x[l]:null,typeof x=="function"&&s.removeEventListener(o,x,v),typeof u=="function")){typeof x!="function"&&x!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(o,u,v);break e}l in s?s[l]=u:u===!0?s.setAttribute(l,""):ta(s,l,u)}}}function Cn(s,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",s),ot("load",s);var u=!1,v=!1,x;for(x in l)if(l.hasOwnProperty(x)){var T=l[x];if(T!=null)switch(x){case"src":u=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Et(s,o,x,T,l,null)}}v&&Et(s,o,"srcSet",l.srcSet,l,null),u&&Et(s,o,"src",l.src,l,null);return;case"input":ot("invalid",s);var D=x=T=v=null,Y=null,se=null;for(u in l)if(l.hasOwnProperty(u)){var pe=l[u];if(pe!=null)switch(u){case"name":v=pe;break;case"type":T=pe;break;case"checked":Y=pe;break;case"defaultChecked":se=pe;break;case"value":x=pe;break;case"defaultValue":D=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,o));break;default:Et(s,o,u,pe,l,null)}}hr(s,x,D,Y,se,T,v,!1);return;case"select":ot("invalid",s),u=T=x=null;for(v in l)if(l.hasOwnProperty(v)&&(D=l[v],D!=null))switch(v){case"value":x=D;break;case"defaultValue":T=D;break;case"multiple":u=D;default:Et(s,o,v,D,l,null)}o=x,l=T,s.multiple=!!u,o!=null?li(s,!!u,o,!1):l!=null&&li(s,!!u,l,!0);return;case"textarea":ot("invalid",s),x=v=u=null;for(T in l)if(l.hasOwnProperty(T)&&(D=l[T],D!=null))switch(T){case"value":u=D;break;case"defaultValue":v=D;break;case"children":x=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:Et(s,o,T,D,l,null)}Vl(s,u,v,x);return;case"option":for(Y in l)if(l.hasOwnProperty(Y)&&(u=l[Y],u!=null))switch(Y){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Et(s,o,Y,u,l,null)}return;case"dialog":ot("beforetoggle",s),ot("toggle",s),ot("cancel",s),ot("close",s);break;case"iframe":case"object":ot("load",s);break;case"video":case"audio":for(u=0;u<Jr.length;u++)ot(Jr[u],s);break;case"image":ot("error",s),ot("load",s);break;case"details":ot("toggle",s);break;case"embed":case"source":case"link":ot("error",s),ot("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in l)if(l.hasOwnProperty(se)&&(u=l[se],u!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Et(s,o,se,u,l,null)}return;default:if(mr(o)){for(pe in l)l.hasOwnProperty(pe)&&(u=l[pe],u!==void 0&&Yf(s,o,pe,u,l,void 0));return}}for(D in l)l.hasOwnProperty(D)&&(u=l[D],u!=null&&Et(s,o,D,u,l,null))}function sx(s,o,l,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,x=null,T=null,D=null,Y=null,se=null,pe=null;for(le in l){var ge=l[le];if(l.hasOwnProperty(le)&&ge!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":Y=ge;default:u.hasOwnProperty(le)||Et(s,o,le,null,u,ge)}}for(var ie in u){var le=u[ie];if(ge=l[ie],u.hasOwnProperty(ie)&&(le!=null||ge!=null))switch(ie){case"type":x=le;break;case"name":v=le;break;case"checked":se=le;break;case"defaultChecked":pe=le;break;case"value":T=le;break;case"defaultValue":D=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,o));break;default:le!==ge&&Et(s,o,ie,le,u,ge)}}ia(s,T,D,Y,se,pe,x,v);return;case"select":le=T=D=ie=null;for(x in l)if(Y=l[x],l.hasOwnProperty(x)&&Y!=null)switch(x){case"value":break;case"multiple":le=Y;default:u.hasOwnProperty(x)||Et(s,o,x,null,u,Y)}for(v in u)if(x=u[v],Y=l[v],u.hasOwnProperty(v)&&(x!=null||Y!=null))switch(v){case"value":ie=x;break;case"defaultValue":D=x;break;case"multiple":T=x;default:x!==Y&&Et(s,o,v,x,u,Y)}o=D,l=T,u=le,ie!=null?li(s,!!l,ie,!1):!!u!=!!l&&(o!=null?li(s,!!l,o,!0):li(s,!!l,l?[]:"",!1));return;case"textarea":le=ie=null;for(D in l)if(v=l[D],l.hasOwnProperty(D)&&v!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Et(s,o,D,null,u,v)}for(T in u)if(v=u[T],x=l[T],u.hasOwnProperty(T)&&(v!=null||x!=null))switch(T){case"value":ie=v;break;case"defaultValue":le=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==x&&Et(s,o,T,v,u,x)}pr(s,ie,le);return;case"option":for(var Ne in l)if(ie=l[Ne],l.hasOwnProperty(Ne)&&ie!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:Et(s,o,Ne,null,u,ie)}for(Y in u)if(ie=u[Y],le=l[Y],u.hasOwnProperty(Y)&&ie!==le&&(ie!=null||le!=null))switch(Y){case"selected":s.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:Et(s,o,Y,ie,u,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in l)ie=l[ze],l.hasOwnProperty(ze)&&ie!=null&&!u.hasOwnProperty(ze)&&Et(s,o,ze,null,u,ie);for(se in u)if(ie=u[se],le=l[se],u.hasOwnProperty(se)&&ie!==le&&(ie!=null||le!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,o));break;default:Et(s,o,se,ie,u,le)}return;default:if(mr(o)){for(var Nt in l)ie=l[Nt],l.hasOwnProperty(Nt)&&ie!==void 0&&!u.hasOwnProperty(Nt)&&Yf(s,o,Nt,void 0,u,ie);for(pe in u)ie=u[pe],le=l[pe],!u.hasOwnProperty(pe)||ie===le||ie===void 0&&le===void 0||Yf(s,o,pe,ie,u,le);return}}for(var ee in l)ie=l[ee],l.hasOwnProperty(ee)&&ie!=null&&!u.hasOwnProperty(ee)&&Et(s,o,ee,null,u,ie);for(ge in u)ie=u[ge],le=l[ge],!u.hasOwnProperty(ge)||ie===le||ie==null&&le==null||Et(s,o,ge,ie,u,le)}function Lg(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ix(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var v=l[u],x=v.transferSize,T=v.initiatorType,D=v.duration;if(x&&D&&Lg(T)){for(T=0,D=v.responseEnd,u+=1;u<l.length;u++){var Y=l[u],se=Y.startTime;if(se>D)break;var pe=Y.transferSize,ge=Y.initiatorType;pe&&Lg(ge)&&(Y=Y.responseEnd,T+=pe*(Y<D?1:(D-se)/(Y-se)))}if(--u,o+=8*(x+T)/(v.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wf=null,Jf=null;function Oc(s){return s.nodeType===9?s:s.ownerDocument}function Og(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ug(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function Zf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Xf=null;function ox(){var s=window.event;return s&&s.type==="popstate"?s===Xf?!1:(Xf=s,!0):(Xf=null,!1)}var qg=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,Vg=typeof Promise=="function"?Promise:void 0,rx=typeof queueMicrotask=="function"?queueMicrotask:typeof Vg<"u"?function(s){return Vg.resolve(null).then(s).catch(lx)}:qg;function lx(s){setTimeout(function(){throw s})}function ro(s){return s==="head"}function Fg(s,o){var l=o,u=0;do{var v=l.nextSibling;if(s.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(u===0){s.removeChild(v),Pa(o);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Xr(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Xr(l);for(var x=l.firstChild;x;){var T=x.nextSibling,D=x.nodeName;x[Vi]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=T}}else l==="body"&&Xr(s.ownerDocument.body);l=v}while(l);Pa(o)}function Gg(s,o){var l=s;s=0;do{var u=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=u}while(l)}function Kf(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Kf(l),Dn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function cx(s,o,l,u){for(;s.nodeType===1;){var v=l;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Vi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(x=s.getAttribute("rel"),x==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(x!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(x=s.getAttribute("src"),(x!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&x&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var x=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===x)return s}else return s;if(s=ys(s.nextSibling),s===null)break}return null}function ux(s,o,l){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ys(s.nextSibling),s===null))return null;return s}function Bg(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ys(s.nextSibling),s===null))return null;return s}function Qf(s){return s.data==="$?"||s.data==="$~"}function $f(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function dx(s,o){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||l.readyState!=="loading")o();else{var u=function(){o(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ys(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var eh=null;function jg(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(o===0)return ys(s.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}s=s.nextSibling}return null}function zg(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return s;o--}else l!=="/$"&&l!=="/&"||o++}s=s.previousSibling}return null}function Hg(s,o,l){switch(o=Oc(l),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Xr(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Dn(s)}var vs=new Map,Yg=new Set;function Uc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var wi=Z.d;Z.d={f:fx,r:hx,D:px,C:mx,L:gx,m:yx,X:_x,S:vx,M:xx};function fx(){var s=wi.f(),o=Ac();return s||o}function hx(s){var o=Qn(s);o!==null&&o.tag===5&&o.type==="form"?c0(o):wi.r(s)}var Ra=typeof document>"u"?null:document;function Wg(s,o,l){var u=Ra;if(u&&typeof o=="string"&&o){var v=Gn(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Yg.has(v)||(Yg.add(v),s={rel:s,crossOrigin:l,href:o},u.querySelector(v)===null&&(o=u.createElement("link"),Cn(o,"link",s),rn(o),u.head.appendChild(o)))}}function px(s){wi.D(s),Wg("dns-prefetch",s,null)}function mx(s,o){wi.C(s,o),Wg("preconnect",s,o)}function gx(s,o,l){wi.L(s,o,l);var u=Ra;if(u&&s&&o){var v='link[rel="preload"][as="'+Gn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Gn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Gn(l.imageSizes)+'"]')):v+='[href="'+Gn(s)+'"]';var x=v;switch(o){case"style":x=Ia(s);break;case"script":x=Da(s)}vs.has(x)||(s=_({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:s,as:o},l),vs.set(x,s),u.querySelector(v)!==null||o==="style"&&u.querySelector(Kr(x))||o==="script"&&u.querySelector(Qr(x))||(o=u.createElement("link"),Cn(o,"link",s),rn(o),u.head.appendChild(o)))}}function yx(s,o){wi.m(s,o);var l=Ra;if(l&&s){var u=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Gn(u)+'"][href="'+Gn(s)+'"]',x=v;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Da(s)}if(!vs.has(x)&&(s=_({rel:"modulepreload",href:s},o),vs.set(x,s),l.querySelector(v)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Qr(x)))return}u=l.createElement("link"),Cn(u,"link",s),rn(u),l.head.appendChild(u)}}}function vx(s,o,l){wi.S(s,o,l);var u=Ra;if(u&&s){var v=Hs(u).hoistableStyles,x=Ia(s);o=o||"default";var T=v.get(x);if(!T){var D={loading:0,preload:null};if(T=u.querySelector(Kr(x)))D.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":o},l),(l=vs.get(x))&&th(s,l);var Y=T=u.createElement("link");rn(Y),Cn(Y,"link",s),Y._p=new Promise(function(se,pe){Y.onload=se,Y.onerror=pe}),Y.addEventListener("load",function(){D.loading|=1}),Y.addEventListener("error",function(){D.loading|=2}),D.loading|=4,qc(T,o,u)}T={type:"stylesheet",instance:T,count:1,state:D},v.set(x,T)}}}function _x(s,o){wi.X(s,o);var l=Ra;if(l&&s){var u=Hs(l).hoistableScripts,v=Da(s),x=u.get(v);x||(x=l.querySelector(Qr(v)),x||(s=_({src:s,async:!0},o),(o=vs.get(v))&&nh(s,o),x=l.createElement("script"),rn(x),Cn(x,"link",s),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(v,x))}}function xx(s,o){wi.M(s,o);var l=Ra;if(l&&s){var u=Hs(l).hoistableScripts,v=Da(s),x=u.get(v);x||(x=l.querySelector(Qr(v)),x||(s=_({src:s,async:!0,type:"module"},o),(o=vs.get(v))&&nh(s,o),x=l.createElement("script"),rn(x),Cn(x,"link",s),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(v,x))}}function Jg(s,o,l,u){var v=(v=C.current)?Uc(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ia(l.href),l=Hs(v).hoistableStyles,u=l.get(o),u||(u={type:"style",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ia(l.href);var x=Hs(v).hoistableStyles,T=x.get(s);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(s,T),(x=v.querySelector(Kr(s)))&&!x._p&&(T.instance=x,T.state.loading=5),vs.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},vs.set(s,l),x||bx(v,s,l,T.state))),o&&u===null)throw Error(i(528,""));return T}if(o&&u!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Da(l),l=Hs(v).hoistableScripts,u=l.get(o),u||(u={type:"script",instance:null,count:0,state:null},l.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ia(s){return'href="'+Gn(s)+'"'}function Kr(s){return'link[rel="stylesheet"]['+s+"]"}function Zg(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function bx(s,o,l,u){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=s.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Cn(o,"link",l),rn(o),s.head.appendChild(o))}function Da(s){return'[src="'+Gn(s)+'"]'}function Qr(s){return"script[async]"+s}function Xg(s,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var u=s.querySelector('style[data-href~="'+Gn(l.href)+'"]');if(u)return o.instance=u,rn(u),u;var v=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),rn(u),Cn(u,"style",v),qc(u,l.precedence,s),o.instance=u;case"stylesheet":v=Ia(l.href);var x=s.querySelector(Kr(v));if(x)return o.state.loading|=4,o.instance=x,rn(x),x;u=Zg(l),(v=vs.get(v))&&th(u,v),x=(s.ownerDocument||s).createElement("link"),rn(x);var T=x;return T._p=new Promise(function(D,Y){T.onload=D,T.onerror=Y}),Cn(x,"link",u),o.state.loading|=4,qc(x,l.precedence,s),o.instance=x;case"script":return x=Da(l.src),(v=s.querySelector(Qr(x)))?(o.instance=v,rn(v),v):(u=l,(v=vs.get(x))&&(u=_({},l),nh(u,v)),s=s.ownerDocument||s,v=s.createElement("script"),rn(v),Cn(v,"link",u),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,qc(u,l.precedence,s));return o.instance}function qc(s,o,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=u.length?u[u.length-1]:null,x=v,T=0;T<u.length;T++){var D=u[T];if(D.dataset.precedence===o)x=D;else if(x!==v)break}x?x.parentNode.insertBefore(s,x.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(s,o.firstChild))}function th(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function nh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Vc=null;function Kg(s,o,l){if(Vc===null){var u=new Map,v=Vc=new Map;v.set(l,u)}else v=Vc,u=v.get(l),u||(u=new Map,v.set(l,u));if(u.has(s))return u;for(u.set(s,null),l=l.getElementsByTagName(s),v=0;v<l.length;v++){var x=l[v];if(!(x[Vi]||x[$e]||s==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(o)||"";T=s+T;var D=u.get(T);D?D.push(x):u.set(T,[x])}}return u}function Qg(s,o,l){s=s.ownerDocument||s,s.head.insertBefore(l,o==="title"?s.querySelector("head > title"):null)}function Cx(s,o,l){if(l===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function $g(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Sx(s,o,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Ia(u.href),x=o.querySelector(Kr(v));if(x){o=x._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Fc.bind(s),o.then(s,s)),l.state.loading|=4,l.instance=x,rn(x);return}x=o.ownerDocument||o,u=Zg(u),(v=vs.get(v))&&th(u,v),x=x.createElement("link"),rn(x);var T=x;T._p=new Promise(function(D,Y){T.onload=D,T.onerror=Y}),Cn(x,"link",u),l.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Fc.bind(s),o.addEventListener("load",l),o.addEventListener("error",l))}}var sh=0;function wx(s,o){return s.stylesheets&&s.count===0&&Bc(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var u=setTimeout(function(){if(s.stylesheets&&Bc(s,s.stylesheets),s.unsuspend){var x=s.unsuspend;s.unsuspend=null,x()}},6e4+o);0<s.imgBytes&&sh===0&&(sh=62500*ix());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Bc(s,s.stylesheets),s.unsuspend)){var x=s.unsuspend;s.unsuspend=null,x()}},(s.imgBytes>sh?50:800)+o);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(v)}}:null}function Fc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bc(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Gc=null;function Bc(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Gc=new Map,o.forEach(Tx,s),Gc=null,Fc.call(s))}function Tx(s,o){if(!(o.state.loading&4)){var l=Gc.get(s);if(l)var u=l.get(null);else{l=new Map,Gc.set(s,l);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<v.length;x++){var T=v[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),u=T)}u&&l.set(null,u)}v=o.instance,T=v.getAttribute("data-precedence"),x=l.get(T)||u,x===u&&l.set(null,v),l.set(T,v),this.count++,u=Fc.bind(this),v.addEventListener("load",u),v.addEventListener("error",u),x?x.parentNode.insertBefore(v,x.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var $r={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Ex(s,o,l,u,v,x,T,D,Y){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=u,this.onUncaughtError=v,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function ey(s,o,l,u,v,x,T,D,Y,se,pe,ge){return s=new Ex(s,o,l,T,Y,se,pe,ge,D),o=1,x===!0&&(o|=24),x=es(3,null,null,o),s.current=x,x.stateNode=s,o=Ld(),o.refCount++,s.pooledCache=o,o.refCount++,x.memoizedState={element:u,isDehydrated:l,cache:o},Vd(x),s}function ty(s){return s?(s=ua,s):ua}function ny(s,o,l,u,v,x){v=ty(v),u.context===null?u.context=v:u.pendingContext=v,u=Xi(o),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=Ki(s,u,o),l!==null&&(Jn(l,s,o),Rr(l,s,o))}function sy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<o?l:o}}function ih(s,o){sy(s,o),(s=s.alternate)&&sy(s,o)}function iy(s){if(s.tag===13||s.tag===31){var o=Ro(s,67108864);o!==null&&Jn(o,s,67108864),ih(s,67108864)}}function oy(s){if(s.tag===13||s.tag===31){var o=os();o=Bs(o);var l=Ro(s,o);l!==null&&Jn(l,s,o),ih(s,o)}}var jc=!0;function Nx(s,o,l,u){var v=q.T;q.T=null;var x=Z.p;try{Z.p=2,oh(s,o,l,u)}finally{Z.p=x,q.T=v}}function Ax(s,o,l,u){var v=q.T;q.T=null;var x=Z.p;try{Z.p=8,oh(s,o,l,u)}finally{Z.p=x,q.T=v}}function oh(s,o,l,u){if(jc){var v=ah(u);if(v===null)Hf(s,o,u,zc,l),ry(s,u);else if(kx(v,s,o,l,u))u.stopPropagation();else if(ry(s,u),o&4&&-1<Mx.indexOf(s)){for(;v!==null;){var x=Qn(v);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=It(x.pendingLanes);if(T!==0){var D=x;for(D.pendingLanes|=2,D.entangledLanes|=2;T;){var Y=1<<31-Qt(T);D.entanglements[1]|=Y,T&=~Y}Zs(x),(gt&6)===0&&(Ec=xe()+500,Wr(0))}}break;case 31:case 13:D=Ro(x,2),D!==null&&Jn(D,x,2),Ac(),ih(x,2)}if(x=ah(u),x===null&&Hf(s,o,u,zc,l),x===v)break;v=x}v!==null&&u.stopPropagation()}else Hf(s,o,u,null,l)}}function ah(s){return s=Bn(s),rh(s)}var zc=null;function rh(s){if(zc=null,s=Fn(s),s!==null){var o=r(s);if(o===null)s=null;else{var l=o.tag;if(l===13){if(s=c(o),s!==null)return s;s=null}else if(l===31){if(s=d(o),s!==null)return s;s=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return zc=s,null}function ay(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case ut:return 2;case tt:return 8;case Ue:case Ht:return 32;case Lt:return 268435456;default:return 32}default:return 32}}var lh=!1,lo=null,co=null,uo=null,el=new Map,tl=new Map,fo=[],Mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ry(s,o){switch(s){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":el.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(o.pointerId)}}function nl(s,o,l,u,v,x){return s===null||s.nativeEvent!==x?(s={blockedOn:o,domEventName:l,eventSystemFlags:u,nativeEvent:x,targetContainers:[v]},o!==null&&(o=Qn(o),o!==null&&iy(o)),s):(s.eventSystemFlags|=u,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function kx(s,o,l,u,v){switch(o){case"focusin":return lo=nl(lo,s,o,l,u,v),!0;case"dragenter":return co=nl(co,s,o,l,u,v),!0;case"mouseover":return uo=nl(uo,s,o,l,u,v),!0;case"pointerover":var x=v.pointerId;return el.set(x,nl(el.get(x)||null,s,o,l,u,v)),!0;case"gotpointercapture":return x=v.pointerId,tl.set(x,nl(tl.get(x)||null,s,o,l,u,v)),!0}return!1}function ly(s){var o=Fn(s.target);if(o!==null){var l=r(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){s.blockedOn=o,zs(s.priority,function(){oy(l)});return}}else if(o===31){if(o=d(l),o!==null){s.blockedOn=o,zs(s.priority,function(){oy(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Hc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var l=ah(s.nativeEvent);if(l===null){l=s.nativeEvent;var u=new l.constructor(l.type,l);xt=u,l.target.dispatchEvent(u),xt=null}else return o=Qn(l),o!==null&&iy(o),s.blockedOn=l,!1;o.shift()}return!0}function cy(s,o,l){Hc(s)&&l.delete(o)}function Rx(){lh=!1,lo!==null&&Hc(lo)&&(lo=null),co!==null&&Hc(co)&&(co=null),uo!==null&&Hc(uo)&&(uo=null),el.forEach(cy),tl.forEach(cy)}function Yc(s,o){s.blockedOn===o&&(s.blockedOn=null,lh||(lh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Rx)))}var Wc=null;function uy(s){Wc!==s&&(Wc=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Wc===s&&(Wc=null);for(var o=0;o<s.length;o+=3){var l=s[o],u=s[o+1],v=s[o+2];if(typeof u!="function"){if(rh(u||l)===null)continue;break}var x=Qn(l);x!==null&&(s.splice(o,3),o-=3,af(x,{pending:!0,data:v,method:l.method,action:u},u,v))}}))}function Pa(s){function o(Y){return Yc(Y,s)}lo!==null&&Yc(lo,s),co!==null&&Yc(co,s),uo!==null&&Yc(uo,s),el.forEach(o),tl.forEach(o);for(var l=0;l<fo.length;l++){var u=fo[l];u.blockedOn===s&&(u.blockedOn=null)}for(;0<fo.length&&(l=fo[0],l.blockedOn===null);)ly(l),l.blockedOn===null&&fo.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var v=l[u],x=l[u+1],T=v[st]||null;if(typeof x=="function")T||uy(l);else if(T){var D=null;if(x&&x.hasAttribute("formAction")){if(v=x,T=x[st]||null)D=T.formAction;else if(rh(v)!==null)continue}else D=T.action;typeof D=="function"?l[u+1]=D:(l.splice(u,3),u-=3),uy(l)}}}function dy(){function s(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return v=T})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function ch(s){this._internalRoot=s}Jc.prototype.render=ch.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,u=os();ny(l,u,s,o,null,null)},Jc.prototype.unmount=ch.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;ny(s.current,2,null,s,null,null),Ac(),o[hn]=null}};function Jc(s){this._internalRoot=s}Jc.prototype.unstable_scheduleHydration=function(s){if(s){var o=us();s={blockedOn:null,target:s,priority:o};for(var l=0;l<fo.length&&o!==0&&o<fo[l].priority;l++);fo.splice(l,0,s),l===0&&ly(s)}};var fy=e.version;if(fy!=="19.2.0")throw Error(i(527,fy,"19.2.0"));Z.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var Ix={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{Yt=Zc.inject(Ix),Ot=Zc}catch{}}return il.createRoot=function(s,o){if(!a(s))throw Error(i(299));var l=!1,u="",v=_0,x=x0,T=b0;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=ey(s,1,!1,null,null,l,u,null,v,x,T,dy),s[hn]=o.current,zf(s),new ch(o)},il.hydrateRoot=function(s,o,l){if(!a(s))throw Error(i(299));var u=!1,v="",x=_0,T=x0,D=b0,Y=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.formState!==void 0&&(Y=l.formState)),o=ey(s,1,!0,o,l??null,u,v,Y,x,T,D,dy),o.context=ty(null),l=o.current,u=os(),u=Bs(u),v=Xi(u),v.callback=null,Ki(l,v,u),l=u,o.current.lanes=l,En(o,l),Zs(o),s[hn]=o.current,zf(s),new Jc(o)},il.version="19.2.0",il}var Cy;function Bx(){if(Cy)return fh.exports;Cy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fh.exports=Gx(),fh.exports}var jx=Bx();const zx=V5(jx),F5="15.1.22",Sy=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),wy=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),xh=(t,e)=>({startTime:e,type:"setValue",value:t}),G5=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),B5=(t,e,{startTime:n,target:i,timeConstant:a})=>i+(e-i)*Math.exp((n-t)/a),Ga=t=>t.type==="exponentialRampToValue",hu=t=>t.type==="linearRampToValue",mo=t=>Ga(t)||hu(t),Bh=t=>t.type==="setValue",Ei=t=>t.type==="setValueCurve",pu=(t,e,n,i)=>{const a=t[e];return a===void 0?i:mo(a)||Bh(a)?a.value:Ei(a)?a.values[a.values.length-1]:B5(n,pu(t,e-1,a.startTime,i),a)},Ty=(t,e,n,i,a)=>n===void 0?[i.insertTime,a]:mo(n)?[n.endTime,n.value]:Bh(n)?[n.startTime,n.value]:Ei(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,pu(t,e-1,n.startTime,a)],bh=t=>t.type==="cancelAndHold",Ch=t=>t.type==="cancelScheduledValues",po=t=>bh(t)||Ch(t)?t.cancelTime:Ga(t)||hu(t)?t.endTime:t.startTime,Ey=(t,e,n,{endTime:i,value:a})=>n===a?a:0<n&&0<a||n<0&&a<0?n*(a/n)**((t-e)/(i-e)):0,Ny=(t,e,n,{endTime:i,value:a})=>n+(t-e)/(i-e)*(a-n),Hx=(t,e)=>{const n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},Yx=(t,{duration:e,startTime:n,values:i})=>{const a=(t-n)/e*(i.length-1);return Hx(i,a)},Xc=t=>t.type==="setTarget";class Wx{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=po(e);if(bh(e)||Ch(e)){const i=this._automationEvents.findIndex(r=>Ch(e)&&Ei(r)?r.startTime+r.duration>=n:po(r)>=n),a=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),bh(e)){const r=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&mo(a)){if(r!==void 0&&Xc(r))throw new Error("The internal list is malformed.");const c=r===void 0?a.insertTime:Ei(r)?r.startTime+r.duration:po(r),d=r===void 0?this._defaultValue:Ei(r)?r.values[r.values.length-1]:r.value,p=Ga(a)?Ey(n,c,d,a):Ny(n,c,d,a),f=Ga(a)?Sy(p,n,this._currenTime):wy(p,n,this._currenTime);this._automationEvents.push(f)}if(r!==void 0&&Xc(r)&&this._automationEvents.push(xh(this.getValue(n),n)),r!==void 0&&Ei(r)&&r.startTime+r.duration>n){const c=n-r.startTime,d=(r.values.length-1)/r.duration,p=Math.max(2,1+Math.ceil(c*d)),f=c/(p-1)*d,g=r.values.slice(0,p);if(f<1)for(let _=1;_<p;_+=1){const b=f*_%1;g[_]=r.values[_-1]*(1-b)+r.values[_]*b}this._automationEvents[this._automationEvents.length-1]=G5(g,r.startTime,c)}}}else{const i=this._automationEvents.findIndex(c=>po(c)>n),a=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(a!==void 0&&Ei(a)&&po(a)+a.duration>n)return!1;const r=Ga(e)?Sy(e.value,e.endTime,this._currenTime):hu(e)?wy(e.value,n,this._currenTime):e;if(i===-1)this._automationEvents.push(r);else{if(Ei(e)&&n+e.duration>po(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,r)}}return!0}flush(e){const n=this._automationEvents.findIndex(i=>po(i)>e);if(n>1){const i=this._automationEvents.slice(n-1),a=i[0];Xc(a)&&i.unshift(xh(pu(this._automationEvents,n-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=i}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(c=>po(c)>e),i=this._automationEvents[n],a=(n===-1?this._automationEvents.length:n)-1,r=this._automationEvents[a];if(r!==void 0&&Xc(r)&&(i===void 0||!mo(i)||i.insertTime>e))return B5(e,pu(this._automationEvents,a-1,r.startTime,this._defaultValue),r);if(r!==void 0&&Bh(r)&&(i===void 0||!mo(i)))return r.value;if(r!==void 0&&Ei(r)&&(i===void 0||!mo(i)||r.startTime+r.duration>e))return e<r.startTime+r.duration?Yx(e,r):r.values[r.values.length-1];if(r!==void 0&&mo(r)&&(i===void 0||!mo(i)))return r.value;if(i!==void 0&&Ga(i)){const[c,d]=Ty(this._automationEvents,a,r,i,this._defaultValue);return Ey(e,c,d,i)}if(i!==void 0&&hu(i)){const[c,d]=Ty(this._automationEvents,a,r,i,this._defaultValue);return Ny(e,c,d,i)}return this._defaultValue}}const Jx=t=>({cancelTime:t,type:"cancelAndHold"}),Zx=t=>({cancelTime:t,type:"cancelScheduledValues"}),Xx=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),Kx=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),Qx=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),$x=()=>new DOMException("","AbortError"),eb=t=>(e,n,[i,a,r],c)=>{t(e[a],[n,i,r],d=>d[0]===n&&d[1]===i,c)},tb=t=>(e,n,i)=>{const a=[];for(let r=0;r<i.numberOfInputs;r+=1)a.push(new Set);t.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},nb=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Za=new WeakSet,j5=new WeakMap,jh=new WeakMap,z5=new WeakMap,zh=new WeakMap,Du=new WeakMap,H5=new WeakMap,Sh=new WeakMap,wh=new WeakMap,Th=new WeakMap,Y5={construct(){return Y5}},sb=t=>{try{const e=new Proxy(t,Y5);new e}catch{return!1}return!0},Ay=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,My=(t,e)=>{const n=[];let i=t.replace(/^[\s]+/,""),a=i.match(Ay);for(;a!==null;){const r=a[1].slice(1,-1),c=a[0].replace(/([\s]+)?;?$/,"").replace(r,new URL(r,e).toString());n.push(c),i=i.slice(a[0].length).replace(/^[\s]+/,""),a=i.match(Ay)}return[n.join(";"),i]},ky=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Ry=t=>{if(!sb(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},ib=(t,e,n,i,a,r,c,d,p,f,g,_,b)=>{let S=0;return(w,E,N={credentials:"omit"})=>{const k=g.get(w);if(k!==void 0&&k.has(E))return Promise.resolve();const L=f.get(w);if(L!==void 0){const I=L.get(E);if(I!==void 0)return I}const R=r(w),O=R.audioWorklet===void 0?a(E).then(([I,G])=>{const[P,M]=My(I,G),F=`${P};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${M}
})})(window,'_AWGS')`;return n(F)}).then(()=>{const I=b._AWGS.pop();if(I===void 0)throw new SyntaxError;i(R.currentTime,R.sampleRate,()=>I(class{},void 0,(G,P)=>{if(G.trim()==="")throw e();const M=wh.get(R);if(M!==void 0){if(M.has(G))throw e();Ry(P),ky(P.parameterDescriptors),M.set(G,P)}else Ry(P),ky(P.parameterDescriptors),wh.set(R,new Map([[G,P]]))},R.sampleRate,void 0,void 0))}):Promise.all([a(E),Promise.resolve(t(_,_))]).then(([[I,G],P])=>{const M=S+1;S=M;const[F,B]=My(I,G),$=`${F};((AudioWorkletProcessor,registerProcessor)=>{${B}
})(${P?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${P?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${P?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${M}',class extends AudioWorkletProcessor{process(){return !1}})`,oe=new Blob([$],{type:"application/javascript; charset=utf-8"}),q=URL.createObjectURL(oe);return R.audioWorklet.addModule(q,N).then(()=>{if(d(R))return R;const Z=c(R);return Z.audioWorklet.addModule(q,N).then(()=>Z)}).then(Z=>{if(p===null)throw new SyntaxError;try{new p(Z,`__sac${M}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(q))});return L===void 0?f.set(w,new Map([[E,O]])):L.set(E,O),O.then(()=>{const I=g.get(w);I===void 0?g.set(w,new Set([E])):I.add(E)}).finally(()=>{const I=f.get(w);I!==void 0&&I.delete(E)}),O}},Is=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Pu=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[i]=n;return t.delete(i),i},W5=(t,e,n,i)=>{const a=Is(t,e),r=Pu(a,c=>c[0]===n&&c[1]===i);return a.size===0&&t.delete(e),r},vl=t=>Is(H5,t),Xa=t=>{if(Za.has(t))throw new Error("The AudioNode is already stored.");Za.add(t),vl(t).forEach(e=>e(!0))},J5=t=>"port"in t,_l=t=>{if(!Za.has(t))throw new Error("The AudioNode is not stored.");Za.delete(t),vl(t).forEach(e=>e(!1))},Eh=(t,e)=>{!J5(t)&&e.every(n=>n.size===0)&&_l(t)},ob=(t,e,n,i,a,r,c,d,p,f,g,_,b)=>{const S=new WeakMap;return(w,E,N,k,L)=>{const{activeInputs:R,passiveInputs:O}=r(E),{outputs:I}=r(w),G=d(w),P=M=>{const F=p(E),B=p(w);if(M){const H=W5(O,w,N,k);t(R,w,H,!1),!L&&!_(w)&&n(B,F,N,k),b(E)&&Xa(E)}else{const H=i(R,w,N,k);e(O,k,H,!1),!L&&!_(w)&&a(B,F,N,k);const z=c(E);if(z===0)g(E)&&Eh(E,R);else{const j=S.get(E);j!==void 0&&clearTimeout(j),S.set(E,setTimeout(()=>{g(E)&&Eh(E,R)},z*1e3))}}};return f(I,[E,N,k],M=>M[0]===E&&M[1]===N&&M[2]===k,!0)?(G.add(P),g(w)?t(R,w,[N,k,P],!0):e(O,k,[w,N,P],!0),!0):!1}},ab=t=>(e,n,[i,a,r],c)=>{const d=e.get(i);d===void 0?e.set(i,new Set([[a,n,r]])):t(d,[a,n,r],p=>p[0]===a&&p[1]===n,c)},rb=t=>(e,n)=>{const i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const a=()=>{n.removeEventListener("ended",a),n.disconnect(i),i.disconnect()};n.addEventListener("ended",a)},lb=t=>(e,n)=>{t(e).add(n)},cb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ub=(t,e,n,i,a,r)=>class extends t{constructor(d,p){const f=a(d),g={...cb,...p},_=i(f,g),b=r(f)?e():null;super(d,!1,_,b),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const p=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=p,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const p=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=p,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},In=(t,e)=>t.context===e,db=(t,e,n)=>()=>{const i=new WeakMap,a=async(r,c)=>{let d=e(r);if(!In(d,c)){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=t(c,f)}return i.set(c,d),await n(r,c,d),d};return{render(r,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):a(r,c)}}},mu=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},si=()=>new DOMException("","IndexSizeError"),Hh=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(i){throw i.code===12?si():i}})(t.getChannelData)},fb={numberOfChannels:1},hb=(t,e,n,i,a,r,c,d)=>{let p=null;return class Z5{constructor(g){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:b,sampleRate:S}={...fb,...g};p===null&&(p=new a(1,1,44100));const w=i!==null&&e(r,r)?new i({length:_,numberOfChannels:b,sampleRate:S}):p.createBuffer(b,_,S);if(w.numberOfChannels===0)throw n();return typeof w.copyFromChannel!="function"?(c(w),Hh(w)):e(mu,()=>mu(w))||d(w),t.add(w),w}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===Z5.prototype||t.has(g)}}},Zn=-34028234663852886e22,On=-Zn,Ai=t=>Za.has(t),pb={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},mb=(t,e,n,i,a,r,c,d)=>class extends t{constructor(f,g){const _=r(f),b={...pb,...g},S=a(_,b),w=c(_),E=w?e():null;super(f,!1,S,E),this._audioBufferSourceNodeRenderer=E,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=S,this._onended=null,this._playbackRate=n(this,w,S.playbackRate,On,Zn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const g=typeof f=="function"?d(this,f):null;this._nativeAudioBufferSourceNode.onended=g;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===g?f:_}get playbackRate(){return this._playbackRate}start(f=0,g=0,_){if(this._nativeAudioBufferSourceNode.start(f,g,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[f,g]:[f,g,_]),this.context.state!=="closed"){Xa(this);const b=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",b),Ai(this)&&_l(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",b)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},gb=(t,e,n,i,a)=>()=>{const r=new WeakMap;let c=null,d=null;const p=async(f,g)=>{let _=n(f);const b=In(_,g);if(!b){const S={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=e(g,S),c!==null&&_.start(...c),d!==null&&_.stop(d)}return r.set(g,_),b?await t(g,f.playbackRate,_.playbackRate):await i(g,f.playbackRate,_.playbackRate),await a(f,g,_),_};return{set start(f){c=f},set stop(f){d=f},render(f,g){const _=r.get(g);return _!==void 0?Promise.resolve(_):p(f,g)}}},yb=t=>"playbackRate"in t,vb=t=>"frequency"in t&&"gain"in t,_b=t=>"offset"in t,xb=t=>!("frequency"in t)&&"gain"in t,bb=t=>"detune"in t&&"frequency"in t&&!("gain"in t),Cb=t=>"pan"in t,Un=t=>Is(j5,t),xl=t=>Is(z5,t),Nh=(t,e)=>{const{activeInputs:n}=Un(t);n.forEach(a=>a.forEach(([r])=>{e.includes(t)||Nh(r,[...e,t])}));const i=yb(t)?[t.playbackRate]:J5(t)?Array.from(t.parameters.values()):vb(t)?[t.Q,t.detune,t.frequency,t.gain]:_b(t)?[t.offset]:xb(t)?[t.gain]:bb(t)?[t.detune,t.frequency]:Cb(t)?[t.pan]:[];for(const a of i){const r=xl(a);r!==void 0&&r.activeInputs.forEach(([c])=>Nh(c,e))}Ai(t)&&_l(t)},X5=t=>{Nh(t.destination,[])},Sb=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),wb=(t,e,n,i,a,r,c,d,p)=>class extends t{constructor(g={}){if(p===null)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new p(g)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?n():w}if(_===null)throw i();if(!Sb(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&_.sampleRate!==g.sampleRate)throw n();super(_,2);const{latencyHint:b}=g,{sampleRate:S}=_;if(this._baseLatency=typeof _.baseLatency=="number"?_.baseLatency:b==="balanced"?512/S:b==="interactive"||b===void 0?256/S:b==="playback"?1024/S:Math.max(2,Math.min(128,Math.round(b*S/128)))*128/S,this._nativeAudioContext=_,p.name==="webkitAudioContext"?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,_.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),_.removeEventListener("statechange",w)};_.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),X5(this)}))}createMediaElementSource(g){return new a(this,{mediaElement:g})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(g){return new c(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new d(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,_)=>{const b=()=>{this._nativeAudioContext.removeEventListener("statechange",b),this._nativeAudioContext.state==="running"?g():this.resume().then(g,_)};this._nativeAudioContext.addEventListener("statechange",b)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?e():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?e():g})}},Tb=(t,e,n,i,a,r,c,d)=>class extends t{constructor(f,g){const _=r(f),b=c(_),S=a(_,g,b),w=b?e(d):null;super(f,!1,S,w),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=S}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Eb=t=>{const e=new WeakMap,n=async(i,a)=>{const r=a.destination;return e.set(a,r),await t(i,a,r),r};return{render(i,a){const r=e.get(a);return r!==void 0?Promise.resolve(r):n(i,a)}}},Nb=(t,e,n,i,a,r,c,d)=>(p,f)=>{const g=f.listener,_=()=>{const I=new Float32Array(1),G=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),P=c(f);let M=!1,F=[0,0,-1,0,1,0],B=[0,0,0];const H=()=>{if(M)return;M=!0;const oe=i(f,256,9,0);oe.onaudioprocess=({inputBuffer:q})=>{const Z=[r(q,I,0),r(q,I,1),r(q,I,2),r(q,I,3),r(q,I,4),r(q,I,5)];Z.some((re,fe)=>re!==F[fe])&&(g.setOrientation(...Z),F=Z);const Q=[r(q,I,6),r(q,I,7),r(q,I,8)];Q.some((re,fe)=>re!==B[fe])&&(g.setPosition(...Q),B=Q)},G.connect(oe)},z=oe=>q=>{q!==F[oe]&&(F[oe]=q,g.setOrientation(...F))},j=oe=>q=>{q!==B[oe]&&(B[oe]=q,g.setPosition(...B))},$=(oe,q,Z)=>{const Q=n(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q});Q.connect(G,0,oe),Q.start(),Object.defineProperty(Q.offset,"defaultValue",{get(){return q}});const re=t({context:p},P,Q.offset,On,Zn);return d(re,"value",fe=>()=>fe.call(re),fe=>U=>{try{fe.call(re,U)}catch(W){if(W.code!==9)throw W}H(),P&&Z(U)}),re.cancelAndHoldAtTime=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.cancelAndHoldAtTime),re.cancelScheduledValues=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.cancelScheduledValues),re.exponentialRampToValueAtTime=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.exponentialRampToValueAtTime),re.linearRampToValueAtTime=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.linearRampToValueAtTime),re.setTargetAtTime=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.setTargetAtTime),re.setValueAtTime=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.setValueAtTime),re.setValueCurveAtTime=(fe=>P?()=>{throw a()}:(...U)=>{const W=fe.apply(re,U);return H(),W})(re.setValueCurveAtTime),re};return{forwardX:$(0,0,z(0)),forwardY:$(1,0,z(1)),forwardZ:$(2,-1,z(2)),positionX:$(6,0,j(0)),positionY:$(7,0,j(1)),positionZ:$(8,0,j(2)),upX:$(3,0,z(3)),upY:$(4,1,z(4)),upZ:$(5,0,z(5))}},{forwardX:b,forwardY:S,forwardZ:w,positionX:E,positionY:N,positionZ:k,upX:L,upY:R,upZ:O}=g.forwardX===void 0?_():g;return{get forwardX(){return b},get forwardY(){return S},get forwardZ(){return w},get positionX(){return E},get positionY(){return N},get positionZ(){return k},get upX(){return L},get upY(){return R},get upZ(){return O}}},gu=t=>"context"in t,bl=t=>gu(t[0]),Xo=(t,e,n,i)=>{for(const a of t)if(n(a)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Iy=(t,e,[n,i],a)=>{Xo(t,[e,n,i],r=>r[0]===e&&r[1]===n,a)},Dy=(t,[e,n,i],a)=>{const r=t.get(e);r===void 0?t.set(e,new Set([[n,i]])):Xo(r,[n,i],c=>c[0]===n,a)},tr=t=>"inputs"in t,yu=(t,e,n,i)=>{if(tr(e)){const a=e.inputs[i];return t.connect(a,n,0),[a,n,0]}return t.connect(e,n,i),[e,n,i]},K5=(t,e,n)=>{for(const i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},Ab=(t,e,n)=>Pu(t,i=>i[0]===e&&i[1]===n),Q5=(t,e)=>{if(!vl(t).delete(e))throw new Error("Missing the expected event listener.")},$5=(t,e,n)=>{const i=Is(t,e),a=Pu(i,r=>r[0]===n);return i.size===0&&t.delete(e),a},vu=(t,e,n,i)=>{tr(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},Ft=t=>Is(jh,t),fl=t=>Is(zh,t),Jo=t=>Sh.has(t),ru=t=>!Za.has(t),Py=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const i=t.createScriptProcessor(256,1,1),a=t.createGain(),r=t.createBuffer(1,2,44100),c=r.getChannelData(0);c[0]=1,c[1]=1;const d=t.createBufferSource();d.buffer=r,d.loop=!0,d.connect(i).connect(t.destination),d.connect(a),d.disconnect(a),i.onaudioprocess=p=>{const f=p.inputBuffer.getChannelData(0);Array.prototype.some.call(f,g=>g===1)?n(!0):n(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(t.destination)},d.start()}}),gh=(t,e)=>{const n=new Map;for(const i of t)for(const a of i){const r=n.get(a);n.set(a,r===void 0?1:r+1)}n.forEach((i,a)=>e(a,i))},_u=t=>"context"in t,Mb=t=>{const e=new Map;t.connect=(n=>(i,a=0,r=0)=>{const c=_u(i)?n(i,a,r):n(i,a),d=e.get(i);return d===void 0?e.set(i,[{input:r,output:a}]):d.every(p=>p.input!==r||p.output!==a)&&d.push({input:r,output:a}),c})(t.connect.bind(t)),t.disconnect=(n=>(i,a,r)=>{if(n.apply(t),i===void 0)e.clear();else if(typeof i=="number")for(const[c,d]of e){const p=d.filter(f=>f.output!==i);p.length===0?e.delete(c):e.set(c,p)}else if(e.has(i))if(a===void 0)e.delete(i);else{const c=e.get(i);if(c!==void 0){const d=c.filter(p=>p.output!==a&&(p.input!==r||r===void 0));d.length===0?e.delete(i):e.set(i,d)}}for(const[c,d]of e)d.forEach(p=>{_u(c)?t.connect(c,p.output,p.input):t.connect(c,p.output)})})(t.disconnect)},kb=(t,e,n,i)=>{const{activeInputs:a,passiveInputs:r}=xl(e),{outputs:c}=Un(t),d=vl(t),p=f=>{const g=Ft(t),_=fl(e);if(f){const b=$5(r,t,n);Iy(a,t,b,!1),!i&&!Jo(t)&&g.connect(_,n)}else{const b=Ab(a,t,n);Dy(r,b,!1),!i&&!Jo(t)&&g.disconnect(_,n)}};return Xo(c,[e,n],f=>f[0]===e&&f[1]===n,!0)?(d.add(p),Ai(t)?Iy(a,t,[n,p],!0):Dy(r,[t,n,p],!0),!0):!1},Rb=(t,e,n,i)=>{const{activeInputs:a,passiveInputs:r}=Un(e),c=K5(a[i],t,n);return c===null?[W5(r,t,n,i)[2],!1]:[c[2],!0]},Ib=(t,e,n)=>{const{activeInputs:i,passiveInputs:a}=xl(e),r=K5(i,t,n);return r===null?[$5(a,t,n)[1],!1]:[r[2],!0]},Yh=(t,e,n,i,a)=>{const[r,c]=Rb(t,n,i,a);if(r!==null&&(Q5(t,r),c&&!e&&!Jo(t)&&vu(Ft(t),Ft(n),i,a)),Ai(n)){const{activeInputs:d}=Un(n);Eh(n,d)}},Wh=(t,e,n,i)=>{const[a,r]=Ib(t,n,i);a!==null&&(Q5(t,a),r&&!e&&!Jo(t)&&Ft(t).disconnect(fl(n),i))},Db=(t,e)=>{const n=Un(t),i=[];for(const a of n.outputs)bl(a)?Yh(t,e,...a):Wh(t,e,...a),i.push(a[0]);return n.outputs.clear(),i},Pb=(t,e,n)=>{const i=Un(t),a=[];for(const r of i.outputs)r[1]===n&&(bl(r)?Yh(t,e,...r):Wh(t,e,...r),a.push(r[0]),i.outputs.delete(r));return a},Lb=(t,e,n,i,a)=>{const r=Un(t);return Array.from(r.outputs).filter(c=>c[0]===n&&(i===void 0||c[1]===i)&&(a===void 0||c[2]===a)).map(c=>(bl(c)?Yh(t,e,...c):Wh(t,e,...c),r.outputs.delete(c),c[0]))},Ob=(t,e,n,i,a,r,c,d,p,f,g,_,b,S,w,E)=>class extends f{constructor(k,L,R,O){super(R),this._context=k,this._nativeAudioNode=R;const I=g(k);_(I)&&n(Py,()=>Py(I,E))!==!0&&Mb(R),jh.set(this,R),H5.set(this,new Set),k.state!=="closed"&&L&&Xa(this),t(this,O,R)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(k){this._nativeAudioNode.channelCount=k}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(k){this._nativeAudioNode.channelCountMode=k}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(k){this._nativeAudioNode.channelInterpretation=k}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(k,L=0,R=0){if(L<0||L>=this._nativeAudioNode.numberOfOutputs)throw a();const O=g(this._context),I=w(O);if(b(k)||S(k))throw r();if(gu(k)){const M=Ft(k);try{const B=yu(this._nativeAudioNode,M,L,R),H=ru(this);(I||H)&&this._nativeAudioNode.disconnect(...B),this.context.state!=="closed"&&!H&&ru(k)&&Xa(k)}catch(B){throw B.code===12?r():B}if(e(this,k,L,R,I)){const B=p([this],k);gh(B,i(I))}return k}const G=fl(k);if(G.name==="playbackRate"&&G.maxValue===1024)throw c();try{this._nativeAudioNode.connect(G,L),(I||ru(this))&&this._nativeAudioNode.disconnect(G,L)}catch(M){throw M.code===12?r():M}if(kb(this,k,L,I)){const M=p([this],k);gh(M,i(I))}}disconnect(k,L,R){let O;const I=g(this._context),G=w(I);if(k===void 0)O=Db(this,G);else if(typeof k=="number"){if(k<0||k>=this.numberOfOutputs)throw a();O=Pb(this,G,k)}else{if(L!==void 0&&(L<0||L>=this.numberOfOutputs)||gu(k)&&R!==void 0&&(R<0||R>=k.numberOfInputs))throw a();if(O=Lb(this,G,k,L,R),O.length===0)throw r()}for(const P of O){const M=p([this],P);gh(M,d)}}},Ub=(t,e,n,i,a,r,c,d,p,f,g,_,b)=>(S,w,E,N=null,k=null)=>{const L=E.value,R=new Wx(L),O=w?i(R):null,I={get defaultValue(){return L},get maxValue(){return N===null?E.maxValue:N},get minValue(){return k===null?E.minValue:k},get value(){return E.value},set value(G){E.value=G,I.setValueAtTime(G,S.context.currentTime)},cancelAndHoldAtTime(G){if(typeof E.cancelAndHoldAtTime=="function")O===null&&R.flush(S.context.currentTime),R.add(a(G)),E.cancelAndHoldAtTime(G);else{const P=Array.from(R).pop();O===null&&R.flush(S.context.currentTime),R.add(a(G));const M=Array.from(R).pop();E.cancelScheduledValues(G),P!==M&&M!==void 0&&(M.type==="exponentialRampToValue"?E.exponentialRampToValueAtTime(M.value,M.endTime):M.type==="linearRampToValue"?E.linearRampToValueAtTime(M.value,M.endTime):M.type==="setValue"?E.setValueAtTime(M.value,M.startTime):M.type==="setValueCurve"&&E.setValueCurveAtTime(M.values,M.startTime,M.duration))}return I},cancelScheduledValues(G){return O===null&&R.flush(S.context.currentTime),R.add(r(G)),E.cancelScheduledValues(G),I},exponentialRampToValueAtTime(G,P){if(G===0)throw new RangeError;if(!Number.isFinite(P)||P<0)throw new RangeError;const M=S.context.currentTime;return O===null&&R.flush(M),Array.from(R).length===0&&(R.add(f(L,M)),E.setValueAtTime(L,M)),R.add(c(G,P)),E.exponentialRampToValueAtTime(G,P),I},linearRampToValueAtTime(G,P){const M=S.context.currentTime;return O===null&&R.flush(M),Array.from(R).length===0&&(R.add(f(L,M)),E.setValueAtTime(L,M)),R.add(d(G,P)),E.linearRampToValueAtTime(G,P),I},setTargetAtTime(G,P,M){return O===null&&R.flush(S.context.currentTime),R.add(p(G,P,M)),E.setTargetAtTime(G,P,M),I},setValueAtTime(G,P){return O===null&&R.flush(S.context.currentTime),R.add(f(G,P)),E.setValueAtTime(G,P),I},setValueCurveAtTime(G,P,M){const F=G instanceof Float32Array?G:new Float32Array(G);if(_!==null&&_.name==="webkitAudioContext"){const B=P+M,H=S.context.sampleRate,z=Math.ceil(P*H),j=Math.floor(B*H),$=j-z,oe=new Float32Array($);for(let Z=0;Z<$;Z+=1){const Q=(F.length-1)/M*((z+Z)/H-P),re=Math.floor(Q),fe=Math.ceil(Q);oe[Z]=re===fe?F[re]:(1-(Q-re))*F[re]+(1-(fe-Q))*F[fe]}O===null&&R.flush(S.context.currentTime),R.add(g(oe,P,M)),E.setValueCurveAtTime(oe,P,M);const q=j/H;q<B&&b(I,oe[oe.length-1],q),b(I,F[F.length-1],B)}else O===null&&R.flush(S.context.currentTime),R.add(g(F,P,M)),E.setValueCurveAtTime(F,P,M);return I}};return n.set(I,E),e.set(I,S),t(I,O),I},qb=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:i,value:a}=n;e.exponentialRampToValueAtTime(a,i)}else if(n.type==="linearRampToValue"){const{endTime:i,value:a}=n;e.linearRampToValueAtTime(a,i)}else if(n.type==="setTarget"){const{startTime:i,target:a,timeConstant:r}=n;e.setTargetAtTime(a,i,r)}else if(n.type==="setValue"){const{startTime:i,value:a}=n;e.setValueAtTime(a,i)}else if(n.type==="setValueCurve"){const{duration:i,startTime:a,values:r}=n;e.setValueCurveAtTime(r,a,i)}else throw new Error("Can't apply an unknown automation.")}});class ev{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((i,a)=>e.call(n,i,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Vb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Fb=(t,e,n,i,a,r,c,d,p,f,g,_,b,S)=>class extends e{constructor(E,N,k){var L;const R=d(E),O=p(R),I=g({...Vb,...k});b(I);const G=wh.get(R),P=G?.get(N),M=O||R.state!=="closed"?R:(L=c(R))!==null&&L!==void 0?L:R,F=a(M,O?null:E.baseLatency,f,N,P,I),B=O?i(N,I,P):null;super(E,!0,F,B);const H=[];F.parameters.forEach((j,$)=>{const oe=n(this,O,j);H.push([$,oe])}),this._nativeAudioWorkletNode=F,this._onprocessorerror=null,this._parameters=new ev(H),O&&t(R,this);const{activeInputs:z}=r(this);_(F,z)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(E){const N=typeof E=="function"?S(this,E):null;this._nativeAudioWorkletNode.onprocessorerror=N;const k=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=k!==null&&k===N?E:k}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function xu(t,e,n,i,a){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,a);else{const r=t.getChannelData(i);if(e[n].byteLength===0)e[n]=r.slice(a,a+128);else{const c=new Float32Array(r.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(c)}}}const tv=(t,e,n,i,a)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],i,a):e[n].byteLength!==0&&t.getChannelData(i).set(e[n],a)},bu=(t,e)=>{const n=[];for(let i=0;i<t;i+=1){const a=[],r=typeof e=="number"?e:e[i];for(let c=0;c<r;c+=1)a.push(new Float32Array(128));n.push(a)}return n},Gb=(t,e)=>{const n=Is(Th,t),i=Ft(e);return Is(n,i)},Bb=async(t,e,n,i,a,r,c)=>{const d=e===null?Math.ceil(t.context.length/128)*128:e.length,p=i.channelCount*i.numberOfInputs,f=a.reduce((N,k)=>N+k,0),g=f===0?null:n.createBuffer(f,d,n.sampleRate);if(r===void 0)throw new Error("Missing the processor constructor.");const _=Un(t),b=await Gb(n,t),S=bu(i.numberOfInputs,i.channelCount),w=bu(i.numberOfOutputs,a),E=Array.from(t.parameters.keys()).reduce((N,k)=>({...N,[k]:new Float32Array(128)}),{});for(let N=0;N<d;N+=128){if(i.numberOfInputs>0&&e!==null)for(let k=0;k<i.numberOfInputs;k+=1)for(let L=0;L<i.channelCount;L+=1)xu(e,S[k],L,L,N);r.parameterDescriptors!==void 0&&e!==null&&r.parameterDescriptors.forEach(({name:k},L)=>{xu(e,E,k,p+L,N)});for(let k=0;k<i.numberOfInputs;k+=1)for(let L=0;L<a[k];L+=1)w[k][L].byteLength===0&&(w[k][L]=new Float32Array(128));try{const k=S.map((R,O)=>_.activeInputs[O].size===0?[]:R),L=c(N/n.sampleRate,n.sampleRate,()=>b.process(k,w,E));if(g!==null)for(let R=0,O=0;R<i.numberOfOutputs;R+=1){for(let I=0;I<a[R];I+=1)tv(g,w[R],I,O+I,N);O+=a[R]}if(!L)break}catch(k){t.dispatchEvent(new ErrorEvent("processorerror",{colno:k.colno,filename:k.filename,lineno:k.lineno,message:k.message}));break}}return g},jb=(t,e,n,i,a,r,c,d,p,f,g,_,b,S,w,E)=>(N,k,L)=>{const R=new WeakMap;let O=null;const I=async(G,P)=>{let M=g(G),F=null;const B=In(M,P),H=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(_===null){const z=H.reduce((q,Z)=>q+Z,0),j=a(P,{channelCount:Math.max(1,z),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,z)}),$=[];for(let q=0;q<G.numberOfOutputs;q+=1)$.push(i(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:H[q]}));const oe=c(P,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1});oe.connect=e.bind(null,$),oe.disconnect=p.bind(null,$),F=[j,$,oe]}else B||(M=new _(P,N));if(R.set(P,F===null?M:F[2]),F!==null){if(O===null){if(L===void 0)throw new Error("Missing the processor constructor.");if(b===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Z=G.channelCount*G.numberOfInputs,Q=L.parameterDescriptors===void 0?0:L.parameterDescriptors.length,re=Z+Q;O=Bb(G,re===0?null:await(async()=>{const U=new b(re,Math.ceil(G.context.length/128)*128,P.sampleRate),W=[],de=[];for(let C=0;C<k.numberOfInputs;C+=1)W.push(c(U,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),de.push(a(U,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const te=await Promise.all(Array.from(G.parameters.values()).map(async C=>{const he=r(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.value});return await S(U,C,he.offset),he})),A=i(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Z+Q)});for(let C=0;C<k.numberOfInputs;C+=1){W[C].connect(de[C]);for(let he=0;he<k.channelCount;he+=1)de[C].connect(A,he,C*k.channelCount+he)}for(const[C,he]of te.entries())he.connect(A,0,Z+C),he.start(0);return A.connect(U.destination),await Promise.all(W.map(C=>w(G,U,C))),E(U)})(),P,k,H,L,f)}const z=await O,j=n(P,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[$,oe,q]=F;z!==null&&(j.buffer=z,j.start(0)),j.connect($);for(let Z=0,Q=0;Z<G.numberOfOutputs;Z+=1){const re=oe[Z];for(let fe=0;fe<H[Z];fe+=1)$.connect(re,Q+fe,fe);Q+=H[Z]}return q}if(B)for(const[z,j]of G.parameters.entries())await t(P,j,M.parameters.get(z));else for(const[z,j]of G.parameters.entries())await S(P,j,M.parameters.get(z));return await w(G,P,M),M};return{render(G,P){d(P,G);const M=R.get(P);return M!==void 0?Promise.resolve(M):I(G,P)}}},zb=(t,e,n,i,a,r,c,d,p,f,g,_,b,S,w,E,N,k,L,R)=>class extends w{constructor(I,G){super(I,G),this._nativeContext=I,this._audioWorklet=t===void 0?void 0:{addModule:(P,M)=>t(this,P,M)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(I,G,P){return new n({length:G,numberOfChannels:I,sampleRate:P})}createBufferSource(){return new i(this)}createChannelMerger(I=6){return new r(this,{numberOfInputs:I})}createChannelSplitter(I=6){return new c(this,{numberOfOutputs:I})}createConstantSource(){return new d(this)}createConvolver(){return new p(this)}createDelay(I=1){return new g(this,{maxDelayTime:I})}createDynamicsCompressor(){return new _(this)}createGain(){return new b(this)}createIIRFilter(I,G){return new S(this,{feedback:G,feedforward:I})}createOscillator(){return new E(this)}createPanner(){return new N(this)}createPeriodicWave(I,G,P={disableNormalization:!1}){return new k(this,{...P,imag:G,real:I})}createStereoPanner(){return new L(this)}createWaveShaper(){return new R(this)}decodeAudioData(I,G,P){return f(this._nativeContext,I).then(M=>(typeof G=="function"&&G(M),M),M=>{throw typeof P=="function"&&P(M),M})}},Hb={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Yb=(t,e,n,i,a,r,c,d)=>class extends t{constructor(f,g){const _=r(f),b={...Hb,...g},S=a(_,b),w=c(_),E=w?n():null;super(f,!1,S,E),this._Q=e(this,w,S.Q,On,Zn),this._detune=e(this,w,S.detune,1200*Math.log2(On),-1200*Math.log2(On)),this._frequency=e(this,w,S.frequency,f.sampleRate/2,0),this._gain=e(this,w,S.gain,40*Math.log10(On),Zn),this._nativeBiquadFilterNode=S,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,g,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,g,_)}catch(b){throw b.code===11?i():b}if(f.length!==g.length||g.length!==_.length)throw i()}},Wb=(t,e,n,i,a)=>()=>{const r=new WeakMap,c=async(d,p)=>{let f=n(d);const g=In(f,p);if(!g){const _={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(p,_)}return r.set(p,f),g?(await t(p,d.Q,f.Q),await t(p,d.detune,f.detune),await t(p,d.frequency,f.frequency),await t(p,d.gain,f.gain)):(await i(p,d.Q,f.Q),await i(p,d.detune,f.detune),await i(p,d.frequency,f.frequency),await i(p,d.gain,f.gain)),await a(d,p,f),f};return{render(d,p){const f=r.get(p);return f!==void 0?Promise.resolve(f):c(d,p)}}},Jb=(t,e)=>(n,i)=>{const a=e.get(n);if(a!==void 0)return a;const r=t.get(n);if(r!==void 0)return r;try{const c=i();return c instanceof Promise?(t.set(n,c),c.catch(()=>!1).then(d=>(t.delete(n),e.set(n,d),d))):(e.set(n,c),c)}catch{return e.set(n,!1),!1}},Zb={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Xb=(t,e,n,i,a)=>class extends t{constructor(c,d){const p=i(c),f={...Zb,...d},g=n(p,f),_=a(p)?e():null;super(c,!1,g,_)}},Kb=(t,e,n)=>()=>{const i=new WeakMap,a=async(r,c)=>{let d=e(r);if(!In(d,c)){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=t(c,f)}return i.set(c,d),await n(r,c,d),d};return{render(r,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):a(r,c)}}},Qb={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},$b=(t,e,n,i,a,r)=>class extends t{constructor(d,p){const f=i(d),g=r({...Qb,...p}),_=n(f,g),b=a(f)?e():null;super(d,!1,_,b)}},eC=(t,e,n)=>()=>{const i=new WeakMap,a=async(r,c)=>{let d=e(r);if(!In(d,c)){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=t(c,f)}return i.set(c,d),await n(r,c,d),d};return{render(r,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):a(r,c)}}},tC=t=>(e,n,i)=>t(n,e,i),nC=t=>(e,n,i=0,a=0)=>{const r=e[i];if(r===void 0)throw t();return _u(n)?r.connect(n,0,a):r.connect(n,0)},sC=t=>(e,n)=>{const i=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return i.buffer=a,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}},iC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},oC=(t,e,n,i,a,r,c)=>class extends t{constructor(p,f){const g=a(p),_={...iC,...f},b=i(g,_),S=r(g),w=S?n():null;super(p,!1,b,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=b,this._offset=e(this,S,b.offset,On,Zn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(p){const f=typeof p=="function"?c(this,p):null;this._nativeConstantSourceNode.onended=f;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===f?p:g}start(p=0){if(this._nativeConstantSourceNode.start(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=p),this.context.state!=="closed"){Xa(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),Ai(this)&&_l(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(p=0){this._nativeConstantSourceNode.stop(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=p)}},aC=(t,e,n,i,a)=>()=>{const r=new WeakMap;let c=null,d=null;const p=async(f,g)=>{let _=n(f);const b=In(_,g);if(!b){const S={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=e(g,S),c!==null&&_.start(c),d!==null&&_.stop(d)}return r.set(g,_),b?await t(g,f.offset,_.offset):await i(g,f.offset,_.offset),await a(f,g,_),_};return{set start(f){c=f},set stop(f){d=f},render(f,g){const _=r.get(g);return _!==void 0?Promise.resolve(_):p(f,g)}}},rC=t=>e=>(t[0]=e,t[0]),lC={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},cC=(t,e,n,i,a,r)=>class extends t{constructor(d,p){const f=i(d),g={...lC,...p},_=n(f,g),S=a(f)?e():null;super(d,!1,_,S),this._isBufferNullified=!1,this._nativeConvolverNode=_,g.buffer!==null&&r(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const p=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=p.createBuffer(1,1,p.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},uC=(t,e,n)=>()=>{const i=new WeakMap,a=async(r,c)=>{let d=e(r);if(!In(d,c)){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=t(c,f)}return i.set(c,d),tr(d)?await n(r,c,d.inputs[0]):await n(r,c,d),d};return{render(r,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):a(r,c)}}},dC=(t,e)=>(n,i,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,a)}catch(r){throw r.name==="SyntaxError"?t():r}},fC=()=>new DOMException("","DataCloneError"),Ly=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{const a=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>a();try{e.postMessage(t,[t])}catch{}finally{a()}})},hC=(t,e,n,i,a,r,c,d,p,f,g)=>(_,b)=>{const S=c(_)?_:r(_);if(a.has(b)){const w=n();return Promise.reject(w)}try{a.add(b)}catch{}return e(p,()=>p(S))?S.decodeAudioData(b).then(w=>(Ly(b).catch(()=>{}),e(d,()=>d(w))||g(w),t.add(w),w)):new Promise((w,E)=>{const N=async()=>{try{await Ly(b)}catch{}},k=L=>{E(L),N()};try{S.decodeAudioData(b,L=>{typeof L.copyFromChannel!="function"&&(f(L),Hh(L)),t.add(L),N().then(()=>w(L))},L=>{k(L===null?i():L)})}catch(L){k(L)}})},pC=(t,e,n,i,a,r,c,d)=>(p,f)=>{const g=e.get(p);if(g===void 0)throw new Error("Missing the expected cycle count.");const _=r(p.context),b=d(_);if(g===f){if(e.delete(p),!b&&c(p)){const S=i(p),{outputs:w}=n(p);for(const E of w)if(bl(E)){const N=i(E[0]);t(S,N,E[1],E[2])}else{const N=a(E[0]);S.connect(N,E[1])}}}else e.set(p,g-f)},mC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},gC=(t,e,n,i,a,r,c)=>class extends t{constructor(p,f){const g=a(p),_={...mC,...f},b=i(g,_),S=r(g),w=S?n(_.maxDelayTime):null;super(p,!1,b,w),this._delayTime=e(this,S,b.delayTime),c(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},yC=(t,e,n,i,a)=>r=>{const c=new WeakMap,d=async(p,f)=>{let g=n(p);const _=In(g,f);if(!_){const b={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:r};g=e(f,b)}return c.set(f,g),_?await t(f,p.delayTime,g.delayTime):await i(f,p.delayTime,g.delayTime),await a(p,f,g),g};return{render(p,f){const g=c.get(f);return g!==void 0?Promise.resolve(g):d(p,f)}}},vC=t=>(e,n,i,a)=>t(e[a],r=>r[0]===n&&r[1]===i),_C=t=>(e,n)=>{t(e).delete(n)},xC=t=>"delayTime"in t,bC=(t,e,n)=>function i(a,r){const c=gu(r)?r:n(t,r);if(xC(c))return[];if(a[0]===c)return[a];if(a.includes(c))return[];const{outputs:d}=e(c);return Array.from(d).map(p=>i([...a,c],p[0])).reduce((p,f)=>p.concat(f),[])},Kc=(t,e,n)=>{const i=e[n];if(i===void 0)throw t();return i},CC=t=>(e,n=void 0,i=void 0,a=0)=>n===void 0?e.forEach(r=>r.disconnect()):typeof n=="number"?Kc(t,e,n).disconnect():_u(n)?i===void 0?e.forEach(r=>r.disconnect(n)):a===void 0?Kc(t,e,i).disconnect(n,0):Kc(t,e,i).disconnect(n,0,a):i===void 0?e.forEach(r=>r.disconnect(n)):Kc(t,e,i).disconnect(n,0),SC={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},wC=(t,e,n,i,a,r,c,d)=>class extends t{constructor(f,g){const _=r(f),b={...SC,...g},S=i(_,b),w=c(_),E=w?n():null;super(f,!1,S,E),this._attack=e(this,w,S.attack),this._knee=e(this,w,S.knee),this._nativeDynamicsCompressorNode=S,this._ratio=e(this,w,S.ratio),this._release=e(this,w,S.release),this._threshold=e(this,w,S.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=g,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},TC=(t,e,n,i,a)=>()=>{const r=new WeakMap,c=async(d,p)=>{let f=n(d);const g=In(f,p);if(!g){const _={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(p,_)}return r.set(p,f),g?(await t(p,d.attack,f.attack),await t(p,d.knee,f.knee),await t(p,d.ratio,f.ratio),await t(p,d.release,f.release),await t(p,d.threshold,f.threshold)):(await i(p,d.attack,f.attack),await i(p,d.knee,f.knee),await i(p,d.ratio,f.ratio),await i(p,d.release,f.release),await i(p,d.threshold,f.threshold)),await a(d,p,f),f};return{render(d,p){const f=r.get(p);return f!==void 0?Promise.resolve(f):c(d,p)}}},EC=()=>new DOMException("","EncodingError"),NC=t=>e=>new Promise((n,i)=>{if(t===null){i(new SyntaxError);return}const a=t.document.head;if(a===null)i(new SyntaxError);else{const r=t.document.createElement("script"),c=new Blob([e],{type:"application/javascript"}),d=URL.createObjectURL(c),p=t.onerror,f=()=>{t.onerror=p,URL.revokeObjectURL(d)};t.onerror=(g,_,b,S,w)=>{if(_===d||_===t.location.href&&b===1&&S===1)return f(),i(w),!1;if(p!==null)return p(g,_,b,S,w)},r.onerror=()=>{f(),i(new SyntaxError)},r.onload=()=>{f(),n()},r.src=d,r.type="module",a.appendChild(r)}}),AC=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,i,a){if(i!==null){let r=this._listeners.get(i);r===void 0&&(r=t(this,i),typeof i=="function"&&this._listeners.set(i,r)),this._nativeEventTarget.addEventListener(n,r,a)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,i,a){const r=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(n,r===void 0?null:r,a)}},MC=t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return i()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},kC=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},RC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},IC=(t,e,n,i,a,r)=>class extends t{constructor(d,p){const f=a(d),g={...RC,...p},_=i(f,g),b=r(f),S=b?n():null;super(d,!1,_,S),this._gain=e(this,b,_.gain,On,Zn)}get gain(){return this._gain}},DC=(t,e,n,i,a)=>()=>{const r=new WeakMap,c=async(d,p)=>{let f=n(d);const g=In(f,p);if(!g){const _={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(p,_)}return r.set(p,f),g?await t(p,d.gain,f.gain):await i(p,d.gain,f.gain),await a(d,p,f),f};return{render(d,p){const f=r.get(p);return f!==void 0?Promise.resolve(f):c(d,p)}}},PC=(t,e)=>n=>e(t,n),LC=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},OC=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},UC=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},qC=t=>e=>t.get(e),vn=()=>new DOMException("","InvalidStateError"),VC=t=>e=>{const n=t.get(e);if(n===void 0)throw vn();return n},FC=(t,e)=>n=>{let i=t.get(n);if(i!==void 0)return i;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i},GC=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Lu=()=>new DOMException("","InvalidAccessError"),BC=t=>{t.getFrequencyResponse=(e=>(n,i,a)=>{if(n.length!==i.length||i.length!==a.length)throw Lu();return e.call(t,n,i,a)})(t.getFrequencyResponse)},jC={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},zC=(t,e,n,i,a,r)=>class extends t{constructor(d,p){const f=i(d),g=a(f),_={...jC,...p},b=e(f,g?null:d.baseLatency,_),S=g?n(_.feedback,_.feedforward):null;super(d,!1,b,S),BC(b),this._nativeIIRFilterNode=b,r(this,1)}getFrequencyResponse(d,p,f){return this._nativeIIRFilterNode.getFrequencyResponse(d,p,f)}},nv=(t,e,n,i,a,r,c,d,p,f,g)=>{const _=f.length;let b=d;for(let S=0;S<_;S+=1){let w=n[0]*f[S];for(let E=1;E<a;E+=1){const N=b-E&p-1;w+=n[E]*r[N],w-=t[E]*c[N]}for(let E=a;E<i;E+=1)w+=n[E]*r[b-E&p-1];for(let E=a;E<e;E+=1)w-=t[E]*c[b-E&p-1];r[b]=f[S],c[b]=w,b=b+1&p-1,g[S]=w}return b},HC=(t,e,n,i)=>{const a=n instanceof Float64Array?n:new Float64Array(n),r=i instanceof Float64Array?i:new Float64Array(i),c=a.length,d=r.length,p=Math.min(c,d);if(a[0]!==1){for(let w=0;w<c;w+=1)r[w]/=a[0];for(let w=1;w<d;w+=1)a[w]/=a[0]}const f=32,g=new Float32Array(f),_=new Float32Array(f),b=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),S=t.numberOfChannels;for(let w=0;w<S;w+=1){const E=t.getChannelData(w),N=b.getChannelData(w);g.fill(0),_.fill(0),nv(a,c,r,d,p,g,_,0,f,E,N)}return b},YC=(t,e,n,i,a)=>(r,c)=>{const d=new WeakMap;let p=null;const f=async(g,_)=>{let b=null,S=e(g);const w=In(S,_);if(_.createIIRFilter===void 0?b=t(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(S=_.createIIRFilter(c,r)),d.set(_,b===null?S:b),b!==null){if(p===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const N=new n(g.context.destination.channelCount,g.context.length,_.sampleRate);p=(async()=>{await i(g,N,N.destination);const k=await a(N);return HC(k,_,r,c)})()}const E=await p;return b.buffer=E,b.start(0),b}return await i(g,_,S),S};return{render(g,_){const b=d.get(_);return b!==void 0?Promise.resolve(b):f(g,_)}}},WC=(t,e,n,i,a,r)=>c=>(d,p)=>{const f=t.get(d);if(f===void 0){if(!c&&r(d)){const g=i(d),{outputs:_}=n(d);for(const b of _)if(bl(b)){const S=i(b[0]);e(g,S,b[1],b[2])}else{const S=a(b[0]);g.disconnect(S,b[1])}}t.set(d,p)}else t.set(d,f+p)},JC=(t,e)=>n=>{const i=t.get(n);return e(i)||e(n)},ZC=(t,e)=>n=>t.has(n)||e(n),XC=(t,e)=>n=>t.has(n)||e(n),KC=(t,e)=>n=>{const i=t.get(n);return e(i)||e(n)},QC=t=>e=>t!==null&&e instanceof t,$C=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,eS=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,tS=(t,e)=>n=>t(n)||e(n),nS=t=>e=>t!==null&&e instanceof t,sS=t=>t!==null&&t.isSecureContext,iS=(t,e,n,i)=>class extends t{constructor(r,c){const d=n(r),p=e(d,c);if(i(d))throw TypeError();super(r,!0,p,null),this._nativeMediaElementAudioSourceNode=p}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},oS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},aS=(t,e,n,i)=>class extends t{constructor(r,c){const d=n(r);if(i(d))throw new TypeError;const p={...oS,...c},f=e(d,p);super(r,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},rS=(t,e,n,i)=>class extends t{constructor(r,c){const d=n(r),p=e(d,c);if(i(d))throw new TypeError;super(r,!0,p,null),this._nativeMediaStreamAudioSourceNode=p}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},lS=(t,e,n)=>class extends t{constructor(a,r){const c=n(a),d=e(c,r);super(a,!0,d,null)}},cS=(t,e,n,i,a,r)=>class extends n{constructor(d,p){super(d),this._nativeContext=d,Du.set(this,d),i(d)&&a.set(d,new Set),this._destination=new t(this,p),this._listener=e(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const p=typeof d=="function"?r(this,d):null;this._nativeContext.onstatechange=p;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===p?d:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},hl=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},uS=(t,e)=>(n,i,a)=>{const r=new Set;return n.connect=(c=>(d,p=0,f=0)=>{const g=r.size===0;if(e(d))return c.call(n,d,p,f),t(r,[d,p,f],_=>_[0]===d&&_[1]===p&&_[2]===f,!0),g&&i(),d;c.call(n,d,p),t(r,[d,p],_=>_[0]===d&&_[1]===p,!0),g&&i()})(n.connect),n.disconnect=(c=>(d,p,f)=>{const g=r.size>0;if(d===void 0)c.apply(n),r.clear();else if(typeof d=="number"){c.call(n,d);for(const b of r)b[1]===d&&r.delete(b)}else{e(d)?c.call(n,d,p,f):c.call(n,d,p);for(const b of r)b[0]===d&&(p===void 0||b[1]===p)&&(f===void 0||b[2]===f)&&r.delete(b)}const _=r.size===0;g&&_&&a()})(n.disconnect),n},zt=(t,e,n)=>{const i=e[n];i!==void 0&&i!==t[n]&&(t[n]=i)},gn=(t,e)=>{zt(t,e,"channelCount"),zt(t,e,"channelCountMode"),zt(t,e,"channelInterpretation")},Oy=t=>typeof t.getFloatTimeDomainData=="function",dS=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const i=Math.max(n.length,t.fftSize);for(let a=0;a<i;a+=1)e[a]=(n[a]-128)*.0078125;return e}},fS=(t,e)=>(n,i)=>{const a=n.createAnalyser();if(gn(a,i),!(i.maxDecibels>i.minDecibels))throw e();return zt(a,i,"fftSize"),zt(a,i,"maxDecibels"),zt(a,i,"minDecibels"),zt(a,i,"smoothingTimeConstant"),t(Oy,()=>Oy(a))||dS(a),a},hS=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Xt=(t,e,n)=>{const i=e[n];i!==void 0&&i!==t[n].value&&(t[n].value=i)},pS=t=>{t.start=(e=>{let n=!1;return(i=0,a=0,r)=>{if(n)throw vn();e.call(t,i,a,r),n=!0}})(t.start)},Jh=t=>{t.start=(e=>(n=0,i=0,a)=>{if(typeof a=="number"&&a<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,i,a)})(t.start)},Zh=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},mS=(t,e,n,i,a,r,c,d,p,f,g)=>(_,b)=>{const S=_.createBufferSource();return gn(S,b),Xt(S,b,"playbackRate"),zt(S,b,"buffer"),zt(S,b,"loop"),zt(S,b,"loopEnd"),zt(S,b,"loopStart"),e(n,()=>n(_))||pS(S),e(i,()=>i(_))||p(S),e(a,()=>a(_))||f(S,_),e(r,()=>r(_))||Jh(S),e(c,()=>c(_))||g(S,_),e(d,()=>d(_))||Zh(S),t(_,S),S},gS=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,yS=(t,e)=>(n,i,a)=>{const r=n.destination;if(r.channelCount!==i)try{r.channelCount=i}catch{}a&&r.channelCountMode!=="explicit"&&(r.channelCountMode="explicit"),r.maxChannelCount===0&&Object.defineProperty(r,"maxChannelCount",{value:i});const c=t(n,{channelCount:i,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(c,"channelCount",d=>()=>d.call(c),d=>p=>{d.call(c,p);try{r.channelCount=p}catch(f){if(p>r.maxChannelCount)throw f}}),e(c,"channelCountMode",d=>()=>d.call(c),d=>p=>{d.call(c,p),r.channelCountMode=p}),e(c,"channelInterpretation",d=>()=>d.call(c),d=>p=>{d.call(c,p),r.channelInterpretation=p}),Object.defineProperty(c,"maxChannelCount",{get:()=>r.maxChannelCount}),c.connect(r),c},vS=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,_S=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},xS=(t,e,n,i,a)=>(r,c,d,p,f,g)=>{if(d!==null)try{const _=new d(r,p,g),b=new Map;let S=null;if(Object.defineProperties(_,{channelCount:{get:()=>g.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>S,set:w=>{typeof S=="function"&&_.removeEventListener("processorerror",S),S=typeof w=="function"?w:null,typeof S=="function"&&_.addEventListener("processorerror",S)}}}),_.addEventListener=(w=>(...E)=>{if(E[0]==="processorerror"){const N=typeof E[1]=="function"?E[1]:typeof E[1]=="object"&&E[1]!==null&&typeof E[1].handleEvent=="function"?E[1].handleEvent:null;if(N!==null){const k=b.get(E[1]);k!==void 0?E[1]=k:(E[1]=L=>{L.type==="error"?(Object.defineProperties(L,{type:{value:"processorerror"}}),N(L)):N(new ErrorEvent(E[0],{...L}))},b.set(N,E[1]))}}return w.call(_,"error",E[1],E[2]),w.call(_,...E)})(_.addEventListener),_.removeEventListener=(w=>(...E)=>{if(E[0]==="processorerror"){const N=b.get(E[1]);N!==void 0&&(b.delete(E[1]),E[1]=N)}return w.call(_,"error",E[1],E[2]),w.call(_,E[0],E[1],E[2])})(_.removeEventListener),g.numberOfOutputs!==0){const w=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(w).connect(r.destination),a(_,()=>w.disconnect(),()=>w.connect(r.destination))}return _}catch(_){throw _.code===11?i():_}if(f===void 0)throw i();return _S(g),e(r,c,f,g)},sv=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),bS=t=>new Promise((e,n)=>{const{port1:i,port2:a}=new MessageChannel;i.onmessage=({data:r})=>{i.close(),a.close(),e(r)},i.onmessageerror=({data:r})=>{i.close(),a.close(),n(r)},a.postMessage(t)}),CS=async(t,e)=>{const n=await bS(e);return new t(n)},SS=(t,e,n,i)=>{let a=Th.get(t);a===void 0&&(a=new WeakMap,Th.set(t,a));const r=CS(n,i);return a.set(e,r),r},wS=(t,e,n,i,a,r,c,d,p,f,g,_,b)=>(S,w,E,N)=>{if(N.numberOfInputs===0&&N.numberOfOutputs===0)throw p();const k=Array.isArray(N.outputChannelCount)?N.outputChannelCount:Array.from(N.outputChannelCount);if(k.some(ae=>ae<1))throw p();if(k.length!==N.numberOfOutputs)throw e();if(N.channelCountMode!=="explicit")throw p();const L=N.channelCount*N.numberOfInputs,R=k.reduce((ae,_e)=>ae+_e,0),O=E.parameterDescriptors===void 0?0:E.parameterDescriptors.length;if(L+O>6||R>6)throw p();const I=new MessageChannel,G=[],P=[];for(let ae=0;ae<N.numberOfInputs;ae+=1)G.push(c(S,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1})),P.push(a(S,{channelCount:N.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:N.channelCount}));const M=[];if(E.parameterDescriptors!==void 0)for(const{defaultValue:ae,maxValue:_e,minValue:Be,name:Fe}of E.parameterDescriptors){const Oe=r(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:N.parameterData[Fe]!==void 0?N.parameterData[Fe]:ae===void 0?0:ae});Object.defineProperties(Oe.offset,{defaultValue:{get:()=>ae===void 0?0:ae},maxValue:{get:()=>_e===void 0?On:_e},minValue:{get:()=>Be===void 0?Zn:Be}}),M.push(Oe)}const F=i(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,L+O)}),B=sv(w,S.sampleRate),H=d(S,B,L+O,Math.max(1,R)),z=a(S,{channelCount:Math.max(1,R),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,R)}),j=[];for(let ae=0;ae<N.numberOfOutputs;ae+=1)j.push(i(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[ae]}));for(let ae=0;ae<N.numberOfInputs;ae+=1){G[ae].connect(P[ae]);for(let _e=0;_e<N.channelCount;_e+=1)P[ae].connect(F,_e,ae*N.channelCount+_e)}const $=new ev(E.parameterDescriptors===void 0?[]:E.parameterDescriptors.map(({name:ae},_e)=>{const Be=M[_e];return Be.connect(F,0,L+_e),Be.start(0),[ae,Be.offset]}));F.connect(H);let oe=N.channelInterpretation,q=null;const Z=N.numberOfOutputs===0?[H]:j,Q={get bufferSize(){return B},get channelCount(){return N.channelCount},set channelCount(ae){throw n()},get channelCountMode(){return N.channelCountMode},set channelCountMode(ae){throw n()},get channelInterpretation(){return oe},set channelInterpretation(ae){for(const _e of G)_e.channelInterpretation=ae;oe=ae},get context(){return H.context},get inputs(){return G},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get onprocessorerror(){return q},set onprocessorerror(ae){typeof q=="function"&&Q.removeEventListener("processorerror",q),q=typeof ae=="function"?ae:null,typeof q=="function"&&Q.addEventListener("processorerror",q)},get parameters(){return $},get port(){return I.port2},addEventListener(...ae){return H.addEventListener(ae[0],ae[1],ae[2])},connect:t.bind(null,Z),disconnect:f.bind(null,Z),dispatchEvent(...ae){return H.dispatchEvent(ae[0])},removeEventListener(...ae){return H.removeEventListener(ae[0],ae[1],ae[2])}},re=new Map;I.port1.addEventListener=(ae=>(..._e)=>{if(_e[0]==="message"){const Be=typeof _e[1]=="function"?_e[1]:typeof _e[1]=="object"&&_e[1]!==null&&typeof _e[1].handleEvent=="function"?_e[1].handleEvent:null;if(Be!==null){const Fe=re.get(_e[1]);Fe!==void 0?_e[1]=Fe:(_e[1]=Oe=>{g(S.currentTime,S.sampleRate,()=>Be(Oe))},re.set(Be,_e[1]))}}return ae.call(I.port1,_e[0],_e[1],_e[2])})(I.port1.addEventListener),I.port1.removeEventListener=(ae=>(..._e)=>{if(_e[0]==="message"){const Be=re.get(_e[1]);Be!==void 0&&(re.delete(_e[1]),_e[1]=Be)}return ae.call(I.port1,_e[0],_e[1],_e[2])})(I.port1.removeEventListener);let fe=null;Object.defineProperty(I.port1,"onmessage",{get:()=>fe,set:ae=>{typeof fe=="function"&&I.port1.removeEventListener("message",fe),fe=typeof ae=="function"?ae:null,typeof fe=="function"&&(I.port1.addEventListener("message",fe),I.port1.start())}}),E.prototype.port=I.port1;let U=null;SS(S,Q,E,N).then(ae=>U=ae);const de=bu(N.numberOfInputs,N.channelCount),te=bu(N.numberOfOutputs,k),A=E.parameterDescriptors===void 0?[]:E.parameterDescriptors.reduce((ae,{name:_e})=>({...ae,[_e]:new Float32Array(128)}),{});let C=!0;const he=()=>{N.numberOfOutputs>0&&H.disconnect(z);for(let ae=0,_e=0;ae<N.numberOfOutputs;ae+=1){const Be=j[ae];for(let Fe=0;Fe<k[ae];Fe+=1)z.disconnect(Be,_e+Fe,Fe);_e+=k[ae]}},ue=new Map;H.onaudioprocess=({inputBuffer:ae,outputBuffer:_e})=>{if(U!==null){const Be=_(Q);for(let Fe=0;Fe<B;Fe+=128){for(let Oe=0;Oe<N.numberOfInputs;Oe+=1)for(let X=0;X<N.channelCount;X+=1)xu(ae,de[Oe],X,X,Fe);E.parameterDescriptors!==void 0&&E.parameterDescriptors.forEach(({name:Oe},X)=>{xu(ae,A,Oe,L+X,Fe)});for(let Oe=0;Oe<N.numberOfInputs;Oe+=1)for(let X=0;X<k[Oe];X+=1)te[Oe][X].byteLength===0&&(te[Oe][X]=new Float32Array(128));try{const Oe=de.map((K,ye)=>{if(Be[ye].size>0)return ue.set(ye,B/128),K;const xe=ue.get(ye);return xe===void 0?[]:(K.every(Me=>Me.every(ut=>ut===0))&&(xe===1?ue.delete(ye):ue.set(ye,xe-1)),K)});C=g(S.currentTime+Fe/S.sampleRate,S.sampleRate,()=>U.process(Oe,te,A));for(let K=0,ye=0;K<N.numberOfOutputs;K+=1){for(let Se=0;Se<k[K];Se+=1)tv(_e,te[K],Se,ye+Se,Fe);ye+=k[K]}}catch(Oe){C=!1,Q.dispatchEvent(new ErrorEvent("processorerror",{colno:Oe.colno,filename:Oe.filename,lineno:Oe.lineno,message:Oe.message}))}if(!C){for(let Oe=0;Oe<N.numberOfInputs;Oe+=1){G[Oe].disconnect(P[Oe]);for(let X=0;X<N.channelCount;X+=1)P[Fe].disconnect(F,X,Oe*N.channelCount+X)}if(E.parameterDescriptors!==void 0){const Oe=E.parameterDescriptors.length;for(let X=0;X<Oe;X+=1){const K=M[X];K.disconnect(F,0,L+X),K.stop()}}F.disconnect(H),H.onaudioprocess=null,Le?he():we();break}}}};let Le=!1;const Ee=c(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ge=()=>H.connect(Ee).connect(S.destination),we=()=>{H.disconnect(Ee),Ee.disconnect()},Ve=()=>{if(C){we(),N.numberOfOutputs>0&&H.connect(z);for(let ae=0,_e=0;ae<N.numberOfOutputs;ae+=1){const Be=j[ae];for(let Fe=0;Fe<k[ae];Fe+=1)z.connect(Be,_e+Fe,Fe);_e+=k[ae]}}Le=!0},Re=()=>{C&&(Ge(),he()),Le=!1};return Ge(),b(Q,Ve,Re)},iv=(t,e)=>{const n=t.createBiquadFilter();return gn(n,e),Xt(n,e,"Q"),Xt(n,e,"detune"),Xt(n,e,"frequency"),Xt(n,e,"gain"),zt(n,e,"type"),n},TS=(t,e)=>(n,i)=>{const a=n.createChannelMerger(i.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,a),gn(a,i),a},ES=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw vn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw vn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw vn()}})},Cl=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return gn(n,e),ES(n),n},NS=(t,e,n,i,a)=>(r,c)=>{if(r.createConstantSource===void 0)return n(r,c);const d=r.createConstantSource();return gn(d,c),Xt(d,c,"offset"),e(i,()=>i(r))||Jh(d),e(a,()=>a(r))||Zh(d),t(r,d),d},nr=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),AS=(t,e,n,i)=>(a,{offset:r,...c})=>{const d=a.createBuffer(1,2,44100),p=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=n(a,{...c,gain:r}),g=d.getChannelData(0);g[0]=1,g[1]=1,p.buffer=d,p.loop=!0;const _={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(w){f.channelCount=w},get channelCountMode(){return f.channelCountMode},set channelCountMode(w){f.channelCountMode=w},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(w){f.channelInterpretation=w},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return p.onended},set onended(w){p.onended=w},addEventListener(...w){return p.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return p.dispatchEvent(w[0])},removeEventListener(...w){return p.removeEventListener(w[0],w[1],w[2])},start(w=0){p.start.call(p,w)},stop(w=0){p.stop.call(p,w)}},b=()=>p.connect(f),S=()=>p.disconnect(f);return t(a,p),i(nr(_,f),b,S)},MS=(t,e)=>(n,i)=>{const a=n.createConvolver();if(gn(a,i),i.disableNormalization===a.normalize&&(a.normalize=!i.disableNormalization),zt(a,i,"buffer"),i.channelCount>2||(e(a,"channelCount",r=>()=>r.call(a),r=>c=>{if(c>2)throw t();return r.call(a,c)}),i.channelCountMode==="max"))throw t();return e(a,"channelCountMode",r=>()=>r.call(a),r=>c=>{if(c==="max")throw t();return r.call(a,c)}),a},ov=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return gn(n,e),Xt(n,e,"delayTime"),n},kS=t=>(e,n)=>{const i=e.createDynamicsCompressor();if(gn(i,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Xt(i,n,"attack"),Xt(i,n,"knee"),Xt(i,n,"ratio"),Xt(i,n,"release"),Xt(i,n,"threshold"),i},Xn=(t,e)=>{const n=t.createGain();return gn(n,e),Xt(n,e,"gain"),n},RS=t=>(e,n,i)=>{if(e.createIIRFilter===void 0)return t(e,n,i);const a=e.createIIRFilter(i.feedforward,i.feedback);return gn(a,i),a};function IS(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function DS(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Uy(t,e){let n=[0,0];for(let i=t.length-1;i>=0;i-=1)n=DS(n,e),n[0]+=t[i];return n}const PS=(t,e,n,i)=>(a,r,{channelCount:c,channelCountMode:d,channelInterpretation:p,feedback:f,feedforward:g})=>{const _=sv(r,a.sampleRate),b=f instanceof Float64Array?f:new Float64Array(f),S=g instanceof Float64Array?g:new Float64Array(g),w=b.length,E=S.length,N=Math.min(w,E);if(w===0||w>20)throw i();if(b[0]===0)throw e();if(E===0||E>20)throw i();if(S[0]===0)throw e();if(b[0]!==1){for(let M=0;M<E;M+=1)S[M]/=b[0];for(let M=1;M<w;M+=1)b[M]/=b[0]}const k=n(a,_,c,c);k.channelCount=c,k.channelCountMode=d,k.channelInterpretation=p;const L=32,R=[],O=[],I=[];for(let M=0;M<c;M+=1){R.push(0);const F=new Float32Array(L),B=new Float32Array(L);F.fill(0),B.fill(0),O.push(F),I.push(B)}k.onaudioprocess=M=>{const F=M.inputBuffer,B=M.outputBuffer,H=F.numberOfChannels;for(let z=0;z<H;z+=1){const j=F.getChannelData(z),$=B.getChannelData(z);R[z]=nv(b,w,S,E,N,O[z],I[z],R[z],L,j,$)}};const G=a.sampleRate/2;return nr({get bufferSize(){return _},get channelCount(){return k.channelCount},set channelCount(M){k.channelCount=M},get channelCountMode(){return k.channelCountMode},set channelCountMode(M){k.channelCountMode=M},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(M){k.channelInterpretation=M},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},addEventListener(...M){return k.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return k.dispatchEvent(M[0])},getFrequencyResponse(M,F,B){if(M.length!==F.length||F.length!==B.length)throw t();const H=M.length;for(let z=0;z<H;z+=1){const j=-Math.PI*(M[z]/G),$=[Math.cos(j),Math.sin(j)],oe=Uy(S,$),q=Uy(b,$),Z=IS(oe,q);F[z]=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]),B[z]=Math.atan2(Z[1],Z[0])}},removeEventListener(...M){return k.removeEventListener(M[0],M[1],M[2])}},k)},LS=(t,e)=>t.createMediaElementSource(e.mediaElement),OS=(t,e)=>{const n=t.createMediaStreamDestination();return gn(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},US=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((r,c)=>r.id<c.id?-1:r.id>c.id?1:0);const i=n.slice(0,1),a=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(a,"mediaStream",{value:e}),a},qS=(t,e)=>(n,{mediaStreamTrack:i})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(i);const a=new MediaStream([i]),r=n.createMediaStreamSource(a);if(i.kind!=="audio")throw t();if(e(n))throw new TypeError;return r},VS=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,FS=(t,e,n,i,a,r)=>(c,d)=>{const p=c.createOscillator();return gn(p,d),Xt(p,d,"detune"),Xt(p,d,"frequency"),d.periodicWave!==void 0?p.setPeriodicWave(d.periodicWave):zt(p,d,"type"),e(n,()=>n(c))||Jh(p),e(i,()=>i(c))||r(p,c),e(a,()=>a(c))||Zh(p),t(c,p),p},GS=t=>(e,n)=>{const i=e.createPanner();return i.orientationX===void 0?t(e,n):(gn(i,n),Xt(i,n,"orientationX"),Xt(i,n,"orientationY"),Xt(i,n,"orientationZ"),Xt(i,n,"positionX"),Xt(i,n,"positionY"),Xt(i,n,"positionZ"),zt(i,n,"coneInnerAngle"),zt(i,n,"coneOuterAngle"),zt(i,n,"coneOuterGain"),zt(i,n,"distanceModel"),zt(i,n,"maxDistance"),zt(i,n,"panningModel"),zt(i,n,"refDistance"),zt(i,n,"rolloffFactor"),i)},BS=(t,e,n,i,a,r,c,d,p,f)=>(g,{coneInnerAngle:_,coneOuterAngle:b,coneOuterGain:S,distanceModel:w,maxDistance:E,orientationX:N,orientationY:k,orientationZ:L,panningModel:R,positionX:O,positionY:I,positionZ:G,refDistance:P,rolloffFactor:M,...F})=>{const B=g.createPanner();if(F.channelCount>2||F.channelCountMode==="max")throw c();gn(B,F);const H={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},z=n(g,{...H,channelInterpretation:"speakers",numberOfInputs:6}),j=i(g,{...F,gain:1}),$=i(g,{...H,gain:1}),oe=i(g,{...H,gain:0}),q=i(g,{...H,gain:0}),Z=i(g,{...H,gain:0}),Q=i(g,{...H,gain:0}),re=i(g,{...H,gain:0}),fe=a(g,256,6,1),U=r(g,{...H,curve:new Float32Array([1,1]),oversample:"none"});let W=[N,k,L],de=[O,I,G];const te=new Float32Array(1);fe.onaudioprocess=({inputBuffer:ue})=>{const Le=[p(ue,te,0),p(ue,te,1),p(ue,te,2)];Le.some((Ge,we)=>Ge!==W[we])&&(B.setOrientation(...Le),W=Le);const Ee=[p(ue,te,3),p(ue,te,4),p(ue,te,5)];Ee.some((Ge,we)=>Ge!==de[we])&&(B.setPosition(...Ee),de=Ee)},Object.defineProperty(oe.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0});const A={get bufferSize(){},get channelCount(){return B.channelCount},set channelCount(ue){if(ue>2)throw c();j.channelCount=ue,B.channelCount=ue},get channelCountMode(){return B.channelCountMode},set channelCountMode(ue){if(ue==="max")throw c();j.channelCountMode=ue,B.channelCountMode=ue},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(ue){j.channelInterpretation=ue,B.channelInterpretation=ue},get coneInnerAngle(){return B.coneInnerAngle},set coneInnerAngle(ue){B.coneInnerAngle=ue},get coneOuterAngle(){return B.coneOuterAngle},set coneOuterAngle(ue){B.coneOuterAngle=ue},get coneOuterGain(){return B.coneOuterGain},set coneOuterGain(ue){if(ue<0||ue>1)throw e();B.coneOuterGain=ue},get context(){return B.context},get distanceModel(){return B.distanceModel},set distanceModel(ue){B.distanceModel=ue},get inputs(){return[j]},get maxDistance(){return B.maxDistance},set maxDistance(ue){if(ue<0)throw new RangeError;B.maxDistance=ue},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},get orientationX(){return $.gain},get orientationY(){return oe.gain},get orientationZ(){return q.gain},get panningModel(){return B.panningModel},set panningModel(ue){B.panningModel=ue},get positionX(){return Z.gain},get positionY(){return Q.gain},get positionZ(){return re.gain},get refDistance(){return B.refDistance},set refDistance(ue){if(ue<0)throw new RangeError;B.refDistance=ue},get rolloffFactor(){return B.rolloffFactor},set rolloffFactor(ue){if(ue<0)throw new RangeError;B.rolloffFactor=ue},addEventListener(...ue){return j.addEventListener(ue[0],ue[1],ue[2])},dispatchEvent(...ue){return j.dispatchEvent(ue[0])},removeEventListener(...ue){return j.removeEventListener(ue[0],ue[1],ue[2])}};_!==A.coneInnerAngle&&(A.coneInnerAngle=_),b!==A.coneOuterAngle&&(A.coneOuterAngle=b),S!==A.coneOuterGain&&(A.coneOuterGain=S),w!==A.distanceModel&&(A.distanceModel=w),E!==A.maxDistance&&(A.maxDistance=E),N!==A.orientationX.value&&(A.orientationX.value=N),k!==A.orientationY.value&&(A.orientationY.value=k),L!==A.orientationZ.value&&(A.orientationZ.value=L),R!==A.panningModel&&(A.panningModel=R),O!==A.positionX.value&&(A.positionX.value=O),I!==A.positionY.value&&(A.positionY.value=I),G!==A.positionZ.value&&(A.positionZ.value=G),P!==A.refDistance&&(A.refDistance=P),M!==A.rolloffFactor&&(A.rolloffFactor=M),(W[0]!==1||W[1]!==0||W[2]!==0)&&B.setOrientation(...W),(de[0]!==0||de[1]!==0||de[2]!==0)&&B.setPosition(...de);const C=()=>{j.connect(B),t(j,U,0,0),U.connect($).connect(z,0,0),U.connect(oe).connect(z,0,1),U.connect(q).connect(z,0,2),U.connect(Z).connect(z,0,3),U.connect(Q).connect(z,0,4),U.connect(re).connect(z,0,5),z.connect(fe).connect(g.destination)},he=()=>{j.disconnect(B),d(j,U,0,0),U.disconnect($),$.disconnect(z),U.disconnect(oe),oe.disconnect(z),U.disconnect(q),q.disconnect(z),U.disconnect(Z),Z.disconnect(z),U.disconnect(Q),Q.disconnect(z),U.disconnect(re),re.disconnect(z),z.disconnect(fe),fe.disconnect(g.destination)};return f(nr(A,B),C,he)},jS=t=>(e,{disableNormalization:n,imag:i,real:a})=>{const r=i instanceof Float32Array?i:new Float32Array(i),c=a instanceof Float32Array?a:new Float32Array(a),d=e.createPeriodicWave(c,r,{disableNormalization:n});if(Array.from(i).length<2)throw t();return d},Sl=(t,e,n,i)=>t.createScriptProcessor(e,n,i),zS=(t,e)=>(n,i)=>{const a=i.channelCountMode;if(a==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,i);const r=n.createStereoPanner();return gn(r,i),Xt(r,i,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>a,set:c=>{if(c!==a)throw e()}}),r},HS=(t,e,n,i,a,r)=>{const d=new Float32Array([1,1]),p=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...f,oversample:"none"},_=(w,E,N,k)=>{const L=new Float32Array(16385),R=new Float32Array(16385);for(let F=0;F<16385;F+=1){const B=F/16384*p;L[F]=Math.cos(B),R[F]=Math.sin(B)}const O=n(w,{...f,gain:0}),I=i(w,{...g,curve:L}),G=i(w,{...g,curve:d}),P=n(w,{...f,gain:0}),M=i(w,{...g,curve:R});return{connectGraph(){E.connect(O),E.connect(G.inputs===void 0?G:G.inputs[0]),E.connect(P),G.connect(N),N.connect(I.inputs===void 0?I:I.inputs[0]),N.connect(M.inputs===void 0?M:M.inputs[0]),I.connect(O.gain),M.connect(P.gain),O.connect(k,0,0),P.connect(k,0,1)},disconnectGraph(){E.disconnect(O),E.disconnect(G.inputs===void 0?G:G.inputs[0]),E.disconnect(P),G.disconnect(N),N.disconnect(I.inputs===void 0?I:I.inputs[0]),N.disconnect(M.inputs===void 0?M:M.inputs[0]),I.disconnect(O.gain),M.disconnect(P.gain),O.disconnect(k,0,0),P.disconnect(k,0,1)}}},b=(w,E,N,k)=>{const L=new Float32Array(16385),R=new Float32Array(16385),O=new Float32Array(16385),I=new Float32Array(16385),G=Math.floor(16385/2);for(let Z=0;Z<16385;Z+=1)if(Z>G){const Q=(Z-G)/(16384-G)*p;L[Z]=Math.cos(Q),R[Z]=Math.sin(Q),O[Z]=0,I[Z]=1}else{const Q=Z/(16384-G)*p;L[Z]=1,R[Z]=0,O[Z]=Math.cos(Q),I[Z]=Math.sin(Q)}const P=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),M=n(w,{...f,gain:0}),F=i(w,{...g,curve:L}),B=n(w,{...f,gain:0}),H=i(w,{...g,curve:R}),z=i(w,{...g,curve:d}),j=n(w,{...f,gain:0}),$=i(w,{...g,curve:O}),oe=n(w,{...f,gain:0}),q=i(w,{...g,curve:I});return{connectGraph(){E.connect(P),E.connect(z.inputs===void 0?z:z.inputs[0]),P.connect(M,0),P.connect(B,0),P.connect(j,1),P.connect(oe,1),z.connect(N),N.connect(F.inputs===void 0?F:F.inputs[0]),N.connect(H.inputs===void 0?H:H.inputs[0]),N.connect($.inputs===void 0?$:$.inputs[0]),N.connect(q.inputs===void 0?q:q.inputs[0]),F.connect(M.gain),H.connect(B.gain),$.connect(j.gain),q.connect(oe.gain),M.connect(k,0,0),j.connect(k,0,0),B.connect(k,0,1),oe.connect(k,0,1)},disconnectGraph(){E.disconnect(P),E.disconnect(z.inputs===void 0?z:z.inputs[0]),P.disconnect(M,0),P.disconnect(B,0),P.disconnect(j,1),P.disconnect(oe,1),z.disconnect(N),N.disconnect(F.inputs===void 0?F:F.inputs[0]),N.disconnect(H.inputs===void 0?H:H.inputs[0]),N.disconnect($.inputs===void 0?$:$.inputs[0]),N.disconnect(q.inputs===void 0?q:q.inputs[0]),F.disconnect(M.gain),H.disconnect(B.gain),$.disconnect(j.gain),q.disconnect(oe.gain),M.disconnect(k,0,0),j.disconnect(k,0,0),B.disconnect(k,0,1),oe.disconnect(k,0,1)}}},S=(w,E,N,k,L)=>{if(E===1)return _(w,N,k,L);if(E===2)return b(w,N,k,L);throw a()};return(w,{channelCount:E,channelCountMode:N,pan:k,...L})=>{if(N==="max")throw a();const R=t(w,{...L,channelCount:1,channelCountMode:N,numberOfInputs:2}),O=n(w,{...L,channelCount:E,channelCountMode:N,gain:1}),I=n(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:k});let{connectGraph:G,disconnectGraph:P}=S(w,E,O,I,R);Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"maxValue",{get:()=>1}),Object.defineProperty(I.gain,"minValue",{get:()=>-1});const M={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(z){O.channelCount!==z&&(F&&P(),{connectGraph:G,disconnectGraph:P}=S(w,z,O,I,R),F&&G()),O.channelCount=z},get channelCountMode(){return O.channelCountMode},set channelCountMode(z){if(z==="clamped-max"||z==="max")throw a();O.channelCountMode=z},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(z){O.channelInterpretation=z},get context(){return O.context},get inputs(){return[O]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get pan(){return I.gain},addEventListener(...z){return O.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return O.dispatchEvent(z[0])},removeEventListener(...z){return O.removeEventListener(z[0],z[1],z[2])}};let F=!1;const B=()=>{G(),F=!0},H=()=>{P(),F=!1};return r(nr(M,R),B,H)}},YS=(t,e,n,i,a,r,c)=>(d,p)=>{const f=d.createWaveShaper();if(r!==null&&r.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return n(d,p);gn(f,p);const g=p.curve===null||p.curve instanceof Float32Array?p.curve:new Float32Array(p.curve);if(g!==null&&g.length<2)throw e();zt(f,{curve:g},"curve"),zt(f,p,"oversample");let _=null,b=!1;return c(f,"curve",E=>()=>E.call(f),E=>N=>(E.call(f,N),b&&(i(N)&&_===null?_=t(d,f):!i(N)&&_!==null&&(_(),_=null)),N)),a(f,()=>{b=!0,i(f.curve)&&(_=t(d,f))},()=>{b=!1,_!==null&&(_(),_=null)})},WS=(t,e,n,i,a)=>(r,{curve:c,oversample:d,...p})=>{const f=r.createWaveShaper(),g=r.createWaveShaper();gn(f,p),gn(g,p);const _=n(r,{...p,gain:1}),b=n(r,{...p,gain:-1}),S=n(r,{...p,gain:1}),w=n(r,{...p,gain:-1});let E=null,N=!1,k=null;const L={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(I){_.channelCount=I,b.channelCount=I,f.channelCount=I,S.channelCount=I,g.channelCount=I,w.channelCount=I},get channelCountMode(){return f.channelCountMode},set channelCountMode(I){_.channelCountMode=I,b.channelCountMode=I,f.channelCountMode=I,S.channelCountMode=I,g.channelCountMode=I,w.channelCountMode=I},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(I){_.channelInterpretation=I,b.channelInterpretation=I,f.channelInterpretation=I,S.channelInterpretation=I,g.channelInterpretation=I,w.channelInterpretation=I},get context(){return f.context},get curve(){return k},set curve(I){if(I!==null&&I.length<2)throw e();if(I===null)f.curve=I,g.curve=I;else{const G=I.length,P=new Float32Array(G+2-G%2),M=new Float32Array(G+2-G%2);P[0]=I[0],M[0]=-I[G-1];const F=Math.ceil((G+1)/2),B=(G+1)/2-1;for(let H=1;H<F;H+=1){const z=H/F*B,j=Math.floor(z),$=Math.ceil(z);P[H]=j===$?I[j]:(1-(z-j))*I[j]+(1-($-z))*I[$],M[H]=j===$?-I[G-1-j]:-((1-(z-j))*I[G-1-j])-(1-($-z))*I[G-1-$]}P[F]=G%2===1?I[F-1]:(I[F-2]+I[F-1])/2,f.curve=P,g.curve=M}k=I,N&&(i(k)&&E===null?E=t(r,_):E!==null&&(E(),E=null))},get inputs(){return[_]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(I){f.oversample=I,g.oversample=I},addEventListener(...I){return _.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return _.dispatchEvent(I[0])},removeEventListener(...I){return _.removeEventListener(I[0],I[1],I[2])}};c!==null&&(L.curve=c instanceof Float32Array?c:new Float32Array(c)),d!==L.oversample&&(L.oversample=d);const R=()=>{_.connect(f).connect(S),_.connect(b).connect(g).connect(w).connect(S),N=!0,i(k)&&(E=t(r,_))},O=()=>{_.disconnect(f),f.disconnect(S),_.disconnect(b),b.disconnect(g),g.disconnect(w),w.disconnect(S),N=!1,E!==null&&(E(),E=null)};return a(nr(L,S),R,O)},qn=()=>new DOMException("","NotSupportedError"),JS={numberOfChannels:1},ZS=(t,e,n,i,a)=>class extends t{constructor(c,d,p){let f;if(typeof c=="number"&&d!==void 0&&p!==void 0)f={length:d,numberOfChannels:c,sampleRate:p};else if(typeof c=="object")f=c;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:_,sampleRate:b}={...JS,...f},S=i(_,g,b);e(hl,()=>hl(S))||S.addEventListener("statechange",(()=>{let w=0;const E=N=>{this._state==="running"&&(w>0?(S.removeEventListener("statechange",E),N.stopImmediatePropagation(),this._waitForThePromiseToSettle(N)):w+=1)};return E})()),super(S,_),this._length=g,this._nativeOfflineAudioContext=S,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,X5(this)}))}_waitForThePromiseToSettle(c){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(c):setTimeout(()=>this._waitForThePromiseToSettle(c))}},XS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},KS=(t,e,n,i,a,r,c)=>class extends t{constructor(p,f){const g=a(p),_={...XS,...f},b=n(g,_),S=r(g),w=S?i():null,E=p.sampleRate/2;super(p,!1,b,w),this._detune=e(this,S,b.detune,153600,-153600),this._frequency=e(this,S,b.frequency,E,-E),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(p){const f=typeof p=="function"?c(this,p):null;this._nativeOscillatorNode.onended=f;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===f?p:g}get type(){return this._nativeOscillatorNode.type}set type(p){this._nativeOscillatorNode.type=p,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(p){this._nativeOscillatorNode.setPeriodicWave(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=p)}start(p=0){if(this._nativeOscillatorNode.start(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=p),this.context.state!=="closed"){Xa(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),Ai(this)&&_l(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(p=0){this._nativeOscillatorNode.stop(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=p)}},QS=(t,e,n,i,a)=>()=>{const r=new WeakMap;let c=null,d=null,p=null;const f=async(g,_)=>{let b=n(g);const S=In(b,_);if(!S){const w={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:c===null?void 0:c,type:b.type};b=e(_,w),d!==null&&b.start(d),p!==null&&b.stop(p)}return r.set(_,b),S?(await t(_,g.detune,b.detune),await t(_,g.frequency,b.frequency)):(await i(_,g.detune,b.detune),await i(_,g.frequency,b.frequency)),await a(g,_,b),b};return{set periodicWave(g){c=g},set start(g){d=g},set stop(g){p=g},render(g,_){const b=r.get(_);return b!==void 0?Promise.resolve(b):f(g,_)}}},$S={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},e4=(t,e,n,i,a,r,c)=>class extends t{constructor(p,f){const g=a(p),_={...$S,...f},b=n(g,_),S=r(g),w=S?i():null;super(p,!1,b,w),this._nativePannerNode=b,this._orientationX=e(this,S,b.orientationX,On,Zn),this._orientationY=e(this,S,b.orientationY,On,Zn),this._orientationZ=e(this,S,b.orientationZ,On,Zn),this._positionX=e(this,S,b.positionX,On,Zn),this._positionY=e(this,S,b.positionY,On,Zn),this._positionZ=e(this,S,b.positionZ,On,Zn),c(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(p){this._nativePannerNode.coneInnerAngle=p}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(p){this._nativePannerNode.coneOuterAngle=p}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(p){this._nativePannerNode.coneOuterGain=p}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(p){this._nativePannerNode.distanceModel=p}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(p){this._nativePannerNode.maxDistance=p}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(p){this._nativePannerNode.panningModel=p}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(p){this._nativePannerNode.refDistance=p}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(p){this._nativePannerNode.rolloffFactor=p}},t4=(t,e,n,i,a,r,c,d,p,f)=>()=>{const g=new WeakMap;let _=null;const b=async(S,w)=>{let E=null,N=r(S);const k={channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation},L={...k,coneInnerAngle:N.coneInnerAngle,coneOuterAngle:N.coneOuterAngle,coneOuterGain:N.coneOuterGain,distanceModel:N.distanceModel,maxDistance:N.maxDistance,panningModel:N.panningModel,refDistance:N.refDistance,rolloffFactor:N.rolloffFactor},R=In(N,w);if("bufferSize"in N)E=i(w,{...k,gain:1});else if(!R){const O={...L,orientationX:N.orientationX.value,orientationY:N.orientationY.value,orientationZ:N.orientationZ.value,positionX:N.positionX.value,positionY:N.positionY.value,positionZ:N.positionZ.value};N=a(w,O)}if(g.set(w,E===null?N:E),E!==null){if(_===null){if(c===null)throw new Error("Missing the native OfflineAudioContext constructor.");const H=new c(6,S.context.length,w.sampleRate),z=e(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});z.connect(H.destination),_=(async()=>{const j=await Promise.all([S.orientationX,S.orientationY,S.orientationZ,S.positionX,S.positionY,S.positionZ].map(async($,oe)=>{const q=n(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe===0?1:0});return await d(H,$,q.offset),q}));for(let $=0;$<6;$+=1)j[$].connect(z,0,$),j[$].start(0);return f(H)})()}const O=await _,I=i(w,{...k,gain:1});await p(S,w,I);const G=[];for(let H=0;H<O.numberOfChannels;H+=1)G.push(O.getChannelData(H));let P=[G[0][0],G[1][0],G[2][0]],M=[G[3][0],G[4][0],G[5][0]],F=i(w,{...k,gain:1}),B=a(w,{...L,orientationX:P[0],orientationY:P[1],orientationZ:P[2],positionX:M[0],positionY:M[1],positionZ:M[2]});I.connect(F).connect(B.inputs[0]),B.connect(E);for(let H=128;H<O.length;H+=128){const z=[G[0][H],G[1][H],G[2][H]],j=[G[3][H],G[4][H],G[5][H]];if(z.some(($,oe)=>$!==P[oe])||j.some(($,oe)=>$!==M[oe])){P=z,M=j;const $=H/w.sampleRate;F.gain.setValueAtTime(0,$),F=i(w,{...k,gain:0}),B=a(w,{...L,orientationX:P[0],orientationY:P[1],orientationZ:P[2],positionX:M[0],positionY:M[1],positionZ:M[2]}),F.gain.setValueAtTime(1,$),I.connect(F).connect(B.inputs[0]),B.connect(E)}}return E}return R?(await t(w,S.orientationX,N.orientationX),await t(w,S.orientationY,N.orientationY),await t(w,S.orientationZ,N.orientationZ),await t(w,S.positionX,N.positionX),await t(w,S.positionY,N.positionY),await t(w,S.positionZ,N.positionZ)):(await d(w,S.orientationX,N.orientationX),await d(w,S.orientationY,N.orientationY),await d(w,S.orientationZ,N.orientationZ),await d(w,S.positionX,N.positionX),await d(w,S.positionY,N.positionY),await d(w,S.positionZ,N.positionZ)),tr(N)?await p(S,w,N.inputs[0]):await p(S,w,N),N};return{render(S,w){const E=g.get(w);return E!==void 0?Promise.resolve(E):b(S,w)}}},n4={disableNormalization:!1},s4=(t,e,n,i)=>class av{constructor(r,c){const d=e(r),p=i({...n4,...c}),f=t(d,p);return n.add(f),f}static[Symbol.hasInstance](r){return r!==null&&typeof r=="object"&&Object.getPrototypeOf(r)===av.prototype||n.has(r)}},i4=(t,e)=>(n,i,a)=>(t(i).replay(a),e(i,n,a)),o4=(t,e,n)=>async(i,a,r)=>{const c=t(i);await Promise.all(c.activeInputs.map((d,p)=>Array.from(d).map(async([f,g])=>{const b=await e(f).render(f,a),S=i.context.destination;!n(f)&&(i!==S||!n(i))&&b.connect(r,g,p)})).reduce((d,p)=>[...d,...p],[]))},a4=(t,e,n)=>async(i,a,r)=>{const c=e(i);await Promise.all(Array.from(c.activeInputs).map(async([d,p])=>{const g=await t(d).render(d,a);n(d)||g.connect(r,p)}))},r4=(t,e,n,i)=>a=>t(hl,()=>hl(a))?Promise.resolve(t(i,i)).then(r=>{if(!r){const c=n(a,512,0,1);a.oncomplete=()=>{c.onaudioprocess=null,c.disconnect()},c.onaudioprocess=()=>a.currentTime,c.connect(a.destination)}return a.startRendering()}):new Promise(r=>{const c=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=d=>{c.disconnect(),r(d.renderedBuffer)},c.connect(a.destination),a.startRendering()}),l4=t=>(e,n)=>{t.set(e,n)},c4=t=>(e,n)=>t.set(e,n),u4=(t,e,n,i,a,r,c,d)=>(p,f)=>n(p).render(p,f).then(()=>Promise.all(Array.from(i(f)).map(g=>n(g).render(g,f)))).then(()=>a(f)).then(g=>(typeof g.copyFromChannel!="function"?(c(g),Hh(g)):e(r,()=>r(g))||d(g),t.add(g),g)),d4={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},f4=(t,e,n,i,a,r)=>class extends t{constructor(d,p){const f=a(d),g={...d4,...p},_=n(f,g),b=r(f),S=b?i():null;super(d,!1,_,S),this._pan=e(this,b,_.pan)}get pan(){return this._pan}},h4=(t,e,n,i,a)=>()=>{const r=new WeakMap,c=async(d,p)=>{let f=n(d);const g=In(f,p);if(!g){const _={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(p,_)}return r.set(p,f),g?await t(p,d.pan,f.pan):await i(p,d.pan,f.pan),tr(f)?await a(d,p,f.inputs[0]):await a(d,p,f),f};return{render(d,p){const f=r.get(p);return f!==void 0?Promise.resolve(f):c(d,p)}}},p4=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},m4=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),a=URL.createObjectURL(n);let r=!1,c=!1;try{await i.audioWorklet.addModule(a);const d=new t(i,"a",{numberOfOutputs:0}),p=i.createOscillator();d.port.onmessage=()=>r=!0,d.onprocessorerror=()=>c=!0,p.connect(d),p.start(0),await i.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(a)}return r&&!c},g4=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{n.oncomplete=()=>{i.disconnect(),a(n.currentTime!==0)},n.startRendering()})},y4=()=>new DOMException("","UnknownError"),v4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},_4=(t,e,n,i,a,r,c)=>class extends t{constructor(p,f){const g=a(p),_={...v4,...f},b=n(g,_),w=r(g)?i():null;super(p,!0,b,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,c(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(p){if(p===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(p.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=p}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(p){this._nativeWaveShaperNode.oversample=p}},x4=(t,e,n)=>()=>{const i=new WeakMap,a=async(r,c)=>{let d=e(r);if(!In(d,c)){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=t(c,f)}return i.set(c,d),tr(d)?await n(r,c,d.inputs[0]):await n(r,c,d),d};return{render(r,c){const d=i.get(c);return d!==void 0?Promise.resolve(d):a(r,c)}}},b4=()=>typeof window>"u"?null:window,C4=(t,e)=>n=>{n.copyFromChannel=(i,a,r=0)=>{const c=t(r),d=t(a);if(d>=n.numberOfChannels)throw e();const p=n.length,f=n.getChannelData(d),g=i.length;for(let _=c<0?-c:0;_+c<p&&_<g;_+=1)i[_]=f[_+c]},n.copyToChannel=(i,a,r=0)=>{const c=t(r),d=t(a);if(d>=n.numberOfChannels)throw e();const p=n.length,f=n.getChannelData(d),g=i.length;for(let _=c<0?-c:0;_+c<p&&_<g;_+=1)f[_+c]=i[_]}},S4=t=>e=>{e.copyFromChannel=(n=>(i,a,r=0)=>{const c=t(r),d=t(a);if(c<e.length)return n.call(e,i,d,c)})(e.copyFromChannel),e.copyToChannel=(n=>(i,a,r=0)=>{const c=t(r),d=t(a);if(c<e.length)return n.call(e,i,d,c)})(e.copyToChannel)},w4=t=>(e,n)=>{const i=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=i),t(e,"buffer",a=>()=>{const r=a.call(e);return r===i?null:r},a=>r=>a.call(e,r===null?i:r))},T4=(t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const a=n.createBufferSource();e(i,()=>{const d=i.numberOfInputs;for(let p=0;p<d;p+=1)a.connect(i,0,p)},()=>a.disconnect(i))},rv=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),lv=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},wl=(t,e,n,i)=>{let a=t;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:r,set:c}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(t,e,{get:n(r),set:i(c)})},E4=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),N4=t=>({...t,channelCount:t.numberOfOutputs}),A4=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},cv=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(i.code!==9)throw i;cv(t,e,n+1e-7)}},M4=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},k4=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},R4=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Xh=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},uv=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Kh=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},I4=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},D4=t=>{t.start=(e=>(n=0,i=0,a)=>{const r=t.buffer,c=r===null?i:Math.min(r.duration,i);r!==null&&c>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,c,a)})(t.start)},dv=(t,e)=>{const n=e.createGain();t.connect(n);const i=(a=>()=>{a.call(t,n),t.removeEventListener("ended",i)})(t.disconnect);t.addEventListener("ended",i),nr(t,n),t.stop=(a=>{let r=!1;return(c=0)=>{if(r)try{a.call(t,c)}catch{n.gain.setValueAtTime(0,c)}else a.call(t,c),r=!0}})(t.stop)},sr=(t,e)=>n=>{const i={value:t};return Object.defineProperties(n,{currentTarget:i,target:i}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},P4=eb(Xo),L4=ab(Xo),O4=vC(Pu),fv=new WeakMap,U4=OC(fv),Os=Jb(new Map,new WeakMap),$s=b4(),hv=fS(Os,si),Qh=LC(Un),wn=o4(Un,Qh,Jo),q4=db(hv,Ft,wn),Pt=VC(Du),Ri=VS($s),At=nS(Ri),pv=new WeakMap,mv=AC(sr),Tl=gS($s),$h=QC(Tl),ep=$C($s),gv=eS($s),pl=vS($s),on=Ob(tb(j5),ob(P4,L4,yu,O4,vu,Un,U4,vl,Ft,Xo,Ai,Jo,ru),Os,WC(Sh,vu,Un,Ft,fl,Ai),si,Lu,qn,pC(yu,Sh,Un,Ft,fl,Pt,Ai,At),bC(pv,Un,Is),mv,Pt,$h,ep,gv,At,pl),V4=ub(on,q4,si,hv,Pt,At),tp=new WeakSet,qy=hS($s),yv=rC(new Uint32Array(1)),np=C4(yv,si),sp=S4(yv),vv=hb(tp,Os,qn,qy,Ri,p4(qy),np,sp),Ou=rb(Xn),_v=a4(Qh,xl,Jo),ii=tC(_v),ir=mS(Ou,Os,M4,k4,R4,Xh,uv,Kh,D4,w4(wl),dv),oi=i4(UC(xl),_v),F4=gb(ii,ir,Ft,oi,wn),Us=Ub(nb(z5),pv,zh,qb,Jx,Zx,Xx,Kx,Qx,xh,G5,Tl,cv),G4=mb(on,F4,Us,vn,ir,Pt,At,sr),B4=Tb(on,Eb,si,vn,yS(Xn,wl),Pt,At,wn),j4=Wb(ii,iv,Ft,oi,wn),Ko=c4(fv),z4=Yb(on,Us,j4,Lu,iv,Pt,At,Ko),So=uS(Xo,ep),H4=T4(vn,So),wo=TS(Tl,H4),Y4=Kb(wo,Ft,wn),W4=Xb(on,Y4,wo,Pt,At),J4=eC(Cl,Ft,wn),Z4=$b(on,J4,Cl,Pt,At,N4),X4=AS(Ou,ir,Xn,So),or=NS(Ou,Os,X4,Xh,Kh),K4=aC(ii,or,Ft,oi,wn),Q4=oC(on,Us,K4,or,Pt,At,sr),xv=MS(qn,wl),$4=uC(xv,Ft,wn),ew=cC(on,$4,xv,Pt,At,Ko),tw=yC(ii,ov,Ft,oi,wn),nw=gC(on,Us,tw,ov,Pt,At,Ko),bv=kS(qn),sw=TC(ii,bv,Ft,oi,wn),iw=wC(on,Us,sw,bv,qn,Pt,At,Ko),ow=DC(ii,Xn,Ft,oi,wn),aw=IC(on,Us,ow,Xn,Pt,At),rw=PS(Lu,vn,Sl,qn),Uu=r4(Os,Xn,Sl,g4(Xn,Ri)),lw=YC(ir,Ft,Ri,wn,Uu),cw=RS(rw),uw=zC(on,cw,lw,Pt,At,Ko),dw=Nb(Us,wo,or,Sl,qn,rv,At,wl),Cv=new WeakMap,fw=cS(B4,dw,mv,At,Cv,sr),Sv=FS(Ou,Os,Xh,uv,Kh,dv),hw=QS(ii,Sv,Ft,oi,wn),pw=KS(on,Us,Sv,hw,Pt,At,sr),wv=sC(ir),mw=WS(wv,vn,Xn,lv,So),qu=YS(wv,vn,mw,lv,So,Tl,wl),gw=BS(yu,vn,wo,Xn,Sl,qu,qn,vu,rv,So),Tv=GS(gw),yw=t4(ii,wo,or,Xn,Tv,Ft,Ri,oi,wn,Uu),vw=e4(on,Us,Tv,yw,Pt,At,Ko),_w=jS(si),xw=s4(_w,Pt,new WeakSet,A4),bw=HS(wo,Cl,Xn,qu,qn,So),Ev=zS(bw,qn),Cw=h4(ii,Ev,Ft,oi,wn),Sw=f4(on,Us,Ev,Cw,Pt,At),ww=x4(qu,Ft,wn),Tw=_4(on,vn,qu,ww,Pt,At,Ko),Nv=sS($s),ip=MC($s),Av=new WeakMap,Ew=FC(Av,Ri),Nw=Nv?ib(Os,qn,NC($s),ip,kC($x),Pt,Ew,At,pl,new WeakMap,new WeakMap,m4(pl,Ri),$s):void 0,Aw=tS($h,At),Mw=hC(tp,Os,fC,EC,new WeakSet,Pt,Aw,mu,hl,np,sp),Mv=zb(Nw,V4,vv,G4,z4,W4,Z4,Q4,ew,Mw,nw,iw,aw,uw,fw,pw,vw,xw,Sw,Tw),kw=iS(on,LS,Pt,At),Rw=aS(on,OS,Pt,At),Iw=rS(on,US,Pt,At),Dw=qS(vn,At),Pw=lS(on,Dw,Pt),Lw=wb(Mv,vn,qn,y4,kw,Rw,Iw,Pw,Tl),op=GC(Cv),Ow=lb(op),kv=nC(si),Uw=_C(op),Rv=CC(si),Iv=new WeakMap,qw=PC(Iv,Is),Vw=wS(kv,si,vn,wo,Cl,or,Xn,Sl,qn,Rv,ip,qw,So),Fw=xS(vn,Vw,Xn,qn,So),Gw=jb(ii,kv,ir,wo,Cl,or,Xn,Uw,Rv,ip,Ft,pl,Ri,oi,wn,Uu),Bw=qC(Av),jw=l4(Iv),Vy=Nv?Fb(Ow,on,Us,Gw,Fw,Un,Bw,Pt,At,pl,E4,jw,I4,sr):void 0,zw=dC(qn,Ri),Hw=u4(tp,Os,Qh,op,Uu,mu,np,sp),Yw=ZS(Mv,Os,vn,zw,Hw),Ww=JC(Du,$h),Jw=ZC(jh,ep),Zw=XC(zh,gv),Xw=KC(Du,At);function cs(t){return t===void 0}function et(t){return t!==void 0}function Kw(t){return typeof t=="function"}function Ds(t){return typeof t=="number"}function vo(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function Dv(t){return typeof t=="boolean"}function kn(t){return Array.isArray(t)}function ei(t){return typeof t=="string"}function Qc(t){return ei(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function He(t,e){if(!t)throw new Error(e)}function Mi(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Pv(t){!t.isOffline&&t.state!=="running"&&Vu('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Lv=!1,Fy=!1;function Gy(t){Lv=t}function Qw(t){cs(t)&&Lv&&!Fy&&(Fy=!0,Vu("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Ov=console;function $w(...t){Ov.log(...t)}function Vu(...t){Ov.warn(...t)}function eT(t){return new Lw(t)}function tT(t,e,n){return new Yw(t,e,n)}const as=typeof self=="object"?self:null,nT=as&&(as.hasOwnProperty("AudioContext")||as.hasOwnProperty("webkitAudioContext"));function sT(t,e,n){return He(et(Vy),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof as?.BaseAudioContext?as?.AudioWorkletNode:Vy)(t,e,n)}function qs(t,e,n,i){var a=arguments.length,r=a<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,i);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(r=(a<3?c(r):a>3?c(e,n,r):c(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r}function sn(t,e,n,i){function a(r){return r instanceof n?r:new n(function(c){c(r)})}return new(n||(n=Promise))(function(r,c){function d(g){try{f(i.next(g))}catch(_){c(_)}}function p(g){try{f(i.throw(g))}catch(_){c(_)}}function f(g){g.done?r(g.value):a(g.value).then(d,p)}f((i=i.apply(t,e||[])).next())})}class iT{constructor(e,n,i,a){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Zo(t){return Zw(t)}function _o(t){return Jw(t)}function lu(t){return Xw(t)}function Va(t){return Ww(t)}function oT(t){return t instanceof vv}function aT(t,e){return t==="value"||Zo(e)||_o(e)||oT(e)}function xo(t,...e){if(!e.length)return t;const n=e.shift();if(vo(t)&&vo(n))for(const i in n)aT(i,n[i])?t[i]=n[i]:vo(n[i])?(t[i]||Object.assign(t,{[i]:{}}),xo(t[i],n[i])):Object.assign(t,{[i]:n[i]});return xo(t,...e)}function rT(t,e){return t.length===e.length&&t.every((n,i)=>e[i]===n)}function Ae(t,e,n=[],i){const a={},r=Array.from(e);if(vo(r[0])&&i&&!Reflect.has(r[0],i)&&(Object.keys(r[0]).some(d=>Reflect.has(t,d))||(xo(a,{[i]:r[0]}),n.splice(n.indexOf(i),1),r.shift())),r.length===1&&vo(r[0]))xo(a,r[0]);else for(let c=0;c<n.length;c++)et(r[c])&&(a[n[c]]=r[c]);return xo(t,a)}function lT(t){return t.constructor.getDefaults()}function Qs(t,e){return cs(t)?e:t}function ks(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}class Ii{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||as&&this.toString()===as.TONE_DEBUG_CLASS)&&$w(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ii.version=F5;const ap=1e-6;function Ka(t,e){return t>e+ap}function Ah(t,e){return Ka(t,e)||As(t,e)}function Cu(t,e){return t+ap<e}function As(t,e){return Math.abs(t-e)<ap}function cT(t,e,n){return Math.max(Math.min(t,n),e)}class xs extends Ii{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Ae(xs.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(He(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];He(Ah(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const i=this._search(e,n);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const i=this._search(e,n);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const i=this._search(e);return i-1>=0?this._timeline[i-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(As(this._timeline[n].time,e)){for(let i=n;i>=0&&As(this._timeline[i].time,e);i--)n=i;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Ah(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let i=0;const a=this._timeline.length;let r=a;if(a>0&&this._timeline[a-1][n]<=e)return a-1;for(;i<r;){let c=Math.floor(i+(r-i)/2);const d=this._timeline[c],p=this._timeline[c+1];if(As(d[n],e)){for(let f=c;f<this._timeline.length;f++){const g=this._timeline[f];if(As(g[n],e))c=f;else break}return c}else{if(Cu(d[n],e)&&Ka(p[n],e))return c;Ka(d[n],e)?r=c:i=c+1}}return-1}_iterate(e,n=0,i=this._timeline.length-1){this._timeline.slice(n,i+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const i=this._search(e);return i!==-1&&this._iterate(n,0,i),this}forEachAfter(e,n){const i=this._search(e);return this._iterate(n,i+1),this}forEachBetween(e,n,i){let a=this._search(e),r=this._search(n);return a!==-1&&r!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[r].time===n&&(r-=1),this._iterate(i,a,r)):a===-1&&this._iterate(i,0,r),this}forEachFrom(e,n){let i=this._search(e);for(;i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(n,i+1),this}forEachAtTime(e,n){const i=this._search(e);if(i!==-1&&As(this._timeline[i].time,e)){let a=i;for(let r=i;r>=0&&As(this._timeline[r].time,e);r--)a=r;this._iterate(r=>{n(r)},a,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Uv=[];function Fu(t){Uv.push(t)}function uT(t){Uv.forEach(e=>e(t))}const qv=[];function Gu(t){qv.push(t)}function dT(t){qv.forEach(e=>e(t))}class El extends Ii{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(a=>{cs(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(n)}),this}once(e,n){const i=(...a)=>{n(...a),this.off(e,i)};return this.on(e,i),this}off(e,n){return e.split(/\W+/).forEach(a=>{if(cs(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(cs(n))this._events[a]=[];else{const r=this._events[a];for(let c=r.length-1;c>=0;c--)r[c]===n&&r.splice(c,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(let a=0,r=i.length;a<r;a++)i[a].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const i=Object.getOwnPropertyDescriptor(El.prototype,n);Object.defineProperty(e.prototype,n,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class Vv extends El{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Nl extends Vv{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new xs,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=Ae(Nl.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=eT({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new iT(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(uT(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,i){return this._context.createBuffer(e,n,i)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,i){return this._context.createPeriodicWave(e,n,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return He(Va(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return He(Va(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return He(Va(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){He(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){He(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){He(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){He(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return sT(this.rawContext,e,n)}addAudioWorkletModule(e){return sn(this,void 0,void 0,function*(){He(et(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return sn(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Va(this._context)?this._context.resume():Promise.resolve()}close(){return sn(this,void 0,void 0,function*(){Va(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&dT(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),i=n.getChannelData(0);for(let r=0;r<i.length;r++)i[r]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=n,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:i+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const i=++this._timeoutIds,a=()=>{const r=this.now();this._timeouts.add({callback:()=>{e(),a()},id:i,time:r+n})};return a(),i}}class fT extends Vv{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,i){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return sn(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function ht(t,e){kn(e)?e.forEach(n=>ht(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function rp(t,e){kn(e)?e.forEach(n=>rp(t,n)):Object.defineProperty(t,e,{writable:!0})}const yt=()=>{};class vt extends Ii{constructor(){super(),this.name="ToneAudioBuffer",this.onload=yt;const e=Ae(vt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,ei(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:yt,onload:yt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:rs().sampleRate}set(e){return e instanceof vt?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return sn(this,void 0,void 0,function*(){const n=vt.load(e).then(i=>{this.set(i),this.onload(this)});vt.downloads.push(n);try{yield n}finally{const i=vt.downloads.indexOf(n);vt.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=kn(e)&&e[0].length>0,i=n?e.length:1,a=n?e[0].length:e.length,r=rs(),c=r.createBuffer(i,a,r.sampleRate),d=!n&&i===1?[e]:e;for(let p=0;p<i;p++)c.copyToChannel(d[p],p);return this._buffer=c,this}toMono(e){if(Ds(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const i=this.numberOfChannels;for(let a=0;a<i;a++){const r=this.toArray(a);for(let c=0;c<r.length;c++)n[c]+=r[c]}n=n.map(a=>a/i),this.fromArray(n)}return this}toArray(e){if(Ds(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){He(this.loaded,"Buffer is not loaded");const i=Math.floor(e*this.sampleRate),a=Math.floor(n*this.sampleRate);He(i<a,"The start time must be less than the end time");const r=a-i,c=rs().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)c.copyToChannel(this.getChannelData(d).subarray(i,a),d);return new vt(c)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new vt().fromArray(e)}static fromUrl(e){return sn(this,void 0,void 0,function*(){return yield new vt().load(e)})}static load(e){return sn(this,void 0,void 0,function*(){const n=vt.baseUrl===""||vt.baseUrl.endsWith("/")?vt.baseUrl:vt.baseUrl+"/",i=yield fetch(n+e);if(!i.ok)throw new Error(`could not load url: ${e}`);const a=yield i.arrayBuffer();return yield rs().decodeAudioData(a)})}static supportsType(e){const n=e.split("."),i=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return sn(this,void 0,void 0,function*(){for(yield Promise.resolve();vt.downloads.length;)yield vt.downloads[0]})}}vt.baseUrl="";vt.downloads=[];class lp extends Nl{constructor(){super({clockSource:"offline",context:lu(arguments[0])?arguments[0]:tT(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:lu(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=lu(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return sn(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const i=Math.floor(this.sampleRate/128);e&&n%i===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return sn(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new vt(n)})}close(){return Promise.resolve()}}const Fv=new fT;let Ho=Fv;function rs(){return Ho===Fv&&nT&&Gv(new Nl),Ho}function Gv(t,e=!1){e&&Ho.dispose(),Va(t)?Ho=new Nl(t):lu(t)?Ho=new lp(t):Ho=t}function cu(){return Ho.resume()}if(as&&!as.TONE_SILENCE_LOGGING){const e=` * Tone.js v${F5} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function hT(t){return Math.pow(10,t/20)}function pT(t){return 20*(Math.log(t)/Math.LN10)}function Su(t){return Math.pow(2,t/12)}let Bu=440;function mT(){return Bu}function gT(t){Bu=t}function Yo(t){return Math.round(Bv(t))}function Bv(t){return 69+12*Math.log2(t/Bu)}function jv(t){return Bu*Math.pow(2,(t-69)/12)}class cp extends Ii{constructor(e,n,i){super(),this.defaultUnits="s",this._val=n,this._units=i,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const i=parseInt(e,10),a=n==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/i)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,i)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(a+=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(a+=this._beatsToUnits(parseFloat(i)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof cp&&this.fromType(this._val),cs(this._val))return this._noArg();if(ei(this._val)&&cs(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(vo(this._val)){let e=0;for(const n in this._val)if(et(this._val[n])){const i=this._val[n],a=new this.constructor(this.context,n).valueOf()*i;e+=a}return e}if(et(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return ei(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Rs extends cp{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Rs(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const i=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),d=Math.round(a/i)*i-a;return a+d*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let r=1;r<9;r++){const c=Math.pow(2,r);n.push(c+"n."),n.push(c+"n"),n.push(c+"t")}n.push("0");let i=n[0],a=new Rs(this.context,n[0]).toSeconds();return n.forEach(r=>{const c=new Rs(this.context,r).toSeconds();Math.abs(c-e)<Math.abs(a-e)&&(i=r,a=c)}),i}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const i=Math.floor(n/this._getTimeSignature());let a=n%1*4;n=Math.floor(n)%this._getTimeSignature();const r=a.toString();return r.length>3&&(a=parseFloat(parseFloat(r).toFixed(3))),[i,n,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Yo(this.toFrequency())}_now(){return this.context.now()}}class ls extends Rs{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return mT()}static set A4(e){gT(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:ls.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const a=yT[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?a:ls.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,i){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(a*=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(a*=this._beatsToUnits(parseFloat(i)/4)),a}}})}transpose(e){return new ls(this.context,this.valueOf()*Su(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Yo(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/ls.A4);let i=Math.round(12*n)+57;const a=Math.floor(i/12);return a<0&&(i+=-12*a),vT[i%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return jv(e)}static ftom(e){return Yo(e)}}const yT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},vT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class za extends Rs{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Rn extends Ii{constructor(){super();const e=Ae(Rn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:rs()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return Qw(e),new Rs(this.context,e).toSeconds()}toFrequency(e){return new ls(this.context,e).toFrequency()}toTicks(e){return new za(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(i=>{cs(e[i])&&delete n[i]}),n}get(){const e=lT(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const i=this[n];et(i)&&et(i.value)&&et(i.setValueAtTime)?e[n]=i.value:i instanceof Rn?e[n]=i._getPartialProperties(e[n]):kn(i)||Ds(i)||ei(i)||Dv(i)?e[n]=i:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&et(this[n])&&(this[n]&&et(this[n].value)&&et(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Rn?this[n].set(e[n]):this[n]=e[n])}),this}}class Al extends xs{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,i){return Mi(n,0),this.add(Object.assign({},i,{state:e,time:n})),this}getLastState(e,n){const i=this._search(n);for(let a=i;a>=0;a--){const r=this._timeline[a];if(r.state===e)return r}}getNextState(e,n){const i=this._search(n);if(i!==-1)for(let a=i;a<this._timeline.length;a++){const r=this._timeline[a];if(r.state===e)return r}}}class nt extends Rn{constructor(){const e=Ae(nt.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,He(et(e.param)&&(Zo(e.param)||e.param instanceof nt),"param must be an AudioParam");!Zo(e.param);)e.param=e.param._param;this._swappable=et(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new xs(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,et(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Rn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return et(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return et(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return et(this.maxValue)&&et(this.minValue)&&Mi(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?hT(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?pT(e):e}setValueAtTime(e,n){const i=this.toSeconds(n),a=this._fromType(e);return He(isFinite(a)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,i),this._events.add({time:i,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,i),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),i=this._events.getAfter(n),a=this._events.get(n);let r=this._initialValue;if(a===null)r=this._initialValue;else if(a.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const c=this._events.getBefore(a.time);let d;c===null?d=this._initialValue:d=c.value,a.type==="setTargetAtTime"&&(r=this._exponentialApproach(a.time,d,a.value,a.constant,n))}else if(i===null)r=a.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let c=a.value;if(a.type==="setTargetAtTime"){const d=this._events.getBefore(a.time);d===null?c=this._initialValue:c=d.value}i.type==="linearRampToValueAtTime"?r=this._linearInterpolate(a.time,c,i.time,i.value,n):r=this._exponentialInterpolate(a.time,c,i.time,i.value,n)}else r=a.value;return this._toType(r)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const i=this._fromType(e),a=this.toSeconds(n);return He(isFinite(i)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(i),this._events.add({time:a,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(i,a),this}exponentialRampToValueAtTime(e,n){let i=this._fromType(e);i=As(i,0)?this._minOutput:i,this._assertRange(i);const a=this.toSeconds(n);return He(isFinite(i)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(i,a),this}exponentialRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(e,i+this.toSeconds(n)),this}linearRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(e,i+this.toSeconds(n)),this}targetRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(e,i,n),this}exponentialApproachValueAtTime(e,n,i){n=this.toSeconds(n),i=this.toSeconds(i);const a=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(e,n,a),this.cancelAndHoldAtTime(n+i*.9),this.linearRampToValueAtTime(e,n+i),this}setTargetAtTime(e,n,i){const a=this._fromType(e);He(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(n);return this._assertRange(a),He(isFinite(a)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:i,time:r,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,r,i),this._param.setTargetAtTime(a,r,i),this}setValueCurveAtTime(e,n,i,a=1){i=this.toSeconds(i),n=this.toSeconds(n);const r=this._fromType(e[0])*a;this.setValueAtTime(this._toType(r),n);const c=i/(e.length-1);for(let d=1;d<e.length;d++){const p=this._fromType(e[d])*a;this.linearRampToValueAtTime(this._toType(p),n+d*c)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return He(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),i=this._fromType(this.getValueAtTime(n));He(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+i);const a=this._events.get(n),r=this._events.getAfter(n);return a&&As(a.time,n)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),r.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),n):r.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),n)),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}rampTo(e,n=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,i):this.linearRampTo(e,n,i),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const i=this._events.get(n);if(i&&i.type==="setTargetAtTime"){const a=this._events.getAfter(i.time),r=a?a.time:n+2,c=(r-n)/10;for(let d=n;d<r;d+=c)e.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){He(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,i,a,r){return i+(n-i)*Math.exp(-(r-e)/a)}_linearInterpolate(e,n,i,a,r){return n+(a-n)*((r-e)/(i-e))}_exponentialInterpolate(e,n,i,a,r){return n*Math.pow(a/n,(r-e)/(i-e))}}class De extends Rn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return et(this.input)?Zo(this.input)||this.input instanceof nt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return et(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return et(e)&&(e instanceof De||_o(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(i=>{i.channelCount=e.channelCount,i.channelCountMode=e.channelCountMode,i.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();He(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,i=0){return Ps(this,e,n,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Vu("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,i=0){return zv(this,e,n,i),this}chain(...e){return ml(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),et(this.input)&&(this.input instanceof De?this.input.dispose():_o(this.input)&&this.input.disconnect()),et(this.output)&&(this.output instanceof De?this.output.dispose():_o(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ml(...t){const e=t.shift();t.reduce((n,i)=>(n instanceof De?n.connect(i):_o(n)&&Ps(n,i),i),e)}function Ps(t,e,n=0,i=0){for(He(et(t),"Cannot connect from undefined node"),He(et(e),"Cannot connect to undefined node"),(e instanceof De||_o(e))&&He(e.numberOfInputs>0,"Cannot connect to node with no inputs"),He(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof De||e instanceof nt;)et(e.input)&&(e=e.input);for(;t instanceof De;)et(t.output)&&(t=t.output);Zo(e)?t.connect(e,n):t.connect(e,n,i)}function zv(t,e,n=0,i=0){if(et(e))for(;e instanceof De;)e=e.input;for(;!_o(t);)et(t.output)&&(t=t.output);Zo(e)?t.disconnect(e,n):_o(e)?t.disconnect(e,n,i):t.disconnect()}class at extends De{constructor(){const e=Ae(at.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new nt({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ht(this,"gain")}static getDefaults(){return Object.assign(De.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Qa extends De{constructor(e){super(e),this.onended=yt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new at({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const i=this.toSeconds(n);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(De.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:yt})}_startGain(e,n=1){He(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=e+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+i):this._gainNode.gain.exponentialApproachValueAtTime(n,e,i)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){He(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==yt&&(this.onended(this),this.onended=yt,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),He(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=yt,this}}class up extends Qa{constructor(){const e=Ae(up.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Ps(this._source,this._gainNode),this.offset=new nt({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Qa.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class _t extends De{constructor(){const e=Ae(_t.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new up({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(De.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,i=0){return ju(this,e,n,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,i){return this._param.exponentialRampTo(e,n,i),this}linearRampTo(e,n,i){return this._param.linearRampTo(e,n,i),this}targetRampTo(e,n,i){return this._param.targetRampTo(e,n,i),this}exponentialApproachValueAtTime(e,n,i){return this._param.exponentialApproachValueAtTime(e,n,i),this}setTargetAtTime(e,n,i){return this._param.setTargetAtTime(e,n,i),this}setValueCurveAtTime(e,n,i,a){return this._param.setValueCurveAtTime(e,n,i,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,i){return this._param.rampTo(e,n,i),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function ju(t,e,n,i){(e instanceof nt||Zo(e)||e instanceof _t&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof _t&&(e.overridden=!0)),Ps(t,e,n,i)}class dp extends nt{constructor(){const e=Ae(dp.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new xs(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(nt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,i){n=this.toSeconds(n),this.setRampPoint(n);const a=this._fromType(e),r=this._events.get(n),c=Math.round(Math.max(1/i,1));for(let d=0;d<=c;d++){const p=i*d+n,f=this._exponentialApproach(r.time,r.value,a,i,p);this.linearRampToValueAtTime(this._toType(f),p)}return this}setValueAtTime(e,n){const i=this.toSeconds(n);super.setValueAtTime(e,n);const a=this._events.get(i),r=this._events.previousEvent(a),c=this._getTicksUntilEvent(r,i);return a.ticks=Math.max(c,0),this}linearRampToValueAtTime(e,n){const i=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const a=this._events.get(i),r=this._events.previousEvent(a),c=this._getTicksUntilEvent(r,i);return a.ticks=Math.max(c,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const i=this._fromType(e),a=this._events.get(n),r=Math.round(Math.max((n-a.time)*10,1)),c=(n-a.time)/r;for(let d=0;d<=r;d++){const p=c*d+a.time,f=this._exponentialInterpolate(a.time,a.value,n,i,p);this.linearRampToValueAtTime(this._toType(f),p)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(cs(e.ticks)){const c=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(c,e.time)}const i=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(n));const r=this._events.get(n);return r&&r.time===n&&r.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(i+a)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),i=this._events.get(n);return Math.max(this._getTicksUntilEvent(i,n),0)}getDurationOfTicks(e,n){const i=this.toSeconds(n),a=this.getTicksAtTime(n);return this.getTimeOfTick(a+e)-i}getTimeOfTick(e){const n=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&i&&i.type==="linearRampToValueAtTime"&&n.value!==i.value){const a=this._fromType(this.getValueAtTime(n.time)),c=(this._fromType(this.getValueAtTime(i.time))-a)/(i.time-n.time),d=Math.sqrt(Math.pow(a,2)-2*c*(n.ticks-e)),p=(-a+d)/c,f=(-a-d)/c;return(p>0?p:f)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const i=this.toSeconds(n),a=this.toSeconds(e),r=this.getTicksAtTime(i);return this.getTicksAtTime(i+a)-r}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class fp extends _t{constructor(){const e=Ae(fp.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new dp({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(_t.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class hp extends Rn{constructor(){const e=Ae(hp.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Al,this._tickOffset=new xs,this._ticksAtTime=new xs,this._secondsAtTime=new xs,this.frequency=new fp({context:this.context,units:e.units,value:e.frequency}),ht(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Rn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const i=this.toSeconds(e);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),et(n)&&this.setTicksAtTime(n,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const i=this._state.get(n);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),i=this._state.getLastState("stopped",n),a=this._ticksAtTime.get(n),r={state:"paused",time:n};this._state.add(r);let c=a||i,d=a?a.ticks:0,p=null;return this._state.forEachBetween(c.time,n+this.sampleTime,f=>{let g=c.time;const _=this._tickOffset.get(f.time);_&&_.time>=c.time&&(d=_.ticks,g=_.time),c.state==="started"&&f.state!=="started"&&(d+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(g),f.time!==r.time&&(p={state:f.state,time:f.time,ticks:d})),c=f}),this._state.remove(r),p&&this._ticksAtTime.add(p),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),i=this.frequency.timeToTicks(e,n);this.setTicksAtTime(i,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);const a=this._secondsAtTime.get(e);let r=a||n,c=a?a.seconds:0,d=null;return this._state.forEachBetween(r.time,e+this.sampleTime,p=>{let f=r.time;const g=this._tickOffset.get(p.time);g&&g.time>=r.time&&(c=g.seconds,f=g.time),r.state==="started"&&p.state!=="started"&&(c+=p.time-f,p.time!==i.time&&(d={state:p.state,time:p.time,seconds:c})),r=p}),this._state.remove(i),d&&this._secondsAtTime.add(d),c}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const i=this._tickOffset.get(n),a=this._state.get(n),r=Math.max(i.time,a.time),c=this.frequency.getTicksAtTime(r)+e-i.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(e,n,i){let a=this._state.get(e);this._state.forEachBetween(e,n,c=>{a&&a.state==="started"&&c.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),c.time-this.sampleTime,i),a=c});let r=null;if(a&&a.state==="started"){const c=Math.max(a.time,e),d=this.frequency.getTicksAtTime(c),p=this.frequency.getTicksAtTime(a.time),f=d-p;let g=Math.ceil(f)-f;g=As(g,1)?0:g;let _=this.frequency.getTimeOfTick(d+g);for(;_<n;){try{i(_,Math.round(this.getTicksAtTime(_)))}catch(b){r=b;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class zu extends Rn{constructor(){const e=Ae(zu.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=yt,this._lastUpdate=0,this._state=new Al("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new hp({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ht(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Rn.getDefaults(),{callback:yt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Pv(this.context);const i=this.toSeconds(e);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,n),i<this._lastUpdate&&this.emit("start",i,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const i=this.toSeconds(n),a=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(a+e,i)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,i=>{switch(i.state){case"started":const a=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,a);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(e,n,(i,a)=>{this.callback(i,a)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}El.mixin(zu);class Wo extends De{constructor(){const e=Ae(Wo.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new nt({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),ht(this,"delayTime")}static getDefaults(){return Object.assign(De.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class ar extends De{constructor(){const e=Ae(ar.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new at({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ht(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class pp extends De{constructor(){const e=Ae(pp.getDefaults(),arguments);super(e),this.name="Destination",this.input=new ar({context:this.context}),this.output=new at({context:this.context}),this.volume=this.input.volume,ml(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ml(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Fu(t=>{t.destination=new pp({context:t})});Gu(t=>{t.destination.dispose()});class _T extends De{constructor(){super(...arguments),this.name="Listener",this.positionX=new nt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new nt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new nt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new nt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new nt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new nt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new nt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new nt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new nt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(De.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Fu(t=>{t.listener=new _T({context:t})});Gu(t=>{t.listener.dispose()});class mp extends Ii{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Ae(mp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const i=e.urls[n];this.add(n,i,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:yt,onload:yt,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return He(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,i=yt,a=yt){return ei(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new vt(this.baseUrl+n,i,a))):this._buffers.set(e.toString(),new vt(n,i,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class wu extends ls{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Yo(super._frequencyToUnits(e))}_ticksToUnits(e){return Yo(super._ticksToUnits(e))}_beatsToUnits(e){return Yo(super._beatsToUnits(e))}_secondsToUnits(e){return Yo(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return jv(this.toMidi())}transpose(e){return new wu(this.context,this.toMidi()+e)}}class Zt extends za{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class xT extends Rn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new xs,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Fu(t=>{t.draw=new xT({context:t})});Gu(t=>{t.draw.dispose()});class bT extends Ii{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){He(et(e.time),"Events must have a time property"),He(et(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new CT(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const i of n)if(i.event===e){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let i,a=null;if(n>0)if(e.left.right===null)i=e.left,i.right=e.right,a=i;else{for(i=e.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,a=i.parent,i.left=e.left,i.right=e.right)}else if(e.right.left===null)i=e.right,i.left=e.left,a=i;else{for(i=e.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,a=i.parent,i.left=e.left,i.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=i:e.parent.right=i:this._setRoot(i),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const n=e.parent,i=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),n!==null?i?n.left=a:n.right=a:this._setRoot(a)}_rotateRight(e){const n=e.parent,i=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),n!==null?i?n.left=a:n.right=a:this._setRoot(a)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let i=n[0];for(let a=1;a<n.length;a++)n[a].low>i.low&&(i=n[a]);return i.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(i=>n.push(i)),n.forEach(i=>{i.event&&e(i.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const i=[];this._root.search(e,i),i.forEach(a=>{a.event&&n(a.event)})}return this}forEachFrom(e,n){if(this._root!==null){const i=[];this._root.searchAfter(e,i),i.forEach(a=>{a.event&&n(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class CT{constructor(e,n,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ST extends Ii{constructor(e){super(),this.name="TimelineValue",this._timeline=new xs({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class ti extends De{constructor(){super(Ae(ti.getDefaults(),arguments,["context"]))}connect(e,n=0,i=0){return ju(this,e,n,i),this}}class rr extends ti{constructor(){const e=Ae(rr.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,kn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Kw(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(_t.getDefaults(),{length:1024})}setMap(e,n=1024){const i=new Float32Array(n);for(let a=0,r=n;a<r;a++){const c=a/(r-1)*2-1;i[a]=e(c,a)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(i=>i.includes(e));He(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Hu extends ti{constructor(){const e=Ae(Hu.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new rr({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(ti.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class bo{constructor(e,n){this.id=bo._eventId++,this._remainderTime=0;const i=Object.assign(bo.getDefaults(),n);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:yt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}bo._eventId=0;class gp extends bo{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(gp.getDefaults(),n);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},bo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Cu(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Zt(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Cu(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Zt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Ka(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Yu extends Rn{constructor(){const e=Ae(Yu.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new ST(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new xs,this._repeatedEvents=new bT,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new zu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ht(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Rn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const i=n%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(i*Math.PI)*this._swingAmount;e+=new Zt(this.context,this._swingTicks*2/3).toSeconds()*a}Gy(!0),this._timeline.forEachAtTime(n,i=>i.invoke(e)),Gy(!1)}schedule(e,n){const i=new bo(this,{callback:e,time:new za(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(e,n,i,a=1/0){const r=new gp(this,{callback:e,duration:new Rs(this.context,a).toTicks(),interval:new Rs(this.context,n).toTicks(),time:new za(this.context,i).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(e,n){const i=new bo(this,{callback:e,once:!0,time:new za(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(n,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Zt(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let i;return et(n)&&(i=this.toTicks(n)),this._clock.start(e,i),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){kn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Rs(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Rs(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Zt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Zt(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),i=this._clock.frequency.timeToTicks(e,n);this.ticks=i}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(n),a=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,n),r=n+a;this.emit("stop",r),this._clock.setTicksAtTime(e,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),i=this.getTicksAtTime(n),a=e-i%e;return this._clock.nextTickTime(a,n)}}syncSignal(e,n){const i=this.now();let a=this.bpm,r=1/(60/a.getValueAtTime(i)/this.PPQ),c=[];if(e.units==="time"){const p=.015625/r,f=new at(p),g=new Hu(-1),_=new at(p);a.chain(f,g,_),a=_,r=1/r,c=[f,g,_]}n||(e.getValueAtTime(i)!==0?n=e.getValueAtTime(i)/r:n=0);const d=new at(n);return a.connect(d),d.connect(e._param),c.push(d),this._syncedSignals.push({initial:e.value,nodes:c,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const i=this._syncedSignals[n];i.signal===e&&(i.nodes.forEach(a=>a.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),rp(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}El.mixin(Yu);Fu(t=>{t.transport=new Yu({context:t})});Gu(t=>{t.transport.dispose()});class Sn extends De{constructor(e){super(e),this.input=void 0,this._state=new Al("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=yt,this._syncedStop=yt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ar({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ht(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,onstop:yt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,i){let a=cs(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")He(Ka(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,n,i);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const r=this._state.get(a);r&&(r.offset=this.toSeconds(Qs(n,0)),r.duration=i?this.toSeconds(i):void 0);const c=this.context.transport.schedule(d=>{this._start(d,n,i)},a);this._scheduled.push(c),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else Pv(this.context),this._start(a,n,i);return this}stop(e){let n=cs(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||et(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const i=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(i)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Ka(n,0)){const i=this._state.get(n);if(i&&i.state==="started"&&i.time!==n){const a=n-this.toSeconds(i.time);let r;i.duration&&(r=this.toSeconds(i.duration)-a),this._start(e,this.toSeconds(i.offset)+a,r)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=yt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ml extends Qa{constructor(){const e=Ae(Ml.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Ps(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new nt({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new vt(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Qa.getDefaults(),{url:new vt,loop:!1,loopEnd:0,loopStart:0,onload:yt,onerror:yt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,i,a=1){He(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(e);this._startGain(r,a),this.loop?n=Qs(n,this.loopStart):n=Qs(n,0);let c=Math.max(this.toSeconds(n),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),f=d-p;Ah(c,d)&&(c=(c-p)%f+p),As(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Cu(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,c)),et(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(r+d)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Tu extends Sn{constructor(){const e=Ae(Tu.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Sn.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(He(e in By,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=By[this._type];this._source=new Ml({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const La=44100*5,yh=2,Ti={brown:null,pink:null,white:null},By={get brown(){if(!Ti.brown){const t=[];for(let e=0;e<yh;e++){const n=new Float32Array(La);t[e]=n;let i=0;for(let a=0;a<La;a++){const r=Math.random()*2-1;n[a]=(i+.02*r)/1.02,i=n[a],n[a]*=3.5}}Ti.brown=new vt().fromArray(t)}return Ti.brown},get pink(){if(!Ti.pink){const t=[];for(let e=0;e<yh;e++){const n=new Float32Array(La);t[e]=n;let i,a,r,c,d,p,f;i=a=r=c=d=p=f=0;for(let g=0;g<La;g++){const _=Math.random()*2-1;i=.99886*i+_*.0555179,a=.99332*a+_*.0750759,r=.969*r+_*.153852,c=.8665*c+_*.3104856,d=.55*d+_*.5329522,p=-.7616*p-_*.016898,n[g]=i+a+r+c+d+p+f+_*.5362,n[g]*=.11,f=_*.115926}}Ti.pink=new vt().fromArray(t)}return Ti.pink},get white(){if(!Ti.white){const t=[];for(let e=0;e<yh;e++){const n=new Float32Array(La);t[e]=n;for(let i=0;i<La;i++)n[i]=Math.random()*2-1}Ti.white=new vt().fromArray(t)}return Ti.white}};function Qo(t,e){return sn(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,i=new lp(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class yp extends Qa{constructor(){const e=Ae(yp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Ps(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new nt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new nt({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ht(this,["frequency","detune"])}static getDefaults(){return Object.assign(Qa.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Kt extends Sn{constructor(){const e=Ae(Kt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),ht(this,"frequency"),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),ht(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Sn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),i=new yp({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Kt._periodicWaveCache.find(n=>n.phase===this._phase&&rT(n.partials,this._partials));{const e=Kt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const i=this._getCachedPeriodicWave();if(et(i)){const{partials:a,wave:r}=i;this._wave=r,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,r]=this._getRealImaginary(e,this._phase),c=this.context.createPeriodicWave(a,r);this._wave=c,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Kt._periodicWaveCache.push({imag:r,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),Kt._periodicWaveCache.length>100&&Kt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Mi(e,0);let n=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(n=i[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const a=new Float32Array(e);this._partials.forEach((r,c)=>a[c]=r),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,n){let a=2048;const r=new Float32Array(a),c=new Float32Array(a);let d=1;if(e==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,a=d,this._partials.length===0)return[r,c]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);p?(d=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),e=p[1],d=Math.max(d,2),a=d):this._partialCount=0,this._partials=[]}for(let p=1;p<a;++p){const f=2/(p*Math.PI);let g;switch(e){case"sine":g=p<=d?1:0,this._partials[p-1]=g;break;case"square":g=p&1?2*f:0,this._partials[p-1]=g;break;case"sawtooth":g=f*(p&1?1:-1),this._partials[p-1]=g;break;case"triangle":p&1?g=2*(f*f)*(p-1>>1&1?-1:1):g=0,this._partials[p-1]=g;break;case"custom":g=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}g!==0?(r[p]=-g*Math.sin(n*p),c[p]=g*Math.cos(n*p)):(r[p]=0,c[p]=0)}return[r,c]}_inverseFFT(e,n,i){let a=0;const r=e.length;for(let c=0;c<r;c++)a+=e[c]*Math.cos(c*i)+n[c]*Math.sin(c*i);return a}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let i=0;const a=Math.PI*2,r=32;for(let c=0;c<r;c++)i=Math.max(this._inverseFFT(e,n,c/r*a),i);return cT(-this._inverseFFT(e,n,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Kt._periodicWaveCache=[];class Hv extends ti{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new rr({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Co extends _t{constructor(){const e=Ae(Co.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new at({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_t.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Wu extends Sn{constructor(){const e=Ae(Wu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new Hv({context:this.context}),this._modulationNode=new at({context:this.context}),this._carrier=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Co({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ht(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class kl extends Sn{constructor(){const e=Ae(kl.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new at({context:this.context,gain:0}),this._carrier=new Kt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Kt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Co({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Co({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ht(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Rl extends Sn{constructor(){const e=Ae(Rl.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new at({context:this.context,gain:0}),this._thresh=new rr({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new _t({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ht(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Sn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ju extends Sn{constructor(){const e=Ae(Ju.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ht(this,["frequency","detune"])}static getDefaults(){return Object.assign(Kt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,i=e/(this._oscillators.length-1);this._forEach((a,r)=>a.detune.value=n+i*r)}}get count(){return this._oscillators.length}set count(e){if(Mi(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const i=new Kt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):yt});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,i)=>n.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Zu extends Sn{constructor(){const e=Ae(Zu.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Co({context:this.context,value:2}),this._pulse=new Rl({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Kt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ht(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Sn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const jy={am:Wu,fat:Ju,fm:kl,oscillator:Kt,pulse:Rl,pwm:Zu};class $a extends Sn{constructor(){const e=Ae($a.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),ht(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Kt.getDefaults(),kl.getDefaults(),Wu.getDefaults(),Ju.getDefaults(),Rl.getDefaults(),Zu.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=jy[e],i=this.now();if(this._oscillator){const a=this._oscillator;a.stop(i),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof jy[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ds(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ds(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ei(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return sn(this,arguments,void 0,function*(e=1024){return Qo(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class vp extends _t{constructor(){super(Ae(vp.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new at({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ml(this._constantSource,this._sum)}static getDefaults(){return Object.assign(_t.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}let _p=class Yv extends ti{constructor(){const e=Ae(Yv.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Co({context:this.context,value:e.max-e.min}),this._add=this.output=new vp({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(ti.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}};class xp extends ti{constructor(){super(Ae(xp.getDefaults(),arguments)),this.name="Zero",this._gain=new at({context:this.context}),this.output=this._gain,this.input=void 0,Ps(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),zv(this.context.getConstant(0),this._gain),this}}class Ha extends De{constructor(){const e=Ae(Ha.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=nt.prototype._fromType,this._toType=nt.prototype._toType,this._is=nt.prototype._is,this._clampValue=nt.prototype._clampValue,this._oscillator=new Kt(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new at({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new _t({context:this.context,units:"audioRange",value:0}),this._zeros=new xp({context:this.context}),this._a2g=new Hv({context:this.context}),this._scaler=this.output=new _p({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),ht(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(Kt.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,i=this.max;this._units=e,this.min=n,this.max=i}get state(){return this._oscillator.state}connect(e,n,i){return(e instanceof nt||e instanceof _t)&&(this.convert=e.convert,this.units=e.units),ju(this,e,n,i),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Wv(t,e=1/0){const n=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Mi(r,t,e),n.set(this,r)}})}}function Di(t,e=1/0){const n=new WeakMap;return function(i,a){Reflect.defineProperty(i,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Mi(this.toSeconds(r),t,e),n.set(this,r)}})}}class Xu extends Sn{constructor(){const e=Ae(Xu.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new vt({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Sn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:yt,onerror:yt,playbackRate:1,reverse:!1})}load(e){return sn(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=yt){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,i){return super.start(e,n,i),this}_start(e,n,i){this._loop?n=Qs(n,this._loopStart):n=Qs(n,0);const a=this.toSeconds(n),r=i;i=Qs(i,Math.max(this._buffer.duration-a,0));let c=this.toSeconds(i);c=c/this._playbackRate,e=this.toSeconds(e);const d=new Ml({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+c),this._state.setStateAtTime("stopped",e+c,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&cs(r)?d.start(e,a):d.start(e,a,c-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(i=>i.stop(n))}restart(e,n,i){return super.restart(e,n,i),this}_restart(e,n,i){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,n,i)}seek(e,n){const i=this.toSeconds(n);if(this._state.getValueAtTime(i)==="started"){const a=this.toSeconds(e);this._stop(i),this._start(i,a)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Mi(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Mi(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),i=this._state.getNextState("stopped",n);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}qs([Di(0)],Xu.prototype,"fadeIn",void 0);qs([Di(0)],Xu.prototype,"fadeOut",void 0);class wT extends ti{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new rr({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Kn extends De{constructor(){const e=Ae(Kn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new _t({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(De.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ei(e))return e;{let i;for(i in $c)if($c[i][n]===e)return i;return e}}_setCurve(e,n,i){if(ei(i)&&Reflect.has($c,i)){const a=$c[i];vo(a)?e!=="_decayCurve"&&(this[e]=a[n]):this[e]=a}else if(kn(i)&&e!=="_decayCurve")this[e]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),c=this.getValueAtTime(e);if(c>0){const d=1/a;a=(1-c)/d}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,a,e);else{this._sig.cancelAndHoldAtTime(e);let d=this._attackCurve;for(let p=1;p<d.length;p++)if(d[p-1]<=c&&c<=d[p]){d=this._attackCurve.slice(p),d[0]=c;break}this._sig.setValueCurveAtTime(d,e,a,n)}if(r&&this.sustain<1){const d=n*this.sustain,p=e+a;this.log("decay",p),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,r+p):this._sig.exponentialApproachValueAtTime(d,p,r)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,e):(He(kn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,i,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,i=1){return n=this.toSeconds(n),this.triggerAttack(n,i),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,i=0){return ju(this,e,n,i),this}asArray(){return sn(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,i=new lp(1,n,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=a+this.toSeconds(this.release),c=r*.1,d=r+c,p=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/d,decay:n*this.toSeconds(this.decay)/d,release:n*this.toSeconds(this.release)/d,context:i}));return p._sig.toDestination(),p.triggerAttackRelease(n*(a+c)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}qs([Di(0)],Kn.prototype,"attack",void 0);qs([Di(0)],Kn.prototype,"decay",void 0);qs([Wv(0,1)],Kn.prototype,"sustain",void 0);qs([Di(0)],Kn.prototype,"release",void 0);const $c=(()=>{let e,n;const i=[];for(e=0;e<128;e++)i[e]=Math.sin(e/127*(Math.PI/2));const a=[],r=6.4;for(e=0;e<127;e++){n=e/127;const b=Math.sin(n*(Math.PI*2)*r-Math.PI/2)+1;a[e]=b/10+n*.83}a[127]=1;const c=[],d=5;for(e=0;e<128;e++)c[e]=Math.ceil(e/127*d)/d;const p=[];for(e=0;e<128;e++)n=e/127,p[e]=.5*(1-Math.cos(Math.PI*n));const f=[];for(e=0;e<128;e++){n=e/127;const b=Math.pow(n,3)*4+.2,S=Math.cos(b*Math.PI*2*n);f[e]=Math.abs(S*(1-n))}function g(b){const S=new Array(b.length);for(let w=0;w<b.length;w++)S[w]=1-b[w];return S}function _(b){return b.slice(0).reverse()}return{bounce:{In:g(f),Out:f},cosine:{In:i,Out:_(i)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:g(a)},sine:{In:p,Out:g(p)},step:{In:c,Out:g(c)}}})();class ni extends De{constructor(){const e=Ae(ni.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new ar({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ht(this,"volume")}static getDefaults(){return Object.assign(De.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const i=this["_original_"+e]=this[e];this[e]=(...a)=>{const r=a[n],c=this.context.transport.schedule(d=>{a[n]=d,i.apply(this,a)},r);this._scheduledEvents.push(c)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,i,a){const r=this.toSeconds(i),c=this.toSeconds(n);return this.triggerAttack(e,r,a),this.triggerRelease(r+c),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ls extends ni{constructor(){const e=Ae(Ls.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ni.getDefaults(),{detune:0,onsilence:yt,portamento:0})}triggerAttack(e,n,i=1){this.log("triggerAttack",e,n,i);const a=this.toSeconds(n);return this._triggerEnvelopeAttack(a,i),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const i=this.toSeconds(n),a=e instanceof ls?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const r=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,r,i)}else this.frequency.setValueAtTime(a,i);return this}}qs([Di(0)],Ls.prototype,"portamento",void 0);class Il extends Kn{constructor(){super(Ae(Il.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new at({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ms extends Ls{constructor(){const e=Ae(Ms.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new $a(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Il(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ht(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ls.getDefaults(),{envelope:Object.assign(ks(Kn.getDefaults(),Object.keys(De.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ks($a.getDefaults(),[...Object.keys(Sn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+i+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Eu extends De{constructor(){const e=Ae(Eu.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new nt({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new nt({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new nt({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new nt({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(De.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){He(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let c=0;c<e;c++){const p=Math.pow(c/e,2)*19980+20;n[c]=p}const i=new Float32Array(e),a=new Float32Array(e),r=this.context.createBiquadFilter();return r.type=this.type,r.Q.value=this.Q.value,r.frequency.value=this.frequency.value,r.gain.value=this.gain.value,r.getFrequencyResponse(n,i,a),i}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ni extends De{constructor(){const e=Ae(Ni.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new at({context:this.context}),this.output=new at({context:this.context}),this._filters=[],this._filters=[],this.Q=new _t({context:this.context,units:"positive",value:e.Q}),this.frequency=new _t({context:this.context,units:"frequency",value:e.frequency}),this.detune=new _t({context:this.context,units:"cents",value:e.detune}),this.gain=new _t({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,ht(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(De.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){He(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(i=>i.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=Ds(e)?e:parseInt(e,10),i=[-12,-24,-48,-96];let a=i.indexOf(n);He(a!==-1,`rolloff can only be ${i.join(", ")}`),a+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(r=>r.disconnect()),this._filters=new Array(a);for(let r=0;r<a;r++){const c=new Eu({context:this.context});c.type=this._type,this.frequency.connect(c.frequency),this.detune.connect(c.detune),this.Q.connect(c.Q),this.gain.connect(c.gain),this._filters[r]=c}this._internalChannels=this._filters,ml(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new Eu({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),i=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((r,c)=>i[c]*=r)}),n.dispose(),i}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),rp(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Nu extends Kn{constructor(){const e=Ae(Nu.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Hu({context:this.context,value:e.exponent}),this._scale=this.output=new _p({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Kn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const n=this.toFrequency(e);Mi(n,0),this._baseFrequency=n,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class bp extends Ls{constructor(){const e=Ae(bp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new $a(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ni(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new Nu(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Il(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ht(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ls.getDefaults(),{envelope:Object.assign(ks(Kn.getDefaults(),Object.keys(De.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ks(Ni.getDefaults(),Object.keys(De.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ks(Nu.getDefaults(),Object.keys(De.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ks($a.getDefaults(),Object.keys(Sn.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,n=1){if(this.envelope.triggerAttack(e,n),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+i+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}const zy=[1,1.483,1.932,2.546,2.63,3.897];class al extends Ls{constructor(){const e=Ae(al.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new _t({context:this.context,units:"cents",value:e.detune}),this.frequency=new _t({context:this.context,units:"frequency"}),this._amplitude=new at({context:this.context,gain:0}).connect(this.output),this._highpass=new Ni({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<zy.length;n++){const i=new kl({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):yt,type:"square"});i.connect(this._highpass),this._oscillators[n]=i;const a=new Co({context:this.context,value:zy[n]});this._freqMultipliers[n]=a,this.frequency.chain(a,i.frequency),this.detune.connect(i.detune)}this._filterFreqScaler=new _p({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new Kn({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return xo(Ls.getDefaults(),{envelope:Object.assign(ks(Kn.getDefaults(),Object.keys(De.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(i=>i.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(i=>{i.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Dl extends Ms{constructor(){const e=Ae(Dl.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ht(this,["oscillator","envelope"])}static getDefaults(){return xo(Ls.getDefaults(),Ms.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const i=this.toSeconds(n),a=this.toFrequency(e instanceof ls?e.toFrequency():e),r=a*this.octaves;return this.oscillator.frequency.setValueAtTime(r,i),this.oscillator.frequency.exponentialRampToValueAtTime(a,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}qs([Wv(0)],Dl.prototype,"octaves",void 0);qs([Di(0)],Dl.prototype,"pitchDecay",void 0);class rl extends ni{constructor(){const e=Ae(rl.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new Tu(Object.assign({context:this.context},e.noise)),this.envelope=new Il(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(ni.getDefaults(),{envelope:Object.assign(ks(Kn.getDefaults(),Object.keys(De.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(ks(Tu.getDefaults(),Object.keys(Sn.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,i=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,i),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Jv=new Set;function Cp(t){Jv.add(t)}function Zv(t,e){const n=`registerProcessor("${t}", ${e})`;Jv.add(n)}const TT=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Cp(TT);const ET=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Cp(ET);const NT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Cp(NT);const AT="feedback-comb-filter",MT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Zv(AT,MT);class ll extends ni{constructor(){const e=Ae(ll.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),He(!Ds(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const i=this._voices.indexOf(this._dummyVoice);this._voices.splice(i,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ni.getDefaults(),{maxPolyphony:32,options:{},voice:Ms})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(i=>i.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return He(e instanceof Ls,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Vu("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,i){e.forEach(a=>{const r=new wu(this.context,a).toMidi(),c=this._getNextAvailableVoice();c&&(c.triggerAttack(a,n,i),this._activeVoices.push({midi:r,voice:c,released:!1}),this.log("triggerAttack",a,n))})}_triggerRelease(e,n){e.forEach(i=>{const a=new wu(this.context,i).toMidi(),r=this._activeVoices.find(({midi:c,released:d})=>c===a&&!d);r&&(r.voice.triggerRelease(n),r.released=!0,this.log("triggerRelease",i,n))})}_scheduleEvent(e,n,i,a){He(!this.disposed,"Synth was already disposed"),i<=this.now()?e==="attack"?this._triggerAttack(n,i,a):this._triggerRelease(n,i):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,n,i,a)},i-this.now())}triggerAttack(e,n,i){Array.isArray(e)||(e=[e]);const a=this.toSeconds(n);return this._scheduleEvent("attack",e,a,i),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const i=this.toSeconds(n);return this._scheduleEvent("release",e,i),this}triggerAttackRelease(e,n,i,a){const r=this.toSeconds(i);if(this.triggerAttack(e,r,a),kn(n)){He(kn(e),"If the duration is an array, the notes must also be an array"),e=e;for(let c=0;c<e.length;c++){const d=n[Math.min(c,n.length-1)],p=this.toSeconds(d);He(p>0,"The duration must be greater than 0"),this.triggerRelease(e[c],r+p)}}else{const c=this.toSeconds(n);He(c>0,"The duration must be greater than 0"),this.triggerRelease(e,r+c)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const n=ks(e,["onsilence","context"]);return this.options=xo(this.options,n),this._voices.forEach(i=>i.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:i})=>{i.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Ku extends ni{constructor(){const e=Ae(Ku.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(i=>{const a=parseInt(i,10);if(He(Qc(i)||Ds(a)&&isFinite(a),`url key is neither a note or midi pitch: ${i}`),Qc(i)){const r=new ls(this.context,i).toMidi();n[r]=e.urls[i]}else Ds(a)&&isFinite(a)&&(n[a]=e.urls[a])}),this._buffers=new mp({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ni.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:yt,onerror:yt,release:.1,urls:{}})}_findClosest(e){let i=0;for(;i<96;){if(this._buffers.has(e+i))return-i;if(this._buffers.has(e-i))return i;i++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,i=1){return this.log("triggerAttack",e,n,i),Array.isArray(e)||(e=[e]),e.forEach(a=>{const r=Bv(new ls(this.context,a).toFrequency()),c=Math.round(r),d=r-c,p=this._findClosest(c),f=c-p,g=this._buffers.get(f),_=Su(p+d),b=new Ml({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);b.start(n,0,g.duration/_,i),kn(this._activeSources.get(c))||this._activeSources.set(c,[]),this._activeSources.get(c).push(b),b.onended=()=>{if(this._activeSources&&this._activeSources.has(c)){const S=this._activeSources.get(c),w=S.indexOf(b);w!==-1&&S.splice(w,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(i=>{const a=new ls(this.context,i).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const r=this._activeSources.get(a);n=this.toSeconds(n),r.forEach(c=>{c.stop(n)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,i,a=1){const r=this.toSeconds(i);return this.triggerAttack(e,r,a),kn(n)?(He(kn(e),"notes must be an array when duration is array"),e.forEach((c,d)=>{const p=n[Math.min(d,n.length-1)];this.triggerRelease(c,r+this.toSeconds(p))})):this.triggerRelease(e,r+this.toSeconds(n)),this}add(e,n,i){if(He(Qc(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Qc(e)){const a=new ls(this.context,e).toMidi();this._buffers.add(a,n,i)}else this._buffers.add(e,n,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}qs([Di(0)],Ku.prototype,"attack",void 0);qs([Di(0)],Ku.prototype,"release",void 0);class go extends Rn{constructor(){const e=Ae(go.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Al("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Rn.getDefaults(),{callback:yt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let i;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const a=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Ds(this._loop)&&this._loop>1){i=1/0,Ds(this._loop)&&(i=this._loop*this._getLoopDuration());const r=this._state.getAfter(a);r!==null&&(i=Math.min(i,r.time-a)),i!==1/0&&(i=new Zt(this.context,i));const c=new Zt(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),c,new Zt(this.context,a),i)}else n.id=this.context.transport.schedule(this._tick.bind(this),new Zt(this.context,a))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const i=this._state.getBefore(n);let a=n;i!==null&&(a=i.time),this._rescheduleEvents(a)}return this}cancel(e){e=Qs(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,i=>{this.context.transport.clear(i.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let i=.02;Dv(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*i}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Zt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Zt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const i=this._getLoopDuration();return(e-n.time)%i/i}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Au extends go{constructor(){const e=Ae(Au.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new Al("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(n=>{kn(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(go.getDefaults(),{events:[]})}start(e,n){const i=this.toTicks(e);if(this._state.getValueAtTime(i)!=="started"){n=Qs(n,this._loop?this._loopStart:0),this._loop?n=Qs(n,this._loopStart):n=Qs(n,0);const a=this.toTicks(n);this._state.add({id:-1,offset:a,state:"started",time:i}),this._forEach(r=>{this._startNote(r,i,a)})}return this}_startNote(e,n,i){n-=i,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<i&&(n+=this._getLoopDuration()),e.start(new Zt(this.context,n))):e.startOffset<this._loopStart&&e.startOffset>=i&&(e.loop=!1,e.start(new Zt(this.context,n))):e.startOffset>=i&&e.start(new Zt(this.context,n))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(e){const n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(i=>{i.stop(e)}),this}at(e,n){const i=new za(this.context,e).toTicks(),a=new Zt(this.context,1).toSeconds(),r=this._events.values();let c=r.next();for(;!c.done;){const d=c.value;if(Math.abs(i-d.startOffset)<a)return et(n)&&(d.value=n),d;c=r.next()}return et(n)?(this.add(e,n),this.at(e)):null}add(e,n){e instanceof Object&&Reflect.has(e,"time")&&(n=e,e=n.time);const i=this.toTicks(e);let a;return n instanceof go?(a=n,a.callback=this._tick.bind(this)):a=new go({callback:this._tick.bind(this),context:this.context,value:n}),a.startOffset=i,a.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(a),this._restartEvent(a),this}_restartEvent(e){this._state.forEach(n=>{n.state==="started"?this._startNote(e,n.time,n.offset):e.stop(new Zt(this.context,n.time))})}remove(e,n){return vo(e)&&e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e),this._events.forEach(i=>{i.startOffset===e&&(cs(n)||et(n)&&i.value===n)&&(this._events.delete(i),i.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(n=>n.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(n=>{n instanceof Au?n._forEach(e):e(n)}),this}_setAll(e,n){this._forEach(i=>{i[e]=n})}_tick(e,n){this.mute||this.callback(e,n)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=e,this._testLoopBoundries(n)})}get loopEnd(){return new Zt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopEnd=e,this._testLoopBoundries(n)})}get loopStart(){return new Zt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class Xs extends go{constructor(){const e=Ae(Xs.getDefaults(),arguments,["callback","events","subdivision"]);super(e),this.name="Sequence",this._part=new Au({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(e.subdivision),this.events=e.events,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate=e.playbackRate,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate}static getDefaults(){return Object.assign(ks(go.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(e,n){n!==null&&!this.mute&&this.callback(e,n)}get events(){return this._events}set events(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(e,n){return this._part.start(e,n&&this._indexTime(n)),this}stop(e){return this._part.stop(e),this}get subdivision(){return new Zt(this.context,this._subdivision).toSeconds()}_createSequence(e){return new Proxy(e,{get:(n,i)=>n[i],set:(n,i,a)=>(ei(i)&&isFinite(parseInt(i,10))&&kn(a)?n[i]=this._createSequence(a):n[i]=a,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(e,n,i){e.forEach((a,r)=>{const c=r*n+i;if(kn(a))this._rescheduleSequence(a,n/a.length,c);else{const d=new Zt(this.context,c,"i").toSeconds();this._part.add(d,a)}})}_indexTime(e){return new Zt(this.context,e*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(e){this._part.loop=e}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,e===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(e)}get startOffset(){return this._part.startOffset}set startOffset(e){this._part.startOffset=e}get playbackRate(){return this._part.playbackRate}set playbackRate(e){this._part.playbackRate=e}get probability(){return this._part.probability}set probability(e){this._part.probability=e}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(e){this._part.humanize=e}get length(){return this._part.length}}class Qu extends De{constructor(){const e=Ae(Qu.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new wT({context:this.context}),this.a=new at({context:this.context,gain:0}),this.b=new at({context:this.context,gain:0}),this.output=new at({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new _t({context:this.context,units:"normalRange",value:e.fade}),ht(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Ps(this._split,this.a.gain,0),Ps(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(De.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Hy extends De{constructor(e){super(e),this.name="Effect",this._dryWet=new Qu({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new at({context:this.context}),this.effectReturn=new at({context:this.context}),this.input=new at({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],ht(this,"wet")}static getDefaults(){return Object.assign(De.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Sp extends De{constructor(){const e=Ae(Sp.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new nt({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ht(this,"pan")}static getDefaults(){return Object.assign(De.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const kT="bit-crusher",RT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Zv(kT,RT);class Yy extends Hy{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new at({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,ht(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Hy.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class wp extends Yy{constructor(){const e=Ae(wp.getDefaults(),arguments,["pitch"]);super(e),this.name="PitchShift",this._frequency=new _t({context:this.context}),this._delayA=new Wo({maxDelay:1,context:this.context}),this._lfoA=new Ha({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Wo({maxDelay:1,context:this.context}),this._lfoB=new Ha({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Qu({context:this.context}),this._crossFadeLFO=new Ha({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Wo({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,ht(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Yy.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=Su(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=Su(e)-1),this._frequency.value=n*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class fn extends De{constructor(){const e=Ae(fn.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new at({context:this.context}),fn._allSolos.has(this.context)||fn._allSolos.set(this.context,new Set),fn._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(De.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),fn._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){fn._soloed.has(this.context)||fn._soloed.set(this.context,new Set),fn._soloed.get(this.context).add(this)}_removeSolo(){fn._soloed.has(this.context)&&fn._soloed.get(this.context).delete(this)}_isSoloed(){return fn._soloed.has(this.context)&&fn._soloed.get(this.context).has(this)}_noSolos(){return!fn._soloed.has(this.context)||fn._soloed.has(this.context)&&fn._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),fn._allSolos.get(this.context).delete(this),this._removeSolo(),this}}fn._allSolos=new Map;fn._soloed=new Map;class Tp extends De{constructor(){const e=Ae(Tp.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Sp({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ar({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ht(this,["pan","volume"])}static getDefaults(){return Object.assign(De.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ba extends De{constructor(){const e=Ae(Ba.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new fn({solo:e.solo,context:this.context}),this._panVol=this.output=new Tp({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ht(this,["pan","volume"])}static getDefaults(){return Object.assign(De.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Ba.buses.has(e)||Ba.buses.set(e,new at({context:this.context})),Ba.buses.get(e)}send(e,n=0){const i=this._getBus(e),a=new at({context:this.context,units:"decibels",gain:n});return this.connect(a),a.connect(i),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ba.buses=new Map;class $u extends De{constructor(){const e=Ae($u.getDefaults(),arguments,["threshold","ratio"]);super(e),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new nt({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:e.threshold}),this.attack=new nt({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:e.attack}),this.release=new nt({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:e.release}),this.knee=new nt({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:e.knee}),this.ratio=new nt({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:e.ratio}),ht(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(De.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class Ep extends De{constructor(){const e=Ae(Ep.getDefaults(),arguments,["threshold"]);super(e),this.name="Limiter",this._compressor=this.input=this.output=new $u({context:this.context,ratio:20,attack:.003,release:.01,threshold:e.threshold}),this.threshold=this._compressor.threshold,ht(this,"threshold")}static getDefaults(){return Object.assign(De.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class Np extends De{constructor(){const e=Ae(Np.getDefaults(),arguments,["url","onload"]);super(e),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new vt(e.url,n=>{this.buffer=n,e.onload()}),this.input=new at({context:this.context}),this.output=new at({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=e.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(De.getDefaults(),{normalize:!0,onload:yt})}load(e){return sn(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(e)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const n=this._buffer.get();this._convolver.buffer=n||null}get normalize(){return this._convolver.normalize}set normalize(e){this._convolver.normalize=e}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function IT(){return rs().now()}const mn=rs().transport,DT=rs().destination;rs().destination;rs().listener;rs().draw;rs();let PT,LT;function OT(){return{geminiUrl:PT,vertexUrl:LT}}function UT(t,e,n,i){var a,r;if(!t?.baseUrl){const c=OT();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:n:(r=c.geminiUrl)!==null&&r!==void 0?r:i}return t.baseUrl}class Pi{}function Te(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const r=e[a];return r!=null?String(r):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function y(t,e,n){for(let r=0;r<e.length-1;r++){const c=e[r];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[d])){const p=t[d];if(Array.isArray(n))for(let f=0;f<p.length;f++){const g=p[f];y(g,e.slice(r+1),n[f])}else for(const f of p)y(f,e.slice(r+1),n)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in t||(t[d]=[{}]);const p=t[d];y(p[0],e.slice(r+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const i=e[e.length-1],a=t[i];if(a!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===a)return;if(typeof a=="object"&&typeof n=="object"&&a!==null&&n!==null)Object.assign(a,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function m(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const a=e[i];if(a.endsWith("[]")){const r=a.slice(0,-2);if(r in t){const c=t[r];return Array.isArray(c)?c.map(d=>m(d,e.slice(i+1),n)):n}else return n}else t=t[a]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function qT(t,e){for(const[n,i]of Object.entries(e)){const a=n.split("."),r=i.split("."),c=new Set;let d=-1;for(let p=0;p<a.length;p++)if(a[p]==="*"){d=p;break}if(d!==-1&&r.length>d)for(let p=d;p<r.length;p++){const f=r[p];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&c.add(f)}Mh(t,a,r,0,c)}}function Mh(t,e,n,i,a){if(i>=e.length||typeof t!="object"||t===null)return;const r=e[i];if(r.endsWith("[]")){const c=r.slice(0,-2),d=t;if(c in d&&Array.isArray(d[c]))for(const p of d[c])Mh(p,e,n,i+1,a)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,d=Object.keys(c).filter(f=>!f.startsWith("_")&&!a.has(f)),p={};for(const f of d)p[f]=c[f];for(const[f,g]of Object.entries(p)){const _=[];for(const b of n.slice(i))b==="*"?_.push(f):_.push(b);y(c,_,g)}for(const f of d)delete c[f]}}else{const c=t;r in c&&Mh(c[r],e,n,i+1,a)}}function Ap(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function VT(t){const e={},n=m(t,["operationName"]);n!=null&&y(e,["operationName"],n);const i=m(t,["resourceName"]);return i!=null&&y(e,["_url","resourceName"],i),e}function FT(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response","generateVideoResponse"]);return c!=null&&y(e,["response"],BT(c)),e}function GT(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response"]);return c!=null&&y(e,["response"],jT(c)),e}function BT(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>zT(c))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=m(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function jT(t){const e={},n=m(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>HT(c))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=m(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function zT(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],KT(n)),e}function HT(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],QT(n)),e}function YT(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function WT(t){const e={},n=m(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function JT(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response"]);return c!=null&&y(e,["response"],ZT(c)),e}function ZT(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const a=m(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function Xv(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response"]);return c!=null&&y(e,["response"],XT(c)),e}function XT(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const a=m(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function KT(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],Ap(i));const a=m(t,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function QT(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],Ap(i));const a=m(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}var Wy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Wy||(Wy={}));var Jy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Jy||(Jy={}));var Zy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Zy||(Zy={}));var yo;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(yo||(yo={}));var Xy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xy||(Xy={}));var Ky;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ky||(Ky={}));var Qy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Qy||(Qy={}));var $y;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($y||($y={}));var e1;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(e1||(e1={}));var t1;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(t1||(t1={}));var n1;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(n1||(n1={}));var s1;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(s1||(s1={}));var i1;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(i1||(i1={}));var o1;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(o1||(o1={}));var a1;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(a1||(a1={}));var r1;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(r1||(r1={}));var l1;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(l1||(l1={}));var c1;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(c1||(c1={}));var Mu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Mu||(Mu={}));var u1;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(u1||(u1={}));var d1;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(d1||(d1={}));var f1;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(f1||(f1={}));var kh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kh||(kh={}));var h1;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(h1||(h1={}));var p1;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(p1||(p1={}));var m1;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(m1||(m1={}));var g1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(g1||(g1={}));var y1;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(y1||(y1={}));var v1;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(v1||(v1={}));var _1;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_1||(_1={}));var x1;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(x1||(x1={}));var b1;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(b1||(b1={}));var C1;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(C1||(C1={}));var S1;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(S1||(S1={}));var w1;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(w1||(w1={}));var T1;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(T1||(T1={}));var E1;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(E1||(E1={}));var N1;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(N1||(N1={}));var A1;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(A1||(A1={}));var M1;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(M1||(M1={}));var k1;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(k1||(k1={}));var R1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(R1||(R1={}));var I1;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(I1||(I1={}));var D1;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(D1||(D1={}));var P1;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(P1||(P1={}));var L1;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(L1||(L1={}));var O1;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(O1||(O1={}));var U1;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(U1||(U1={}));var q1;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(q1||(q1={}));var V1;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(V1||(V1={}));var F1;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(F1||(F1={}));var G1;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(G1||(G1={}));var ja;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ja||(ja={}));class Rh{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ol{get text(){var e,n,i,a,r,c,d,p;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",g=!1;const _=[];for(const b of(p=(d=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[S,w]of Object.entries(b))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(w!==null||w!==void 0)&&_.push(S);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;g=!0,f+=b.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?f:void 0}get data(){var e,n,i,a,r,c,d,p;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const g=[];for(const _ of(p=(d=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[b,S]of Object.entries(_))b!=="inlineData"&&(S!==null||S!==void 0)&&g.push(b);_.inlineData&&typeof _.inlineData.data=="string"&&(f+=atob(_.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,i,a,r,c,d,p;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(d=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(f?.length!==0)return f}get executableCode(){var e,n,i,a,r,c,d,p,f;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(p=(d=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if(g?.length!==0)return(f=g?.[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,i,a,r,c,d,p,f;if(((a=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(p=(d=(c=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if(g?.length!==0)return(f=g?.[0])===null||f===void 0?void 0:f.output}}class B1{}class j1{}class $T{}class e3{}class t3{}class n3{}class z1{}class H1{}class Y1{}class s3{}class ku{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ku;let a;const r=e;return n?a=GT(r):a=FT(r),Object.assign(i,a),i}}class W1{}class J1{}class Z1{}class i3{}class o3{}class a3{}class Mp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Mp,r=JT(e);return Object.assign(i,r),i}}class r3{}class l3{}class c3{}class X1{}class u3{get text(){var e,n,i;let a="",r=!1;const c=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,f]of Object.entries(d))p!=="text"&&p!=="thought"&&f!==null&&c.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;r=!0,a+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?a:void 0}get data(){var e,n,i;let a="";const r=[];for(const c of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(c))d!=="inlineData"&&p!==null&&r.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class d3{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class kp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new kp,r=Xv(e);return Object.assign(i,r),i}}function pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Kv(t,e){const n=pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Qv(t){return Array.isArray(t)?t.map(e=>Ru(e)):[Ru(t)]}function Ru(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $v(t){const e=Ru(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function e2(t){const e=Ru(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function K1(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function t2(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>K1(e)):[K1(t)]}function Ih(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Q1(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function $1(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Mn(t){if(t==null)throw new Error("ContentUnion is required");return Ih(t)?t:{role:"user",parts:t2(t)}}function Rp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Mn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Mn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Mn(n)):[Mn(e)]}function bs(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Q1(t)||$1(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Mn(t)]}const e=[],n=[],i=Ih(t[0]);for(const a of t){const r=Ih(a);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(a);else{if(Q1(a)||$1(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return i||e.push({role:"user",parts:t2(n)}),e}function f3(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(yo).includes(n[0].toUpperCase())?n[0].toUpperCase():yo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(yo).includes(i.toUpperCase())?i.toUpperCase():yo.TYPE_UNSPECIFIED})}}function Ya(t){const e={},n=["items"],i=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&f3(t.type,e);for(const[c,d]of Object.entries(t))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(yo).includes(d.toUpperCase())?d.toUpperCase():yo.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Ya(d);else if(i.includes(c)){const p=[];for(const f of d){if(f.type=="null"){e.nullable=!0;continue}p.push(Ya(f))}e[c]=p}else if(a.includes(c)){const p={};for(const[f,g]of Object.entries(d))p[f]=Ya(g);e[c]=p}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Ip(t){return Ya(t)}function Dp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Pp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function lr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ya(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ya(e.response));return t}function cr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function h3(t,e,n,i=1){const a=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:a?`${n}/${e}`:e}function Li(t,e){if(typeof e!="string")throw new Error("name must be a string");return h3(t,e,"cachedContents")}function n2(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function To(t){return Ap(t)}function p3(t){return t!=null&&typeof t=="object"&&"name"in t}function m3(t){return t!=null&&typeof t=="object"&&"video"in t}function g3(t){return t!=null&&typeof t=="object"&&"uri"in t}function s2(t){var e;let n;if(p3(t)&&(n=t.name),!(g3(t)&&(n=t.uri,n===void 0))&&!(m3(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function i2(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function o2(t){for(const e of["models","tunedModels","publisherModels"])if(y3(t,e))return t[e];return[]}function y3(t,e){return t!==null&&typeof t=="object"&&e in t}function v3(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function _3(t,e={}){const n=[],i=new Set;for(const a of t){const r=a.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const c=v3(a,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function a2(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,a=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function x3(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function r2(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const a=n.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let r=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const p=c.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ur(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function l2(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function b3(t){const e={},n=m(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const i=m(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>Q3(c))),y(e,["inlinedResponses"],r)}const a=m(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["inlinedEmbedContentResponses"],r)}return e}function C3(t){const e={},n=m(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsDestination","outputUriPrefix"]);i!=null&&y(e,["gcsUri"],i);const a=m(t,["bigqueryDestination","outputUri"]);return a!=null&&y(e,["bigqueryUri"],a),e}function S3(t){const e={},n=m(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsDestination","outputUriPrefix"],i);const a=m(t,["bigqueryUri"]);if(a!=null&&y(e,["bigqueryDestination","outputUri"],a),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uu(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata","displayName"]);i!=null&&y(e,["displayName"],i);const a=m(t,["metadata","state"]);a!=null&&y(e,["state"],l2(a));const r=m(t,["metadata","createTime"]);r!=null&&y(e,["createTime"],r);const c=m(t,["metadata","endTime"]);c!=null&&y(e,["endTime"],c);const d=m(t,["metadata","updateTime"]);d!=null&&y(e,["updateTime"],d);const p=m(t,["metadata","model"]);p!=null&&y(e,["model"],p);const f=m(t,["metadata","output"]);return f!=null&&y(e,["dest"],b3(r2(f))),e}function Dh(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=m(t,["state"]);a!=null&&y(e,["state"],l2(a));const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["createTime"]);c!=null&&y(e,["createTime"],c);const d=m(t,["startTime"]);d!=null&&y(e,["startTime"],d);const p=m(t,["endTime"]);p!=null&&y(e,["endTime"],p);const f=m(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const g=m(t,["model"]);g!=null&&y(e,["model"],g);const _=m(t,["inputConfig"]);_!=null&&y(e,["src"],w3(_));const b=m(t,["outputConfig"]);b!=null&&y(e,["dest"],C3(r2(b)));const S=m(t,["completionStats"]);return S!=null&&y(e,["completionStats"],S),e}function w3(t){const e={},n=m(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const i=m(t,["gcsSource","uris"]);i!=null&&y(e,["gcsUri"],i);const a=m(t,["bigquerySource","inputUri"]);return a!=null&&y(e,["bigqueryUri"],a),e}function T3(t,e){const n={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&y(n,["fileName"],i);const a=m(e,["inlinedRequests"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>K3(t,c))),y(n,["requests","requests"],r)}return n}function E3(t){const e={},n=m(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const i=m(t,["gcsUri"]);i!=null&&y(e,["gcsSource","uris"],i);const a=m(t,["bigqueryUri"]);if(a!=null&&y(e,["bigquerySource","inputUri"],a),m(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function N3(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function A3(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],ur(t,i)),n}function M3(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],ur(t,i)),n}function k3(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],R3(i));const a=m(t,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const r=m(t,["finishReason"]);r!=null&&y(e,["finishReason"],r);const c=m(t,["avgLogprobs"]);c!=null&&y(e,["avgLogprobs"],c);const d=m(t,["groundingMetadata"]);d!=null&&y(e,["groundingMetadata"],d);const p=m(t,["index"]);p!=null&&y(e,["index"],p);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const g=m(t,["safetyRatings"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(S=>S)),y(e,["safetyRatings"],b)}const _=m(t,["urlContextMetadata"]);return _!=null&&y(e,["urlContextMetadata"],_),e}function R3(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["citations"],i)}return e}function c2(t){const e={},n=m(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>o6(r))),y(e,["parts"],a)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function I3(t,e){const n={},i=m(t,["displayName"]);if(e!==void 0&&i!=null&&y(e,["batch","displayName"],i),m(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function D3(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=m(t,["dest"]);return e!==void 0&&a!=null&&y(e,["outputConfig"],S3(x3(a))),n}function e5(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["src"]);a!=null&&y(n,["batch","inputConfig"],T3(t,a2(t,a)));const r=m(e,["config"]);return r!=null&&I3(r,n),n}function P3(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],pt(t,i));const a=m(e,["src"]);a!=null&&y(n,["inputConfig"],E3(a2(t,a)));const r=m(e,["config"]);return r!=null&&D3(r,n),n}function L3(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["batch","displayName"],i),n}function O3(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["src"]);a!=null&&y(n,["batch","inputConfig"],j3(t,a));const r=m(e,["config"]);return r!=null&&L3(r,n),n}function U3(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],ur(t,i)),n}function q3(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],ur(t,i)),n}function V3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);return r!=null&&y(e,["error"],r),e}function F3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);return r!=null&&y(e,["error"],r),e}function G3(t,e){const n={},i=m(e,["contents"]);if(i!=null){let r=Rp(t,i);Array.isArray(r)&&(r=r.map(c=>c)),y(n,["requests[]","request","content"],r)}const a=m(e,["config"]);return a!=null&&(y(n,["_self"],B3(a,n)),qT(n,{"requests[].*":"requests[].request.*"})),n}function B3(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const a=m(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const r=m(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&y(e,["requests[]","outputDimensionality"],r),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function j3(t,e){const n={},i=m(e,["fileName"]);i!=null&&y(n,["file_name"],i);const a=m(e,["inlinedRequests"]);return a!=null&&y(n,["requests"],G3(t,a)),n}function z3(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function H3(t,e,n){const i={},a=m(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],c2(Mn(a)));const r=m(e,["temperature"]);r!=null&&y(i,["temperature"],r);const c=m(e,["topP"]);c!=null&&y(i,["topP"],c);const d=m(e,["topK"]);d!=null&&y(i,["topK"],d);const p=m(e,["candidateCount"]);p!=null&&y(i,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const g=m(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const _=m(e,["responseLogprobs"]);_!=null&&y(i,["responseLogprobs"],_);const b=m(e,["logprobs"]);b!=null&&y(i,["logprobs"],b);const S=m(e,["presencePenalty"]);S!=null&&y(i,["presencePenalty"],S);const w=m(e,["frequencyPenalty"]);w!=null&&y(i,["frequencyPenalty"],w);const E=m(e,["seed"]);E!=null&&y(i,["seed"],E);const N=m(e,["responseMimeType"]);N!=null&&y(i,["responseMimeType"],N);const k=m(e,["responseSchema"]);k!=null&&y(i,["responseSchema"],Ip(k));const L=m(e,["responseJsonSchema"]);if(L!=null&&y(i,["responseJsonSchema"],L),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=m(e,["safetySettings"]);if(n!==void 0&&R!=null){let z=R;Array.isArray(z)&&(z=z.map(j=>a6(j))),y(n,["safetySettings"],z)}const O=m(e,["tools"]);if(n!==void 0&&O!=null){let z=cr(O);Array.isArray(z)&&(z=z.map(j=>r6(lr(j)))),y(n,["tools"],z)}const I=m(e,["toolConfig"]);if(n!==void 0&&I!=null&&y(n,["toolConfig"],I),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Li(t,G));const P=m(e,["responseModalities"]);P!=null&&y(i,["responseModalities"],P);const M=m(e,["mediaResolution"]);M!=null&&y(i,["mediaResolution"],M);const F=m(e,["speechConfig"]);if(F!=null&&y(i,["speechConfig"],Dp(F)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=m(e,["thinkingConfig"]);B!=null&&y(i,["thinkingConfig"],B);const H=m(e,["imageConfig"]);return H!=null&&y(i,["imageConfig"],H),i}function Y3(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(f=>k3(f))),y(e,["candidates"],p)}const a=m(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const r=m(t,["promptFeedback"]);r!=null&&y(e,["promptFeedback"],r);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function W3(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],ur(t,i)),n}function J3(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],ur(t,i)),n}function Z3(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function X3(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function K3(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["request","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let d=bs(a);Array.isArray(d)&&(d=d.map(p=>c2(p))),y(n,["request","contents"],d)}const r=m(e,["metadata"]);r!=null&&y(n,["metadata"],r);const c=m(e,["config"]);return c!=null&&y(n,["request","generationConfig"],H3(t,c,m(n,["request"],{}))),n}function Q3(t){const e={},n=m(t,["response"]);n!=null&&y(e,["response"],Y3(n));const i=m(t,["error"]);return i!=null&&y(e,["error"],i),e}function $3(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);if(e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),m(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function e6(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);e!==void 0&&a!=null&&y(e,["_query","pageToken"],a);const r=m(t,["filter"]);return e!==void 0&&r!=null&&y(e,["_query","filter"],r),n}function t6(t){const e={},n=m(t,["config"]);return n!=null&&$3(n,e),e}function n6(t){const e={},n=m(t,["config"]);return n!=null&&e6(n,e),e}function s6(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["operations"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>uu(c))),y(e,["batchJobs"],r)}return e}function i6(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["batchPredictionJobs"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>Dh(c))),y(e,["batchJobs"],r)}return e}function o6(t){const e={},n=m(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=m(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],z3(r));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],N3(d));const p=m(t,["text"]);p!=null&&y(e,["text"],p);const f=m(t,["thought"]);f!=null&&y(e,["thought"],f);const g=m(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const _=m(t,["videoMetadata"]);return _!=null&&y(e,["videoMetadata"],_),e}function a6(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function r6(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(_=>_)),y(e,["functionDeclarations"],g)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);a!=null&&y(e,["computerUse"],a);const r=m(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const c=m(t,["codeExecution"]);if(c!=null&&y(e,["codeExecution"],c),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],Z3(d));const p=m(t,["googleSearch"]);p!=null&&y(e,["googleSearch"],X3(p));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}var ki;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ki||(ki={}));class $o{constructor(e,n,i,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,a)}init(e,n,i){var a,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(r=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class l6 extends Pi{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new $o(ki.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=e5(this.apiClient,e),i=n._url,a=Te("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,p=d.requests,f=[];for(const g of p){const _=Object.assign({},g);if(_.systemInstruction){const b=_.systemInstruction;delete _.systemInstruction;const S=_.request;S.systemInstruction=b,_.request=S}f.push(_)}return d.requests=f,delete n.config,delete n._url,delete n._query,{path:a,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},a=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${a}`),i.dest===void 0){const r=this.getGcsUri(e),c=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${a}`;else if(c)i.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=P3(this.apiClient,e);return d=Te("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>Dh(g))}else{const f=e5(this.apiClient,e);return d=Te("{model}:batchGenerateContent",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>uu(g))}}async createEmbeddingsInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O3(this.apiClient,e);return r=Te("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>uu(p))}}async get(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=J3(this.apiClient,e);return d=Te("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>Dh(g))}else{const f=W3(this.apiClient,e);return d=Te("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>uu(g))}}async cancel(e){var n,i,a,r;let c="",d={};if(this.apiClient.isVertexAI()){const p=M3(this.apiClient,e);c=Te("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=A3(this.apiClient,e);c=Te("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=n6(e);return d=Te("batchPredictionJobs",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=i6(g),b=new X1;return Object.assign(b,_),b})}else{const f=t6(e);return d=Te("batches",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=s6(g),b=new X1;return Object.assign(b,_),b})}}async delete(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=q3(this.apiClient,e);return d=Te("batchPredictionJobs/{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>F3(g))}else{const f=U3(this.apiClient,e);return d=Te("batches/{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>V3(g))}}}function c6(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function t5(t){const e={},n=m(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>k6(r))),y(e,["parts"],a)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function u6(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=m(t,["expireTime"]);e!==void 0&&a!=null&&y(e,["expireTime"],a);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const c=m(t,["contents"]);if(e!==void 0&&c!=null){let g=bs(c);Array.isArray(g)&&(g=g.map(_=>t5(_))),y(e,["contents"],g)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&y(e,["systemInstruction"],t5(Mn(d)));const p=m(t,["tools"]);if(e!==void 0&&p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>R6(_))),y(e,["tools"],g)}const f=m(t,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],f),m(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function d6(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=m(t,["expireTime"]);e!==void 0&&a!=null&&y(e,["expireTime"],a);const r=m(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const c=m(t,["contents"]);if(e!==void 0&&c!=null){let _=bs(c);Array.isArray(_)&&(_=_.map(b=>b)),y(e,["contents"],_)}const d=m(t,["systemInstruction"]);e!==void 0&&d!=null&&y(e,["systemInstruction"],Mn(d));const p=m(t,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(b=>I6(b))),y(e,["tools"],_)}const f=m(t,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const g=m(t,["kmsKeyName"]);return e!==void 0&&g!=null&&y(e,["encryption_spec","kmsKeyName"],g),n}function f6(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],Kv(t,i));const a=m(e,["config"]);return a!=null&&u6(a,n),n}function h6(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["model"],Kv(t,i));const a=m(e,["config"]);return a!=null&&d6(a,n),n}function p6(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Li(t,i)),n}function m6(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Li(t,i)),n}function g6(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function y6(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function v6(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function _6(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const a=m(t,["parameters"]);a!=null&&y(e,["parameters"],a);const r=m(t,["parametersJsonSchema"]);r!=null&&y(e,["parametersJsonSchema"],r);const c=m(t,["response"]);c!=null&&y(e,["response"],c);const d=m(t,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function x6(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Li(t,i)),n}function b6(t,e){const n={},i=m(e,["name"]);return i!=null&&y(n,["_url","name"],Li(t,i)),n}function C6(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function S6(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function w6(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function T6(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function E6(t){const e={},n=m(t,["config"]);return n!=null&&w6(n,e),e}function N6(t){const e={},n=m(t,["config"]);return n!=null&&T6(n,e),e}function A6(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["cachedContents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["cachedContents"],r)}return e}function M6(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["cachedContents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["cachedContents"],r)}return e}function k6(t){const e={},n=m(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=m(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],v6(r));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],c6(d));const p=m(t,["text"]);p!=null&&y(e,["text"],p);const f=m(t,["thought"]);f!=null&&y(e,["thought"],f);const g=m(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const _=m(t,["videoMetadata"]);return _!=null&&y(e,["videoMetadata"],_),e}function R6(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(_=>_)),y(e,["functionDeclarations"],g)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);a!=null&&y(e,["computerUse"],a);const r=m(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const c=m(t,["codeExecution"]);if(c!=null&&y(e,["codeExecution"],c),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],C6(d));const p=m(t,["googleSearch"]);p!=null&&y(e,["googleSearch"],S6(p));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function I6(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>_6(b))),y(e,["functionDeclarations"],_)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const a=m(t,["googleSearchRetrieval"]);a!=null&&y(e,["googleSearchRetrieval"],a);const r=m(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=m(t,["codeExecution"]);c!=null&&y(e,["codeExecution"],c);const d=m(t,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const p=m(t,["googleMaps"]);p!=null&&y(e,["googleMaps"],p);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const g=m(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function D6(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=m(t,["expireTime"]);return e!==void 0&&a!=null&&y(e,["expireTime"],a),n}function P6(t,e){const n={},i=m(t,["ttl"]);e!==void 0&&i!=null&&y(e,["ttl"],i);const a=m(t,["expireTime"]);return e!==void 0&&a!=null&&y(e,["expireTime"],a),n}function L6(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Li(t,i));const a=m(e,["config"]);return a!=null&&D6(a,n),n}function O6(t,e){const n={},i=m(e,["name"]);i!=null&&y(n,["_url","name"],Li(t,i));const a=m(e,["config"]);return a!=null&&P6(a,n),n}class U6 extends Pi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $o(ki.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=h6(this.apiClient,e);return d=Te("cachedContents",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>g)}else{const f=f6(this.apiClient,e);return d=Te("cachedContents",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>g)}}async get(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=b6(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>g)}else{const f=x6(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>g)}}async delete(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=m6(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=y6(g),b=new J1;return Object.assign(b,_),b})}else{const f=p6(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=g6(g),b=new J1;return Object.assign(b,_),b})}}async update(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=O6(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>g)}else{const f=L6(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>g)}}async listInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=N6(e);return d=Te("cachedContents",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=M6(g),b=new Z1;return Object.assign(b,_),b})}else{const f=E6(e);return d=Te("cachedContents",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=A6(g),b=new Z1;return Object.assign(b,_),b})}}}function n5(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vt(t){return this instanceof Vt?(this.v=t,this):new Vt(t)}function Wa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,r=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(w){return Promise.resolve(w).then(S,_)}}function d(S,w){i[S]&&(a[S]=function(E){return new Promise(function(N,k){r.push([S,E,N,k])>1||p(S,E)})},w&&(a[S]=w(a[S])))}function p(S,w){try{f(i[S](w))}catch(E){b(r[0][3],E)}}function f(S){S.value instanceof Vt?Promise.resolve(S.value.v).then(g,_):b(r[0][2],S)}function g(S){p("next",S)}function _(S){p("throw",S)}function b(S,w){S(w),r.shift(),r.length&&p(r[0][0],r[0][1])}}function cl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof n5=="function"?n5(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(c){return new Promise(function(d,p){c=t[r](c),a(d,p,c.done,c.value)})}}function a(r,c,d,p){Promise.resolve(p).then(function(f){r({value:f,done:d})},c)}}function q6(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:u2(n)}function u2(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function V6(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function s5(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const a=[];let r=!0;for(;i<n&&t[i].role==="model";)a.push(t[i]),r&&!u2(t[i])&&(r=!1),i++;r?e.push(...a):e.pop()}return e}class F6{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new G6(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class G6{constructor(e,n,i,a={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=a,this.history=r,this.sendPromise=Promise.resolve(),V6(r)}async sendMessage(e){var n;await this.sendPromise;const i=Mn(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,c,d;const p=await a,f=(c=(r=p.candidates)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.content,g=p.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let b=[];g!=null&&(b=(d=g.slice(_))!==null&&d!==void 0?d:[]);const S=f?[f]:[];this.recordHistory(i,S,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var n;await this.sendPromise;const i=Mn(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const r=await a;return this.processStreamResponse(r,i)}getHistory(e=!1){const n=e?s5(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,a;return Wa(this,arguments,function*(){var c,d,p,f;const g=[];try{for(var _=!0,b=cl(e),S;S=yield Vt(b.next()),c=S.done,!c;_=!0){f=S.value,_=!1;const w=f;if(q6(w)){const E=(a=(i=w.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content;E!==void 0&&g.push(E)}yield yield Vt(w)}}catch(w){d={error:w}}finally{try{!_&&!c&&(p=b.return)&&(yield Vt(p.call(b)))}finally{if(d)throw d.error}}this.recordHistory(n,g)})}recordHistory(e,n,i){let a=[];n.length>0&&n.every(r=>r.role!==void 0)?a=n:a.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...s5(i)):this.history.push(e),this.history.push(...a)}}class ed extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ed.prototype)}}function B6(t){const e={},n=m(t,["file"]);return n!=null&&y(e,["file"],n),e}function j6(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function z6(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],s2(n)),e}function H6(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function Y6(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","file"],s2(n)),e}function W6(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function J6(t){const e={},n=m(t,["config"]);return n!=null&&W6(n,e),e}function Z6(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["files"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["files"],r)}return e}class X6 extends Pi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $o(ki.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=J6(e);return r=Te("files",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=Z6(p),g=new r3;return Object.assign(g,f),g})}}async createInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=B6(e);return r=Te("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=j6(p),g=new l3;return Object.assign(g,f),g})}}async get(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Y6(e);return r=Te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=z6(e);return r=Te("files/{file}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=H6(p),g=new c3;return Object.assign(g,f),g})}}}function du(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function K6(t){const e={},n=m(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>f8(r))),y(e,["parts"],a)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function Q6(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function $6(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const a=m(t,["parameters"]);a!=null&&y(e,["parameters"],a);const r=m(t,["parametersJsonSchema"]);r!=null&&y(e,["parametersJsonSchema"],r);const c=m(t,["response"]);c!=null&&y(e,["response"],c);const d=m(t,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function e8(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const a=m(t,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const r=m(t,["candidateCount"]);r!=null&&y(e,["candidateCount"],r);const c=m(t,["enableAffectiveDialog"]);c!=null&&y(e,["enableAffectiveDialog"],c);const d=m(t,["frequencyPenalty"]);d!=null&&y(e,["frequencyPenalty"],d);const p=m(t,["logprobs"]);p!=null&&y(e,["logprobs"],p);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const g=m(t,["mediaResolution"]);g!=null&&y(e,["mediaResolution"],g);const _=m(t,["presencePenalty"]);_!=null&&y(e,["presencePenalty"],_);const b=m(t,["responseLogprobs"]);b!=null&&y(e,["responseLogprobs"],b);const S=m(t,["responseMimeType"]);S!=null&&y(e,["responseMimeType"],S);const w=m(t,["responseModalities"]);w!=null&&y(e,["responseModalities"],w);const E=m(t,["responseSchema"]);E!=null&&y(e,["responseSchema"],E);const N=m(t,["routingConfig"]);N!=null&&y(e,["routingConfig"],N);const k=m(t,["seed"]);k!=null&&y(e,["seed"],k);const L=m(t,["speechConfig"]);L!=null&&y(e,["speechConfig"],d2(L));const R=m(t,["stopSequences"]);R!=null&&y(e,["stopSequences"],R);const O=m(t,["temperature"]);O!=null&&y(e,["temperature"],O);const I=m(t,["thinkingConfig"]);I!=null&&y(e,["thinkingConfig"],I);const G=m(t,["topK"]);G!=null&&y(e,["topK"],G);const P=m(t,["topP"]);if(P!=null&&y(e,["topP"],P),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function t8(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function n8(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function s8(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const a=m(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const r=m(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const c=m(t,["topP"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topP"],c);const d=m(t,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const p=m(t,["maxOutputTokens"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const g=m(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const _=m(t,["speechConfig"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","speechConfig"],Pp(_));const b=m(t,["thinkingConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","thinkingConfig"],b);const S=m(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],S);const w=m(t,["systemInstruction"]);e!==void 0&&w!=null&&y(e,["setup","systemInstruction"],K6(Mn(w)));const E=m(t,["tools"]);if(e!==void 0&&E!=null){let G=cr(E);Array.isArray(G)&&(G=G.map(P=>p8(lr(P)))),y(e,["setup","tools"],G)}const N=m(t,["sessionResumption"]);e!==void 0&&N!=null&&y(e,["setup","sessionResumption"],h8(N));const k=m(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","inputAudioTranscription"],k);const L=m(t,["outputAudioTranscription"]);e!==void 0&&L!=null&&y(e,["setup","outputAudioTranscription"],L);const R=m(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&y(e,["setup","realtimeInputConfig"],R);const O=m(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const I=m(t,["proactivity"]);return e!==void 0&&I!=null&&y(e,["setup","proactivity"],I),n}function i8(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],e8(i));const a=m(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const r=m(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const c=m(t,["topP"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topP"],c);const d=m(t,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const p=m(t,["maxOutputTokens"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const g=m(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const _=m(t,["speechConfig"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","speechConfig"],d2(Pp(_)));const b=m(t,["thinkingConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","thinkingConfig"],b);const S=m(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],S);const w=m(t,["systemInstruction"]);e!==void 0&&w!=null&&y(e,["setup","systemInstruction"],Mn(w));const E=m(t,["tools"]);if(e!==void 0&&E!=null){let G=cr(E);Array.isArray(G)&&(G=G.map(P=>m8(lr(P)))),y(e,["setup","tools"],G)}const N=m(t,["sessionResumption"]);e!==void 0&&N!=null&&y(e,["setup","sessionResumption"],N);const k=m(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","inputAudioTranscription"],k);const L=m(t,["outputAudioTranscription"]);e!==void 0&&L!=null&&y(e,["setup","outputAudioTranscription"],L);const R=m(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&y(e,["setup","realtimeInputConfig"],R);const O=m(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const I=m(t,["proactivity"]);return e!==void 0&&I!=null&&y(e,["setup","proactivity"],I),n}function o8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],pt(t,i));const a=m(e,["config"]);return a!=null&&y(n,["config"],s8(a,n)),n}function a8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],pt(t,i));const a=m(e,["config"]);return a!=null&&y(n,["config"],i8(a,n)),n}function r8(t){const e={},n=m(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function l8(t){const e={},n=m(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["weightedPrompts"],i)}return e}function c8(t){const e={},n=m(t,["media"]);if(n!=null){let f=Qv(n);Array.isArray(f)&&(f=f.map(g=>du(g))),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],du(e2(i)));const a=m(t,["audioStreamEnd"]);a!=null&&y(e,["audioStreamEnd"],a);const r=m(t,["video"]);r!=null&&y(e,["video"],du($v(r)));const c=m(t,["text"]);c!=null&&y(e,["text"],c);const d=m(t,["activityStart"]);d!=null&&y(e,["activityStart"],d);const p=m(t,["activityEnd"]);return p!=null&&y(e,["activityEnd"],p),e}function u8(t){const e={},n=m(t,["media"]);if(n!=null){let f=Qv(n);Array.isArray(f)&&(f=f.map(g=>g)),y(e,["mediaChunks"],f)}const i=m(t,["audio"]);i!=null&&y(e,["audio"],e2(i));const a=m(t,["audioStreamEnd"]);a!=null&&y(e,["audioStreamEnd"],a);const r=m(t,["video"]);r!=null&&y(e,["video"],$v(r));const c=m(t,["text"]);c!=null&&y(e,["text"],c);const d=m(t,["activityStart"]);d!=null&&y(e,["activityStart"],d);const p=m(t,["activityEnd"]);return p!=null&&y(e,["activityEnd"],p),e}function d8(t){const e={},n=m(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const i=m(t,["serverContent"]);i!=null&&y(e,["serverContent"],i);const a=m(t,["toolCall"]);a!=null&&y(e,["toolCall"],a);const r=m(t,["toolCallCancellation"]);r!=null&&y(e,["toolCallCancellation"],r);const c=m(t,["usageMetadata"]);c!=null&&y(e,["usageMetadata"],g8(c));const d=m(t,["goAway"]);d!=null&&y(e,["goAway"],d);const p=m(t,["sessionResumptionUpdate"]);return p!=null&&y(e,["sessionResumptionUpdate"],p),e}function f8(t){const e={},n=m(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=m(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],Q6(r));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],du(d));const p=m(t,["text"]);p!=null&&y(e,["text"],p);const f=m(t,["thought"]);f!=null&&y(e,["thought"],f);const g=m(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const _=m(t,["videoMetadata"]);return _!=null&&y(e,["videoMetadata"],_),e}function h8(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function d2(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function p8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(_=>_)),y(e,["functionDeclarations"],g)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);a!=null&&y(e,["computerUse"],a);const r=m(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const c=m(t,["codeExecution"]);if(c!=null&&y(e,["codeExecution"],c),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],t8(d));const p=m(t,["googleSearch"]);p!=null&&y(e,["googleSearch"],n8(p));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function m8(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>$6(b))),y(e,["functionDeclarations"],_)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const a=m(t,["googleSearchRetrieval"]);a!=null&&y(e,["googleSearchRetrieval"],a);const r=m(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=m(t,["codeExecution"]);c!=null&&y(e,["codeExecution"],c);const d=m(t,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const p=m(t,["googleMaps"]);p!=null&&y(e,["googleMaps"],p);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const g=m(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function g8(t){const e={},n=m(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const i=m(t,["cachedContentTokenCount"]);i!=null&&y(e,["cachedContentTokenCount"],i);const a=m(t,["candidatesTokenCount"]);a!=null&&y(e,["responseTokenCount"],a);const r=m(t,["toolUsePromptTokenCount"]);r!=null&&y(e,["toolUsePromptTokenCount"],r);const c=m(t,["thoughtsTokenCount"]);c!=null&&y(e,["thoughtsTokenCount"],c);const d=m(t,["totalTokenCount"]);d!=null&&y(e,["totalTokenCount"],d);const p=m(t,["promptTokensDetails"]);if(p!=null){let S=p;Array.isArray(S)&&(S=S.map(w=>w)),y(e,["promptTokensDetails"],S)}const f=m(t,["cacheTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(w=>w)),y(e,["cacheTokensDetails"],S)}const g=m(t,["candidatesTokensDetails"]);if(g!=null){let S=g;Array.isArray(S)&&(S=S.map(w=>w)),y(e,["responseTokensDetails"],S)}const _=m(t,["toolUsePromptTokensDetails"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(w=>w)),y(e,["toolUsePromptTokensDetails"],S)}const b=m(t,["trafficType"]);return b!=null&&y(e,["trafficType"],b),e}function y8(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function v8(t){const e={},n=m(t,["content"]);n!=null&&y(e,["content"],n);const i=m(t,["citationMetadata"]);i!=null&&y(e,["citationMetadata"],_8(i));const a=m(t,["tokenCount"]);a!=null&&y(e,["tokenCount"],a);const r=m(t,["finishReason"]);r!=null&&y(e,["finishReason"],r);const c=m(t,["avgLogprobs"]);c!=null&&y(e,["avgLogprobs"],c);const d=m(t,["groundingMetadata"]);d!=null&&y(e,["groundingMetadata"],d);const p=m(t,["index"]);p!=null&&y(e,["index"],p);const f=m(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const g=m(t,["safetyRatings"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(S=>S)),y(e,["safetyRatings"],b)}const _=m(t,["urlContextMetadata"]);return _!=null&&y(e,["urlContextMetadata"],_),e}function _8(t){const e={},n=m(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>a)),y(e,["citations"],i)}return e}function x8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let r=bs(a);Array.isArray(r)&&(r=r.map(c=>c)),y(n,["contents"],r)}return n}function b8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["tokensInfo"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>r)),y(e,["tokensInfo"],a)}return e}function C8(t){const e={},n=m(t,["values"]);n!=null&&y(e,["values"],n);const i=m(t,["statistics"]);return i!=null&&y(e,["statistics"],S8(i)),e}function S8(t){const e={},n=m(t,["truncated"]);n!=null&&y(e,["truncated"],n);const i=m(t,["token_count"]);return i!=null&&y(e,["tokenCount"],i),e}function td(t){const e={},n=m(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>AE(r))),y(e,["parts"],a)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function w8(t){const e={},n=m(t,["controlType"]);n!=null&&y(e,["controlType"],n);const i=m(t,["enableControlImageComputation"]);return i!=null&&y(e,["computeControl"],i),e}function T8(t){const e={};if(m(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function E8(t,e){const n={},i=m(t,["systemInstruction"]);e!==void 0&&i!=null&&y(e,["systemInstruction"],Mn(i));const a=m(t,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(d=>g2(d))),y(e,["tools"],c)}const r=m(t,["generationConfig"]);return e!==void 0&&r!=null&&y(e,["generationConfig"],mE(r)),n}function N8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let c=bs(a);Array.isArray(c)&&(c=c.map(d=>td(d))),y(n,["contents"],c)}const r=m(e,["config"]);return r!=null&&T8(r),n}function A8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let c=bs(a);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["contents"],c)}const r=m(e,["config"]);return r!=null&&E8(r,n),n}function M8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);i!=null&&y(e,["totalTokens"],i);const a=m(t,["cachedContentTokenCount"]);return a!=null&&y(e,["cachedContentTokenCount"],a),e}function k8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["totalTokens"]);return i!=null&&y(e,["totalTokens"],i),e}function R8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],pt(t,i)),n}function I8(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],pt(t,i)),n}function D8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function P8(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function L8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=m(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const c=m(t,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&y(e,["parameters","guidanceScale"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["parameters","seed"],p);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const g=m(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const _=m(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&y(e,["parameters","includeSafetyAttributes"],_);const b=m(t,["includeRaiReason"]);e!==void 0&&b!=null&&y(e,["parameters","includeRaiReason"],b);const S=m(t,["language"]);e!==void 0&&S!=null&&y(e,["parameters","language"],S);const w=m(t,["outputMimeType"]);e!==void 0&&w!=null&&y(e,["parameters","outputOptions","mimeType"],w);const E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const N=m(t,["addWatermark"]);e!==void 0&&N!=null&&y(e,["parameters","addWatermark"],N);const k=m(t,["labels"]);e!==void 0&&k!=null&&y(e,["labels"],k);const L=m(t,["editMode"]);e!==void 0&&L!=null&&y(e,["parameters","editMode"],L);const R=m(t,["baseSteps"]);return e!==void 0&&R!=null&&y(e,["parameters","editConfig","baseSteps"],R),n}function O8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const r=m(e,["referenceImages"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>PE(p))),y(n,["instances[0]","referenceImages"],d)}const c=m(e,["config"]);return c!=null&&L8(c,n),n}function U8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>nd(r))),y(e,["generatedImages"],a)}return e}function q8(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["requests[]","taskType"],i);const a=m(t,["title"]);e!==void 0&&a!=null&&y(e,["requests[]","title"],a);const r=m(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&y(e,["requests[]","outputDimensionality"],r),m(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function V8(t,e){const n={},i=m(t,["taskType"]);e!==void 0&&i!=null&&y(e,["instances[]","task_type"],i);const a=m(t,["title"]);e!==void 0&&a!=null&&y(e,["instances[]","title"],a);const r=m(t,["outputDimensionality"]);e!==void 0&&r!=null&&y(e,["parameters","outputDimensionality"],r);const c=m(t,["mimeType"]);e!==void 0&&c!=null&&y(e,["instances[]","mimeType"],c);const d=m(t,["autoTruncate"]);return e!==void 0&&d!=null&&y(e,["parameters","autoTruncate"],d),n}function F8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let d=Rp(t,a);Array.isArray(d)&&(d=d.map(p=>p)),y(n,["requests[]","content"],d)}const r=m(e,["config"]);r!=null&&q8(r,n);const c=m(e,["model"]);return c!==void 0&&y(n,["requests[]","model"],pt(t,c)),n}function G8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let c=Rp(t,a);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["instances[]","content"],c)}const r=m(e,["config"]);return r!=null&&V8(r,n),n}function B8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["embeddings"],r)}const a=m(t,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function j8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>C8(c))),y(e,["embeddings"],r)}const a=m(t,["metadata"]);return a!=null&&y(e,["metadata"],a),e}function z8(t){const e={},n=m(t,["endpoint"]);n!=null&&y(e,["name"],n);const i=m(t,["deployedModelId"]);return i!=null&&y(e,["deployedModelId"],i),e}function H8(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Y8(t){const e={};if(m(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=m(t,["description"]);n!=null&&y(e,["description"],n);const i=m(t,["name"]);i!=null&&y(e,["name"],i);const a=m(t,["parameters"]);a!=null&&y(e,["parameters"],a);const r=m(t,["parametersJsonSchema"]);r!=null&&y(e,["parametersJsonSchema"],r);const c=m(t,["response"]);c!=null&&y(e,["response"],c);const d=m(t,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function W8(t,e,n){const i={},a=m(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],td(Mn(a)));const r=m(e,["temperature"]);r!=null&&y(i,["temperature"],r);const c=m(e,["topP"]);c!=null&&y(i,["topP"],c);const d=m(e,["topK"]);d!=null&&y(i,["topK"],d);const p=m(e,["candidateCount"]);p!=null&&y(i,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const g=m(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const _=m(e,["responseLogprobs"]);_!=null&&y(i,["responseLogprobs"],_);const b=m(e,["logprobs"]);b!=null&&y(i,["logprobs"],b);const S=m(e,["presencePenalty"]);S!=null&&y(i,["presencePenalty"],S);const w=m(e,["frequencyPenalty"]);w!=null&&y(i,["frequencyPenalty"],w);const E=m(e,["seed"]);E!=null&&y(i,["seed"],E);const N=m(e,["responseMimeType"]);N!=null&&y(i,["responseMimeType"],N);const k=m(e,["responseSchema"]);k!=null&&y(i,["responseSchema"],Ip(k));const L=m(e,["responseJsonSchema"]);if(L!=null&&y(i,["responseJsonSchema"],L),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=m(e,["safetySettings"]);if(n!==void 0&&R!=null){let z=R;Array.isArray(z)&&(z=z.map(j=>LE(j))),y(n,["safetySettings"],z)}const O=m(e,["tools"]);if(n!==void 0&&O!=null){let z=cr(O);Array.isArray(z)&&(z=z.map(j=>GE(lr(j)))),y(n,["tools"],z)}const I=m(e,["toolConfig"]);if(n!==void 0&&I!=null&&y(n,["toolConfig"],I),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=m(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Li(t,G));const P=m(e,["responseModalities"]);P!=null&&y(i,["responseModalities"],P);const M=m(e,["mediaResolution"]);M!=null&&y(i,["mediaResolution"],M);const F=m(e,["speechConfig"]);if(F!=null&&y(i,["speechConfig"],Dp(F)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=m(e,["thinkingConfig"]);B!=null&&y(i,["thinkingConfig"],B);const H=m(e,["imageConfig"]);return H!=null&&y(i,["imageConfig"],H),i}function J8(t,e,n){const i={},a=m(e,["systemInstruction"]);n!==void 0&&a!=null&&y(n,["systemInstruction"],Mn(a));const r=m(e,["temperature"]);r!=null&&y(i,["temperature"],r);const c=m(e,["topP"]);c!=null&&y(i,["topP"],c);const d=m(e,["topK"]);d!=null&&y(i,["topK"],d);const p=m(e,["candidateCount"]);p!=null&&y(i,["candidateCount"],p);const f=m(e,["maxOutputTokens"]);f!=null&&y(i,["maxOutputTokens"],f);const g=m(e,["stopSequences"]);g!=null&&y(i,["stopSequences"],g);const _=m(e,["responseLogprobs"]);_!=null&&y(i,["responseLogprobs"],_);const b=m(e,["logprobs"]);b!=null&&y(i,["logprobs"],b);const S=m(e,["presencePenalty"]);S!=null&&y(i,["presencePenalty"],S);const w=m(e,["frequencyPenalty"]);w!=null&&y(i,["frequencyPenalty"],w);const E=m(e,["seed"]);E!=null&&y(i,["seed"],E);const N=m(e,["responseMimeType"]);N!=null&&y(i,["responseMimeType"],N);const k=m(e,["responseSchema"]);k!=null&&y(i,["responseSchema"],Ip(k));const L=m(e,["responseJsonSchema"]);L!=null&&y(i,["responseJsonSchema"],L);const R=m(e,["routingConfig"]);R!=null&&y(i,["routingConfig"],R);const O=m(e,["modelSelectionConfig"]);O!=null&&y(i,["modelConfig"],O);const I=m(e,["safetySettings"]);if(n!==void 0&&I!=null){let q=I;Array.isArray(q)&&(q=q.map(Z=>Z)),y(n,["safetySettings"],q)}const G=m(e,["tools"]);if(n!==void 0&&G!=null){let q=cr(G);Array.isArray(q)&&(q=q.map(Z=>g2(lr(Z)))),y(n,["tools"],q)}const P=m(e,["toolConfig"]);n!==void 0&&P!=null&&y(n,["toolConfig"],P);const M=m(e,["labels"]);n!==void 0&&M!=null&&y(n,["labels"],M);const F=m(e,["cachedContent"]);n!==void 0&&F!=null&&y(n,["cachedContent"],Li(t,F));const B=m(e,["responseModalities"]);B!=null&&y(i,["responseModalities"],B);const H=m(e,["mediaResolution"]);H!=null&&y(i,["mediaResolution"],H);const z=m(e,["speechConfig"]);z!=null&&y(i,["speechConfig"],m2(Dp(z)));const j=m(e,["audioTimestamp"]);j!=null&&y(i,["audioTimestamp"],j);const $=m(e,["thinkingConfig"]);$!=null&&y(i,["thinkingConfig"],$);const oe=m(e,["imageConfig"]);return oe!=null&&y(i,["imageConfig"],oe),i}function i5(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let c=bs(a);Array.isArray(c)&&(c=c.map(d=>td(d))),y(n,["contents"],c)}const r=m(e,["config"]);return r!=null&&y(n,["generationConfig"],W8(t,r,n)),n}function o5(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["contents"]);if(a!=null){let c=bs(a);Array.isArray(c)&&(c=c.map(d=>d)),y(n,["contents"],c)}const r=m(e,["config"]);return r!=null&&y(n,["generationConfig"],J8(t,r,n)),n}function a5(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(f=>v8(f))),y(e,["candidates"],p)}const a=m(t,["modelVersion"]);a!=null&&y(e,["modelVersion"],a);const r=m(t,["promptFeedback"]);r!=null&&y(e,["promptFeedback"],r);const c=m(t,["responseId"]);c!=null&&y(e,["responseId"],c);const d=m(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function r5(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(g=>g)),y(e,["candidates"],f)}const a=m(t,["createTime"]);a!=null&&y(e,["createTime"],a);const r=m(t,["modelVersion"]);r!=null&&y(e,["modelVersion"],r);const c=m(t,["promptFeedback"]);c!=null&&y(e,["promptFeedback"],c);const d=m(t,["responseId"]);d!=null&&y(e,["responseId"],d);const p=m(t,["usageMetadata"]);return p!=null&&y(e,["usageMetadata"],p),e}function Z8(t,e){const n={};if(m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=m(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const r=m(t,["guidanceScale"]);if(e!==void 0&&r!=null&&y(e,["parameters","guidanceScale"],r),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=m(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&y(e,["parameters","safetySetting"],c);const d=m(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const p=m(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&y(e,["parameters","includeSafetyAttributes"],p);const f=m(t,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const g=m(t,["language"]);e!==void 0&&g!=null&&y(e,["parameters","language"],g);const _=m(t,["outputMimeType"]);e!==void 0&&_!=null&&y(e,["parameters","outputOptions","mimeType"],_);const b=m(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&y(e,["parameters","outputOptions","compressionQuality"],b),m(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=m(t,["imageSize"]);if(e!==void 0&&S!=null&&y(e,["parameters","sampleImageSize"],S),m(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function X8(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=m(t,["negativePrompt"]);e!==void 0&&a!=null&&y(e,["parameters","negativePrompt"],a);const r=m(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const c=m(t,["aspectRatio"]);e!==void 0&&c!=null&&y(e,["parameters","aspectRatio"],c);const d=m(t,["guidanceScale"]);e!==void 0&&d!=null&&y(e,["parameters","guidanceScale"],d);const p=m(t,["seed"]);e!==void 0&&p!=null&&y(e,["parameters","seed"],p);const f=m(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const g=m(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const _=m(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&y(e,["parameters","includeSafetyAttributes"],_);const b=m(t,["includeRaiReason"]);e!==void 0&&b!=null&&y(e,["parameters","includeRaiReason"],b);const S=m(t,["language"]);e!==void 0&&S!=null&&y(e,["parameters","language"],S);const w=m(t,["outputMimeType"]);e!==void 0&&w!=null&&y(e,["parameters","outputOptions","mimeType"],w);const E=m(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const N=m(t,["addWatermark"]);e!==void 0&&N!=null&&y(e,["parameters","addWatermark"],N);const k=m(t,["labels"]);e!==void 0&&k!=null&&y(e,["labels"],k);const L=m(t,["imageSize"]);e!==void 0&&L!=null&&y(e,["parameters","sampleImageSize"],L);const R=m(t,["enhancePrompt"]);return e!==void 0&&R!=null&&y(e,["parameters","enhancePrompt"],R),n}function K8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const r=m(e,["config"]);return r!=null&&Z8(r,n),n}function Q8(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const r=m(e,["config"]);return r!=null&&X8(r,n),n}function $8(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>dE(c))),y(e,["generatedImages"],r)}const a=m(t,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],h2(a)),e}function eE(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>nd(c))),y(e,["generatedImages"],r)}const a=m(t,["positivePromptSafetyAttributes"]);return a!=null&&y(e,["positivePromptSafetyAttributes"],p2(a)),e}function tE(t,e){const n={},i=m(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i),m(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=m(t,["durationSeconds"]);if(e!==void 0&&a!=null&&y(e,["parameters","durationSeconds"],a),m(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=m(t,["aspectRatio"]);e!==void 0&&r!=null&&y(e,["parameters","aspectRatio"],r);const c=m(t,["resolution"]);e!==void 0&&c!=null&&y(e,["parameters","resolution"],c);const d=m(t,["personGeneration"]);if(e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d),m(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=m(t,["negativePrompt"]);e!==void 0&&p!=null&&y(e,["parameters","negativePrompt"],p);const f=m(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),m(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=m(t,["lastFrame"]);e!==void 0&&g!=null&&y(e,["instances[0]","lastFrame"],sd(g));const _=m(t,["referenceImages"]);if(e!==void 0&&_!=null){let b=_;Array.isArray(b)&&(b=b.map(S=>e7(S))),y(e,["instances[0]","referenceImages"],b)}if(m(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function nE(t,e){const n={},i=m(t,["numberOfVideos"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=m(t,["outputGcsUri"]);e!==void 0&&a!=null&&y(e,["parameters","storageUri"],a);const r=m(t,["fps"]);e!==void 0&&r!=null&&y(e,["parameters","fps"],r);const c=m(t,["durationSeconds"]);e!==void 0&&c!=null&&y(e,["parameters","durationSeconds"],c);const d=m(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const p=m(t,["aspectRatio"]);e!==void 0&&p!=null&&y(e,["parameters","aspectRatio"],p);const f=m(t,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const g=m(t,["personGeneration"]);e!==void 0&&g!=null&&y(e,["parameters","personGeneration"],g);const _=m(t,["pubsubTopic"]);e!==void 0&&_!=null&&y(e,["parameters","pubsubTopic"],_);const b=m(t,["negativePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","negativePrompt"],b);const S=m(t,["enhancePrompt"]);e!==void 0&&S!=null&&y(e,["parameters","enhancePrompt"],S);const w=m(t,["generateAudio"]);e!==void 0&&w!=null&&y(e,["parameters","generateAudio"],w);const E=m(t,["lastFrame"]);e!==void 0&&E!=null&&y(e,["instances[0]","lastFrame"],Vs(E));const N=m(t,["referenceImages"]);if(e!==void 0&&N!=null){let R=N;Array.isArray(R)&&(R=R.map(O=>t7(O))),y(e,["instances[0]","referenceImages"],R)}const k=m(t,["mask"]);e!==void 0&&k!=null&&y(e,["instances[0]","mask"],$E(k));const L=m(t,["compressionQuality"]);return e!==void 0&&L!=null&&y(e,["parameters","compressionQuality"],L),n}function sE(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response","generateVideoResponse"]);return c!=null&&y(e,["response"],rE(c)),e}function iE(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response"]);return c!=null&&y(e,["response"],lE(c)),e}function oE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],sd(r));const c=m(e,["video"]);c!=null&&y(n,["instances[0]","video"],y2(c));const d=m(e,["source"]);d!=null&&cE(d,n);const p=m(e,["config"]);return p!=null&&tE(p,n),n}function aE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["prompt"]);a!=null&&y(n,["instances[0]","prompt"],a);const r=m(e,["image"]);r!=null&&y(n,["instances[0]","image"],Vs(r));const c=m(e,["video"]);c!=null&&y(n,["instances[0]","video"],v2(c));const d=m(e,["source"]);d!=null&&uE(d,n);const p=m(e,["config"]);return p!=null&&nE(p,n),n}function rE(t){const e={},n=m(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>hE(c))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=m(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function lE(t){const e={},n=m(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(c=>pE(c))),y(e,["generatedVideos"],r)}const i=m(t,["raiMediaFilteredCount"]);i!=null&&y(e,["raiMediaFilteredCount"],i);const a=m(t,["raiMediaFilteredReasons"]);return a!=null&&y(e,["raiMediaFilteredReasons"],a),e}function cE(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=m(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],sd(a));const r=m(t,["video"]);return e!==void 0&&r!=null&&y(e,["instances[0]","video"],y2(r)),n}function uE(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=m(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],Vs(a));const r=m(t,["video"]);return e!==void 0&&r!=null&&y(e,["instances[0]","video"],v2(r)),n}function dE(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],xE(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const a=m(t,["_self"]);return a!=null&&y(e,["safetyAttributes"],h2(a)),e}function nd(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["image"],f2(n));const i=m(t,["raiFilteredReason"]);i!=null&&y(e,["raiFilteredReason"],i);const a=m(t,["_self"]);a!=null&&y(e,["safetyAttributes"],p2(a));const r=m(t,["prompt"]);return r!=null&&y(e,["enhancedPrompt"],r),e}function fE(t){const e={},n=m(t,["_self"]);n!=null&&y(e,["mask"],f2(n));const i=m(t,["labels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>r)),y(e,["labels"],a)}return e}function hE(t){const e={},n=m(t,["video"]);return n!=null&&y(e,["video"],KE(n)),e}function pE(t){const e={},n=m(t,["_self"]);return n!=null&&y(e,["video"],QE(n)),e}function mE(t){const e={},n=m(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const i=m(t,["responseJsonSchema"]);i!=null&&y(e,["responseJsonSchema"],i);const a=m(t,["audioTimestamp"]);a!=null&&y(e,["audioTimestamp"],a);const r=m(t,["candidateCount"]);r!=null&&y(e,["candidateCount"],r);const c=m(t,["enableAffectiveDialog"]);c!=null&&y(e,["enableAffectiveDialog"],c);const d=m(t,["frequencyPenalty"]);d!=null&&y(e,["frequencyPenalty"],d);const p=m(t,["logprobs"]);p!=null&&y(e,["logprobs"],p);const f=m(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const g=m(t,["mediaResolution"]);g!=null&&y(e,["mediaResolution"],g);const _=m(t,["presencePenalty"]);_!=null&&y(e,["presencePenalty"],_);const b=m(t,["responseLogprobs"]);b!=null&&y(e,["responseLogprobs"],b);const S=m(t,["responseMimeType"]);S!=null&&y(e,["responseMimeType"],S);const w=m(t,["responseModalities"]);w!=null&&y(e,["responseModalities"],w);const E=m(t,["responseSchema"]);E!=null&&y(e,["responseSchema"],E);const N=m(t,["routingConfig"]);N!=null&&y(e,["routingConfig"],N);const k=m(t,["seed"]);k!=null&&y(e,["seed"],k);const L=m(t,["speechConfig"]);L!=null&&y(e,["speechConfig"],m2(L));const R=m(t,["stopSequences"]);R!=null&&y(e,["stopSequences"],R);const O=m(t,["temperature"]);O!=null&&y(e,["temperature"],O);const I=m(t,["thinkingConfig"]);I!=null&&y(e,["thinkingConfig"],I);const G=m(t,["topK"]);G!=null&&y(e,["topK"],G);const P=m(t,["topP"]);if(P!=null&&y(e,["topP"],P),m(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function gE(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],pt(t,i)),n}function yE(t,e){const n={},i=m(e,["model"]);return i!=null&&y(n,["_url","name"],pt(t,i)),n}function vE(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function _E(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function xE(t){const e={},n=m(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],To(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function f2(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["imageBytes"],To(i));const a=m(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function sd(t){const e={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=m(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],To(n));const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function Vs(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["imageBytes"]);i!=null&&y(e,["bytesBase64Encoded"],To(i));const a=m(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function bE(t,e,n){const i={},a=m(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const r=m(e,["pageToken"]);n!==void 0&&r!=null&&y(n,["_query","pageToken"],r);const c=m(e,["filter"]);n!==void 0&&c!=null&&y(n,["_query","filter"],c);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&y(n,["_url","models_url"],i2(t,d)),i}function CE(t,e,n){const i={},a=m(e,["pageSize"]);n!==void 0&&a!=null&&y(n,["_query","pageSize"],a);const r=m(e,["pageToken"]);n!==void 0&&r!=null&&y(n,["_query","pageToken"],r);const c=m(e,["filter"]);n!==void 0&&c!=null&&y(n,["_query","filter"],c);const d=m(e,["queryBase"]);return n!==void 0&&d!=null&&y(n,["_url","models_url"],i2(t,d)),i}function SE(t,e){const n={},i=m(e,["config"]);return i!=null&&bE(t,i,n),n}function wE(t,e){const n={},i=m(e,["config"]);return i!=null&&CE(t,i,n),n}function TE(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["_self"]);if(a!=null){let r=o2(a);Array.isArray(r)&&(r=r.map(c=>Ph(c))),y(e,["models"],r)}return e}function EE(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["_self"]);if(a!=null){let r=o2(a);Array.isArray(r)&&(r=r.map(c=>Lh(c))),y(e,["models"],r)}return e}function NE(t){const e={},n=m(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const i=m(t,["segmentationClasses"]);i!=null&&y(e,["maskClasses"],i);const a=m(t,["maskDilation"]);return a!=null&&y(e,["dilation"],a),e}function Ph(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=m(t,["description"]);a!=null&&y(e,["description"],a);const r=m(t,["version"]);r!=null&&y(e,["version"],r);const c=m(t,["_self"]);c!=null&&y(e,["tunedModelInfo"],BE(c));const d=m(t,["inputTokenLimit"]);d!=null&&y(e,["inputTokenLimit"],d);const p=m(t,["outputTokenLimit"]);p!=null&&y(e,["outputTokenLimit"],p);const f=m(t,["supportedGenerationMethods"]);f!=null&&y(e,["supportedActions"],f);const g=m(t,["temperature"]);g!=null&&y(e,["temperature"],g);const _=m(t,["maxTemperature"]);_!=null&&y(e,["maxTemperature"],_);const b=m(t,["topP"]);b!=null&&y(e,["topP"],b);const S=m(t,["topK"]);S!=null&&y(e,["topK"],S);const w=m(t,["thinking"]);return w!=null&&y(e,["thinking"],w),e}function Lh(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["displayName"]);i!=null&&y(e,["displayName"],i);const a=m(t,["description"]);a!=null&&y(e,["description"],a);const r=m(t,["versionId"]);r!=null&&y(e,["version"],r);const c=m(t,["deployedModels"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(b=>z8(b))),y(e,["endpoints"],_)}const d=m(t,["labels"]);d!=null&&y(e,["labels"],d);const p=m(t,["_self"]);p!=null&&y(e,["tunedModelInfo"],jE(p));const f=m(t,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const g=m(t,["checkpoints"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(b=>b)),y(e,["checkpoints"],_)}return e}function AE(t){const e={},n=m(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=m(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],H8(r));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],y8(d));const p=m(t,["text"]);p!=null&&y(e,["text"],p);const f=m(t,["thought"]);f!=null&&y(e,["thought"],f);const g=m(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const _=m(t,["videoMetadata"]);return _!=null&&y(e,["videoMetadata"],_),e}function ME(t){const e={},n=m(t,["productImage"]);return n!=null&&y(e,["image"],Vs(n)),e}function kE(t,e){const n={},i=m(t,["numberOfImages"]);e!==void 0&&i!=null&&y(e,["parameters","sampleCount"],i);const a=m(t,["baseSteps"]);e!==void 0&&a!=null&&y(e,["parameters","baseSteps"],a);const r=m(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const c=m(t,["seed"]);e!==void 0&&c!=null&&y(e,["parameters","seed"],c);const d=m(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const p=m(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const f=m(t,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const g=m(t,["outputMimeType"]);e!==void 0&&g!=null&&y(e,["parameters","outputOptions","mimeType"],g);const _=m(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&y(e,["parameters","outputOptions","compressionQuality"],_);const b=m(t,["enhancePrompt"]);e!==void 0&&b!=null&&y(e,["parameters","enhancePrompt"],b);const S=m(t,["labels"]);return e!==void 0&&S!=null&&y(e,["labels"],S),n}function RE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["source"]);a!=null&&DE(a,n);const r=m(e,["config"]);return r!=null&&kE(r,n),n}function IE(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>nd(a))),y(e,["generatedImages"],i)}return e}function DE(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=m(t,["personImage"]);e!==void 0&&a!=null&&y(e,["instances[0]","personImage","image"],Vs(a));const r=m(t,["productImages"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>ME(d))),y(e,["instances[0]","productImages"],c)}return n}function PE(t){const e={},n=m(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Vs(n));const i=m(t,["referenceId"]);i!=null&&y(e,["referenceId"],i);const a=m(t,["referenceType"]);a!=null&&y(e,["referenceType"],a);const r=m(t,["maskImageConfig"]);r!=null&&y(e,["maskImageConfig"],NE(r));const c=m(t,["controlImageConfig"]);c!=null&&y(e,["controlImageConfig"],w8(c));const d=m(t,["styleImageConfig"]);d!=null&&y(e,["styleImageConfig"],d);const p=m(t,["subjectImageConfig"]);return p!=null&&y(e,["subjectImageConfig"],p),e}function h2(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const a=m(t,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function p2(t){const e={},n=m(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const i=m(t,["safetyAttributes","scores"]);i!=null&&y(e,["scores"],i);const a=m(t,["contentType"]);return a!=null&&y(e,["contentType"],a),e}function LE(t){const e={},n=m(t,["category"]);if(n!=null&&y(e,["category"],n),m(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(t,["threshold"]);return i!=null&&y(e,["threshold"],i),e}function OE(t){const e={},n=m(t,["image"]);return n!=null&&y(e,["image"],Vs(n)),e}function UE(t,e){const n={},i=m(t,["mode"]);e!==void 0&&i!=null&&y(e,["parameters","mode"],i);const a=m(t,["maxPredictions"]);e!==void 0&&a!=null&&y(e,["parameters","maxPredictions"],a);const r=m(t,["confidenceThreshold"]);e!==void 0&&r!=null&&y(e,["parameters","confidenceThreshold"],r);const c=m(t,["maskDilation"]);e!==void 0&&c!=null&&y(e,["parameters","maskDilation"],c);const d=m(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&y(e,["parameters","binaryColorThreshold"],d);const p=m(t,["labels"]);return e!==void 0&&p!=null&&y(e,["labels"],p),n}function qE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["source"]);a!=null&&FE(a,n);const r=m(e,["config"]);return r!=null&&UE(r,n),n}function VE(t){const e={},n=m(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>fE(a))),y(e,["generatedMasks"],i)}return e}function FE(t,e){const n={},i=m(t,["prompt"]);e!==void 0&&i!=null&&y(e,["instances[0]","prompt"],i);const a=m(t,["image"]);e!==void 0&&a!=null&&y(e,["instances[0]","image"],Vs(a));const r=m(t,["scribbleImage"]);return e!==void 0&&r!=null&&y(e,["instances[0]","scribble"],OE(r)),n}function m2(t){const e={},n=m(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const i=m(t,["voiceConfig"]);if(i!=null&&y(e,["voiceConfig"],i),m(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function GE(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(_=>_)),y(e,["functionDeclarations"],g)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);a!=null&&y(e,["computerUse"],a);const r=m(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const c=m(t,["codeExecution"]);if(c!=null&&y(e,["codeExecution"],c),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],vE(d));const p=m(t,["googleSearch"]);p!=null&&y(e,["googleSearch"],_E(p));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function g2(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(b=>Y8(b))),y(e,["functionDeclarations"],_)}const i=m(t,["retrieval"]);i!=null&&y(e,["retrieval"],i);const a=m(t,["googleSearchRetrieval"]);a!=null&&y(e,["googleSearchRetrieval"],a);const r=m(t,["computerUse"]);if(r!=null&&y(e,["computerUse"],r),m(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=m(t,["codeExecution"]);c!=null&&y(e,["codeExecution"],c);const d=m(t,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const p=m(t,["googleMaps"]);p!=null&&y(e,["googleMaps"],p);const f=m(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const g=m(t,["urlContext"]);return g!=null&&y(e,["urlContext"],g),e}function BE(t){const e={},n=m(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const a=m(t,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function jE(t){const e={},n=m(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const i=m(t,["createTime"]);i!=null&&y(e,["createTime"],i);const a=m(t,["updateTime"]);return a!=null&&y(e,["updateTime"],a),e}function zE(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=m(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const r=m(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&y(e,["defaultCheckpointId"],r),n}function HE(t,e){const n={},i=m(t,["displayName"]);e!==void 0&&i!=null&&y(e,["displayName"],i);const a=m(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);const r=m(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&y(e,["defaultCheckpointId"],r),n}function YE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","name"],pt(t,i));const a=m(e,["config"]);return a!=null&&zE(a,n),n}function WE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["config"]);return a!=null&&HE(a,n),n}function JE(t,e){const n={},i=m(t,["outputGcsUri"]);e!==void 0&&i!=null&&y(e,["parameters","storageUri"],i);const a=m(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const r=m(t,["personGeneration"]);e!==void 0&&r!=null&&y(e,["parameters","personGeneration"],r);const c=m(t,["includeRaiReason"]);e!==void 0&&c!=null&&y(e,["parameters","includeRaiReason"],c);const d=m(t,["outputMimeType"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","mimeType"],d);const p=m(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","compressionQuality"],p);const f=m(t,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const g=m(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const _=m(t,["labels"]);e!==void 0&&_!=null&&y(e,["labels"],_);const b=m(t,["numberOfImages"]);e!==void 0&&b!=null&&y(e,["parameters","sampleCount"],b);const S=m(t,["mode"]);return e!==void 0&&S!=null&&y(e,["parameters","mode"],S),n}function ZE(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["_url","model"],pt(t,i));const a=m(e,["image"]);a!=null&&y(n,["instances[0]","image"],Vs(a));const r=m(e,["upscaleFactor"]);r!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],r);const c=m(e,["config"]);return c!=null&&JE(c,n),n}function XE(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>nd(r))),y(e,["generatedImages"],a)}return e}function KE(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["encodedVideo"]);i!=null&&y(e,["videoBytes"],To(i));const a=m(t,["encoding"]);return a!=null&&y(e,["mimeType"],a),e}function QE(t){const e={},n=m(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const i=m(t,["bytesBase64Encoded"]);i!=null&&y(e,["videoBytes"],To(i));const a=m(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}function $E(t){const e={},n=m(t,["image"]);n!=null&&y(e,["_self"],Vs(n));const i=m(t,["maskMode"]);return i!=null&&y(e,["maskMode"],i),e}function e7(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],sd(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function t7(t){const e={},n=m(t,["image"]);n!=null&&y(e,["image"],Vs(n));const i=m(t,["referenceType"]);return i!=null&&y(e,["referenceType"],i),e}function y2(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["uri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["encodedVideo"],To(i));const a=m(t,["mimeType"]);return a!=null&&y(e,["encoding"],a),e}function v2(t){const e={},n=m(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const i=m(t,["videoBytes"]);i!=null&&y(e,["bytesBase64Encoded"],To(i));const a=m(t,["mimeType"]);return a!=null&&y(e,["mimeType"],a),e}const n7="Content-Type",s7="X-Server-Timeout",i7="User-Agent",Oh="x-goog-api-client",o7="1.29.1",a7=`google-genai-sdk/${o7}`,r7="v1beta1",l7="v1beta",l5=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class c7{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const a={};this.clientOptions.vertexai?(a.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:r7,a.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:l7,a.baseUrl="https://generativelanguage.googleapis.com/"),a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const a=[this.getRequestUrlInternal(n)];return i&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))a.searchParams.append(c,String(d));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,a.toString(),e.abortSignal),this.unaryApiCall(a,r,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[a,r]of Object.entries(n))typeof r=="object"?i[a]=Object.assign(Object.assign({},i[a]),r):r!==void 0&&(i[a]=r);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),a=this.constructUrl(e.path,n,i);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,a.toString(),e.abortSignal),this.streamApiCall(a,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,a){if(n&&n.timeout||a){const r=new AbortController,c=r.signal;if(n.timeout&&n?.timeout>0){const d=setTimeout(()=>r.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}a&&a.addEventListener("abort",()=>{r.abort()}),e.signal=c}return n&&n.extraBody!==null&&u7(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await c5(a),new Rh(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async a=>(await c5(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){var n;return Wa(this,arguments,function*(){const a=(n=e?.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield Vt(a.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=r.decode(p,{stream:!0});try{const _=JSON.parse(f);if("error"in _){const b=JSON.parse(JSON.stringify(_.error)),S=b.status,w=b.code,E=`got status: ${S}. ${JSON.stringify(_)}`;if(w>=400&&w<600)throw new ed({message:E,status:w})}}catch(_){if(_.name==="ApiError")throw _}c+=f;let g=c.match(l5);for(;g;){const _=g[1];try{const b=new Response(_,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Vt(new Rh(b)),c=c.slice(g[0].length),g=c.match(l5)}catch(b){throw new Error(`exception parsing stream chunk ${_}. ${b}`)}}}}finally{a.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=a7+" "+this.clientOptions.userAgentExtra;return e[i7]=n,e[Oh]=n,e[n7]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[a,r]of Object.entries(e.headers))i.append(a,r);e.timeout&&e.timeout>0&&i.append(s7,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const a={};n!=null&&(a.mimeType=n.mimeType,a.name=n.name,a.displayName=n.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const r=this.clientOptions.uploader,c=await r.stat(e);a.sizeBytes=String(c.size);const d=(i=n?.mimeType)!==null&&i!==void 0?i:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=d;const p={file:a},f=this.getFileName(e),g=Te("upload/v1beta/files",p._url),_=await this.fetchUploadUrl(g,a.sizeBytes,a.mimeType,f,p,n?.httpOptions);return r.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,i){var a;const r=this.clientOptions.uploader,c=await r.stat(n),d=String(c.size),p=(a=i?.mimeType)!==null&&a!==void 0?a:c.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(n),_={};i?.customMetadata&&(_.customMetadata=i.customMetadata),i?.chunkingConfig&&(_.chunkingConfig=i.chunkingConfig);const b=await this.fetchUploadUrl(f,d,p,g,_,i?.httpOptions);return r.uploadToFileSearchStore(n,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,a,r,c){var d;let p={};c?p=c:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},a?{"X-Goog-Upload-File-Name":a}:{})};const f=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:p});if(!f||!f?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(d=f?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function c5(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(i);throw n>=400&&n<600?new ed({message:a,status:n}):new Error(a)}}function u7(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,c){const d=Object.assign({},r);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p)){const f=c[p],g=d[p];f&&typeof f=="object"&&!Array.isArray(f)&&g&&typeof g=="object"&&!Array.isArray(g)?d[p]=i(g,f):(g&&f&&typeof g!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof g}, New type: ${typeof f}. Overwriting.`),d[p]=f)}return d}const a=i(n,e);t.body=JSON.stringify(a)}const d7="mcp_used/unknown";let f7=!1;function _2(t){for(const e of t)if(h7(e)||typeof e=="object"&&"inputSchema"in e)return!0;return f7}function x2(t){var e;const n=(e=t[Oh])!==null&&e!==void 0?e:"";t[Oh]=(n+` ${d7}`).trimStart()}function h7(t){return t!==null&&typeof t=="object"&&t instanceof Lp}function p7(t,e=100){return Wa(this,arguments,function*(){let i,a=0;for(;a<e;){const r=yield Vt(t.listTools({cursor:i}));for(const c of r.tools)yield yield Vt(c),a++;if(!r.nextCursor)break;i=r.nextCursor}})}class Lp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Lp(e,n)}async initialize(){var e,n,i,a;if(this.mcpTools.length>0)return;const r={},c=[];for(const g of this.mcpClients)try{for(var d=!0,p=(n=void 0,cl(p7(g))),f;f=await p.next(),e=f.done,!e;d=!0){a=f.value,d=!1;const _=a;c.push(_);const b=_.name;if(r[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);r[b]=g}}catch(_){n={error:_}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),_3(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const c=await a.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return n}}async function m7(t,e,n){const i=new d3;let a;n.data instanceof Blob?a=JSON.parse(await n.data.text()):a=JSON.parse(n.data),Object.assign(i,a),e(i)}class g7{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),c=_7(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${a}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const g=new Promise(R=>{f=R}),_=e.callbacks,b=function(){f({})},S=this.apiClient,w={onopen:b,onmessage:R=>{m7(S,_.onmessage,R)},onerror:(n=_?.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=_?.onclose)!==null&&i!==void 0?i:function(R){}},E=this.webSocketFactory.create(p,v7(c),w);E.connect(),await g;const L={setup:{model:pt(this.apiClient,e.model)}};return E.send(JSON.stringify(L)),new y7(E,this.apiClient)}}class y7{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=l8(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=r8(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ja.PLAY)}pause(){this.sendPlaybackControl(ja.PAUSE)}stop(){this.sendPlaybackControl(ja.STOP)}resetContext(){this.sendPlaybackControl(ja.RESET_CONTEXT)}close(){this.conn.close()}}function v7(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function _7(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const x7="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function b7(t,e,n){const i=new u3;let a;n.data instanceof Blob?a=await n.data.text():n.data instanceof ArrayBuffer?a=new TextDecoder().decode(n.data):a=n.data;const r=JSON.parse(a);if(t.isVertexAI()){const c=d8(r);Object.assign(i,c)}else Object.assign(i,r);e(i)}class C7{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new g7(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,a,r,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let g;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&_2(e.config.tools)&&x2(_);const b=E7(_);if(this.apiClient.isVertexAI())g=`${p}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,g);else{const F=this.apiClient.getApiKey();let B="BidiGenerateContent",H="key";F?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),B="BidiGenerateContentConstrained",H="access_token"),g=`${p}/ws/google.ai.generativelanguage.${f}.GenerativeService.${B}?${H}=${F}`}let S=()=>{};const w=new Promise(F=>{S=F}),E=e.callbacks,N=function(){var F;(F=E?.onopen)===null||F===void 0||F.call(E),S({})},k=this.apiClient,L={onopen:N,onmessage:F=>{b7(k,E.onmessage,F)},onerror:(n=E?.onerror)!==null&&n!==void 0?n:function(F){},onclose:(i=E?.onclose)!==null&&i!==void 0?i:function(F){}},R=this.webSocketFactory.create(g,T7(b),L);R.connect(),await w;let O=pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const F=this.apiClient.getProject(),B=this.apiClient.getLocation();O=`projects/${F}/locations/${B}/`+O}let I={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mu.AUDIO]}:e.config.responseModalities=[Mu.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],P=[];for(const F of G)if(this.isCallableTool(F)){const B=F;P.push(await B.tool())}else P.push(F);P.length>0&&(e.config.tools=P);const M={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=a8(this.apiClient,M):I=o8(this.apiClient,M),delete I.config,R.send(JSON.stringify(I)),new w7(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const S7={turnComplete:!0};class w7{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=bs(n.turns),e.isVertexAI()||(i=i.map(a=>td(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(x7)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},S7),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:u8(e)}:n={realtimeInput:c8(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function T7(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function E7(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}const u5=10;function d5(t){var e,n,i;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(n=t?.tools)!==null&&n!==void 0?n:[])if(Ja(c)){a=!0;break}if(!a)return!0;const r=(i=t?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Ja(t){return"callTool"in t&&typeof t.callTool=="function"}function N7(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(a=>Ja(a)))!==null&&i!==void 0?i:!1}function f5(t){var e;const n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,a)=>{if(Ja(i))return;const r=i;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(a)}),n}function h5(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class A7 extends Pi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,a,r,c,d;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!N7(n)||d5(n.config))return await this.generateContentInternal(p);const f=f5(n);if(f.length>0){const E=f.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let g,_;const b=bs(p.contents),S=(r=(a=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&r!==void 0?r:u5;let w=0;for(;w<S&&(g=await this.generateContentInternal(p),!(!g.functionCalls||g.functionCalls.length===0));){const E=g.candidates[0].content,N=[];for(const k of(d=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Ja(k)){const R=await k.callTool(g.functionCalls);N.push(...R)}w++,_={role:"user",parts:N},p.contents=bs(p.contents),p.contents.push(E),p.contents.push(_),h5(p.config)&&(b.push(E),b.push(_))}return h5(p.config)&&(g.automaticFunctionCallingHistory=b),g},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),d5(n.config)){const a=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(a)}const i=f5(n);if(i.length>0){const a=i.map(r=>`tools[${r}]`).join(", ");throw new Error(`Incompatible tools found at ${a}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var a;let r;const c=[];if(i?.generatedImages)for(const p of i.generatedImages)p&&p?.safetyAttributes&&((a=p?.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?r=p?.safetyAttributes:c.push(p);let d;return r?d={generatedImages:c,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new $o(ki.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const a={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(a)},this.generateVideos=async n=>{var i,a,r,c,d,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((a=n.video)===null||a===void 0)&&a.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(r=n.source)===null||r===void 0?void 0:r.video)===null||c===void 0)&&c.uri&&(!((p=(d=n.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,a;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const c=await Promise.all(r.map(async p=>Ja(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&_2(e.config.tools)){const p=(a=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&a!==void 0?a:{};let f=Object.assign({},p);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),x2(f),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(e){var n,i,a;const r=new Map;for(const c of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ja(c)){const d=c,p=await d.tool();for(const f of(a=p.functionDeclarations)!==null&&a!==void 0?a:[]){if(!f.name)throw new Error("Function declaration name is required.");if(r.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);r.set(f.name,d)}}return r}async processAfcStream(e){var n,i,a;const r=(a=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:u5;let c=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(f,g,_){var b,S;return Wa(this,arguments,function*(){for(var w,E,N,k;d<r;){c&&(d++,c=!1);const I=yield Vt(f.processParamsMaybeAddMcpUsage(_)),G=yield Vt(f.generateContentStreamInternal(I)),P=[],M=[];try{for(var L=!0,R=(E=void 0,cl(G)),O;O=yield Vt(R.next()),w=O.done,!w;L=!0){k=O.value,L=!1;const F=k;if(yield yield Vt(F),F.candidates&&(!((b=F.candidates[0])===null||b===void 0)&&b.content)){M.push(F.candidates[0].content);for(const B of(S=F.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(d<r&&B.functionCall){if(!B.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(B.functionCall.name)){const H=yield Vt(g.get(B.functionCall.name).callTool([B.functionCall]));P.push(...H)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${B.functionCall.name}`)}}}}catch(F){E={error:F}}finally{try{!L&&!w&&(N=R.return)&&(yield Vt(N.call(R)))}finally{if(E)throw E.error}}if(P.length>0){c=!0;const F=new ol;F.candidates=[{content:{role:"user",parts:P}}],yield yield Vt(F);const B=[];B.push(...M),B.push({role:"user",parts:P});const H=bs(_.contents).concat(B);_.contents=H}else break}})})(this,p,e)}async generateContentInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=o5(this.apiClient,e);return d=Te("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=r5(g),b=new ol;return Object.assign(b,_),b})}else{const f=i5(this.apiClient,e);return d=Te("{model}:generateContent",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=a5(g),b=new ol;return Object.assign(b,_),b})}}async generateContentStreamInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=o5(this.apiClient,e);return d=Te("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(_){return Wa(this,arguments,function*(){var b,S,w,E;try{for(var N=!0,k=cl(_),L;L=yield Vt(k.next()),b=L.done,!b;N=!0){E=L.value,N=!1;const R=E,O=r5(yield Vt(R.json()));O.sdkHttpResponse={headers:R.headers};const I=new ol;Object.assign(I,O),yield yield Vt(I)}}catch(R){S={error:R}}finally{try{!N&&!b&&(w=k.return)&&(yield Vt(w.call(k)))}finally{if(S)throw S.error}}})})}else{const f=i5(this.apiClient,e);return d=Te("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(_){return Wa(this,arguments,function*(){var b,S,w,E;try{for(var N=!0,k=cl(_),L;L=yield Vt(k.next()),b=L.done,!b;N=!0){E=L.value,N=!1;const R=E,O=a5(yield Vt(R.json()));O.sdkHttpResponse={headers:R.headers};const I=new ol;Object.assign(I,O),yield yield Vt(I)}}catch(R){S={error:R}}finally{try{!N&&!b&&(w=k.return)&&(yield Vt(w.call(k)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=G8(this.apiClient,e);return d=Te("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=j8(g),b=new B1;return Object.assign(b,_),b})}else{const f=F8(this.apiClient,e);return d=Te("{model}:batchEmbedContents",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=B8(g),b=new B1;return Object.assign(b,_),b})}}async generateImagesInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=Q8(this.apiClient,e);return d=Te("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=eE(g),b=new j1;return Object.assign(b,_),b})}else{const f=K8(this.apiClient,e);return d=Te("{model}:predict",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=$8(g),b=new j1;return Object.assign(b,_),b})}}async editImageInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=O8(this.apiClient,e);return r=Te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=U8(p),g=new $T;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=ZE(this.apiClient,e);return r=Te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=XE(p),g=new e3;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=RE(this.apiClient,e);return r=Te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=IE(p),g=new t3;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=qE(this.apiClient,e);return r=Te("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=VE(p),g=new n3;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=yE(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>Lh(g))}else{const f=gE(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>Ph(g))}}async listInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=wE(this.apiClient,e);return d=Te("{models_url}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=EE(g),b=new z1;return Object.assign(b,_),b})}else{const f=SE(this.apiClient,e);return d=Te("{models_url}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=TE(g),b=new z1;return Object.assign(b,_),b})}}async update(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=WE(this.apiClient,e);return d=Te("{model}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>Lh(g))}else{const f=YE(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>Ph(g))}}async delete(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=I8(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=P8(g),b=new H1;return Object.assign(b,_),b})}else{const f=R8(this.apiClient,e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=D8(g),b=new H1;return Object.assign(b,_),b})}}async countTokens(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=A8(this.apiClient,e);return d=Te("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=k8(g),b=new Y1;return Object.assign(b,_),b})}else{const f=N8(this.apiClient,e);return d=Te("{model}:countTokens",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=M8(g),b=new Y1;return Object.assign(b,_),b})}}async computeTokens(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=x8(this.apiClient,e);return r=Te("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>{const f=b8(p),g=new s3;return Object.assign(g,f),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=aE(this.apiClient,e);return d=Te("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c.then(g=>{const _=iE(g),b=new ku;return Object.assign(b,_),b})}else{const f=oE(this.apiClient,e);return d=Te("{model}:predictLongRunning",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c.then(g=>{const _=sE(g),b=new ku;return Object.assign(b,_),b})}}}class M7 extends Pi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:a,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=WT(e);return d=Te("{operationName}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),c}else{const f=YT(e);return d=Te("{operationName}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json()),c}}async fetchPredictVideosOperationInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=VT(e);return r=Te("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}function k7(t){const e={},n=m(t,["data"]);if(n!=null&&y(e,["data"],n),m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function R7(t){const e={},n=m(t,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(r=>V7(r))),y(e,["parts"],a)}const i=m(t,["role"]);return i!=null&&y(e,["role"],i),e}function I7(t,e,n){const i={},a=m(e,["expireTime"]);n!==void 0&&a!=null&&y(n,["expireTime"],a);const r=m(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&y(n,["newSessionExpireTime"],r);const c=m(e,["uses"]);n!==void 0&&c!=null&&y(n,["uses"],c);const d=m(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&y(n,["bidiGenerateContentSetup"],q7(t,d));const p=m(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&y(n,["fieldMask"],p),i}function D7(t,e){const n={},i=m(e,["config"]);return i!=null&&y(n,["config"],I7(t,i,n)),n}function P7(t){const e={};if(m(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=m(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const i=m(t,["mimeType"]);return i!=null&&y(e,["mimeType"],i),e}function L7(t){const e={};if(m(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=m(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function O7(t){const e={};if(m(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=m(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function U7(t,e){const n={},i=m(t,["generationConfig"]);e!==void 0&&i!=null&&y(e,["setup","generationConfig"],i);const a=m(t,["responseModalities"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","responseModalities"],a);const r=m(t,["temperature"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig","temperature"],r);const c=m(t,["topP"]);e!==void 0&&c!=null&&y(e,["setup","generationConfig","topP"],c);const d=m(t,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const p=m(t,["maxOutputTokens"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","maxOutputTokens"],p);const f=m(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const g=m(t,["seed"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","seed"],g);const _=m(t,["speechConfig"]);e!==void 0&&_!=null&&y(e,["setup","generationConfig","speechConfig"],Pp(_));const b=m(t,["thinkingConfig"]);e!==void 0&&b!=null&&y(e,["setup","generationConfig","thinkingConfig"],b);const S=m(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],S);const w=m(t,["systemInstruction"]);e!==void 0&&w!=null&&y(e,["setup","systemInstruction"],R7(Mn(w)));const E=m(t,["tools"]);if(e!==void 0&&E!=null){let G=cr(E);Array.isArray(G)&&(G=G.map(P=>G7(lr(P)))),y(e,["setup","tools"],G)}const N=m(t,["sessionResumption"]);e!==void 0&&N!=null&&y(e,["setup","sessionResumption"],F7(N));const k=m(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","inputAudioTranscription"],k);const L=m(t,["outputAudioTranscription"]);e!==void 0&&L!=null&&y(e,["setup","outputAudioTranscription"],L);const R=m(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&y(e,["setup","realtimeInputConfig"],R);const O=m(t,["contextWindowCompression"]);e!==void 0&&O!=null&&y(e,["setup","contextWindowCompression"],O);const I=m(t,["proactivity"]);return e!==void 0&&I!=null&&y(e,["setup","proactivity"],I),n}function q7(t,e){const n={},i=m(e,["model"]);i!=null&&y(n,["setup","model"],pt(t,i));const a=m(e,["config"]);return a!=null&&y(n,["config"],U7(a,n)),n}function V7(t){const e={},n=m(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const i=m(t,["codeExecutionResult"]);i!=null&&y(e,["codeExecutionResult"],i);const a=m(t,["executableCode"]);a!=null&&y(e,["executableCode"],a);const r=m(t,["fileData"]);r!=null&&y(e,["fileData"],P7(r));const c=m(t,["functionResponse"]);c!=null&&y(e,["functionResponse"],c);const d=m(t,["inlineData"]);d!=null&&y(e,["inlineData"],k7(d));const p=m(t,["text"]);p!=null&&y(e,["text"],p);const f=m(t,["thought"]);f!=null&&y(e,["thought"],f);const g=m(t,["thoughtSignature"]);g!=null&&y(e,["thoughtSignature"],g);const _=m(t,["videoMetadata"]);return _!=null&&y(e,["videoMetadata"],_),e}function F7(t){const e={},n=m(t,["handle"]);if(n!=null&&y(e,["handle"],n),m(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function G7(t){const e={},n=m(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(_=>_)),y(e,["functionDeclarations"],g)}if(m(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(t,["googleSearchRetrieval"]);i!=null&&y(e,["googleSearchRetrieval"],i);const a=m(t,["computerUse"]);a!=null&&y(e,["computerUse"],a);const r=m(t,["fileSearch"]);r!=null&&y(e,["fileSearch"],r);const c=m(t,["codeExecution"]);if(c!=null&&y(e,["codeExecution"],c),m(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=m(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],L7(d));const p=m(t,["googleSearch"]);p!=null&&y(e,["googleSearch"],O7(p));const f=m(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function B7(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const a=Object.keys(i).map(r=>`${n}.${r}`);e.push(...a)}else e.push(n)}return e.join(",")}function j7(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(n){const r=B7(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?t.fieldMask=r:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];a.length>0&&(d=a.map(f=>c.includes(f)?`generationConfig.${f}`:f));const p=[];r&&p.push(r),d.length>0&&p.push(...d),p.length>0?t.fieldMask=p.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class z7 extends Pi{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=D7(this.apiClient,e);r=Te("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const p=j7(d,e.config);return a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}}function H7(t,e){const n={},i=m(t,["displayName"]);return e!==void 0&&i!=null&&y(e,["displayName"],i),n}function Y7(t){const e={},n=m(t,["config"]);return n!=null&&H7(n,e),e}function W7(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function J7(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&W7(i,e),e}function Z7(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function X7(t,e){const n={},i=m(t,["customMetadata"]);if(e!==void 0&&i!=null){let r=i;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["customMetadata"],r)}const a=m(t,["chunkingConfig"]);return e!==void 0&&a!=null&&y(e,["chunkingConfig"],a),n}function K7(t){const e={},n=m(t,["name"]);n!=null&&y(e,["name"],n);const i=m(t,["metadata"]);i!=null&&y(e,["metadata"],i);const a=m(t,["done"]);a!=null&&y(e,["done"],a);const r=m(t,["error"]);r!=null&&y(e,["error"],r);const c=m(t,["response"]);return c!=null&&y(e,["response"],$7(c)),e}function Q7(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["fileName"]);i!=null&&y(e,["fileName"],i);const a=m(t,["config"]);return a!=null&&X7(a,e),e}function $7(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["parent"]);i!=null&&y(e,["parent"],i);const a=m(t,["documentName"]);return a!=null&&y(e,["documentName"],a),e}function eN(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function tN(t){const e={},n=m(t,["config"]);return n!=null&&eN(n,e),e}function nN(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["fileSearchStores"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["fileSearchStores"],r)}return e}function sN(t,e){const n={},i=m(t,["mimeType"]);e!==void 0&&i!=null&&y(e,["mimeType"],i);const a=m(t,["displayName"]);e!==void 0&&a!=null&&y(e,["displayName"],a);const r=m(t,["customMetadata"]);if(e!==void 0&&r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),y(e,["customMetadata"],d)}const c=m(t,["chunkingConfig"]);return e!==void 0&&c!=null&&y(e,["chunkingConfig"],c),n}function iN(t){const e={},n=m(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const i=m(t,["config"]);return i!=null&&sN(i,e),e}function oN(t){const e={},n=m(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function aN(t,e){const n={},i=m(t,["force"]);return e!==void 0&&i!=null&&y(e,["_query","force"],i),n}function rN(t){const e={},n=m(t,["name"]);n!=null&&y(e,["_url","name"],n);const i=m(t,["config"]);return i!=null&&aN(i,e),e}function lN(t){const e={},n=m(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function cN(t,e){const n={},i=m(t,["pageSize"]);e!==void 0&&i!=null&&y(e,["_query","pageSize"],i);const a=m(t,["pageToken"]);return e!==void 0&&a!=null&&y(e,["_query","pageToken"],a),n}function uN(t){const e={},n=m(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const i=m(t,["config"]);return i!=null&&cN(i,e),e}function dN(t){const e={},n=m(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const i=m(t,["nextPageToken"]);i!=null&&y(e,["nextPageToken"],i);const a=m(t,["documents"]);if(a!=null){let r=a;Array.isArray(r)&&(r=r.map(c=>c)),y(e,["documents"],r)}return e}class fN extends Pi{constructor(e){super(),this.apiClient=e,this.list=async n=>new $o(ki.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lN(e);return r=Te("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,i;let a="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rN(e);a=Te("{name}",c._url),r=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:r,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uN(e);return r=Te("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=dN(p),g=new i3;return Object.assign(g,f),g})}}}class hN extends Pi{constructor(e,n=new fN(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new $o(ki.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Y7(e);return r=Te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Z7(e);return r=Te("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,i;let a="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=J7(e);a=Te("{name}",c._url),r=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:r,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tN(e);return r=Te("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=nN(p),g=new o3;return Object.assign(g,f),g})}}async uploadToFileSearchStoreInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iN(e);return r=Te("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=oN(p),g=new a3;return Object.assign(g,f),g})}}async importFile(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Q7(e);return r=Te("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),a.then(p=>{const f=K7(p),g=new Mp;return Object.assign(g,f),g})}}}function pN(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function mN(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function gN(t,e,n){const i={};if(m(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=m(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&y(e,["displayName"],a),m(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=m(t,["epochCount"]);e!==void 0&&r!=null&&y(e,["tuningTask","hyperparameters","epochCount"],r);const c=m(t,["learningRateMultiplier"]);if(c!=null&&y(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),m(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=m(t,["batchSize"]);e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","batchSize"],d);const p=m(t,["learningRate"]);if(e!==void 0&&p!=null&&y(e,["tuningTask","hyperparameters","learningRate"],p),m(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function yN(t,e,n){const i={};let a=m(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const S=m(t,["validationDataset"]);e!==void 0&&S!=null&&y(e,["supervisedTuningSpec"],p5(S))}else if(a==="PREFERENCE_TUNING"){const S=m(t,["validationDataset"]);e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec"],p5(S))}const r=m(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&y(e,["tunedModelDisplayName"],r);const c=m(t,["description"]);e!==void 0&&c!=null&&y(e,["description"],c);let d=m(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=m(t,["epochCount"]);e!==void 0&&S!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(d==="PREFERENCE_TUNING"){const S=m(t,["epochCount"]);e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let p=m(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const S=m(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(p==="PREFERENCE_TUNING"){const S=m(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let f=m(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const S=m(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(f==="PREFERENCE_TUNING"){const S=m(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let g=m(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const S=m(t,["adapterSize"]);e!==void 0&&S!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(g==="PREFERENCE_TUNING"){const S=m(t,["adapterSize"]);e!==void 0&&S!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(m(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=m(t,["labels"]);e!==void 0&&_!=null&&y(e,["labels"],_);const b=m(t,["beta"]);return e!==void 0&&b!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],b),i}function vN(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const a=m(t,["preTunedModel"]);a!=null&&y(n,["preTunedModel"],a);const r=m(t,["trainingDataset"]);r!=null&&MN(r);const c=m(t,["config"]);return c!=null&&gN(c,n),n}function _N(t,e){const n={},i=m(t,["baseModel"]);i!=null&&y(n,["baseModel"],i);const a=m(t,["preTunedModel"]);a!=null&&y(n,["preTunedModel"],a);const r=m(t,["trainingDataset"]);r!=null&&kN(r,n,e);const c=m(t,["config"]);return c!=null&&yN(c,n,e),n}function xN(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function bN(t,e){const n={},i=m(t,["name"]);return i!=null&&y(n,["_url","name"],i),n}function CN(t,e,n){const i={},a=m(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const c=m(t,["filter"]);return e!==void 0&&c!=null&&y(e,["_query","filter"],c),i}function SN(t,e,n){const i={},a=m(t,["pageSize"]);e!==void 0&&a!=null&&y(e,["_query","pageSize"],a);const r=m(t,["pageToken"]);e!==void 0&&r!=null&&y(e,["_query","pageToken"],r);const c=m(t,["filter"]);return e!==void 0&&c!=null&&y(e,["_query","filter"],c),i}function wN(t,e){const n={},i=m(t,["config"]);return i!=null&&CN(i,n),n}function TN(t,e){const n={},i=m(t,["config"]);return i!=null&&SN(i,n),n}function EN(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=m(t,["nextPageToken"]);a!=null&&y(n,["nextPageToken"],a);const r=m(t,["tunedModels"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>b2(d))),y(n,["tuningJobs"],c)}return n}function NN(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=m(t,["nextPageToken"]);a!=null&&y(n,["nextPageToken"],a);const r=m(t,["tuningJobs"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>Uh(d))),y(n,["tuningJobs"],c)}return n}function AN(t,e){const n={},i=m(t,["name"]);i!=null&&y(n,["model"],i);const a=m(t,["name"]);return a!=null&&y(n,["endpoint"],a),n}function MN(t,e){const n={};if(m(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(t,["examples"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(r=>r)),y(n,["examples","examples"],a)}return n}function kN(t,e,n){const i={};let a=m(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=m(t,["gcsUri"]);e!==void 0&&c!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=m(t,["gcsUri"]);e!==void 0&&c!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let r=m(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=m(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=m(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(m(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function b2(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=m(t,["name"]);a!=null&&y(n,["name"],a);const r=m(t,["state"]);r!=null&&y(n,["state"],n2(r));const c=m(t,["createTime"]);c!=null&&y(n,["createTime"],c);const d=m(t,["tuningTask","startTime"]);d!=null&&y(n,["startTime"],d);const p=m(t,["tuningTask","completeTime"]);p!=null&&y(n,["endTime"],p);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const g=m(t,["description"]);g!=null&&y(n,["description"],g);const _=m(t,["baseModel"]);_!=null&&y(n,["baseModel"],_);const b=m(t,["_self"]);return b!=null&&y(n,["tunedModel"],AN(b)),n}function Uh(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=m(t,["name"]);a!=null&&y(n,["name"],a);const r=m(t,["state"]);r!=null&&y(n,["state"],n2(r));const c=m(t,["createTime"]);c!=null&&y(n,["createTime"],c);const d=m(t,["startTime"]);d!=null&&y(n,["startTime"],d);const p=m(t,["endTime"]);p!=null&&y(n,["endTime"],p);const f=m(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const g=m(t,["error"]);g!=null&&y(n,["error"],g);const _=m(t,["description"]);_!=null&&y(n,["description"],_);const b=m(t,["baseModel"]);b!=null&&y(n,["baseModel"],b);const S=m(t,["tunedModel"]);S!=null&&y(n,["tunedModel"],S);const w=m(t,["preTunedModel"]);w!=null&&y(n,["preTunedModel"],w);const E=m(t,["supervisedTuningSpec"]);E!=null&&y(n,["supervisedTuningSpec"],E);const N=m(t,["preferenceOptimizationSpec"]);N!=null&&y(n,["preferenceOptimizationSpec"],N);const k=m(t,["tuningDataStats"]);k!=null&&y(n,["tuningDataStats"],k);const L=m(t,["encryptionSpec"]);L!=null&&y(n,["encryptionSpec"],L);const R=m(t,["partnerModelTuningSpec"]);R!=null&&y(n,["partnerModelTuningSpec"],R);const O=m(t,["customBaseModel"]);O!=null&&y(n,["customBaseModel"],O);const I=m(t,["experiment"]);I!=null&&y(n,["experiment"],I);const G=m(t,["labels"]);G!=null&&y(n,["labels"],G);const P=m(t,["outputUri"]);P!=null&&y(n,["outputUri"],P);const M=m(t,["pipelineJob"]);M!=null&&y(n,["pipelineJob"],M);const F=m(t,["serviceAccount"]);F!=null&&y(n,["serviceAccount"],F);const B=m(t,["tunedModelDisplayName"]);B!=null&&y(n,["tunedModelDisplayName"],B);const H=m(t,["veoTuningSpec"]);return H!=null&&y(n,["veoTuningSpec"],H),n}function RN(t,e){const n={},i=m(t,["sdkHttpResponse"]);i!=null&&y(n,["sdkHttpResponse"],i);const a=m(t,["name"]);a!=null&&y(n,["name"],a);const r=m(t,["metadata"]);r!=null&&y(n,["metadata"],r);const c=m(t,["done"]);c!=null&&y(n,["done"],c);const d=m(t,["error"]);return d!=null&&y(n,["error"],d),n}function p5(t,e){const n={},i=m(t,["gcsUri"]);i!=null&&y(n,["validationDatasetUri"],i);const a=m(t,["vertexDatasetResource"]);return a!=null&&y(n,["validationDatasetUri"],a),n}class IN extends Pi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new $o(ki.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const a={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(a.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:a});return r.baseModel=void 0,await this.tuneInternal(r)}else{const a=Object.assign({},n);return await this.tuneInternal(a)}else{const a=Object.assign({},n),r=await this.tuneMldevInternal(a);let c="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?c=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(c=r.name.split("/operations/")[0]),{name:c,state:kh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=bN(e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>Uh(g))}else{const f=xN(e);return d=Te("{name}",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>b2(g))}}async listInternal(e){var n,i,a,r;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=TN(e);return d=Te("tuningJobs",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=NN(g),b=new W1;return Object.assign(b,_),b})}else{const f=wN(e);return d=Te("tunedModels",f._url),p=f._query,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(g=>g.json().then(_=>{const b=_;return b.sdkHttpResponse={headers:g.headers},b})),c.then(g=>{const _=EN(g),b=new W1;return Object.assign(b,_),b})}}async cancel(e){var n,i,a,r;let c="",d={};if(this.apiClient.isVertexAI()){const p=mN(e);c=Te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=pN(e);c=Te("{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI()){const d=_N(e,e);return r=Te("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>Uh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let a,r="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=vN(e);return r=Te("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:r,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(f=>{const g=f;return g.sdkHttpResponse={headers:p.headers},g})),a.then(p=>RN(p))}}}class DN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const PN=1024*1024*8,LN=3,ON=1e3,UN=2,Iu="x-goog-upload-status";async function qN(t,e,n){var i;const a=await C2(t,e,n),r=await a?.json();if(((i=a?.headers)===null||i===void 0?void 0:i[Iu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function VN(t,e,n){var i;const a=await C2(t,e,n),r=await a?.json();if(((i=a?.headers)===null||i===void 0?void 0:i[Iu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Xv(r),d=new kp;return Object.assign(d,c),d}async function C2(t,e,n){var i,a;let r=0,c=0,d=new Rh(new Response),p="upload";for(r=t.size;c<r;){const f=Math.min(PN,r-c),g=t.slice(c,c+f);c+f>=r&&(p+=", finalize");let _=0,b=ON;for(;_<LN&&(d=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(f)}}}),!(!((i=d?.headers)===null||i===void 0)&&i[Iu]));)_++,await GN(b),b=b*UN;if(c+=f,((a=d?.headers)===null||a===void 0?void 0:a[Iu])!=="active")break;if(r<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function FN(t){return{size:t.size,type:t.type}}function GN(t){return new Promise(e=>setTimeout(e,t))}class BN{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qN(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VN(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FN(e)}}class jN{create(e,n,i){return new zN(e,n,i)}}class zN{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const m5="x-goog-api-key";class HN{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(m5)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(m5,this.apiKey)}}}const YN="gl-node/";class WN{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=UT(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const a=new HN(this.apiKey);this.apiClient=new c7({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:YN+"web",uploader:new BN,downloader:new DN}),this.models=new A7(this.apiClient),this.live=new C7(this.apiClient,a,new jN),this.batches=new l6(this.apiClient),this.chats=new F6(this.models,this.apiClient),this.caches=new U6(this.apiClient),this.files=new X6(this.apiClient),this.operations=new M7(this.apiClient),this.authTokens=new z7(this.apiClient),this.tunings=new IN(this.apiClient),this.fileSearchStores=new hN(this.apiClient)}}const fu=["Rock","Electronic","Hip Hop","Jazz","Indie","Classical","Chillout","Ambient","Folk","Metal","Latin","R&B","Reggae","Punk","Country","House","Blues","Cinematic","Pop","Acoustic"],JN="https://api.jamendo.com/v3.0/tracks/";async function g5(t,e,n,i){if(!e)throw new Error("Jamendo Client ID is required to discover music.");let a=t.toLowerCase().replace(/\s/g,"");a==="r&b"&&(a="rnb");const r=`${JN}?client_id=${e}&format=json&limit=50&tags=${a}&image_size=500&order=${i}&audioformat=mp32`,c=await fetch(r);if(!c.ok)throw new Error(`Failed to fetch songs from Jamendo. Status: ${c.status}`);const d=await c.json();if(d.headers.status!=="success"){const f=d.headers.error_message||"Unknown error";throw f.includes("credential is not authorized")?new Error("Jamendo Client ID Invalid: Your credential is not authorized. Please check your Client ID."):new Error(`Jamendo API Error: ${f}`)}let p=d.results;return n&&(p=p.filter(f=>{const g=f.license_ccurl||"";return typeof g=="string"&&!g.includes("-nc")})),p.filter(f=>f.audio&&typeof f.audio=="string").map(f=>{const g=f.audio,_=f.audiodownload_allowed&&f.audiodownload&&f.audiodownload!==g?f.audiodownload:void 0,b=f.artist_id?`https://www.jamendo.com/artist/${f.artist_id}`:void 0;return{id:f.id,name:f.name,artist_name:f.artist_name,album_image:f.image,audio:_||g,audio_hq:_,audio_nq:g,audiodownload_allowed:f.audiodownload_allowed,genre:t,license:f.license_ccurl,artist_url:b}})}const S2={"en-US":{name:"USA English"},"en-GB":{name:"UK English"},"es-ES":{name:"Spanish"},"es-MX":{name:"Mexican"},"de-DE":{name:"German"},"de-AT":{name:"Tyrolean German"}},y5={"en-US":` Liability & Disclaimer

1. General Information
This application (the App) is currently provided free of charge. The developer reserves the right to introduce advertising, optional paid features, or other forms of monetization in the future. All music available in this App is sourced from Jamendo through its official API, under the terms and licenses defined by Jamendo and the respective artists.

2. Source of Content
All audio tracks, album artwork, and metadata are streamed directly from Jamendos servers. The Apps developer does not host, upload, or distribute any music files. All playback and (where permitted) downloads are handled exclusively through Jamendos infrastructure.

3. Copyright and Licensing
Each track available through the App is subject to its own license, typically a Creative Commons license as defined on Jamendo. Users are solely responsible for ensuring their use of any music complies with the applicable license terms, including any restrictions on commercial use, modification, or redistribution. Any commercial use of the music may require a separate license from Jamendo or the copyright holder.

4. No Responsibility for Misuse
The Apps developer assumes no responsibility or liability for how users use or misuse the App or the music provided through it. Users who download or distribute tracks in ways that violate licensing or copyright law do so entirely at their own risk. The developer cannot be held accountable for any damages, losses, or legal consequences resulting from such misuse.

5. No Warranties
The App is provided as is and as available. The developer makes no representations or warranties of any kind, express or implied, regarding its operation, reliability, or suitability for any purpose. There is no guarantee that the App or the Jamendo API will function without errors, interruptions, or technical issues.

6. Limitation of Liability
In no event shall the developer be liable for any direct, indirect, incidental, consequential, or special damages arising from or related to the use of this App. This includes, but is not to, loss of data, device malfunction, or loss of profits.

7. Third-Party Services
The App relies on external services such as the Jamendo API and may include other third-party services in the future (e.g., for ads or analytics). The developer has no control over these services and disclaims all responsibility for their operation, content, or availability.

8. Acceptance of Terms
By downloading or using this App, users agree to this Disclaimer and Liability Policy. If you do not agree, please uninstall and discontinue use of the App immediately.

9. Updates to This Disclaimer
This Disclaimer may be updated or changed at any time. The most current version will always be available within the App or through the developers official website. Continued use of the App after any changes are posted constitutes acceptance of the revised terms.

10. Contact
For any questions, feedback, or legal inquiries, please contact the developer through the information listed on the Google Play Store page.`,"en-GB":"Translation for UK English is not yet available.","es-ES":"La traduccin para el espaol no est disponible todava.","es-MX":"La traduccin para el espaol mexicano no est disponible todava.","de-DE":"Die bersetzung fr Deutsch ist noch nicht verfgbar.","de-AT":"Die bersetzung fr Tiroler Deutsch ist noch nicht verfgbar."};async function ZN(t,e){const n=y5["en-US"];if(t==="en-US")return n;const i=S2[t]?.name||t;try{const a=`Translate the following legal disclaimer into ${i}. Keep the formatting, including line breaks and spacing. Do not add any introductory text like "Here is the translation:".

${n}`,c=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:a})).text;if(!c)throw new Error("No text in Gemini response.");return c}catch{return y5[t]||`Translation to ${i} failed.`}}const XN="https://corsproxy.io/?";async function KN(t,e,n={}){if(!t||!t.startsWith("UC"))throw new Error("A valid YouTube Channel ID (starting with UC) is required.");const i=Math.max(1,Math.min(15,n.count??1)),a=`${XN}${encodeURIComponent(`https://www.youtube.com/feeds/videos.xml?channel_id=${t}`)}`;try{const r=await fetch(a);if(!r.ok)throw new Error(`Failed to load video feed (Status: ${r.status})`);const c=await r.text(),p=new DOMParser().parseFromString(c,"application/xml"),f=p.querySelector("parsererror");if(f)throw console.error("XML parsing error:",f.textContent),new Error("Failed to parse the channel's video feed.");const g=Array.from(p.querySelectorAll("entry")).slice(0,i);if(g.length===0&&p.querySelector("feed")===null)throw new Error("No videos found. The channel URL may be incorrect or the feed is unavailable.");return g.map(b=>{const S=b.querySelector("videoId")?.textContent??"",w=b.querySelector("title")?.textContent??"Untitled",E=b.querySelector("author > name")?.textContent,N=b.querySelector("thumbnail")?.getAttribute("url")??"",k=b.querySelector("published")?.textContent;return{videoId:S,title:w,channelTitle:E||void 0,thumbnailUrl:N,publishedAt:k||void 0,embeddable:!0}})}catch(r){throw console.error("YouTube RSS fetch error:",r),r.message.includes("Status: 404")?new Error("Could not find a feed for this channel. Please check the URL."):new Error(r.message||"An unknown error occurred while fetching videos.")}}const QN="https://corsproxy.io/?";function $N(t){if(!t)return null;const e=t.match(/(?:channel\/(UC[\w-]+)|^(UC[\w-]+))/);return e?e[1]||e[2]:null}async function eA(t,e){const n=$N(t);if(!n)throw new Error("Please use a full YouTube channel URL with a Channel ID (e.g., .../channel/UC...). Handles are not supported.");const i=`${QN}${encodeURIComponent(`https://www.youtube.com/feeds/videos.xml?channel_id=${n}`)}`;try{const a=await fetch(i);if(!a.ok)throw a.status===404?new Error("Could not find a channel with this URL. Please check the Channel ID."):new Error(`Could not verify channel URL (Status: ${a.status})`);const r=await a.text(),p=new DOMParser().parseFromString(r,"application/xml").querySelector("feed > author > name")?.textContent;if(p)return{id:n,name:p};throw new Error("Could not parse channel information from the provided URL.")}catch(a){throw console.error("Channel URL resolution error:",a),new Error(a.message||"Could not verify the channel URL. The service may be temporarily down.")}}const tA=({slotId:t,onClose:e,onSave:n})=>{const[i,a]=V.useState(""),[r,c]=V.useState(!1),[d,p]=V.useState(null),f=V.useRef(null);V.useEffect(()=>{f.current?.focus()},[]);const g=async _=>{if(_?.preventDefault(),!!i.trim()){c(!0),p(null);try{const b=await eA(i,"");n(t,{id:b.id,name:b.name})}catch(b){p(b.message||"Could not resolve URL.")}finally{c(!1)}}};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",onClick:e,children:h.jsxs("div",{className:"w-full max-w-lg rounded-xl overflow-hidden bg-gray-800 shadow-2xl text-white",onClick:_=>_.stopPropagation(),children:[h.jsxs("div",{className:"p-6",children:[h.jsx("h2",{className:"text-xl font-bold mb-4",children:"Change Channel"}),h.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Find your desired channel on YouTube and paste its full URL below."}),h.jsx("form",{onSubmit:g,children:h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{ref:f,type:"text",value:i,onChange:_=>{a(_.target.value),p(null)},placeholder:"e.g., https://www.youtube.com/channel/...",className:"flex-grow p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),h.jsx("button",{type:"submit",className:"bg-indigo-600 font-bold py-3 px-5 rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50",disabled:r||!i.trim(),children:r?"Verifying...":"Save"})]})}),d&&h.jsx("p",{className:"text-red-400 text-sm mt-3",children:d})]}),h.jsx("div",{className:"bg-gray-900 px-6 py-3 flex justify-end",children:h.jsx("button",{onClick:e,className:"py-2 px-4 rounded-md bg-gray-700 hover:bg-gray-600 transition",children:"Close"})})]})})};function nA(){try{return!/^https?:$/.test(window.location.protocol)}catch{return!0}}function sA(t){const e=new URLSearchParams({playsinline:"1",modestbranding:"1",rel:"0"});return`https://www.youtube.com/embed/${t}?${e.toString()}`}const iA=({slot:t,onEdit:e})=>{const[n,i]=V.useState(null),[a,r]=V.useState(!1),[c,d]=V.useState(null),[p,f]=V.useState(!1),[g,_]=V.useState(!0);V.useEffect(()=>{_(nA())},[]),V.useEffect(()=>{if(!t.channelId){i(null),d(null),r(!1);return}let w=!1;return(async()=>{r(!0),d(null);try{const N=await KN(t.channelId,"",{count:1});if(!w)if(N.length>0)i(N[0]);else throw new Error("No videos found for this channel.")}catch(N){w||d(N.message||"Failed to fetch video.")}finally{w||r(!1)}})(),()=>{w=!0}},[t.channelId]);const b=()=>{n&&(g?window.open(`https://www.youtube.com/watch?v=${n.videoId}`,"_blank"):f(!0))},S=()=>n?h.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:()=>f(!1),children:h.jsxs("div",{className:"bg-black rounded-xl overflow-hidden max-w-4xl w-full shadow-lg",onClick:w=>w.stopPropagation(),children:[n.embeddable?h.jsx("div",{className:"relative",style:{paddingTop:"56.25%"},children:h.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:sA(n.videoId),title:"YouTube video player",frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):h.jsx("div",{className:"p-6 text-gray-200",children:h.jsx("p",{className:"text-sm",children:"Embedding this video is not permitted."})}),h.jsxs("div",{className:"flex gap-2 justify-end p-3 bg-gray-900",children:[h.jsx("a",{className:"px-4 py-2 rounded-md bg-gray-800 text-gray-200 hover:bg-gray-700 text-sm",href:`https://www.youtube.com/watch?v=${n.videoId}`,target:"_blank",rel:"noopener noreferrer",children:"Watch on YouTube"}),h.jsx("button",{className:"px-4 py-2 rounded-md bg-[#c52323] text-white hover:bg-[#a91f1f] text-sm",onClick:()=>f(!1),children:"Close"})]})]})}):null;return h.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex flex-col gap-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-sm font-semibold text-gray-300 truncate",children:t.channelName||"Empty Slot"}),h.jsx("button",{onClick:()=>e(t.id),className:"text-xs bg-gray-700 hover:bg-gray-600 text-gray-200 px-2 py-1 rounded-md transition-colors",children:"Change"})]}),h.jsxs("div",{className:"flex-grow flex items-center justify-center bg-gray-900/50 rounded-md min-h-[160px]",children:[a&&h.jsx("p",{className:"text-gray-400 text-sm",children:"Loading..."}),c&&h.jsx("p",{className:"text-red-400 text-xs text-center p-2",children:c}),!a&&!c&&n&&h.jsxs("button",{onClick:b,className:"w-full text-left group",children:[h.jsx("img",{src:n.thumbnailUrl,alt:n.title,className:"w-full block aspect-video object-cover rounded-t-md"}),h.jsx("div",{className:"p-2",children:h.jsx("p",{className:"text-sm font-semibold text-gray-100 line-clamp-2 group-hover:text-red-400 transition-colors",children:n.title})})]}),!a&&!t.channelId&&h.jsx("button",{onClick:()=>e(t.id),className:"text-gray-400 hover:text-white transition-colors",children:"+ Add Channel"})]}),p&&h.jsx(S,{})]})},oA=({slots:t,onSetSlots:e})=>{const[n,i]=V.useState(!1),[a,r]=V.useState(null),c=p=>{r(p),i(!0)},d=(p,f)=>{e(g=>g.map(_=>_.id===p?{..._,channelId:f.id,channelName:f.name}:_)),i(!1),r(null)};return h.jsxs("section",{className:"w-full max-w-4xl mt-8",children:[h.jsx("h2",{className:"text-gray-100 font-semibold mb-2",children:"Latest Videos"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(p=>h.jsx(iA,{slot:p,onEdit:c},p.id))}),n&&a!==null&&h.jsx(tA,{slotId:a,onClose:()=>i(!1),onSave:d})]})};function id({variant:t="home",className:e=""}){const n=`relative inline-flex items-baseline leading-none tracking-tight font-['Bebas_Neue'] ${e}`,i="text-[#c52323] text-[0.8em] ml-[2px]";return h.jsxs("div",{className:n,style:{fontFamily:'"Bebas Neue", sans-serif'},children:[h.jsx("span",{className:"text-white",children:"INVERT"}),t==="home"&&h.jsx("span",{className:i,children:"61"}),t==="fm"&&h.jsx("span",{className:i,children:"FM"}),t==="sk8"&&h.jsx("span",{className:i,children:"SK8"}),t==="tv"&&h.jsx("span",{className:i,children:"TV"}),t==="games"&&h.jsx("span",{className:`${i} self-center flex items-center`,children:h.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"w-[0.8em] h-[0.8em]",style:{transform:"translateY(1px)"},children:h.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"})})})]})}const vh=({onSetPage:t,youTubeSlots:e,onSetYouTubeSlots:n})=>{const i=({icon:a,label:r,onClick:c})=>h.jsxs("button",{onClick:c,className:"bg-gray-800 text-white rounded-xl shadow-lg flex flex-col items-center justify-center p-4 gap-0 transition-transform transform hover:scale-105 active:scale-100 border border-gray-700 hover:border-red-500/50",children:[h.jsx("div",{className:"w-24 h-24 flex items-center justify-center",children:a}),h.jsx("span",{className:"font-bold tracking-wider uppercase text-center text-sm -mt-2",children:r})]});return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center p-4 sm:p-6",children:[h.jsx("header",{className:"w-full my-8",children:h.jsx("div",{className:"w-full max-w-4xl mx-auto relative text-center flex flex-col items-center",children:h.jsx("div",{className:"logo-block text-left leading-none",children:h.jsx(id,{variant:"home",className:"text-[70px] md:text-[80px]"})})})}),h.jsxs("main",{className:"w-full max-w-4xl mx-auto flex-grow",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-12",children:[h.jsx(i,{icon:h.jsx("img",{src:"./assets/homepage_icons/homepage_icon_session_tracker.png",alt:"Tracker",className:"w-full h-full object-contain translate-y-2.5"}),label:"Session Tracker",onClick:()=>t("rollometer")}),h.jsx(i,{icon:h.jsx("img",{src:"./assets/homepage_icons/homepage_icon_music.png",alt:"Music",className:"w-full h-full object-contain -translate-y-[5px]"}),label:"Music",onClick:()=>t("music")}),h.jsx(i,{icon:h.jsx("img",{src:"./assets/homepage_icons/homepage_icon_games.png",alt:"Games",className:"w-full h-full object-contain"}),label:"Games",onClick:()=>t("games")}),h.jsx(i,{icon:h.jsx("img",{src:"./assets/homepage_icons/homepage_icon_video.png",alt:"Video",className:"w-full h-full object-contain"}),label:"Video",onClick:()=>t("editor")})]}),h.jsx(oA,{slots:e,onSetSlots:n})]})]})},aA=["#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6","#6366f1","#8b5cf6","#a855f7","#d946ef","#ec4899","#f43f5e","#78716c","#a16207","#4d7c0f"],rA=`
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 996 996" preserveAspectRatio="xMidYMid meet" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd">
<g><path style="opacity:1" fill="#fefcfc" d="M 644.5,82.5 C 636.926,84.7023 629.26,85.0357 621.5,83.5C 618.467,81.984 615.8,79.984 613.5,77.5C 613.389,76.8826 613.056,76.3826 612.5,76C 603.581,75.4815 595.248,77.3148 587.5,81.5C 582.763,82.3675 578.096,83.5342 573.5,85C 568.806,85.5639 564.14,85.3973 559.5,84.5C 557.5,83.8333 555.5,83.1667 553.5,82.5C 553.167,81.8333 552.833,81.1667 552.5,80.5C 551.4,79.4415 550.066,78.6082 548.5,78C 546.398,76.2672 546.065,74.2672 547.5,72C 549.653,71.9005 551.319,71.0672 552.5,69.5C 554.017,69.4894 555.184,68.8228 556,67.5C 557.356,64.6711 558.856,62.0045 560.5,59.5C 561.929,56.6916 562.595,53.6916 562.5,50.5C 562.662,48.4727 562.495,46.4727 562,44.5C 561.617,43.944 561.117,43.6107 560.5,43.5C 560.5,42.5 560.5,41.5 560.5,40.5C 550.618,44.0032 540.618,44.3366 530.5,41.5C 523.978,36.7939 521.478,30.4605 523,22.5C 529.252,7.17713 540.419,2.01047 556.5,7C 561.508,9.17772 565.841,12.3444 569.5,16.5C 570.143,21.6984 570.81,26.8651 571.5,32C 585.79,36.5416 599.79,41.8749 613.5,48C 615.167,48.6667 616.833,48.6667 618.5,48C 625.132,41.0749 632.799,39.7415 641.5,44C 647.329,46.992 652.496,50.8253 657,55.5C 658.356,62.6121 657.356,69.2788 654,75.5C 650.855,77.9765 647.688,80.3098 644.5,82.5 Z"/></g>
<g><path style="opacity:0.957" fill="#c52323" d="M 558.5,46.5 C 560.194,47.5274 561.527,48.8608 562.5,50.5C 562.595,53.6916 561.929,56.6916 560.5,59.5C 557.588,61.8023 555.255,64.6356 553.5,68C 547.169,67.0024 543.836,69.669 543.5,76C 543.748,77.7491 544.748,78.5824 546.5,78.5C 548.102,80.0739 550.102,80.7406 552.5,80.5C 552.833,81.1667 553.167,81.8333 553.5,82.5C 558.517,89.4988 565.184,91.6654 573.5,89C 574.252,88.3292 574.586,87.4959 574.5,86.5C 582.664,86.5521 590.331,84.7188 597.5,81C 601.571,80.4757 605.571,79.6424 609.5,78.5C 614.059,80.6096 618.392,82.9429 622.5,85.5C 628.842,85.6662 635.175,85.4995 641.5,85C 642.942,84.6232 643.942,83.7899 644.5,82.5C 651.281,80.8022 655.947,76.8022 658.5,70.5C 658.281,71.675 658.614,72.675 659.5,73.5C 668.99,78.0782 678.324,82.9115 687.5,88C 691.458,90.234 694.958,93.0673 698,96.5C 700.387,101.729 698.887,105.395 693.5,107.5C 689.596,105.961 685.596,104.127 681.5,102C 679.167,101.833 676.833,101.667 674.5,101.5C 668.081,102.138 661.747,103.305 655.5,105C 654.058,105.377 653.058,106.21 652.5,107.5C 646.834,108.39 641.5,110.057 636.5,112.5C 628.303,114.008 620.637,116.675 613.5,120.5C 602.029,122.66 591.029,125.993 580.5,130.5C 573.37,132.363 566.37,134.363 559.5,136.5C 548.804,139.067 538.47,142.4 528.5,146.5C 515.883,150.039 503.216,153.373 490.5,156.5C 490.771,154.62 490.104,153.287 488.5,152.5C 487.743,148.317 486.41,144.317 484.5,140.5C 484.586,139.504 484.252,138.671 483.5,138C 478.907,136.749 474.241,135.915 469.5,135.5C 465.018,135.241 461.018,133.908 457.5,131.5C 448.851,130.826 440.184,129.492 431.5,127.5C 429.955,127.511 428.622,127.844 427.5,128.5C 426.325,128.281 425.325,128.614 424.5,129.5C 422.818,132.816 420.485,135.483 417.5,137.5C 416.833,137.5 416.167,137.5 415.5,137.5C 413.629,137.859 412.129,138.859 411,140.5C 410.184,145.684 410.35,150.684 411.5,155.5C 411.969,158.643 413.636,160.977 416.5,162.5C 417.816,164.822 419.149,167.156 420.5,169.5C 418.073,173.543 416.406,177.877 415.5,182.5C 415.5,183.5 415.5,184.5 415.5,185.5C 403.125,189.067 391.125,193.4 379.5,198.5C 377.473,198.338 375.473,198.505 373.5,199C 364.725,202.752 355.725,205.752 346.5,208C 339.865,211.157 333.199,213.991 326.5,216.5C 322.173,217.551 317.84,218.718 313.5,220C 312.429,220.852 311.429,221.685 310.5,222.5C 303.262,223.639 296.262,225.472 289.5,228C 285.618,229.638 281.952,231.638 278.5,234C 276.866,234.494 275.199,234.66 273.5,234.5C 273.5,235.5 273.5,236.5 273.5,237.5C 270.318,237.584 267.985,238.917 266.5,241.5C 263.991,242.921 261.657,244.588 259.5,246.5C 254.709,247.624 252.042,250.624 251.5,255.5C 225.057,276.052 195.391,290.218 162.5,298C 147.856,300.786 135.689,296.619 126,285.5C 121.807,277.666 120.474,269.333 122,260.5C 125.742,245.35 132.409,231.683 142,219.5C 154.463,203.37 168.63,188.87 184.5,176C 201.683,166.741 219.349,158.575 237.5,151.5C 239.556,152.216 241.723,152.883 244,153.5C 245.978,158.299 246.812,163.299 246.5,168.5C 245.306,169.272 244.306,170.272 243.5,171.5C 241.683,172.816 240.017,174.316 238.5,176C 239.741,177.731 240.741,179.564 241.5,181.5C 241.213,185.215 242.88,187.548 246.5,188.5C 246.884,191.05 248.384,192.383 251,192.5C 253.183,192.478 254.683,191.478 255.5,189.5C 260.167,188.167 264.833,186.833 269.5,185.5C 272.274,186.723 274.941,188.223 277.5,190C 278.793,190.49 280.127,190.657 281.5,190.5C 297.054,195.357 310.554,192.024 322,180.5C 322.791,179.255 323.291,177.922 323.5,176.5C 325.104,175.713 325.771,174.38 325.5,172.5C 326.647,168.354 326.814,164.02 326,159.5C 325.8,157.68 324.966,156.347 323.5,155.5C 323.167,155.5 322.833,155.5 322.5,155.5C 322.167,154.833 321.833,154.167 321.5,153.5C 320.925,151.589 319.925,149.922 318.5,148.5C 317.419,146.236 316.085,144.069 314.5,142C 313.207,141.51 311.873,141.343 310.5,141.5C 309.486,140.326 308.153,139.66 306.5,139.5C 306.167,138.833 305.833,138.167 305.5,137.5C 301.798,134.931 297.798,132.931 293.5,131.5C 381.159,100.946 469.493,72.6131 558.5,46.5 Z"/></g>
<g><path style="opacity:0.052" fill="#e59b9b" d="M 658.5,70.5 C 655.947,76.8022 651.281,80.8022 644.5,82.5C 647.688,80.3098 650.855,77.9765 654,75.5C 657.356,69.2788 658.356,62.6121 657,55.5C 652.496,50.8253 647.329,46.992 641.5,44C 632.799,39.7415 625.132,41.0749 618.5,48C 616.833,48.6667 615.167,48.6667 613.5,48C 599.79,41.8749 585.79,36.5416 571.5,32C 570.81,26.8651 570.143,21.6984 569.5,16.5C 565.841,12.3444 561.508,9.17772 556.5,7C 540.419,2.01047 529.252,7.17713 523,22.5C 521.478,30.4605 523.978,36.7939 530.5,41.5C 533.83,44.4818 537.83,45.8151 542.5,45.5C 547.759,45.0259 552.926,44.0259 558,42.5C 558.902,42.7432 559.735,43.0766 560.5,43.5C 561.117,43.6107 561.617,43.944 562,44.5C 562.495,46.4727 562.662,48.4727 562.5,50.5C 561.527,48.8608 560.194,47.5274 558.5,46.5C 558.631,45.6236 558.298,44.9569 557.5,44.5C 549.325,47.7507 540.992,48.2507 532.5,46C 518.671,38.4998 515.838,27.9998 524,14.5C 539.608,-1.44833 555.274,-1.44833 571,14.5C 573.045,18.9034 574.045,23.5701 574,28.5C 587.621,34.6523 601.454,40.3189 615.5,45.5C 620.551,41.8126 626.217,39.4792 632.5,38.5C 642.537,40.4337 651.037,45.1004 658,52.5C 661.048,58.558 661.215,64.558 658.5,70.5 Z"/></g>
<g><path style="opacity:0.992" fill="#f4d4d4" d="M 560.5,43.5 C 559.735,43.0766 558.902,42.7432 558,42.5C 552.926,44.0259 547.759,45.0259 542.5,45.5C 537.83,45.8151 533.83,44.4818 530.5,41.5C 540.618,44.3366 550.618,44.0032 560.5,40.5C 560.5,41.5 560.5,42.5 560.5,43.5 Z"/></g>
<g><path style="opacity:1" fill="#de8180" d="M 560.5,59.5 C 558.856,62.0045 557.356,64.6711 556,67.5C 555.184,68.8228 554.017,69.4894 552.5,69.5C 545.801,69.2737 543.801,72.2737 546.5,78.5C 544.748,78.5824 543.748,77.7491 543.5,76C 543.836,69.669 547.169,67.0024 553.5,68C 555.255,64.6356 557.588,61.8023 560.5,59.5 Z"/></g>
<g><path style="opacity:1" fill="#f1c9c9" d="M 552.5,69.5 C 551.319,71.0672 549.653,71.9005 547.5,72C 546.065,74.2672 546.398,76.2672 548.5,78C 550.066,78.6082 551.4,79.4415 552.5,80.5C 550.102,80.7406 548.102,80.0739 546.5,78.5C 543.801,72.2737 545.801,69.2737 552.5,69.5 Z"/></g>
<g><path style="opacity:1" fill="#ecb7b7" d="M 613.5,77.5 C 611.874,77.0617 610.207,76.7284 608.5,76.5C 601.432,77.9688 594.432,79.6355 587.5,81.5C 595.248,77.3148 603.581,75.4815 612.5,76C 613.056,76.3826 613.389,76.8826 613.5,77.5 Z"/></g>
<g><path style="opacity:1" fill="#cd4340" d="M 613.5,77.5 C 615.8,79.984 618.467,81.984 621.5,83.5C 621.833,84.1667 622.167,84.8333 622.5,85.5C 618.392,82.9429 614.059,80.6096 609.5,78.5C 605.571,79.6424 601.571,80.4757 597.5,81C 590.331,84.7188 582.664,86.5521 574.5,86.5C 579.041,85.4298 583.375,83.7631 587.5,81.5C 594.432,79.6355 601.432,77.9688 608.5,76.5C 610.207,76.7284 611.874,77.0617 613.5,77.5 Z"/></g>
<g><path style="opacity:1" fill="#e49796" d="M 644.5,82.5 C 643.942,83.7899 642.942,84.6232 641.5,85C 635.175,85.4995 628.842,85.6662 622.5,85.5C 622.167,84.8333 621.833,84.1667 621.5,83.5C 629.26,85.0357 636.926,84.7023 644.5,82.5 Z"/></g>
<g><path style="opacity:1" fill="#f2cdcc" d="M 587.5,81.5 C 583.375,83.7631 579.041,85.4298 574.5,86.5C 571.998,86.7495 569.498,87.0828 567,87.5C 564.044,87.432 561.544,86.432 559.5,84.5C 564.14,85.3973 568.806,85.5639 573.5,85C 578.096,83.5342 582.763,82.3675 587.5,81.5 Z"/></g>
<g><path style="opacity:1" fill="#cd433f" d="M 553.5,82.5 C 555.5,83.1667 557.5,83.8333 559.5,84.5C 561.544,86.432 564.044,87.432 567,87.5C 569.498,87.0828 571.998,86.7495 574.5,86.5C 574.586,87.4959 574.252,88.3292 573.5,89C 565.184,91.6654 558.517,89.4988 553.5,82.5 Z"/></g>
<g><path style="opacity:1" fill="#fefcfc" d="M 306.5,139.5 C 308.153,139.66 309.486,140.326 310.5,141.5C 310.833,142.5 311.5,143.167 312.5,143.5C 314.737,147.41 317.737,150.743 321.5,153.5C 321.833,154.167 322.167,154.833 322.5,155.5C 324.62,162.401 324.954,169.401 323.5,176.5C 312.657,190.023 298.657,194.689 281.5,190.5C 280.127,190.657 278.793,190.49 277.5,190C 274.941,188.223 272.274,186.723 269.5,185.5C 264.315,184.394 259.648,185.727 255.5,189.5C 252.222,191.107 249.222,190.773 246.5,188.5C 245.567,185.63 243.9,183.296 241.5,181.5C 240.741,179.564 239.741,177.731 238.5,176C 240.017,174.316 241.683,172.816 243.5,171.5C 245.17,171.249 246.67,170.582 248,169.5C 248.667,164.833 248.667,160.167 248,155.5C 247.292,154.619 246.458,153.953 245.5,153.5C 245.672,152.508 245.338,151.842 244.5,151.5C 243.32,149.307 242.32,146.974 241.5,144.5C 238.682,143.12 236.015,143.287 233.5,145C 217.152,148.163 206.152,141.997 200.5,126.5C 199.895,120.767 201.062,115.434 204,110.5C 207.038,107.631 209.871,104.631 212.5,101.5C 228.636,92.6575 242.47,95.3241 254,109.5C 255.106,115.974 255.939,122.474 256.5,129C 259.5,129.5 262.5,130 265.5,130.5C 268.259,128.906 271.259,127.573 274.5,126.5C 279.595,128.551 284.262,131.384 288.5,135C 291.5,135.333 294.5,135.667 297.5,136C 300.189,137.924 303.189,139.091 306.5,139.5 Z"/></g>
<g><path style="opacity:1" fill="#d04e4b" d="M 693.5,107.5 C 691.708,107.634 690.042,107.301 688.5,106.5C 685.659,106.44 682.993,105.774 680.5,104.5C 678.19,103.836 675.69,103.503 673,103.5C 669.195,103.304 665.695,103.97 662.5,105.5C 661.833,105.5 661.167,105.5 660.5,105.5C 657.673,105.584 655.006,106.25 652.5,107.5C 653.058,106.21 654.058,105.377 655.5,105C 661.747,103.305 668.081,102.138 674.5,101.5C 676.833,101.667 679.167,101.833 681.5,102C 685.596,104.127 689.596,105.961 693.5,107.5 Z"/></g>
<g><path style="opacity:1" fill="#eab1b1" d="M 680.5,104.5 C 674.464,104.36 668.464,104.693 662.5,105.5C 665.695,103.97 669.195,103.304 673,103.5C 675.69,103.503 678.19,103.836 680.5,104.5 Z"/></g>
<g><path style="opacity:0.961" fill="#fefefe" d="M 680.5,104.5 C 682.993,105.774 685.659,106.44 688.5,106.5C 687.391,107.29 686.058,107.79 684.5,108C 687.288,113.5 686.954,118.833 683.5,124C 681.725,125.439 679.725,126.439 677.5,127C 663.41,128.87 649.41,131.203 635.5,134C 627.446,140.387 619.112,146.387 610.5,152C 607.591,155.374 605.424,159.207 604,163.5C 598.976,169.375 592.809,173.375 585.5,175.5C 583.846,182.388 584.346,189.055 587,195.5C 610.237,226.967 632.237,259.301 653,292.5C 666.387,317.329 675.387,343.662 680,371.5C 686.361,406.086 672.527,426.919 638.5,434C 633.943,435.137 629.443,435.304 625,434.5C 622.83,445.693 621.496,457.027 621,468.5C 620.152,486.527 620.485,504.527 622,522.5C 623.747,537.836 628.414,552.17 636,565.5C 642.303,572.401 650.136,576.235 659.5,577C 664.928,585.69 669.428,594.857 673,604.5C 684.206,614.708 695.706,624.541 707.5,634C 720.395,647.564 733.895,660.397 748,672.5C 764.708,698.412 779.208,725.578 791.5,754C 791.043,754.414 790.709,754.914 790.5,755.5C 798.975,786.68 804.975,818.347 808.5,850.5C 808.693,852.688 807.859,854.355 806,855.5C 805.274,862.869 805.441,870.202 806.5,877.5C 801.5,877.5 796.5,877.5 791.5,877.5C 791.768,879.099 791.434,880.432 790.5,881.5C 786.761,879.898 782.761,878.898 778.5,878.5C 765.913,877.52 753.246,877.187 740.5,877.5C 740.5,879.167 740.5,880.833 740.5,882.5C 738.5,882.833 736.5,883.167 734.5,883.5C 734.5,882.833 734.5,882.167 734.5,881.5C 735.675,881.719 736.675,881.386 737.5,880.5C 743.566,868.701 750.399,857.368 758,846.5C 762.767,836.58 763.767,826.246 761,815.5C 756.708,802.922 751.875,790.589 746.5,778.5C 747.738,779.412 749.072,779.579 750.5,779C 738.286,758.076 726.453,736.909 715,715.5C 713.196,713.019 711.696,713.019 710.5,715.5C 708.442,713.073 706.609,710.407 705,707.5C 693.67,698.002 682.837,688.002 672.5,677.5C 673.043,677.44 673.376,677.107 673.5,676.5C 668.796,670.486 662.796,666.486 655.5,664.5C 655.082,663.778 654.416,663.278 653.5,663C 649.167,662.667 644.833,662.333 640.5,662C 639.956,661.283 639.289,660.783 638.5,660.5C 636.545,655.233 632.879,651.899 627.5,650.5C 614.879,643.282 601.212,640.782 586.5,643C 585.748,643.671 585.414,644.504 585.5,645.5C 586.156,667.182 580.489,687.182 568.5,705.5C 567.833,705.5 567.5,705.833 567.5,706.5C 563.141,709.206 558.808,711.873 554.5,714.5C 552.723,715.6 550.723,716.434 548.5,717C 538.473,717.729 528.473,717.563 518.5,716.5C 512.366,714.636 506.366,712.469 500.5,710C 497.31,707.636 494.31,705.136 491.5,702.5C 489.833,700.167 487.833,698.167 485.5,696.5C 482.911,692.397 480.078,688.397 477,684.5C 476.439,681.721 475.606,679.054 474.5,676.5C 472.395,666.601 471.562,656.601 472,646.5C 473.684,640.756 475.517,635.089 477.5,629.5C 477.5,628.833 477.5,628.167 477.5,627.5C 480.833,624.833 483.833,621.833 486.5,618.5C 487.139,617.903 487.472,617.07 487.5,616C 486.73,613.931 485.397,612.265 483.5,611C 476.228,606.726 469.228,602.059 462.5,597C 461.207,596.51 459.873,596.343 458.5,596.5C 456.583,594.149 454.916,594.149 453.5,596.5C 436.123,584.29 421.623,569.29 410,551.5C 408.714,548.595 407.714,545.595 407,542.5C 405.9,525.128 404.567,507.795 403,490.5C 396.522,495.986 389.022,499.153 380.5,500C 365.01,503.616 352.51,499.116 343,486.5C 328.363,462.868 319.03,437.201 315,409.5C 310.669,385.233 310.336,360.899 314,336.5C 317.009,313.787 320.009,291.12 323,268.5C 312.747,267.414 306.914,261.748 305.5,251.5C 304.5,251.167 303.5,250.833 302.5,250.5C 291.63,253.125 280.63,254.292 269.5,254C 266.572,252.62 263.738,251.12 261,249.5C 259.415,250.044 257.915,250.711 256.5,251.5C 256.721,249.336 257.721,247.67 259.5,246.5C 261.657,244.588 263.991,242.921 266.5,241.5C 270.155,239.623 273.822,237.957 277.5,236.5C 282.506,235.829 286.839,233.829 290.5,230.5C 303.308,227.57 315.308,222.904 326.5,216.5C 341.344,212.287 356.011,207.454 370.5,202C 373.827,201.39 377.161,200.89 380.5,200.5C 377.241,201.073 375.408,203.073 375,206.5C 371.744,252.701 377.577,297.701 392.5,341.5C 398.604,337.11 402.271,331.277 403.5,324C 402.501,318.187 402.335,312.354 403,306.5C 410.069,268.147 413.235,229.48 412.5,190.5C 413.925,189.078 414.925,187.411 415.5,185.5C 415.5,184.5 415.5,183.5 415.5,182.5C 417.646,178.281 419.646,173.948 421.5,169.5C 421.019,166.348 419.353,164.015 416.5,162.5C 415.969,160.456 414.802,158.789 413,157.5C 412.522,152.132 412.855,146.799 414,141.5C 415.376,140.295 416.542,138.962 417.5,137.5C 421.1,136.527 423.767,134.36 425.5,131C 431.528,130.359 437.528,130.526 443.5,131.5C 456.022,133.862 468.688,136.695 481.5,140C 483.22,144.542 485.553,148.709 488.5,152.5C 489.219,154.764 489.552,157.097 489.5,159.5C 491.5,159.5 493.5,159.5 495.5,159.5C 494.192,160.232 492.858,161.066 491.5,162C 495.378,173.617 493.878,184.45 487,194.5C 473.715,207.74 466.381,223.74 465,242.5C 464.006,259.487 463.506,276.487 463.5,293.5C 470.599,293.539 477.599,292.706 484.5,291C 495.838,287.999 507.172,284.999 518.5,282C 530.396,281.245 542.229,281.745 554,283.5C 554.772,283.355 555.439,283.022 556,282.5C 556.751,272.247 555.418,262.247 552,252.5C 545.3,227.104 535.3,203.104 522,180.5C 517.837,178.886 513.837,176.886 510,174.5C 507.195,169.227 504.695,163.894 502.5,158.5C 503.806,157.533 504.473,156.199 504.5,154.5C 512.723,152.201 520.723,149.534 528.5,146.5C 532.949,145.971 537.282,144.971 541.5,143.5C 551.079,140.697 560.745,138.197 570.5,136C 574.036,134.356 577.369,132.523 580.5,130.5C 591.702,127.541 602.702,124.208 613.5,120.5C 621.391,118.204 629.058,115.537 636.5,112.5C 637.833,112.5 639.167,112.5 640.5,112.5C 647.665,111.335 654.331,109.002 660.5,105.5C 661.167,105.5 661.833,105.5 662.5,105.5C 668.464,104.693 674.464,104.36 680.5,104.5 Z M 502.5,158.5 C 504.695,163.894 507.195,169.227 510,174.5C 513.837,176.886 517.837,178.886 522,180.5C 535.3,203.104 545.3,227.104 552,252.5C 555.418,262.247 556.751,272.247 556,282.5C 555.439,283.022 554.772,283.355 554,283.5C 542.229,281.745 530.396,281.245 518.5,282C 507.172,284.999 495.838,287.999 484.5,291C 477.599,292.706 470.599,293.539 463.5,293.5C 463.506,276.487 464.006,259.487 465,242.5C 466.381,223.74 473.715,207.74 487,194.5C 493.878,184.45 495.378,173.617 491.5,162C 492.858,161.066 494.192,160.232 495.5,159.5C 497.806,159.007 500.139,158.674 502.5,158.5 Z"/></g>
<g><path style="opacity:1" fill="#efc2c2" d="M 660.5,105.5 C 654.331,109.002 647.665,111.335 640.5,112.5C 644.5,110.833 648.5,109.167 652.5,107.5C 655.006,106.25 657.673,105.584 660.5,105.5 Z"/></g>
<g><path style="opacity:1" fill="#dc7b7a" d="M 652.5,107.5 C 648.5,109.167 644.5,110.833 640.5,112.5C 639.167,112.5 637.833,112.5 636.5,112.5C 641.5,110.057 646.834,108.39 652.5,107.5 Z"/></g>
<g><path style="opacity:1" fill="#de7f7e" d="M 636.5,112.5 C 629.058,115.537 621.391,118.204 613.5,120.5C 620.637,116.675 628.303,114.008 636.5,112.5 Z"/></g>
<g><path style="opacity:1" fill="#d35958" d="M 427.5,128.5 C 428.622,127.844 429.955,127.511 431.5,127.5C 440.184,129.492 448.851,130.826 457.5,131.5C 452.833,131.5 448.167,131.5 443.5,131.5C 438.494,129.441 433.16,128.441 427.5,128.5 Z"/></g>
<g><path style="opacity:1" fill="#e7a2a2" d="M 613.5,120.5 C 602.702,124.208 591.702,127.541 580.5,130.5C 591.029,125.993 602.029,122.66 613.5,120.5 Z"/></g>
<g><path style="opacity:0.2" fill="#d35755" d="M 290.5,131.5 C 291.5,131.5 292.5,131.5 293.5,131.5C 297.798,132.931 301.798,134.931 305.5,137.5C 300.298,135.88 295.298,133.88 290.5,131.5 Z"/></g>
<g><path style="opacity:1" fill="#e69d9c" d="M 427.5,128.5 C 433.16,128.441 438.494,129.441 443.5,131.5C 437.528,130.526 431.528,130.359 425.5,131C 423.767,134.36 421.1,136.527 417.5,137.5C 420.485,135.483 422.818,132.816 424.5,129.5C 425.325,128.614 426.325,128.281 427.5,128.5 Z"/></g>
<g><path style="opacity:1" fill="#f4d3d3" d="M 443.5,131.5 C 448.167,131.5 452.833,131.5 457.5,131.5C 461.018,133.908 465.018,135.241 469.5,135.5C 474.607,136.713 479.607,138.38 484.5,140.5C 486.41,144.317 487.743,148.317 488.5,152.5C 485.553,148.709 483.22,144.542 481.5,140C 468.688,136.695 456.022,133.862 443.5,131.5 Z"/></g>
<g><path style="opacity:1" fill="#dc7977" d="M 469.5,135.5 C 474.241,135.915 478.907,136.749 483.5,138C 484.252,138.671 484.586,139.504 484.5,140.5C 479.607,138.38 474.607,136.713 469.5,135.5 Z"/></g>
<g><path style="opacity:1" fill="#f1c7c7" d="M 580.5,130.5 C 577.369,132.523 574.036,134.356 570.5,136C 560.745,138.197 551.079,140.697 541.5,143.5C 547.5,141.167 553.5,138.833 559.5,136.5C 566.37,134.363 573.37,132.363 580.5,130.5 Z"/></g>
<g><path style="opacity:1" fill="#e18988" d="M 559.5,136.5 C 553.5,138.833 547.5,141.167 541.5,143.5C 537.282,144.971 532.949,145.971 528.5,146.5C 538.47,142.4 548.804,139.067 559.5,136.5 Z"/></g>
<g><path style="opacity:1" fill="#d5605e" d="M 415.5,137.5 C 414.542,138.962 413.376,140.295 412,141.5C 411.501,146.155 411.334,150.821 411.5,155.5C 410.35,150.684 410.184,145.684 411,140.5C 412.129,138.859 413.629,137.859 415.5,137.5 Z"/></g>
<g><path style="opacity:1" fill="#d55f5d" d="M 310.5,141.5 C 311.873,141.343 313.207,141.51 314.5,142C 316.085,144.069 317.419,146.236 318.5,148.5C 316.5,146.833 314.5,145.167 312.5,143.5C 311.5,143.167 310.833,142.5 310.5,141.5 Z"/></g>
<g><path style="opacity:0.047" fill="#e49b9a" d="M 290.5,131.5 C 295.298,133.88 300.298,135.88 305.5,137.5C 305.833,138.167 306.167,138.833 306.5,139.5C 303.189,139.091 300.189,137.924 297.5,136C 294.5,135.667 291.5,135.333 288.5,135C 284.262,131.384 279.595,128.551 274.5,126.5C 271.259,127.573 268.259,128.906 265.5,130.5C 262.5,130 259.5,129.5 256.5,129C 255.939,122.474 255.106,115.974 254,109.5C 242.47,95.3241 228.636,92.6575 212.5,101.5C 202.241,107.013 198.241,115.346 200.5,126.5C 206.152,141.997 217.152,148.163 233.5,145C 236.015,143.287 238.682,143.12 241.5,144.5C 242.32,146.974 243.32,149.307 244.5,151.5C 243.292,150.766 241.959,150.433 240.5,150.5C 240.923,147.757 239.756,146.424 237,146.5C 223.162,150.577 211.495,147.243 202,136.5C 193.004,117.65 198.171,104.15 217.5,96C 235.509,89.7759 249.009,94.9426 258,111.5C 258.195,116.418 258.695,121.251 259.5,126C 260.873,126.875 262.373,127.375 264,127.5C 267.394,125.952 270.894,124.619 274.5,123.5C 280.129,125.648 285.462,128.315 290.5,131.5 Z"/></g>
<g><path style="opacity:0.984" fill="#f3d1d1" d="M 212.5,101.5 C 209.871,104.631 207.038,107.631 204,110.5C 201.062,115.434 199.895,120.767 200.5,126.5C 198.241,115.346 202.241,107.013 212.5,101.5 Z"/></g>
<g><path style="opacity:1" fill="#f0c5c5" d="M 312.5,143.5 C 314.5,145.167 316.5,146.833 318.5,148.5C 319.925,149.922 320.925,151.589 321.5,153.5C 317.737,150.743 314.737,147.41 312.5,143.5 Z"/></g>
<g><path style="opacity:1" fill="#eaabaa" d="M 415.5,137.5 C 416.167,137.5 416.833,137.5 417.5,137.5C 416.542,138.962 415.376,140.295 414,141.5C 412.855,146.799 412.522,152.132 413,157.5C 414.802,158.789 415.969,160.456 416.5,162.5C 413.636,160.977 411.969,158.643 411.5,155.5C 411.334,150.821 411.501,146.155 412,141.5C 413.376,140.295 414.542,138.962 415.5,137.5 Z"/></g>
<g><path style="opacity:0.559" fill="#df8483" d="M 528.5,146.5 C 520.723,149.534 512.723,152.201 504.5,154.5C 504.473,156.199 503.806,157.533 502.5,158.5C 500.139,158.674 497.806,159.007 495.5,159.5C 493.5,159.5 491.5,159.5 489.5,159.5C 489.552,157.097 489.219,154.764 488.5,152.5C 490.104,153.287 490.771,154.62 490.5,156.5C 503.216,153.373 515.883,150.039 528.5,146.5 Z"/></g>
<g><path style="opacity:1" fill="#cf4947" d="M 240.5,150.5 C 241.959,150.433 243.292,150.766 244.5,151.5C 245.338,151.842 245.672,152.508 245.5,153.5C 247.662,158.434 247.995,163.434 246.5,168.5C 246.812,163.299 245.978,158.299 244,153.5C 241.723,152.883 239.556,152.216 237.5,151.5C 238.609,151.443 239.609,151.11 240.5,150.5 Z"/></g>
<g><path style="opacity:1" fill="#dd7d7d" d="M 245.5,153.5 C 246.458,153.953 247.292,154.619 248,155.5C 248.667,160.167 248.667,164.833 248,169.5C 246.67,170.582 245.17,171.249 243.5,171.5C 244.306,170.272 245.306,169.272 246.5,168.5C 247.995,163.434 247.662,158.434 245.5,153.5 Z"/></g>
<g><path style="opacity:1" fill="#d86867" d="M 416.5,162.5 C 419.353,164.015 421.019,166.348 421.5,169.5C 419.646,173.948 417.646,178.281 415.5,182.5C 416.406,177.877 418.073,173.543 420.5,169.5C 419.149,167.156 417.816,164.822 416.5,162.5 Z"/></g>
<g><path style="opacity:1" fill="#ecb7b6" d="M 322.5,155.5 C 322.833,155.5 323.167,155.5 323.5,155.5C 325.21,161.011 325.877,166.677 325.5,172.5C 325.771,174.38 325.104,175.713 323.5,176.5C 324.954,169.401 324.62,162.401 322.5,155.5 Z"/></g>
<g><path style="opacity:1" fill="#d96d6d" d="M 323.5,155.5 C 324.966,156.347 325.8,157.68 326,159.5C 326.814,164.02 326.647,168.354 325.5,172.5C 325.877,166.677 325.21,161.011 323.5,155.5 Z"/></g>
<g><path style="opacity:1" fill="#d6605c" d="M 241.5,181.5 C 243.9,183.296 245.567,185.63 246.5,188.5C 242.88,187.548 241.213,185.215 241.5,181.5 Z"/></g>
<g><path style="opacity:1" fill="#d76462" d="M 269.5,185.5 C 264.833,186.833 260.167,188.167 255.5,189.5C 259.648,185.727 264.315,184.394 269.5,185.5 Z"/></g>
<g><path style="opacity:1" fill="#dd7b78" d="M 246.5,188.5 C 249.222,190.773 252.222,191.107 255.5,189.5C 254.683,191.478 253.183,192.478 251,192.5C 248.384,192.383 246.884,191.05 246.5,188.5 Z"/></g>
<g><path style="opacity:1" fill="#e28f8e" d="M 323.5,176.5 C 323.291,177.922 322.791,179.255 322,180.5C 310.554,192.024 297.054,195.357 281.5,190.5C 298.657,194.689 312.657,190.023 323.5,176.5 Z"/></g>
<g><path style="opacity:0.132" fill="#d76867" d="M 415.5,185.5 C 414.925,187.411 413.925,189.078 412.5,190.5C 403.031,194.101 393.364,197.101 383.5,199.5C 382.167,199.167 380.833,198.833 379.5,198.5C 391.125,193.4 403.125,189.067 415.5,185.5 Z"/></g>
<g><path style="opacity:1" fill="#df8382" d="M 379.5,198.5 C 380.833,198.833 382.167,199.167 383.5,199.5C 382.791,200.404 381.791,200.737 380.5,200.5C 377.161,200.89 373.827,201.39 370.5,202C 356.011,207.454 341.344,212.287 326.5,216.5C 333.199,213.991 339.865,211.157 346.5,208C 355.725,205.752 364.725,202.752 373.5,199C 375.473,198.505 377.473,198.338 379.5,198.5 Z"/></g>
<g><path style="opacity:1" fill="#f2caca" d="M 326.5,216.5 C 315.308,222.904 303.308,227.57 290.5,230.5C 296.96,227.387 303.627,224.721 310.5,222.5C 311.429,221.685 312.429,220.852 313.5,220C 317.84,218.718 322.173,217.551 326.5,216.5 Z"/></g>
<g><path style="opacity:1" fill="#d25350" d="M 310.5,222.5 C 303.627,224.721 296.96,227.387 290.5,230.5C 285.738,231.716 281.405,233.716 277.5,236.5C 273.822,237.957 270.155,239.623 266.5,241.5C 267.985,238.917 270.318,237.584 273.5,237.5C 273.5,236.5 273.5,235.5 273.5,234.5C 275.199,234.66 276.866,234.494 278.5,234C 281.952,231.638 285.618,229.638 289.5,228C 296.262,225.472 303.262,223.639 310.5,222.5 Z"/></g>
<g><path style="opacity:0.953" fill="#efbebe" d="M 290.5,230.5 C 286.839,233.829 282.506,235.829 277.5,236.5C 281.405,233.716 285.738,231.716 290.5,230.5 Z"/></g>
<g><path style="opacity:0.196" fill="#cf4a47" d="M 259.5,246.5 C 257.721,247.67 256.721,249.336 256.5,251.5C 255.415,253.587 253.749,254.92 251.5,255.5C 252.042,250.624 254.709,247.624 259.5,246.5 Z"/></g>
<g><path style="opacity:0.282" fill="#e39494" d="M 458.5,596.5 C 456.833,596.5 455.167,596.5 453.5,596.5C 454.916,594.149 456.583,594.149 458.5,596.5 Z"/></g>
<g><path style="opacity:0.937" fill="#c52423" d="M 453.5,596.5 C 455.167,596.5 456.833,596.5 458.5,596.5C 467.087,603.138 476.087,609.305 485.5,615C 486.337,616.011 486.67,617.178 486.5,618.5C 482.5,620.5 479.5,623.5 477.5,627.5C 477.5,628.167 477.5,628.833 477.5,629.5C 475.591,631.649 473.924,633.982 472.5,636.5C 470.827,637.343 469.66,638.676 469,640.5C 468.179,647.346 468.346,654.013 469.5,660.5C 470.809,665.074 471.809,669.74 472.5,674.5C 473.649,678.811 474.816,683.144 476,687.5C 478.707,691.042 481.874,694.042 485.5,696.5C 486.5,699.5 488.5,701.5 491.5,702.5C 494.31,705.136 497.31,707.636 500.5,710C 506.366,712.469 512.366,714.636 518.5,716.5C 519.263,717.268 520.263,717.768 521.5,718C 530.833,718.667 540.167,718.667 549.5,718C 552.281,717.478 554.615,716.311 556.5,714.5C 560.705,712.636 564.372,709.97 567.5,706.5C 567.5,705.833 567.833,705.5 568.5,705.5C 572.56,701.708 575.893,697.374 578.5,692.5C 580.381,688.728 582.547,685.061 585,681.5C 586.271,676.246 586.771,670.913 586.5,665.5C 586.189,658.91 586.522,652.41 587.5,646C 597.958,645.28 608.291,646.113 618.5,648.5C 621.426,649.461 624.426,650.127 627.5,650.5C 631.141,653.805 634.808,657.138 638.5,660.5C 639.534,664.534 642.2,666.201 646.5,665.5C 645.571,666.315 644.571,667.148 643.5,668C 652.504,715.956 633.504,745.956 586.5,758C 542.576,766.346 501.242,759.346 462.5,737C 450.811,729.155 439.478,720.822 428.5,712C 429.167,711.333 429.833,710.667 430.5,710C 416.906,692.883 410.739,673.383 412,651.5C 415.955,636.878 423.289,624.211 434,613.5C 440.397,607.595 446.897,601.929 453.5,596.5 Z"/></g>
<g><path style="opacity:1" fill="#eebab9" d="M 458.5,596.5 C 459.873,596.343 461.207,596.51 462.5,597C 469.228,602.059 476.228,606.726 483.5,611C 485.397,612.265 486.73,613.931 487.5,616C 487.472,617.07 487.139,617.903 486.5,618.5C 486.67,617.178 486.337,616.011 485.5,615C 476.087,609.305 467.087,603.138 458.5,596.5 Z"/></g>
<g><path style="opacity:1" fill="#e28e8d" d="M 486.5,618.5 C 483.833,621.833 480.833,624.833 477.5,627.5C 479.5,623.5 482.5,620.5 486.5,618.5 Z"/></g>
<g><path style="opacity:1" fill="#d04c4a" d="M 472.5,636.5 C 469.914,644.267 468.914,652.267 469.5,660.5C 468.346,654.013 468.179,647.346 469,640.5C 469.66,638.676 470.827,637.343 472.5,636.5 Z"/></g>
<g><path style="opacity:1" fill="#f4d5d4" d="M 627.5,650.5 C 624.426,650.127 621.426,649.461 618.5,648.5C 613.905,646.142 608.905,644.975 603.5,645C 597.418,644.212 591.418,644.379 585.5,645.5C 585.414,644.504 585.748,643.671 586.5,643C 601.212,640.782 614.879,643.282 627.5,650.5 Z"/></g>
<g><path style="opacity:1" fill="#d9706f" d="M 618.5,648.5 C 608.291,646.113 597.958,645.28 587.5,646C 586.522,652.41 586.189,658.91 586.5,665.5C 586.167,665.5 585.833,665.5 585.5,665.5C 585.5,658.833 585.5,652.167 585.5,645.5C 591.418,644.379 597.418,644.212 603.5,645C 608.905,644.975 613.905,646.142 618.5,648.5 Z"/></g>
<g><path style="opacity:1" fill="#f3cfcf" d="M 477.5,629.5 C 475.517,635.089 473.684,640.756 472,646.5C 471.562,656.601 472.395,666.601 474.5,676.5C 473.833,675.833 473.167,675.167 472.5,674.5C 471.809,669.74 470.809,665.074 469.5,660.5C 468.914,652.267 469.914,644.267 472.5,636.5C 473.924,633.982 475.591,631.649 477.5,629.5 Z"/></g>
<g><path style="opacity:1" fill="#edb6b6" d="M 627.5,650.5 C 632.879,651.899 636.545,655.233 638.5,660.5C 634.808,657.138 631.141,653.805 627.5,650.5 Z"/></g>
<g><path style="opacity:0.243" fill="#e8a7a6" d="M 638.5,660.5 C 639.289,660.783 639.956,661.283 640.5,662C 644.833,662.333 649.167,662.667 653.5,663C 654.416,663.278 655.082,663.778 655.5,664.5C 654.791,665.404 653.791,665.737 652.5,665.5C 650.5,665.5 648.5,665.5 646.5,665.5C 642.2,666.201 639.534,664.534 638.5,660.5 Z"/></g>
<g><path style="opacity:0.363" fill="#f5d8d8" d="M 655.5,664.5 C 662.796,666.486 668.796,670.486 673.5,676.5C 673.376,677.107 673.043,677.44 672.5,677.5C 666.07,673.063 659.403,669.063 652.5,665.5C 653.791,665.737 654.791,665.404 655.5,664.5 Z"/></g>
<g><path style="opacity:1" fill="#d14f4c" d="M 585.5,665.5 C 585.833,665.5 586.167,665.5 586.5,665.5C 586.771,670.913 586.271,676.246 585,681.5C 582.547,685.061 580.381,688.728 578.5,692.5C 579.155,688.188 580.655,684.188 583,680.5C 583.427,675.412 584.26,670.412 585.5,665.5 Z"/></g>
<g><path style="opacity:1" fill="#d35753" d="M 472.5,674.5 C 473.167,675.167 473.833,675.833 474.5,676.5C 475.606,679.054 476.439,681.721 477,684.5C 480.078,688.397 482.911,692.397 485.5,696.5C 481.874,694.042 478.707,691.042 476,687.5C 474.816,683.144 473.649,678.811 472.5,674.5 Z"/></g>
<g><path style="opacity:1" fill="#f3d0d0" d="M 585.5,645.5 C 585.5,652.167 585.5,658.833 585.5,665.5C 584.26,670.412 583.427,675.412 583,680.5C 580.655,684.188 579.155,688.188 578.5,692.5C 575.893,697.374 572.56,701.708 568.5,705.5C 580.489,687.182 586.156,667.182 585.5,645.5 Z"/></g>
<g><path style="opacity:1" fill="#d86c6b" d="M 485.5,696.5 C 487.833,698.167 489.833,700.167 491.5,702.5C 488.5,701.5 486.5,699.5 485.5,696.5 Z"/></g>
<g><path style="opacity:1" fill="#eaaeae" d="M 567.5,706.5 C 564.372,709.97 560.705,712.636 556.5,714.5C 555.833,714.5 555.167,714.5 554.5,714.5C 558.808,711.873 563.141,709.206 567.5,706.5 Z"/></g>
<g><path style="opacity:1" fill="#e28d8c" d="M 554.5,714.5 C 555.167,714.5 555.833,714.5 556.5,714.5C 554.615,716.311 552.281,717.478 549.5,718C 540.167,718.667 530.833,718.667 521.5,718C 520.263,717.768 519.263,717.268 518.5,716.5C 528.473,717.563 538.473,717.729 548.5,717C 550.723,716.434 552.723,715.6 554.5,714.5 Z"/></g>
<g><path style="opacity:0.451" fill="#f9eaea" d="M 746.5,778.5 C 733.745,757.996 721.745,736.996 710.5,715.5C 711.696,713.019 713.196,713.019 715,715.5C 726.453,736.909 738.286,758.076 750.5,779C 749.072,779.579 747.738,779.412 746.5,778.5 Z"/></g>
<g><path style="opacity:0.981" fill="#fefffe" d="M 135.5,830.5 C 149.5,830.5 163.5,830.5 177.5,830.5C 177.5,883.167 177.5,935.833 177.5,988.5C 163.5,988.5 149.5,988.5 135.5,988.5C 135.5,935.833 135.5,883.167 135.5,830.5 Z"/></g>
<g><path style="opacity:0.975" fill="#fefffe" d="M 192.5,830.5 C 204.414,830.179 216.247,830.512 228,831.5C 235,853.167 242,874.833 249,896.5C 249.5,874.503 249.667,852.503 249.5,830.5C 261.5,830.5 273.5,830.5 285.5,830.5C 285.5,883.167 285.5,935.833 285.5,988.5C 272.833,988.5 260.167,988.5 247.5,988.5C 241.108,966.156 234.608,943.822 228,921.5C 227.5,943.831 227.333,966.164 227.5,988.5C 215.833,988.5 204.167,988.5 192.5,988.5C 192.5,935.833 192.5,883.167 192.5,830.5 Z"/></g>
<g><path style="opacity:0.978" fill="#fefffe" d="M 290.5,830.5 C 305.5,830.5 320.5,830.5 335.5,830.5C 339.062,863.455 342.229,896.455 345,929.5C 348.195,896.523 351.362,863.523 354.5,830.5C 369.167,830.5 383.833,830.5 398.5,830.5C 391.996,882.865 385.162,935.198 378,987.5C 356.909,988.494 335.742,988.827 314.5,988.5C 306.715,935.789 298.715,883.123 290.5,830.5 Z"/></g>
<g><path style="opacity:0.982" fill="#fefffe" d="M 405.5,830.5 C 428.5,830.5 451.5,830.5 474.5,830.5C 474.5,841.5 474.5,852.5 474.5,863.5C 465.5,863.5 456.5,863.5 447.5,863.5C 447.5,873.167 447.5,882.833 447.5,892.5C 456.167,892.5 464.833,892.5 473.5,892.5C 473.5,902.833 473.5,913.167 473.5,923.5C 464.833,923.5 456.167,923.5 447.5,923.5C 447.5,934.5 447.5,945.5 447.5,956.5C 457.5,956.5 467.5,956.5 477.5,956.5C 477.5,967.167 477.5,977.833 477.5,988.5C 453.5,988.5 429.5,988.5 405.5,988.5C 405.5,935.833 405.5,883.167 405.5,830.5 Z"/></g>
<g><path style="opacity:0.979" fill="#fefffe" d="M 488.5,830.5 C 511.198,830.089 533.865,830.589 556.5,832C 570.728,835.582 578.561,844.749 580,859.5C 580.883,870.883 580.55,882.217 579,893.5C 576.221,901.151 570.721,905.317 562.5,906C 566.257,907.81 569.924,909.81 573.5,912C 576.567,915.297 578.733,919.131 580,923.5C 580.5,945.164 580.667,966.831 580.5,988.5C 567.5,988.5 554.5,988.5 541.5,988.5C 541.667,967.164 541.5,945.831 541,924.5C 539.309,919.565 535.809,917.565 530.5,918.5C 530.5,941.833 530.5,965.167 530.5,988.5C 516.5,988.5 502.5,988.5 488.5,988.5C 488.5,935.833 488.5,883.167 488.5,830.5 Z M 530.5,858.5 C 534.192,857.971 537.358,858.971 540,861.5C 541.107,865.888 541.607,870.388 541.5,875C 541.577,879.917 541.077,884.75 540,889.5C 537.096,891.227 533.93,891.893 530.5,891.5C 530.5,880.5 530.5,869.5 530.5,858.5 Z"/></g>
<g><path style="opacity:0.978" fill="#fefffe" d="M 589.5,830.5 C 619.833,830.5 650.167,830.5 680.5,830.5C 680.5,841.5 680.5,852.5 680.5,863.5C 672.167,863.5 663.833,863.5 655.5,863.5C 655.5,905.167 655.5,946.833 655.5,988.5C 641.5,988.5 627.5,988.5 613.5,988.5C 613.5,946.833 613.5,905.167 613.5,863.5C 605.5,863.5 597.5,863.5 589.5,863.5C 589.5,852.5 589.5,841.5 589.5,830.5 Z"/></g>
<g><path style="opacity:0.959" fill="#c42322" d="M 734.5,881.5 C 734.5,882.167 734.5,882.833 734.5,883.5C 734.5,889.167 734.5,894.833 734.5,900.5C 728.167,900.5 721.833,900.5 715.5,900.5C 715.5,906.833 715.5,913.167 715.5,919.5C 721.167,919.5 726.833,919.5 732.5,919.5C 732.5,926.833 732.5,934.167 732.5,941.5C 726.833,941.5 721.167,941.5 715.5,941.5C 715.5,956.5 715.5,971.5 715.5,986.5C 705.5,986.5 695.5,986.5 685.5,986.5C 685.5,950.167 685.5,913.833 685.5,877.5C 701.833,877.5 718.167,877.5 734.5,877.5C 734.5,878.833 734.5,880.167 734.5,881.5 Z"/></g>
<g><path style="opacity:0.967" fill="#c52323" d="M 778.5,878.5 C 780.619,893.163 782.785,907.83 785,922.5C 787.407,908.908 789.241,895.242 790.5,881.5C 791.434,880.432 791.768,879.099 791.5,877.5C 796.5,877.5 801.5,877.5 806.5,877.5C 814.167,877.5 821.833,877.5 829.5,877.5C 829.5,913.833 829.5,950.167 829.5,986.5C 820.833,986.5 812.167,986.5 803.5,986.5C 803.667,966.831 803.5,947.164 803,927.5C 799.602,947.001 796.769,966.667 794.5,986.5C 788.167,986.5 781.833,986.5 775.5,986.5C 772.914,964.81 770.08,943.143 767,921.5C 766.5,943.164 766.333,964.831 766.5,986.5C 757.833,986.5 749.167,986.5 740.5,986.5C 740.5,951.833 740.5,917.167 740.5,882.5C 740.5,880.833 740.5,879.167 740.5,877.5C 753.246,877.187 765.913,877.52 778.5,878.5 Z M 778.5,878.5 C 782.761,878.898 786.761,879.898 790.5,881.5C 789.241,895.242 787.407,908.908 785,922.5C 782.785,907.83 780.619,893.163 778.5,878.5 Z"/></g>
</svg>
`,lA=()=>h.jsx("div",{className:"w-24 h-24",dangerouslySetInnerHTML:{__html:rA}}),cA=({className:t="w-6 h-6"})=>h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:t,children:h.jsx("path",{d:"M16 6H18V18H16V6ZM6 18L14.5 12L6 6V18Z"})}),w2=({className:t="w-6 h-6",style:e})=>h.jsx("svg",{width:"38",height:"38",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:t,style:e,children:h.jsx("path",{d:"M8 5V19L19 12L8 5Z"})}),gl=({className:t="w-6 h-6"})=>h.jsx("svg",{width:"38",height:"38",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:t,children:h.jsx("path",{d:"M6 19H10V5H6V19ZM14 5V19H18V5H14Z"})}),uA=({filled:t})=>h.jsx("svg",{width:"26",height:"26",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:`transition-colors ${t?"text-red-500":"text-white hover:text-gray-300"}`,children:h.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",stroke:"currentColor",strokeWidth:"2",fill:t?"currentColor":"none"})}),dA=()=>h.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"7 10 12 15 17 10"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),fA=()=>h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M13.5 2c-5.621 0-10.211 4.443-10.475 10h-3.025l4.537 5.917 4.463-5.917h-2.975c.26-3.902 3.508-7 7.475-7 4.136 0 7.5 3.364 7.5 7.5s-3.364 7.5-7.5 7.5c-2.381 0-4.502-1.119-5.876-2.854l-1.847 1.443c1.783 2.282 4.598 3.711 7.723 3.711 5.795 0 10.5-4.705 10.5-10.5s-4.705-10.5-10.5-10.5z"})}),ul=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("polyline",{points:"3 6 5 6 21 6"}),h.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),yl=({className:t="w-6 h-6"})=>h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:t,children:h.jsx("path",{d:"M8 5V19L19 12L8 5Z"})}),hA=()=>h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M6 6H8V18H6V6ZM9.5 12L18 18V6L9.5 12Z"})}),pA=()=>h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M16 6H18V18H16V6ZM6 18L14.5 12L6 6V18Z"})}),mA=()=>h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),gA=({className:t})=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",className:t,children:[h.jsx("circle",{cx:"12",cy:"12",r:"2"}),h.jsx("path",{d:"M16.24 7.76a6 6 0 0 1 0 8.49m-8.48 0a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"})]});function T2({className:t="w-6 h-6",style:e}){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,style:e,children:h.jsx("path",{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"})})}const yA=()=>h.jsxs("svg",{width:"327",height:"84",viewBox:"0 0 496 128",preserveAspectRatio:"xMidYMid meet",role:"img","aria-label":"Skate Button",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M0 0 C1.49172398 -0.00490147 2.98344416 -0.01109702 4.47515804 -0.01845789 C8.53427344 -0.03472166 12.59319291 -0.03256746 16.65232933 -0.02708292 C21.04583112 -0.0243958 25.43928265 -0.03897592 29.83276367 -0.05117798 C38.42521987 -0.07216402 47.01760849 -0.07677674 55.6100873 -0.07499009 C62.59996856 -0.07367894 69.58982887 -0.07750458 76.57970619 -0.08491516 C78.59840498 -0.08701452 80.61710377 -0.08911212 82.63580257 -0.09120798 C83.64078793 -0.09225151 84.64577329 -0.09329504 85.68121276 -0.09437019 C104.66029539 -0.11324526 123.63933931 -0.11223085 142.61842743 -0.10540086 C159.94798644 -0.09982825 177.27739749 -0.12064373 194.60692193 -0.15376133 C212.43567525 -0.18756633 230.26435782 -0.20265814 248.09314376 -0.1980443 C258.08864684 -0.19580638 268.0840132 -0.2009431 278.07948875 -0.22593689 C286.59022449 -0.24703826 295.10074856 -0.25045496 303.61149325 -0.2316373 C307.94613148 -0.22253337 312.280376 -0.22117041 316.6149826 -0.24199295 C342.93162685 -0.35990926 369.70346793 0.65871696 389.65840149 20.24597168 C390.66967102 21.30944824 390.66967102 21.30944824 391.70137024 22.39440918 C392.28273743 22.97964355 392.86410461 23.56487793 393.46308899 24.16784668 C402.13276157 33.47082029 405.09530846 44.85657235 405.01387024 57.26940918 C405.00895569 58.15346436 405.00404114 59.03751953 404.99897766 59.94836426 C404.88677903 66.1825803 404.35178633 71.67509025 401.70137024 77.39440918 C401.3726593 78.13304199 401.04394836 78.8716748 400.70527649 79.63269043 C392.6874202 95.69614646 378.32401972 104.67482369 362.08603668 110.74617577 C346.50428144 115.85554874 330.27826506 115.11034727 314.08554006 115.04803252 C309.68324993 115.03660421 305.28105471 115.05423794 300.87878418 115.06793213 C292.2796052 115.09004795 283.68064567 115.08541571 275.08145845 115.07086892 C268.08644282 115.05953046 261.09148826 115.0580656 254.09646606 115.06348801 C252.59737193 115.06463725 252.59737193 115.06463725 251.06799307 115.06580972 C249.0371001 115.06740851 247.00620714 115.06902958 244.9753142 115.07067268 C225.97662097 115.08489603 206.97804879 115.0685912 187.97937542 115.04167084 C171.71330662 115.01933519 155.44741629 115.02321629 139.18135071 115.04626465 C120.24596331 115.07308316 101.31068174 115.08352305 82.375278 115.06820333 C80.35227682 115.06661075 78.32927562 115.0650389 76.30627441 115.06348801 C75.31118068 115.06271663 74.31608695 115.06194525 73.29083887 115.0611505 C66.31240696 115.05685162 59.33404275 115.06408075 52.35562134 115.07588577 C43.83949933 115.08997676 35.32360744 115.08597317 26.80751145 115.05948205 C22.47082632 115.046432 18.13452345 115.04103889 13.79784203 115.05772781 C-12.85436781 115.15165014 -38.84383327 114.03101381 -59.29862976 94.39440918 C-69.10508143 84.01721164 -73.19463386 73.92452618 -73.06034851 59.66174316 C-73.04868873 57.59237588 -73.10100431 55.53124613 -73.15800476 53.46276855 C-73.2910273 40.0963418 -68.33161582 29.40628189 -58.93534851 19.70690918 C-42.27073376 5.09142484 -21.83437435 -0.09018057 0 0 Z ",fill:"#050505",transform:"translate(82.29862976074219,5.6055908203125)"}),h.jsx("path",{d:"M0 0 C2.0625 0.4375 2.0625 0.4375 4 1 C4.33 2.65 4.66 4.3 5 6 C0.25 7.125 0.25 7.125 -2 6 C-1.125 1.125 -1.125 1.125 0 0 Z ",fill:"#4E4E4E",transform:"translate(386,73)"}),h.jsx("path",{d:"M0 0 C2.625 0.375 2.625 0.375 5 1 C4.67 2.98 4.34 4.96 4 7 C2.35 6.67 0.7 6.34 -1 6 C-1.625 4.125 -1.625 4.125 -2 2 C-1.34 1.34 -0.68 0.68 0 0 Z ",fill:"#4C4C4C",transform:"translate(139,47)"}),h.jsx("path",{d:"M0 0 C2.125 0.9375 2.125 0.9375 4 2 C3.67 3.65 3.34 5.3 3 7 C0.03 6.505 0.03 6.505 -3 6 C-2.625 3.5625 -2.625 3.5625 -2 1 C-1.34 0.67 -0.68 0.34 0 0 Z ",fill:"#4F4F4F",transform:"translate(107,73)"}),h.jsx("path",{d:"M0 0 C1.67542976 0.28604898 3.34385343 0.61781233 5 1 C4.67 2.65 4.34 4.3 4 6 C2.125 6.625 2.125 6.625 0 7 C-0.66 6.34 -1.32 5.68 -2 5 C-1.46428571 1.46428571 -1.46428571 1.46428571 0 0 Z ",fill:"#4F4F4F",transform:"translate(106,47)"}),h.jsx("path",{d:"M0 0 C1.67542976 0.28604898 3.34385343 0.61781233 5 1 C5 2.65 5 4.3 5 6 C2.625 6.625 2.625 6.625 0 7 C-0.66 6.34 -1.32 5.68 -2 5 C-1.46428571 1.46428571 -1.46428571 1.46428571 0 0 Z ",fill:"#525252",transform:"translate(386,47)"}),h.jsx("path",{d:"M0 0 C1.67542976 0.28604898 3.34385343 0.61781233 5 1 C5 2.65 5 4.3 5 6 C2.625 6.625 2.625 6.625 0 7 C-0.66 6.34 -1.32 5.68 -2 5 C-1.46428571 1.46428571 -1.46428571 1.46428571 0 0 Z ",fill:"#1F1F1F",transform:"translate(353,47)"}),h.jsx("path",{d:"M0 0 C1.65 0 3.3 0 5 0 C5.33 1.65 5.66 3.3 6 5 C1.25 6.125 1.25 6.125 -1 5 C-0.67 3.35 -0.34 1.7 0 0 Z ",fill:"#4D4D4D",transform:"translate(352,74)"}),h.jsx("path",{d:"M0 0 C0.99 0.33 1.98 0.66 3 1 C2.67 2.65 2.34 4.3 2 6 C0.35 5.67 -1.3 5.34 -3 5 C-2.505 4.360625 -2.01 3.72125 -1.5 3.0625 C0.09802862 1.29025661 0.09802862 1.29025661 0 0 Z ",fill:"#747474",transform:"translate(141,74)"}),h.jsx("path",{d:"M0 0 C0.33 0.66 0.66 1.32 1 2 C1.66 2 2.32 2 3 2 C3 2.66 3 3.32 3 4 C3.66 4.33 4.32 4.66 5 5 C3.125 5.625 3.125 5.625 1 6 C0.34 5.34 -0.32 4.68 -1 4 C-0.625 1.875 -0.625 1.875 0 0 Z ",fill:"#797979",transform:"translate(352,48)"})]}),vA=({className:t="w-6 h-6",title:e="Adjustments"})=>h.jsxs("svg",{viewBox:"0 0 24 24",className:t,"aria-hidden":e?void 0:!0,role:e?"img":"presentation",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:[e?h.jsx("title",{children:e}):null,h.jsx("path",{d:"M11 2h2l.5 2.2a7.9 7.9 0 0 1 1.6.7l2-1.1 1.4 1.4-1.1 2c.26.5.5 1.04.7 1.6L20 11v2l-2.2.5c-.2.56-.44 1.1-.7 1.6l1.1 2-1.4 1.4-2-1.1c-.52.28-1.06.52-1.6.7L13 22h-2l-.5-2.2a7.9 7.9 0 0 1-1.6-.7l-2 1.1-1.4-1.4 1.1-2a7.9 7.9 0 0 1-.7-1.6L2 13v-2l2.2-.5c.18-.56.42-1.1.7-1.6l-1.1-2L5.2 5l2 1.1c.52-.28 1.06-.52 1.6-.7L11 2zm1 6a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"})]});function _A(t){if(t==="invert-white")return{toolbarBtn:"",toolbarBtnActive:"",genreBtn:"px-3 py-2 rounded-xl bg-white text-black border border-black/20 hover:bg-gray-200 transition",genreBtnActive:"bg-[#c52323] text-white border-transparent",playWrap:"",playText:""};if(t==="invert-black")return{toolbarBtn:"",toolbarBtnActive:"",genreBtn:"px-3 py-2 rounded-xl bg-black text-white border border-white/30 hover:border-white/70 transition",genreBtnActive:"bg-[#c52323] text-white border-transparent",playWrap:"",playText:""};if(t==="custom"){const e="[text-shadow:_0_1px_3px_rgb(0_0_0_/_0.6)]",n=`bg-black/20 backdrop-blur-sm text-white/95 border border-white/20 hover:bg-black/40 ${e}`;return{toolbarBtn:n,toolbarBtnActive:`bg-[#c52323]/40 backdrop-blur-sm text-white border border-red-500/60 ${e}`,genreBtn:n,genreBtnActive:`bg-[#c52323]/40 backdrop-blur-sm text-white border border-red-500/60 ring-2 ring-white/80 ${e}`,playWrap:"",playText:""}}return{toolbarBtn:"",toolbarBtnActive:"",genreBtn:"",genreBtnActive:"",playWrap:"",playText:""}}const v5={selectAll:{en:"Select All",es:"Seleccionar todo",de:"Alle auswhlen"},deselectAll:{en:"Deselect All",es:"Deseleccionar todo",de:"Alle abwhlen"},settings:{en:"Settings",es:"Ajustes",de:"Einstellungen"},play:{en:"PLAY",es:"REPRODUCIR",de:"PLAY"},myMusic:{en:"My Music",es:"Mi msica",de:"Meine Musik"},favorites:{en:"Favorites",es:"Favoritos",de:"Favoriten"},radioParadise:{en:"Radio",es:"Radio",de:"Radio"},chooseRpMix:{en:"Choose Radio mix",es:"Elegir mezcla de Radio",de:"Radio-Mix whlen"},mainMix:{en:"Main Mix",es:"Mezcla principal",de:"Haupt-Mix"},rockMix:{en:"Rock Mix",es:"Mezcla Rock",de:"Rock-Mix"},mellowMix:{en:"Mellow Mix",es:"Mezcla suave",de:"Mellow-Mix"},worldMix:{en:"World/ECM Mix",es:"Mezcla World/ECM",de:"World/ECM-Mix"},disclaimer:{en:"Disclaimer & Liability",es:"Descargo de responsabilidad",de:"Haftung & Hinweis"},enterJamId:{en:"Enter Jamendo Client ID",es:"Introduce el Client ID de Jamendo",de:"Jamendo-Client-ID eingeben"},jamHelp:{en:"To discover music, you need a Client ID from the Jamendo API. It's free!",es:"Para descubrir msica, necesitas un Client ID de la API de Jamendo. Es gratis!",de:"Um Musik zu entdecken, bentigst du eine Client-ID der Jamendo-API. Sie ist kostenlos!"},save:{en:"Save",es:"Guardar",de:"Speichern"},dontHaveOne:{en:"Don't have one?",es:"No tienes uno?",de:"Noch keinen?"},getClientId:{en:"Get a Client ID here",es:"Consigue un Client ID aqu",de:"Client-ID hier anfordern"}};function nn(t,e){const n=(e||"en").toLowerCase();return v5[t][n]??v5[t].en}const xA=({opacity:t,onOpacityChange:e})=>h.jsx("div",{className:"absolute bottom-4 z-10 flex justify-end pointer-events-none",style:{right:10,width:"50%"},children:h.jsx("input",{type:"range",min:"0",max:"0.85",step:"0.01",value:t,onChange:n=>e(parseFloat(n.target.value)),className:"overlay-slider w-full pointer-events-auto","aria-label":"Background overlay opacity",style:{transform:"none",writingMode:"horizontal-tb"}})}),bA=({onPlaySelectedGenres:t,onSetPage:e,onLocalFileSelect:n,isLoading:i,error:a,onErrorDismiss:r,jamendoClientId:c,onSetJamendoClientId:d,onShowSettings:p,onShowDisclaimer:f,selectedGenres:g,onSetSelectedGenres:_,onPlayRadioParadise:b,onOpenAdjustments:S,uiTemplate:w,uiLang:E="en",activeCustomTemplate:N,onUpdateCustomTemplate:k,showRollometer:L,onToggleRollometer:R})=>{const[O,I]=V.useState(c),G=V.useRef(null),P=w??"invert-white",M=_A(P),[F,B]=V.useState(!1),H=V.useRef(null);V.useEffect(()=>{const U=W=>{H.current&&(H.current.contains(W.target)||B(!1))};return document.addEventListener("click",U),()=>document.removeEventListener("click",U)},[]);const z=U=>{_(W=>W.includes(U)?W.filter(de=>de!==U):[...W,U])},j=U=>{U.preventDefault(),d(O)},$=g.length===fu.length,oe=()=>{_($?[]:fu)},q=[{id:"main",label:nn("mainMix",E)},{id:"rock",label:nn("rockMix",E)},{id:"mellow",label:nn("mellowMix",E)},{id:"world",label:nn("worldMix",E)}],Z="bg-gray-800 text-white font-semibold px-3 rounded-md hover:bg-gray-700 transition-colors flex items-center justify-center gap-2 whitespace-nowrap",Q=`h-12 ${Z}`,re=`w-full h-12 ${Z}`,fe=P==="custom"||P==="invert-white"||P==="invert-black";return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center p-4 sm:p-6",children:[h.jsx("header",{className:"w-full my-8",children:h.jsxs("div",{className:"w-full max-w-4xl mx-auto relative text-center flex flex-col items-center",children:[h.jsx("button",{onClick:()=>e("home"),className:"absolute left-0 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors z-10",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsxs("div",{className:"flex items-center justify-center gap-4",children:[(P==="colors"||P==="invert-black")&&h.jsx(lA,{}),h.jsx("div",{className:"logo-block text-left leading-none",children:h.jsxs("div",{className:"text-left leading-none",children:[h.jsx(id,{variant:"fm",className:"text-[70px] md:text-[80px]"}),h.jsx("div",{className:"mt-2",children:h.jsx("a",{href:"https://www.jamendo.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 opacity-80 hover:opacity-100 transition-opacity","aria-label":"Music provided by Jamendo",children:h.jsx("img",{src:"./jamendo-logo.png",alt:"Jamendo Music",className:"h-8 md:h-9"})})})]})})]}),h.jsx("div",{className:"absolute top-2 right-0 flex flex-col items-center gap-2 -mt-5",children:h.jsx("button",{type:"button",onClick:()=>S?.(),"aria-label":"Open adjustments",className:"p-2 rounded-lg hover:bg-white/10 text-white",title:"Adjustments",children:h.jsx(vA,{className:"w-6 h-6"})})}),h.jsx("div",{className:"w-full mt-8",children:h.jsxs("div",{className:"w-full max-w-2xl mx-auto flex flex-row gap-3",children:[h.jsxs("button",{onClick:()=>G.current?.click(),className:`flex-1 ${Q}`,children:[h.jsx(T2,{}),h.jsx("span",{className:"text-sm",children:nn("myMusic",E)})]}),h.jsx("input",{type:"file",accept:"audio/*",ref:G,onChange:n,className:"hidden"}),h.jsxs("button",{onClick:()=>e("my-music"),className:`flex-1 ${Q}`,children:[h.jsx(cA,{}),h.jsx("span",{className:"text-sm",children:nn("favorites",E)})]}),h.jsxs("div",{ref:H,className:"relative flex-1",children:[h.jsxs("button",{onClick:()=>B(U=>!U),className:re,"aria-haspopup":"menu","aria-expanded":F,"aria-label":nn("chooseRpMix",E),title:nn("radioParadise",E),children:[h.jsx(gA,{className:"h-6 w-6 -translate-y-[5px]"}),h.jsx("span",{className:"text-sm",children:nn("radioParadise",E)}),h.jsx("svg",{width:"14",height:"14",viewBox:"0 0 20 20",className:`transition-transform shrink-0 ${F?"rotate-180":""}`,"aria-hidden":"true",children:h.jsx("path",{d:"M5 8l5 5 5-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]}),F&&h.jsx("div",{role:"menu",className:"absolute z-20 mt-2 w-full bg-gray-800 border border-gray-700 rounded-md shadow-lg overflow-hidden",children:q.map(U=>h.jsx("button",{onClick:()=>{b(U.id),B(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm",role:"menuitem",children:U.label},U.id))})]})]})})]})}),h.jsxs("main",{className:"w-full max-w-4xl mx-auto flex-grow",children:[a&&h.jsxs("div",{className:"bg-red-500 text-white p-4 rounded-lg flex justify-between items-center mb-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold",children:"Oops! Something went wrong."}),h.jsx("p",{children:a})]}),h.jsx("button",{onClick:r,className:"text-2xl",children:""})]}),h.jsxs("div",{className:`relative p-6 rounded-lg mb-8 transition-colors duration-300 ${N?"bg-transparent":"bg-gray-800"}`,style:{overflow:"hidden"},children:[N&&h.jsxs(h.Fragment,{children:[N.bgType==="image"&&h.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center",style:{backgroundImage:`url(${N.background})`}}),N.bgType==="video"&&h.jsx("video",{src:N.background,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"absolute top-1/2 left-1/2 w-auto h-auto min-w-full min-h-full object-cover transform -translate-x-1/2 -translate-y-1/2"}),N.overlayOpacity>0&&h.jsx("div",{className:"absolute inset-0 bg-black transition-opacity",style:{opacity:N.overlayOpacity}}),h.jsx(xA,{opacity:N.overlayOpacity,onOpacityChange:U=>k(N.id,{overlayOpacity:U})})]}),h.jsx("div",{className:"relative",children:c?h.jsx(h.Fragment,{children:i?h.jsx("div",{className:"flex justify-center items-center h-40",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-white"})}):h.jsx("div",{className:"flex flex-col items-center",children:h.jsxs("div",{className:"w-full max-w-lg flex flex-col items-center",children:[h.jsxs("div",{className:"flex gap-3 sm:gap-4 w-full mb-4",children:[h.jsx("button",{onClick:oe,className:["flex-1 font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center",$?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600",M.toolbarBtn,$?M.toolbarBtnActive:""].join(" "),children:nn($?"deselectAll":"selectAll",E)}),h.jsxs("button",{onClick:p,className:["flex-1 font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 bg-gray-700 text-gray-300 hover:bg-gray-600",M.toolbarBtn].join(" "),children:[h.jsx(mA,{}),h.jsx("span",{children:nn("settings",E)})]})]}),h.jsx("div",{className:"grid grid-cols-4 gap-3 sm:gap-4 w-full",children:fu.map((U,W)=>{const de=g.includes(U),te=`${U}-${P}`;return P==="colors"?h.jsx("button",{onClick:()=>z(U),style:{backgroundColor:aA[W],color:"#ffffff"},className:`aspect-[4/1] font-semibold rounded-lg flex items-center justifycenter text-center p-1 text-sm transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md ${de?"ring-4 ring-offset-2 ring-offset-gray-800 ring-white":"ring-0"} whitespace-nowrap px-2`,children:U},te):h.jsx("button",{onClick:()=>z(U),className:["aspect-[4/1] font-semibold rounded-xl flex items-center justify-center text-center p-1 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md whitespace-nowrap text-[12px] sm:text-sm px-2",de?M.genreBtnActive:M.genreBtn].join(" "),children:U},te)})}),fe?h.jsx("button",{onClick:()=>t(g),disabled:g.length===0,className:P==="custom"?"group mt-4 w-24 h-24 rounded-full bg-black/20 border-2 border-white/40 backdrop-blur-sm flex items-center justify-center text-white font-black text-2xl tracking-widest transition transform hover:scale-105 hover:border-white/70 hover:bg-black/30 disabled:opacity-50 disabled:transform-none disabled:cursor-not-allowed":"group mt-4 w-24 h-24 rounded-full bg-[#c52323] flex items-center justify-center text-white font-black text-2xl tracking-widest transition transform hover:scale-105 hover:bg-red-700 disabled:opacity-50 disabled:transform-none disabled:cursor-not-allowed","aria-label":nn("play",E),children:nn("play",E)}):h.jsx("button",{onClick:()=>t(g),disabled:g.length===0,className:["group mt-3 transition-transform duration-150 ease-in-out transform hover:scale-105 active:scale-100 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60 disabled:transform-none rounded-2xl",M.playWrap].join(" "),"aria-label":nn("play",E),children:h.jsxs("div",{className:"relative mx-auto skateboard-layer",style:{transform:"scale(0.6)",transformOrigin:"center"},children:[h.jsx(yA,{}),h.jsxs("div",{className:"absolute inset-0 flex items-center justify-center gap-3 pointer-events-none text-white group-hover:text-[#c52323]",children:[h.jsx("span",{className:["relative font-black text-3xl tracking-widest",M.playText].join(" "),style:{WebkitTextStroke:"2px #c52323",paintOrder:"stroke fill"},children:nn("play",E)}),h.jsx(w2,{className:"group-hover:translate-x-1 transition-transform duration-150"})]})]})})]})})}):h.jsxs("form",{onSubmit:j,children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:nn("enterJamId",E)}),h.jsx("p",{className:"text-sm text-gray-400 mb-4 text-center",children:nn("jamHelp",E)}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsx("input",{type:"text",value:O,onChange:U=>I(U.target.value),placeholder:"Jamendo Client ID",className:"flex-grow p-3 bg-gray-700 text-white rounded-md border border-gray-600 focus:ring-2 focus:ring-indigo-500 focus:outline-none"}),h.jsx("button",{type:"submit",className:"bg-indigo-600 text-white font-bold py-3 px-6 rounded-md hover:bg-indigo-700 transition-colors",children:nn("save",E)})]}),h.jsxs("p",{className:"text-xs text-gray-500 mt-3 text-center",children:[nn("dontHaveOne",E)," ",h.jsx("a",{href:"https://developer.jamendo.com/v3.0/applications",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-indigo-400",children:nn("getClientId",E)}),"."]})]})})]})]}),h.jsx("footer",{className:"w-full text-center p-4 mt-auto",children:h.jsx("button",{onClick:f,className:"text-sm text-gray-500 hover:text-gray-300 underline",children:nn("disclaimer",E)})})]})},E2=({className:t="w-6 h-6",style:e})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,style:e,children:h.jsx("path",{d:"M19 13H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2zM7 15a2 2 0 1 1 0 4 2 2 0 0 1 0-4zm10 0a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"})}),CA=({className:t="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:h.jsx("path",{d:"M19.75 4.5H4.25C2.455 4.5 1 5.955 1 7.75v8.5C1 18.045 2.455 19.5 4.25 19.5h15.5c1.795 0 3.25-1.455 3.25-3.25v-8.5c0-1.795-1.455-3.25-3.25-3.25zM6.25 9.5a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5zm2 5a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5zm2-2.5a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5zm-2-2.5a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5zm10.5 5a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5zm2.5-2.5a1.25 1.25 0 110 2.5 1.25 1.25 0 010-2.5z"})}),SA=({className:t="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:h.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.202a.75.75 0 01-1.5 0v-.202c0-.944.606-1.657 1.336-2.008a2.25 2.25 0 00.5-.33c.505-.442.505-1.217 0-1.659zM12 17.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})}),wA=({className:t="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:h.jsx("path",{fillRule:"evenodd",d:"M3 2.25a.75.75 0 00-.75.75v18a.75.75 0 00.75.75h18a.75.75 0 00.75-.75V13.5a.75.75 0 00-.75-.75h-1.5V9.75a.75.75 0 00-.75-.75h-3V5.25a.75.75 0 00-.75-.75H3zm3.75 6.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm0 3.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm0 3.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm6-6.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm0 3.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm6-6a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm0 3.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5zm0 3.75a.75.75 0 000 1.5h1.5a.75.75 0 000-1.5h-1.5z",clipRule:"evenodd"})}),TA=({onSetPage:t})=>h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 flex flex-col",children:[h.jsx("header",{className:"w-full my-8 relative",children:h.jsxs("div",{className:"w-full max-w-4xl mx-auto relative flex items-center justify-center",children:[h.jsx("button",{onClick:()=>t("home"),className:"absolute left-0 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors z-10 p-2 -ml-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("div",{className:"logo-block text-left leading-none",children:h.jsx(id,{variant:"games",className:"text-[70px] md:text-[80px]"})})]})}),h.jsx("main",{className:"w-full max-w-2xl mx-auto flex-grow",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("button",{onClick:()=>t("skate-game"),className:"bg-neutral-800 p-6 rounded-xl border border-white/5 flex flex-col items-center justify-center gap-4 h-40 hover:bg-neutral-700 transition-colors group",children:[h.jsx(CA,{className:"w-12 h-12 text-yellow-500 group-hover:scale-110 transition-transform"}),h.jsx("span",{className:"font-bold text-lg tracking-wide",children:"SKATE GAME"})]}),h.jsxs("button",{onClick:()=>t("skate-quiz"),className:"bg-neutral-800 p-6 rounded-xl border border-white/5 flex flex-col items-center justify-center gap-4 h-40 hover:bg-neutral-700 transition-colors group",children:[h.jsx(E2,{className:"w-12 h-12 text-[#c52323] group-hover:scale-110 transition-transform"}),h.jsx("span",{className:"font-bold text-lg tracking-wide",children:"SKATE QUIZ"})]}),h.jsxs("button",{onClick:()=>t("general-quiz"),className:"bg-neutral-800 p-6 rounded-xl border border-white/5 flex flex-col items-center justify-center gap-4 h-40 hover:bg-neutral-700 transition-colors group",children:[h.jsx(SA,{className:"w-12 h-12 text-blue-500 group-hover:scale-110 transition-transform"}),h.jsx("span",{className:"font-bold text-lg tracking-wide",children:"GENERAL QUIZ"})]}),h.jsxs("button",{onClick:()=>t("capitals-quiz"),className:"bg-neutral-800 p-6 rounded-xl border border-white/5 flex flex-col items-center justify-center gap-4 h-40 hover:bg-neutral-700 transition-colors group",children:[h.jsx(wA,{className:"w-12 h-12 text-teal-500 group-hover:scale-110 transition-transform"}),h.jsx("span",{className:"font-bold text-lg tracking-wide",children:"CAPITALS QUIZ"})]})]})})]}),Oa=({label:t,value:e,onChange:n,onReset:i,min:a=0,max:r=2,step:c=.01,displayValue:d})=>{const[p,f]=V.useState(e);V.useEffect(()=>f(e),[e]);const g=_=>{const b=parseFloat(_.currentTarget.value);f(b),n(b)};return h.jsxs("div",{className:"flex flex-col space-y-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("label",{className:"text-xs text-gray-400",children:[t," ",d&&`(${d})`]}),h.jsx("button",{onClick:i,title:`Reset ${t}`,className:"text-gray-500 hover:text-white transition-colors",children:h.jsx(fA,{})})]}),h.jsx("input",{className:"slider w-full",type:"range",min:a,max:r,step:c,value:p,onInput:g})]})},EA=({song:t,onSetPage:e,isPlaying:n,onPlayPause:i,onPrevSong:a,onNextSong:r,playlistLength:c,isFavorited:d,onHeartClick:p,currentTime:f,duration:g,onSeek:_,volume:b,onVolumeChange:S,speed:w,onSpeedChange:E,keyVal:N,onKeyChange:k,treble:L,onTrebleChange:R,booster:O,onBoosterChange:I,reverb:G,onReverbChange:P,onShowLicense:M,onShowEqualizer:F,repeat:B,onToggleRepeat:H})=>{const z=V.useRef(!1),[j,$]=V.useState(0),oe=V.useRef(null);V.useEffect(()=>{if(oe.current!==null&&(window.clearTimeout(oe.current),oe.current=null),!!n&&!(f>.5))return oe.current=window.setTimeout(()=>{n&&f<=.5&&r()},4e3),()=>{oe.current!==null&&(window.clearTimeout(oe.current),oe.current=null)}},[n,f,t.id,r]),V.useEffect(()=>{z.current||$(f)},[f]);const q=U=>{const W=parseFloat(U.currentTarget.value);$(W),z.current||_(W)},Z=()=>{z.current=!0},Q=U=>{z.current=!1,_(parseFloat(U.currentTarget.value))},re=U=>{z.current=!1,_(parseFloat(U.currentTarget.value))},fe=U=>{if(isNaN(U))return"0:00";const W=Math.floor(U/60),de=Math.floor(U%60);return`${W}:${de.toString().padStart(2,"0")}`};return h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-sm bg-gray-800 rounded-2xl shadow-lg p-6 sm:p-8",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("button",{onClick:()=>e("music"),"aria-label":"Back to Music",className:"text-white hover:text-gray-300 transition-colors inline-flex items-center justify-center w-9 h-9 rounded-full bg-gray-700/60 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("span",{className:"text-sm text-gray-400",children:"Back"})]}),h.jsx("div",{className:"relative max-w-[200px] mx-auto",children:h.jsx("img",{src:t.album_image,alt:t.name,className:"w-full h-auto object-cover rounded-lg shadow-md aspect-square"})}),h.jsxs("div",{className:"flex justify-around items-center w-full max-w-[200px] mx-auto px-2 mt-4",children:[h.jsx("button",{onClick:()=>p(t),"aria-label":d(t.id)?"Remove from favorites":"Add to favorites",children:h.jsx(uA,{filled:d(t.id)})}),h.jsx("button",{onClick:F,"aria-label":"Equalizer",className:"text-white hover:text-gray-300 transition-colors",title:"Equalizer",children:h.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24","aria-hidden":"true",children:[h.jsx("rect",{x:"5",y:"3",width:"2",height:"18",rx:"1",fill:"currentColor"}),h.jsx("rect",{x:"11",y:"3",width:"2",height:"18",rx:"1",fill:"currentColor"}),h.jsx("rect",{x:"17",y:"3",width:"2",height:"18",rx:"1",fill:"currentColor"}),h.jsx("circle",{cx:"6",cy:"16",r:"3",fill:"currentColor"}),h.jsx("circle",{cx:"12",cy:"8",r:"3",fill:"currentColor"}),h.jsx("circle",{cx:"18",cy:"12",r:"3",fill:"currentColor"})]})}),t.audiodownload_allowed&&h.jsx("button",{type:"button",onClick:M,"aria-label":"Show license and download options",className:"text-white hover:text-gray-300 transition-colors",children:h.jsx(dA,{})})]}),h.jsxs("div",{className:"text-center mt-4 mb-4",children:[h.jsx("h2",{className:"text-3xl font-bold truncate",children:t.name}),h.jsx("p",{className:"text-gray-400 text-lg truncate",children:t.artist_name}),h.jsxs("div",{className:"flex justify-center items-center gap-2 mt-2",children:[t.genre&&h.jsx("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded-full",children:t.genre}),t.license&&h.jsx("button",{onClick:M,className:"text-xs bg-blue-800 px-2 py-1 rounded-full hover:bg-blue-700 transition",children:"License"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-4",children:[h.jsx("span",{children:fe(j)}),h.jsx("input",{type:"range",min:"0",max:g||0,step:"0.1",value:j,onInput:q,onMouseDown:Z,onMouseUp:Q,onTouchStart:Z,onTouchEnd:re,className:"slider w-full"}),h.jsx("span",{children:fe(g)})]}),h.jsxs("div",{className:"flex justify-center items-center space-x-6 mb-6",children:[h.jsx("button",{onClick:a,className:"transport-btn press-flash-red disabled:opacity-50",disabled:c<=1,"aria-label":"Previous",children:h.jsx(hA,{})}),h.jsx("button",{onClick:i,className:"transport-btn press-flash-red rounded-full w-14 h-14 flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform","aria-label":n?"Pause":"Play",children:n?h.jsx(gl,{}):h.jsx(yl,{})}),h.jsx("button",{onClick:r,className:"transport-btn press-flash-red disabled:opacity-50",disabled:c<=1,"aria-label":"Next",children:h.jsx(pA,{})}),h.jsx("button",{onClick:H,"aria-pressed":B,"aria-label":B?"Disable repeat":"Enable repeat",className:"transport-btn press-flash-red",style:{color:B?"#c52323":void 0},title:B?"Repeat: ON":"Repeat: OFF",children:h.jsxs("svg",{width:"26",height:"26",viewBox:"0 0 24 24","aria-hidden":"true",children:[h.jsx("path",{d:"M7.5 7H15a4 4 0 0 1 0 8h-1.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M7.5 7l2.5-2.5M7.5 7l2.5 2.5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M16.5 17H9a 4 4 0 0 1 0-8h1.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("path",{d:"M16.5 17l-2.5 2.5M16.5 17l-2.5-2.5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4",children:[h.jsx(Oa,{label:"Volume",value:b,onChange:S,onReset:()=>S(.5),max:1}),h.jsx(Oa,{label:"Speed",value:w,onChange:E,onReset:()=>E(1),min:.5,max:2}),h.jsx(Oa,{label:"Treble",value:L,onChange:R,onReset:()=>R(0),max:1}),h.jsx(Oa,{label:"Bass-Booster",value:O,onChange:I,onReset:()=>I(0),max:1}),h.jsx(Oa,{label:"Key",value:N,onChange:k,onReset:()=>k(0),min:-6,max:6,step:1,displayValue:`${N>0?"+":""}${N}st`}),h.jsx(Oa,{label:"Plate Reverb",value:G,onChange:P,onReset:()=>P(0),min:0,max:1})]})]})})},NA=({onSetPage:t,favorites:e,playlists:n,onPlayPlaylist:i,onCreateEmptyPlaylist:a,onDeletePlaylist:r,onDeleteFromFavorites:c,onDeleteFromPlaylist:d,onMoveFavoriteToPlaylist:p,onMovePlaylistSongToFavorites:f,onShowDisclaimer:g,currentSong:_,isPlaying:b,onPlayPause:S})=>{const[w,E]=V.useState(""),[N,k]=V.useState(null),[L,R]=V.useState(!1),[O,I]=V.useState(!1),[G,P]=V.useState(null),M=(j,$,oe)=>{I(!0),P({songId:$,sourcePlaylistId:oe}),document.body.style.overflow="hidden",j.dataTransfer&&(j.dataTransfer.setData("songId",$),oe&&j.dataTransfer.setData("sourcePlaylistId",oe)),j.touches&&j.preventDefault()},F=()=>{I(!1),P(null),k(null),R(!1),document.body.style.overflow=""},B=j=>{if(!O)return;const $=j.touches[0],oe=document.elementFromPoint($.clientX,$.clientY);if(!oe)return;const q=oe.closest('[data-drop-zone="playlist"]');if(q){const Q=q.getAttribute("data-playlist-id");if(Q){k(Q),R(!1);return}}if(oe.closest('[data-drop-zone="favorites"]')){R(!0),k(null);return}k(null),R(!1)},H=j=>{if(!O||!G){F();return}const $=j.changedTouches[0],oe=document.elementFromPoint($.clientX,$.clientY);if(oe){const q=oe.closest('[data-drop-zone="playlist"]');if(q){const Q=q.getAttribute("data-playlist-id"),{songId:re,sourcePlaylistId:fe}=G;Q&&re&&!fe&&p(re,Q)}if(oe.closest('[data-drop-zone="favorites"]')){const{songId:Q,sourcePlaylistId:re}=G;Q&&re&&f(Q,re)}}F()},z=j=>{j.preventDefault(),a(w),E("")};return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 flex flex-col",children:[h.jsxs("header",{className:"flex items-center justify-between mb-8 relative",children:[h.jsx("button",{onClick:()=>t("music"),className:"absolute left-0 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("h1",{className:"text-2xl font-bold text-gray-300 text-center w-full",children:"Favorites"})]}),h.jsxs("main",{className:"w-full max-w-4xl mx-auto flex-grow",children:[h.jsxs("section",{"data-drop-zone":"favorites",className:`mb-12 transition-all ${L?"outline outline-2 outline-indigo-500 rounded-lg":""}`,onDragOver:j=>{j.preventDefault(),R(!0)},onDragLeave:()=>R(!1),onDrop:j=>{j.preventDefault(),R(!1);const $=j.dataTransfer.getData("songId"),oe=j.dataTransfer.getData("sourcePlaylistId");$&&oe&&f($,oe)},children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Favorite songs - general list"}),e.length>0&&h.jsx("button",{onClick:()=>i(e,0),className:"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors text-sm",children:"Play All"})]}),e.length>0?h.jsx("div",{className:"bg-gray-800 rounded-lg p-2",children:e.map((j,$)=>{const oe=b&&_?.id===j.id;return h.jsxs("div",{className:"group flex items-center p-2 hover:bg-gray-700 rounded-md transition-colors",style:{touchAction:"none"},children:[h.jsxs("div",{draggable:!0,onDragStart:q=>M(q,j.id.toString()),onDragEnd:F,onTouchStart:q=>M(q,j.id.toString()),onTouchMove:B,onTouchEnd:H,style:{flexGrow:1,display:"flex",alignItems:"center",gap:"12px",paddingRight:"10px",cursor:"grab"},children:[h.jsx("img",{src:j.album_image,className:"w-12 h-12 rounded-md object-cover"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:j.name}),h.jsx("p",{className:"text-sm text-gray-400",children:j.artist_name})]})]}),h.jsx("div",{style:{width:"1px",backgroundColor:"#555",height:"40px",marginRight:"10px"}}),h.jsxs("div",{className:"flex items-center gap-3",style:{pointerEvents:"auto"},children:[h.jsx("button",{onClick:()=>oe?S():i(e,$),className:"w-8 h-8 flex items-center justify-center",children:oe?h.jsx(gl,{}):h.jsx(yl,{})}),h.jsx("button",{onClick:q=>{q.stopPropagation(),c(j.id)},className:"text-gray-500 hover:text-red-500 p-2",children:h.jsx(ul,{})})]})]},j.id)})}):h.jsx("p",{className:"text-gray-500 bg-gray-800 p-4 rounded-lg",children:"You haven't favorited any songs for the general list yet."})]}),h.jsxs("section",{children:[h.jsx("h2",{className:"text-xl font-bold mb-4",children:"Playlists"}),n.length>0?h.jsx("div",{className:"space-y-6",children:n.map(j=>h.jsxs("div",{"data-drop-zone":"playlist","data-playlist-id":j.id,onDragOver:$=>{$.preventDefault(),k(j.id)},onDragLeave:()=>k(null),onDrop:$=>{$.preventDefault(),k(null);const oe=$.dataTransfer.getData("songId"),q=$.dataTransfer.getData("sourcePlaylistId");oe&&!q&&p(oe,j.id)},className:`bg-gray-800 rounded-lg p-4 transition-all ${N===j.id?"outline outline-2 outline-indigo-500":""}`,children:[h.jsxs("div",{className:"flex justify-between items-center mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold",children:j.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[j.songs.length>0&&h.jsx("button",{onClick:()=>i(j.songs,0),className:"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-700 transition-colors text-sm",children:"Play All"}),h.jsx("button",{onClick:()=>r(j.id),className:"text-gray-500 hover:text-red-500 p-2",children:h.jsx(ul,{})})]})]}),h.jsxs("div",{className:"space-y-1",children:[j.songs.map(($,oe)=>{const q=b&&_?.id===$.id;return h.jsxs("div",{style:{touchAction:"none"},className:"group flex items-center p-2 hover:bg-gray-700 rounded-md transition-colors",children:[h.jsxs("div",{draggable:!0,onDragStart:Z=>M(Z,$.id.toString(),j.id),onDragEnd:F,onTouchStart:Z=>M(Z,$.id.toString(),j.id),onTouchMove:B,onTouchEnd:H,style:{flexGrow:1,display:"flex",alignItems:"center",gap:"12px",paddingRight:"10px",cursor:"grab"},children:[h.jsx("img",{src:$.album_image,className:"w-12 h-12 rounded-md object-cover"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:$.name}),h.jsx("p",{className:"text-sm text-gray-400",children:$.artist_name})]})]}),h.jsx("div",{style:{width:"1px",backgroundColor:"#555",height:"40px",marginRight:"10px"}}),h.jsxs("div",{className:"flex items-center gap-3",style:{pointerEvents:"auto"},children:[h.jsx("button",{onClick:()=>q?S():i(j.songs,oe),className:"w-8 h-8 flex items-center justify-center",children:q?h.jsx(gl,{}):h.jsx(yl,{})}),h.jsx("button",{onClick:Z=>{Z.stopPropagation(),d(j.id,$.id)},className:"text-gray-500 hover:text-red-500 p-2",children:h.jsx(ul,{})})]})]},$.id)}),j.songs.length===0&&h.jsx("p",{className:"text-gray-500 p-2",children:"This playlist is empty."})]})]},j.id))}):h.jsx("p",{className:"text-gray-500 bg-gray-800 p-4 rounded-lg",children:"You haven't created any playlists yet."}),h.jsxs("form",{onSubmit:z,className:"mt-6 flex flex-wrap gap-2",children:[h.jsx("input",{type:"text",value:w,onChange:j=>E(j.target.value),placeholder:"Create a new playlist...",className:"flex-grow p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[180px]"}),h.jsx("button",{type:"submit",disabled:!w.trim(),className:"bg-indigo-600 text-white font-bold py-3 px-5 rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50 shrink-0",children:"Create"})]})]})]}),h.jsx("footer",{className:"w-full text-center p-4 mt-4",children:h.jsx("button",{onClick:g,className:"text-sm text-gray-500 hover:text-gray-300 underline",children:"Disclaimer"})})]})},AA=`INVERT FM  Ahnong und Verantwortung

1. Allgemeines
De App isch aktuell no gratis. Da knnt sich oba ndern  i knntat also in Zukunft Werbung oda kostenpflichtige Zusatzfunktionen einbaun. De Musi, wo du in da App host, kimmt direkt von Jamendo ber deren offizielle Schnittstelle. Alles luft also nach de Regeln von Jamendo und de Knstler.

2. Woher de Inhalt kimmt
De Musi, de Cover-Bilder und de Infos zu de Songs werdn direkt von Jamendo ihre Server gstreamt. I host koane Musifiles und loss a koane hochlodn. Alles, wos zum Obspln (und eventuell zum Downloadn) gibt, luft ber Jamendo.

3. Urheberrecht und Lizenzen
Jeder Song hot seine oagne Lizenz, meist Creative Commons (CC)  genau wos erlaubt isch und wos ned, steht auf Jamendo. Du bist selber dafr verantwortlich, dass du di Musi im Rahma von de Lizenzen nutzt. Wennst wos kommerziell verwenen willst, brauchst eventuell a extra Erlaubnis von Jamendo oda vom Knstler.

4. Keine Verantwortung fr Missbrauch
I bernehm koane Verantwortung dafr, wost mit da App oda da Musi ostellst. Wennd Songs herunterlodnst oda verbreitest, wost ned derfast, dann isch des dei oagnes Risiko. I koa dafr ned zur Verantwortung gezogen werdn, wens deswegen Probleme gibt.

5. Alles ohne Gewhr
De App wird so zur Verfgung gestellt, wia sie isch. I koa koane Garantie gebn, dass sie immer fehlerfrei und ohne Unterbrechungen luft. A fr de Zuverlssigkeit von Jamendo koa i koane Versprechungen machn.

6. Haftung
I hafte auf koan Foi fr irgendwelche Schden, die durch de Nutzung von da App entstehn knntn  sei es direkte, indirekte, oafache oda folgeschwere. Dazua ghean zum Beispiel Datavaleurust, Gerteschden oda finanzielle Verluste.

7. Externe Dienste
De App nutzt Dienste von Dritten, wia zum Beispiel de Jamendo-API. In Zukunft knntn a no andare Dienste dazukommen (z. B. fr Werbung oda Analysen). I hob oba koa Einfluss auf de Dienste und bin a ned fr deren Inhalt oda Verfgbarkeit verantwortlich.

8. Akzeptanz von de Regeln
Wennst de App nutzt, akzeptierst du damit di Regeln von dem Disclaimer. Bist du ned einverstanden, dann deinstallier de App bitte umgehend.

9. nderungen
I koa jederzeit wos an dem Disclaimer ndern. De aktuellste Version findest du immer in da App oda auf meiner Website. Wennst de App weiter nutzt, nachdem wos gendert worden isch, gts des ois Zustimmung.

10. Kontakt
Bei Frogn, Feedback oda rechtlichen Onliegen kannst mi gerne kontaktieren  d'Kontaktdaten findest uf meiner Google Play Store-Seite.

Hinweis zu Creative Commons Lizenzen

INVERT FM nutzt Musi von Jamendo, die unter verschiedene Creative Commons Lizenzen steht. Weil de App gratis isch und selber koan Profit macht, derfn a Liedln mit "Non-Commercial" (NC) Lizenz von olle Nutzer fr private Zwecke verwendet werdn.

 CC-BY  erlaubt, a fr kommerzielle Zwecke
 CC-BY-SA  erlaubt, a fr kommerzielle Zwecke
 CC-BY-NC / CC-BY-NC-SA  erlaubt, weil INVERT FM ned kommerziell isch
 ND-Lizenzn ("No-Derivatives", oiso koa Verndern)  de Songs werdn automatisch ausgschlossen

Olle Musi wird direkt von Jamendo gstreamt. INVERT FM hostet koane Audiodateien und verteilt a koane vernderten Songs.`,MA=`AVISO LEGAL Y DESCARGO DE RESPONSABILIDAD DE INVERT FM
(Para que no andes chillando despus)

1. Informacin General
Esta aplicacin por ahorita es ms gratis que el aire, pero no me hagas brujera porque me reservo el derecho de meterle despus publicidad o cobrar por funcionalidades especiales. Toda la msica sale directo del Jamendo, como Dios manda, bajo sus trminos y condiciones.

2. Fuente del Contenido
Las rolas, las portadas y toda la info vienen directo de los servidores de Jamendo. Yo no ando de pirata almacenando archivos, noms paso la voz. La reproduccin y descargas (cuando se puede) se hacen atravs de su sistema.

3. Derechos de Autor y Licencias
Cada cancin trae su propia licencia, generalmente Creative Commons. T eres 100% responsable de cmo usas la msica. Si la usas para negocio sin permiso, te puede caer la voladora. Para eso necesitas arreglarte directo con Jamendo o el artista.

4. No me hago responsable del mal uso
Si te pasas de listo y usas la app o la msica para cosas chuecas, ah te vidrios. Yo me lavo las manos como Poncio Pilatos. Cualquier pedo legal, desmadre o problema es tu bronca, no la ma.

5. Sin Garantas
La app te la doy "tal cual", as noms, como vino al mundo. No te prometo que funcione siempre perfecto, ni que Jamendo no se vaya a tronar en el peor momento. Ni modo, as es la vida.

6. Limitacin de Responsabilidad
Por ningn pinche motivo me hago responsable de daos directos, indirectos, casuales o de aquellos que hasta San Pedro desconozca. Esto incluye prdida de datos, que se te fria el celular o que dejes de ganar lana por usar la app.

7. Servicios de Terceros
La app depende de servicios externos como la API de Jamendo. Y pues yo no mando ah, no soy su pap. Si fallan, ni modo. En el futuro podran meterse otros servicios (como anuncios) y de esos tampoco me hago responsable.

8. Aceptacin de los Trminos
Al descargar o usar esta app, aceptas este descargo de responsabilidad. Si no ests de acuerdo, ndale, ya vete. Desinstlala inmediatamente, no te hagas.

9. Actualizaciones de este Aviso
Este aviso puede cambiar cuando se me hinche un huevo. La versin ms reciente siempre estar en la app o en mi sitio web. Si sigues usando la app despus de los cambios, significa que le entras al quite.

10. Contacto
Para preguntas, quejas o si te sientes muy abogado: bscame en la informacin de contacto de la pgina de Google Play Store.

Aviso sobre Licencias Creative Commons

INVERT FM usa msica de Jamendo bajo varias licencias Creative Commons. Como esta app es gratis y no genera varo, hasta las rolas con licencia "No Comercial" (NC) las pueden usar todos para sus proyectos personales.

 CC-BY - s se puede, hasta pa'l negocio
 CC-BY-SA - s se puede, tambin con fines comerciales
 CC-BY-NC / CC-BY-NC-SA - s se puede, porque INVERT FM no es negocio
 Las rolas ND (No Derivadas) - esas ni aparecen, se las brincamos

Toda la msica se stremea directo de Jamendo. INVERT FM no almacena archivos de audio ni reparte rolas modificadas. Aqu todo es legal, sin maquilar.`,kA=`INVERT FM  Terms & Conditions
(Or, as we like to call it, "The Small Print You'll Ignore But We Have to Provide")

1. General Information
The Application is currently provided free of charge, rather like the NHS or a disappointing weather forecast. However, we reserve the right to introduce advertisements, optional paid features, or other monetisation schemes in the future, should the need for a new kettle arise. All music is sourced from Jamendo via its official API, under their terms, not ours. We're just the middlemen.

2. Source of Content
All audio tracks, album artwork, and metadata are streamed directly from Jamendo's servers. To be perfectly clear, the developer does not host, upload, or distribute any music files. We're merely the butler who fetches the tunes; we don't live in the library.

3. Copyright and Licensing
Each track comes with its own licence, typically a Creative Commons affair. You are solely responsible for ensuring your use of the music doesn't land you in hot water. If you use a track for commercial purposes in violation of its licence, you can expect a sternly worded letter, at the very least. Any commercial use will likely require a separate licence from Jamendo or the artist. Don't be a bounder.

4. No Responsibility for Misuse
The developer assumes no responsibility for how you use or misuse the App or its music. If you choose to download and distribute tracks in a manner that violates copyright law, that's your own lookout. We shan't be held accountable for any ensuing kerfuffle, disaster, or legal pantomime.

5. No Warranties
The App is provided "as is" and "as available." We make no representations or warranties of any kind, express or implied. It might work perfectly. It might not. The Jamendo API could have a wobble. There are no guarantees here, only the quiet, desperate hope that technology will behave for once.

6. Limitation of Liability
In no event shall the developer be liable for any direct, indirect, incidental, or consequential damages. This includes, but is not limited to, loss of data, your device giving up the ghost, or you missing out on profits. Frankly, if you're relying on this app for your profits, your business plan is probably a bit dodgy to begin with.

7. Third-Party Services
The App relies on external services like the Jamendo API and may use others in future (for ads or analytics). We have no control over these third parties and disclaim all responsibility for their operation. If they go down, it's not our gaff that's on fire.

8. Acceptance of Terms
By downloading or using this App, you agree to this Disclaimer. If you do not agree, for heaven's sake, please uninstall it immediately. We won't be offended. Much.

9. Updates to This Disclaimer
This Disclaimer may be updated whenever we fancy a change. The latest version will be in the App or on our website. If you continue to use the App after we've changed the terms, we'll take that as you saying "Carry on."

10. Contact
For any questions, feedback, or legal threats written on heavily perfumed parchment, please contact the developer via the information on the Google Play Store page. We'll get back to you eventually, assuming the Royal Mail is having a good day.

Creative Commons Licensing Notice
INVERT FM uses music from Jamendo under various Creative Commons licenses. Because this app is free and makes no money (a truly British labour of love), even tracks with a "Non-Commercial" (NC) licence may be used by all users for personal, private projects.

CC-BY  Allowed, including commercial use. Crack on.

CC-BY-SA  Allowed, including commercial use. Jolly good.

CC-BY-NC / CC-BY-NC-SA  Allowed, because INVERT FM is as non-commercial as a village fte.

ND-tracks (No-Derivatives)  These are automatically excluded. We don't do remixes here.

All music is streamed directly from Jamendo. INVERT FM does not host audio files and does not distribute modified tracks. It's all rather straightforward, really.`,RA=({text:t,isLoading:e,onClose:n,currentLang:i,onSetLang:a})=>{const r=S2,c=()=>{if(e)return h.jsx("div",{className:"flex justify-center items-center h-40",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-white"})});if(!t)return null;const w=t.split(`

`);return h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:w[0]}),w.slice(1).map((E,N)=>{const[k,...L]=E.split(`
`),R=L.join(`
`);return h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{className:"text-xl font-semibold mb-2",children:k}),h.jsx("p",{className:"text-gray-400 leading-relaxed whitespace-pre-line",children:R})]},N)})]})},d=i.toLowerCase(),p=d==="de-at",f=d==="es-mx",g=d==="en-gb",_=p||f||g,b=(w,E)=>w==="en-GB"?"EN":w.split("-")[1]||E,S=()=>p?AA:f?MA:g?kA:"";return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6",children:[h.jsx("header",{className:"flex items-center mb-8 relative",children:h.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors z-10",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),h.jsx("main",{className:"w-full max-w-4xl mx-auto pt-8",children:h.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg",children:[h.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6 border-b border-gray-700 pb-4",children:Object.keys(r).map(w=>{const E=r[w];return h.jsx("button",{onClick:()=>a(w),className:`flex items-center justify-center font-semibold px-3 py-1 rounded-md text-sm transition-colors ${i===w?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,"aria-label":`Switch to ${E.name}`,children:b(w,E.name)},w)})}),_?h.jsx("div",{className:"whitespace-pre-line text-gray-300 leading-relaxed",children:S()}):h.jsxs(h.Fragment,{children:[c(),h.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg border border-gray-600",children:[h.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Creative Commons Licensing Notice"}),h.jsxs("p",{className:"text-gray-300 leading-relaxed",children:["INVERT FM uses music provided by Jamendo under various Creative Commons licenses. Because this app is free and contains no monetization, Non-Commercial (NC) licensed tracks may legally be used by all users for personal and private projects.",h.jsx("br",{}),h.jsx("br",{})," CC-BY  allowed, including commercial use",h.jsx("br",{})," CC-BY-SA  allowed, including commercial use",h.jsx("br",{})," CC-BY-NC / CC-BY-NC-SA  allowed because INVERT FM is non-commercial",h.jsx("br",{})," ND-tracks (No-Derivatives) are automatically excluded",h.jsx("br",{}),h.jsx("br",{}),"All music is streamed directly from Jamendo. INVERT FM does not host audio files and does not distribute modified tracks."]})]})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-6 text-center",children:"Disclaimer content may be updated without notice."})]})})]})};var St;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(St||(St={}));const IA=(()=>{let t=0;return()=>t++})(),DA=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),PA=new Error("called FFmpeg.terminate()");class LA{#t=null;#s={};#n={};#i=[];#o=[];loaded=!1;#a=()=>{this.#t&&(this.#t.onmessage=({data:{id:e,type:n,data:i}})=>{switch(n){case St.LOAD:this.loaded=!0,this.#s[e](i);break;case St.MOUNT:case St.UNMOUNT:case St.EXEC:case St.FFPROBE:case St.WRITE_FILE:case St.READ_FILE:case St.DELETE_FILE:case St.RENAME:case St.CREATE_DIR:case St.LIST_DIR:case St.DELETE_DIR:this.#s[e](i);break;case St.LOG:this.#i.forEach(a=>a(i));break;case St.PROGRESS:this.#o.forEach(a=>a(i));break;case St.ERROR:this.#n[e](i);break}delete this.#s[e],delete this.#n[e]})};#e=({type:e,data:n},i=[],a)=>this.#t?new Promise((r,c)=>{const d=IA();this.#t&&this.#t.postMessage({id:d,type:e,data:n},i),this.#s[d]=r,this.#n[d]=c,a?.addEventListener("abort",()=>{c(new DOMException(`Message # ${d} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(DA);on(e,n){e==="log"?this.#i.push(n):e==="progress"&&this.#o.push(n)}off(e,n){e==="log"?this.#i=this.#i.filter(i=>i!==n):e==="progress"&&(this.#o=this.#o.filter(i=>i!==n))}load=({classWorkerURL:e,...n}={},{signal:i}={})=>(this.#t||(this.#t=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/invert61/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"}),this.#a()),this.#e({type:St.LOAD,data:n},void 0,i));exec=(e,n=-1,{signal:i}={})=>this.#e({type:St.EXEC,data:{args:e,timeout:n}},void 0,i);ffprobe=(e,n=-1,{signal:i}={})=>this.#e({type:St.FFPROBE,data:{args:e,timeout:n}},void 0,i);terminate=()=>{const e=Object.keys(this.#n);for(const n of e)this.#n[n](PA),delete this.#n[n],delete this.#s[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(e,n,{signal:i}={})=>{const a=[];return n instanceof Uint8Array&&a.push(n.buffer),this.#e({type:St.WRITE_FILE,data:{path:e,data:n}},a,i)};mount=(e,n,i)=>{const a=[];return this.#e({type:St.MOUNT,data:{fsType:e,options:n,mountPoint:i}},a)};unmount=e=>{const n=[];return this.#e({type:St.UNMOUNT,data:{mountPoint:e}},n)};readFile=(e,n="binary",{signal:i}={})=>this.#e({type:St.READ_FILE,data:{path:e,encoding:n}},void 0,i);deleteFile=(e,{signal:n}={})=>this.#e({type:St.DELETE_FILE,data:{path:e}},void 0,n);rename=(e,n,{signal:i}={})=>this.#e({type:St.RENAME,data:{oldPath:e,newPath:n}},void 0,i);createDir=(e,{signal:n}={})=>this.#e({type:St.CREATE_DIR,data:{path:e}},void 0,n);listDir=(e,{signal:n}={})=>this.#e({type:St.LIST_DIR,data:{path:e}},void 0,n);deleteDir=(e,{signal:n}={})=>this.#e({type:St.DELETE_DIR,data:{path:e}},void 0,n)}var _5;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(_5||(_5={}));let Ua=null;async function OA(){return Ua||(Ua=new LA),Ua.loaded||(await Ua.load(),Ua.loaded=!0),Ua}function x5({x:t,color:e,label:n,onPointerDown:i,position:a="bottom"}){const c=n==="OUT"?-4:1;return h.jsxs("div",{className:"absolute -top-1 bottom-[-4px] cursor-ew-resize",style:{left:t-6,width:12,zIndex:20},onPointerDown:i,title:n,children:[h.jsx("div",{className:"absolute top-0 h-full rounded-sm shadow",style:{left:4,width:4,background:e,opacity:.95}}),h.jsx("div",{className:"absolute -top-5 px-1 py-0.5 text-[10px] rounded bg-black/80 text-white",children:n}),h.jsx("div",{className:"absolute w-5 h-5 rounded-full shadow-md ring-2 ring-white/80",style:{left:c,bottom:-4,background:e}})]})}function b5({x:t,color:e,onPointerDown:n,position:i}){const a=i==="top";return h.jsxs("div",{className:"absolute top-0 bottom-0 cursor-ew-resize group",style:{left:t-8,width:16,zIndex:10},onPointerDown:n,title:a?"Effect Start":"Effect End",children:[h.jsx("div",{className:"absolute w-[3px] rounded-sm",style:{left:6,height:16,backgroundColor:e,...a?{top:2}:{bottom:2}}}),h.jsx("div",{className:"absolute w-3 h-3 rounded-full shadow-md",style:{left:5,backgroundColor:e,...a?{top:0}:{bottom:0}}})]})}const zo=(t,e,n)=>Math.max(e,Math.min(n,t));function UA({file:t,duration:e,inStart:n,inEnd:i,effects:a,playhead:r,onTrimChange:c,onEffectChange:d,onPlayheadChange:p,height:f=84,thumbs:g=20,showEffectHandles:_=!1}){const b=V.useRef(null),[S,w]=V.useState([]),[E,N]=V.useState(null),k=V.useMemo(()=>URL.createObjectURL(t),[t]);V.useEffect(()=>()=>{URL.revokeObjectURL(k)},[k]),V.useEffect(()=>{let M=!1;return(async()=>{try{const F=document.createElement("video");F.src=k,F.muted=!0,F.playsInline=!0,await new Promise((q,Z)=>{F.onloadedmetadata=()=>q(),F.onerror=()=>Z(new Error("Failed to load video metadata"))});const B=Math.max(.001,F.duration||e||1),H=Math.round(f*16/9),z=f,j=document.createElement("canvas");j.width=H,j.height=z;const $=j.getContext("2d");if(!$)return;const oe=[];for(let q=0;q<g;q++){const Z=B*(q+.5)/g;F.currentTime=Z,await new Promise(Q=>{F.onseeked=()=>Q()}),$.drawImage(F,0,0,H,z),oe.push(j.toDataURL("image/jpeg",.7))}M||w(oe)}catch(F){console.error("Failed generating thumbnails:",F)}})(),()=>{M=!0}},[k,e,f,g]);const L=M=>{if(!b.current)return 0;const F=b.current.getBoundingClientRect(),B=Math.max(1e-4,e||1e-4);return zo(M,0,B)/B*F.width},R=M=>{if(!b.current)return 0;const F=b.current.getBoundingClientRect(),B=Math.max(1e-4,e||1e-4);return zo(M,0,F.width)/F.width*B};function O(M,F){M.preventDefault(),M.stopPropagation(),M.currentTarget.setPointerCapture?.(M.pointerId),N(F)}function I(M){if(!E||!b.current)return;const F=b.current.getBoundingClientRect(),B=zo(M.clientX-F.left,0,F.width),H=R(B);if(E==="playhead"){p(H);return}if(E==="inStart"){const z=zo(H,0,i-.05);c({inStart:z,inEnd:i}),r<z&&p(z);return}if(E==="inEnd"){const z=zo(H,n+.05,e);c({inStart:n,inEnd:z}),r>z&&p(z);return}if(typeof E=="string"&&E.startsWith("effectStart-")){const z=parseInt(E.split("-")[1],10),j=[...a].sort((Q,re)=>Q.start-re.start),$=j.findIndex(Q=>Q.id===z);if($===-1)return;const oe=$>0?j[$-1].end+.01:n,q=zo(H,oe,j[$].end-.01),Z=a.map(Q=>Q.id===z?{...Q,start:q}:Q);d(Z);return}if(typeof E=="string"&&E.startsWith("effectEnd-")){const z=parseInt(E.split("-")[1],10),j=[...a].sort((Q,re)=>Q.start-re.start),$=j.findIndex(Q=>Q.id===z);if($===-1)return;const oe=$<j.length-1?j[$+1].start-.01:i,q=zo(H,j[$].start+.01,oe),Z=a.map(Q=>Q.id===z?{...Q,end:q}:Q);d(Z);return}}function G(M){M.currentTarget.releasePointerCapture?.(M.pointerId),N(null)}function P(M){if(!b.current)return;const F=b.current.getBoundingClientRect(),B=M.clientX-F.left,H=R(B);p(H),N("playhead"),M.currentTarget.setPointerCapture?.(M.pointerId)}return h.jsxs("div",{className:"space-y-2 select-none",children:[h.jsxs("div",{ref:b,className:"relative w-full rounded-lg overflow-hidden touch-none",style:{height:f},onPointerDown:P,onPointerMove:I,onPointerUp:G,children:[h.jsx("div",{className:"absolute inset-0 flex",children:S.length>0?S.map((M,F)=>h.jsx("img",{src:M,alt:"",className:"h-full object-cover flex-1"},F)):h.jsx("div",{className:"w-full h-full animate-pulse bg-neutral-700"})}),h.jsx("div",{className:"absolute top-0 bottom-0 bg-black/60",style:{left:0,width:L(n)}}),h.jsx("div",{className:"absolute top-0 bottom-0 bg-black/60",style:{left:L(i),right:0}}),_&&a.map(M=>h.jsx("div",{className:"absolute top-0 bottom-0 pointer-events-none",style:{left:L(M.start),width:L(M.end)-L(M.start),backgroundColor:`${M.color}40`}},M.id)),h.jsx(x5,{x:L(n),color:"#22c55e",label:"IN",position:"bottom",onPointerDown:M=>O(M,"inStart")}),h.jsx(x5,{x:L(i),color:"#ef4444",label:"OUT",position:"top",onPointerDown:M=>O(M,"inEnd")}),_&&a.map(M=>h.jsxs(dl.Fragment,{children:[h.jsx(b5,{x:L(M.start),color:M.color,onPointerDown:F=>O(F,`effectStart-${M.id}`),position:"top"}),h.jsx(b5,{x:L(M.end),color:M.color,onPointerDown:F=>O(F,`effectEnd-${M.id}`),position:"bottom"})]},M.id)),h.jsxs("div",{className:"absolute top-0 bottom-0 cursor-ew-resize group",style:{left:L(r)-10,width:20,zIndex:21},onPointerDown:M=>O(M,"playhead"),children:[h.jsx("div",{className:"absolute w-5 h-5 rounded-full bg-blue-400 left-1/2 -translate-x-1/2 -top-[10px] group-hover:scale-110 transition-transform ring-2 ring-white/75 shadow-lg"}),h.jsx("div",{className:"absolute top-0 bottom-0 w-1 left-1/2 -translate-x-1/2 bg-blue-400"})]}),h.jsxs("div",{className:"absolute -top-6 px-1 py-0.5 text-[10px] rounded bg-black/80 text-white pointer-events-none",style:{left:L(r)-12},children:[r.toFixed(2),"s"]})]}),h.jsxs("div",{className:"text-xs text-neutral-300 flex gap-4 flex-wrap",children:[h.jsxs("span",{children:["IN ",n.toFixed(2),"s"]}),h.jsxs("span",{children:["OUT ",i.toFixed(2),"s"]}),_&&a.map((M,F)=>h.jsxs("span",{children:["FX-",F+1," ",M.start.toFixed(2),"",M.end.toFixed(2),"s"]},M.id))]})]})}function C5({className:t="w-6 h-6",style:e}){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",className:t,style:e,children:[h.jsx("path",{d:"M3.5 7.5h9a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-9a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2z"}),h.jsx("path",{d:"M14.5 10l6-3v10l-6-3v-4z"})]})}function qA({className:t="w-6 h-6",style:e}){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,style:e,children:[h.jsx("path",{d:"M12 2C6.486 2 2 6.486 2 12h2c0-4.411 3.589-8 8-8s8 3.589 8 8h2c0-5.514-4.486-10-10-10zM5.5 11a.5.5 0 0 1 0-1h-2a.5.5 0 0 1 0 1h2zm13 0a.5.5 0 0 1 0-1h2a.5.5 0 0 1 0 1h-2zm-10.7-.7a.5.5 0 1 1 .7.7L7 9.5a.5.5 0 0 1-.7-.7zm9.1 0a.5.5 0 0 1 .7.7L16 9.5a.5.5 0 1 1-.7-.7z"}),h.jsx("path",{d:"M12 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm3.54-5.54L10.95 14a.5.5 0 0 1-.7-.7l4.59-4.59a.5.5 0 1 1 .7.7z"})]})}const VA=({audioBuffer:t,videoDuration:e,trimStart:n,trimEnd:i,offset:a,onOffsetChange:r,onDragEnd:c})=>{const d=V.useRef(null),p=V.useRef(null),[f,g]=V.useState(0);V.useEffect(()=>{const I=()=>{p.current&&g(p.current.clientWidth)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]);const _=e>0?f/e:0,b=t&&e>0?t.duration/e*f:0,S=_*a;V.useEffect(()=>{if(!d.current||!t||!f||!b)return;const I=d.current,G=window.devicePixelRatio||1,P=Math.max(1,Math.round(b)),M=64;I.width=P*G,I.height=M*G,I.style.width=`${P}px`,I.style.height=`${M}px`;const F=I.getContext("2d");if(!F)return;F.setTransform(G,0,0,G,0,0);const B=P,H=M;F.clearRect(0,0,B,H);const z=t.getChannelData(0),j=Math.max(1,Math.floor(z.length/B));F.fillStyle="#ffffff",F.fillRect(0,0,B,H),F.strokeStyle="#4b5563",F.lineWidth=1,F.beginPath();for(let $=0;$<B;$++){const oe=$*j,q=Math.min(oe+j,z.length);let Z=1,Q=-1;for(let U=oe;U<q;U++){const W=z[U];W<Z&&(Z=W),W>Q&&(Q=W)}const re=(1-Z)*.5*H,fe=(1-Q)*.5*H;F.moveTo($,re),F.lineTo($,fe)}F.stroke()},[t,f,b]);const w=V.useCallback(I=>{if(!t||e<=0)return 0;const P=-t.duration,M=e;return Math.min(Math.max(I,P),M)},[t,e]),E=V.useRef(!1),N=V.useRef(0),k=V.useRef(0),L=I=>{!f||!t||(E.current=!0,N.current=I.clientX,k.current=a,I.currentTarget.setPointerCapture(I.pointerId))},R=I=>{if(!E.current||!f||!t)return;const G=I.clientX-N.current,P=_>0?G/_:0,M=w(k.current+P);r(M)},O=I=>{if(E.current){E.current=!1;try{I.currentTarget.releasePointerCapture(I.pointerId)}catch{}c()}};return h.jsxs("div",{className:"w-full",children:[h.jsxs("div",{ref:p,className:"relative h-16 bg-white rounded-lg overflow-hidden border border-neutral-800",children:[e>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute top-0 bottom-0 left-0 bg-black/10 pointer-events-none",style:{width:`${n/(e||1)*100}%`}}),h.jsx("div",{className:"absolute top-0 bottom-0 right-0 bg-black/10 pointer-events-none",style:{width:`${(e-i)/(e||1)*100}%`}})]}),h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:h.jsx("div",{className:"absolute left-0 right-0 top-1/2 h-[1px] bg-neutral-300"})}),t&&b>0&&h.jsx("div",{className:"absolute top-0 h-full cursor-grab active:cursor-grabbing z-10",style:{width:`${b}px`,transform:`translateX(${S}px)`,touchAction:"none"},onPointerDown:L,onPointerMove:R,onPointerUp:O,onPointerCancel:O,onPointerLeave:O,children:h.jsx("canvas",{ref:d})})]}),h.jsxs("div",{className:"flex justify-between text-[10px] text-neutral-500 mt-1",children:[h.jsxs("span",{children:["Music start: ",a.toFixed(2),"s"]}),h.jsxs("span",{children:["Length: ",t?.duration.toFixed(2)??"0.00","s"]})]})]})};function FA(){const t=globalThis,e=typeof t.VideoEncoder=="function",n=typeof t.VideoDecoder=="function",i=typeof t.AudioData=="function",a=typeof t.EncodedVideoChunk=="function";return e&&n&&i&&a}const GA=4,BA=t=>new Promise((e,n)=>{const i=document.createElement("video");i.preload="metadata";const a=URL.createObjectURL(t);i.src=a,i.onloadedmetadata=()=>{i.currentTime=Math.min(1,i.duration/2)},i.onseeked=()=>{const r=document.createElement("canvas"),c=i.videoWidth/i.videoHeight;r.width=160,r.height=160/(c||1.77);const d=r.getContext("2d");if(!d)return n(new Error("Canvas context not available"));d.drawImage(i,0,0,r.width,r.height);const p=r.toDataURL("image/jpeg",.8);URL.revokeObjectURL(a),e(p)},i.onerror=()=>{URL.revokeObjectURL(a),n(new Error("Failed to load video for thumbnail generation."))}}),jA=async(t,e)=>{const i=await(await fetch(t)).blob();return new File([i],e,{type:i.type})},zA=t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=a=>n(a),i.readAsDataURL(t)});async function HA(t){const{file:e,inStart:n,inEnd:i,duration:a,speedEffects:r,audioOffset:c,musicVolume:d,videoVolume:p,previewAudioBuffer:f,onProgress:g,onLog:_}=t,b=we=>{_?_(we):console.log("[WebCodecs]",we)};if(!e)throw new Error("No input file for WebCodecs export");const S=Math.max(0,Math.min(n,a||0)),w=Math.max(S,Math.min(i||a||0,a||0));if(!(w>S))throw new Error("Invalid trim range for WebCodecs export");const E=Array.isArray(r)?[...r].sort((we,Ve)=>we.start-Ve.start):[],N=[];let k=S;for(const we of E){const Ve=Math.max(S,we.start),Re=Math.min(w,we.end);if(Re<=Ve)continue;k<Ve&&N.push({start:k,end:Ve,factor:1});const ae=typeof we.factor=="number"&&we.factor>0?we.factor:1;N.push({start:Ve,end:Re,factor:ae}),k=Re}k<w&&N.push({start:k,end:w,factor:1}),N.length===0&&N.push({start:S,end:w,factor:1});const L=N.reduce((we,Ve)=>{const Re=Ve.end-Ve.start,ae=Ve.factor||1;return!isFinite(Re)||Re<=0?we:we+Re/ae},0);if(!Number.isFinite(L)||L<=0)throw new Error("Invalid estimated export duration");b(`Starting fast 1080p WebCodecs export: ${S.toFixed(2)}s  ${w.toFixed(2)}s (approx ${L.toFixed(2)}s runtime)`),g&&g(0,"Preparing hardware encoder");const R=URL.createObjectURL(e),O=document.createElement("video");O.src=R,O.crossOrigin="anonymous",O.muted=!1,O.volume=1,O.playsInline=!0,O.style.position="fixed",O.style.left="-9999px",O.style.top="-9999px",O.style.width="1px",O.style.height="1px",document.body.appendChild(O),await new Promise((we,Ve)=>{const Re=()=>{O.removeEventListener("loadedmetadata",Re),we()},ae=()=>{O.removeEventListener("loadedmetadata",Re),Ve(new Error("Failed to load video metadata for export"))};O.addEventListener("loadedmetadata",Re),O.addEventListener("error",ae,{once:!0})});const I=O.videoWidth||1920,G=O.videoHeight||1080;let P=G,M=I;G>1080&&(P=1080,M=Math.round(I/G*P)),(!M||!P||M<=0||P<=0)&&(M=1920,P=1080);const F=document.createElement("canvas");F.width=M,F.height=P;const B=F.getContext("2d");if(!B)throw document.body.removeChild(O),URL.revokeObjectURL(R),new Error("Could not get 2D canvas context for export");const H=new(window.AudioContext||window.webkitAudioContext),z=H.createMediaStreamDestination(),j=H.createMediaElementSource(O),$=H.createGain();$.gain.value=typeof p=="number"&&p>=0&&p<=1?p:1,j.connect($).connect(z);let oe=null;if(f&&f.duration>0&&d>0){const we=H.createGain();we.gain.value=typeof d=="number"&&d>=0&&d<=1?d:.5,oe=H.createBufferSource(),oe.buffer=f,oe.connect(we).connect(z);const Ve=S-c,Re=H.currentTime+.1;if(Ve>=0&&Ve<f.duration)oe.start(Re,Ve);else if(Ve<0){const ae=-Ve;oe.start(Re+ae,0)}else oe=null}const q=z.stream,Z=F.captureStream?.(30)||F.captureStream?.()||F.mozCaptureStream?.(30)||F.mozCaptureStream?.();if(!Z)throw document.body.removeChild(O),URL.revokeObjectURL(R),H.close().catch(()=>{}),new Error("canvas.captureStream() not supported in this browser");const Q=new MediaStream;if(Z.getVideoTracks().forEach(we=>Q.addTrack(we)),q.getAudioTracks().forEach(we=>Q.addTrack(we)),Q.getVideoTracks().length===0)throw document.body.removeChild(O),URL.revokeObjectURL(R),H.close().catch(()=>{}),new Error("No video track available for export");const re=["video/webm;codecs=vp9,opus","video/webm;codecs=vp8,opus","video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"];let fe=null;if(typeof MediaRecorder<"u"){for(const we of re)if(MediaRecorder.isTypeSupported(we)){fe=we;break}}if(!fe)throw document.body.removeChild(O),URL.revokeObjectURL(R),H.close().catch(()=>{}),new Error("No supported MediaRecorder mime type found for export");b(`Using MediaRecorder mime type: ${fe}`),g&&g(.01,"Initializing recorder");const U=new MediaRecorder(Q,{mimeType:fe,videoBitsPerSecond:6e6}),W=[];let de=!1;U.ondataavailable=we=>{we.data&&we.data.size>0&&W.push(we.data)};const te=new Promise((we,Ve)=>{U.onerror=Re=>{de||(de=!0,Ve(Re.error||new Error("MediaRecorder error during export")))},U.onstop=()=>{if(!de){de=!0;try{const Re=new Blob(W,{type:fe});we(Re)}catch(Re){Ve(Re)}}}});O.currentTime=S,await new Promise((we,Ve)=>{const Re=()=>{O.removeEventListener("seeked",Re),we()},ae=()=>{O.removeEventListener("seeked",Re),Ve(new Error("Failed to seek video to start position"))};O.addEventListener("seeked",Re),O.addEventListener("error",ae,{once:!0})});const A=()=>{const we=O.currentTime;let Ve=1;for(const Re of N)if(we>=Re.start&&we<Re.end){Ve=Re.factor||1;break}(!isFinite(Ve)||Ve<=0)&&(Ve=1),O.playbackRate!==Ve&&(O.playbackRate=Ve),oe&&oe.playbackRate&&oe.playbackRate.value!==Ve&&(oe.playbackRate.value=Ve)};A();const C=()=>{if(!de){try{B.drawImage(O,0,0,M,P)}catch{}requestAnimationFrame(C)}};requestAnimationFrame(C);const he=performance.now();if(g){const we=()=>{if(de)return;const Ve=(performance.now()-he)/1e3,Re=L>0?Math.min(.99,Math.max(0,Ve/L)):0;g(Re,"Encoding with hardware video encoder"),requestAnimationFrame(we)};requestAnimationFrame(we)}const ue=()=>{if(!de&&(A(),O.currentTime>=w-.01))try{U.stop(),O.pause()}catch{}};O.addEventListener("timeupdate",ue);const Le=(L+2)*1e3,Ee=window.setTimeout(()=>{if(!de){b("Hard timeout reached, stopping recorder.");try{U.stop(),O.pause()}catch{}}},Le);b("Starting MediaRecorder and video playback"),U.start(),await O.play();const Ge=await te;return window.clearTimeout(Ee),O.removeEventListener("timeupdate",ue),document.body.removeChild(O),URL.revokeObjectURL(R),H.close().catch(()=>{}),g&&g(1,"Export complete"),b("WebCodecs export finished."),Ge}const YA=({value:t,onChange:e})=>{const r=V.useMemo(()=>t>=1?(t-1)/3:(t-1)/.75,[t]),c=p=>{const f=parseFloat(p.target.value);let g;f>=0?g=1+f*3:g=1+f*(1-.25),e(Math.round(g*100)/100)},d=V.useMemo(()=>{const f=Math.abs(r*50),g=r>0?50:50-f,_=f,b=r>0?"#c52323":"#3b82f6";return{left:`${g}%`,width:`${_}%`,backgroundColor:b}},[r]);return h.jsxs("div",{className:"relative flex items-center h-6 flex-grow",children:[h.jsx("div",{className:"absolute left-0 right-0 h-1 bg-neutral-700 rounded-full top-1/2 -translate-y-1/2",children:h.jsx("div",{className:"absolute h-full rounded-full",style:d})}),h.jsx("input",{type:"range",min:"-1",max:"1",step:"0.01",value:r,onChange:c,className:"w-full h-full relative z-10 speed-slider","aria-label":"Speed factor slider"}),h.jsx("style",{children:`
        .speed-slider, .speed-slider::-webkit-slider-thumb, .speed-slider::-moz-range-thumb {
          -webkit-appearance: none; appearance: none; background: transparent;
        }
        .speed-slider::-webkit-slider-runnable-track, .speed-slider::-moz-range-track {
          background: transparent;
        }
        .speed-slider::-webkit-slider-thumb {
            width: 16px; height: 16px; background: white; border-radius: 99px;
            cursor: pointer; margin-top: -5px; border: 2px solid #171717;
        }
        .speed-slider::-moz-range-thumb {
            width: 16px; height: 16px; background: white; border-radius: 99px;
            cursor: pointer; border: 2px solid #171717;
        }
      `})]})},WA=()=>h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#ef4444",className:"group-hover:fill-red-400 transition-colors"}),h.jsx("path",{d:"M15 9L9 15M9 9L15 15",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]});function JA({onClose:t,recentClips:e,onSetRecentClips:n,videoVolume:i,onVideoVolumeChange:a}){const r=V.useRef(null),c=V.useRef(null),d=V.useRef(null),[p,f]=V.useState(null),[g,_]=V.useState(0),[b,S]=V.useState(null),[w,E]=V.useState(0),[N,k]=V.useState(0),[L,R]=V.useState([]),[O,I]=V.useState(!1),[G,P]=V.useState(0),[M,F]=V.useState(!1),[B,H]=V.useState(null),[z,j]=V.useState(""),[$,oe]=V.useState(0),[q,Z]=V.useState(null),[Q,re]=V.useState(null),[fe,U]=V.useState(0),[W,de]=V.useState(.5),te=V.useRef(null),A=V.useRef(null),C=V.useRef(null),he=V.useRef(null),[ue,Le]=V.useState(!1),[Ee,Ge]=V.useState(!1),we=V.useRef(!1),[Ve,Re]=V.useState(!1),ae=V.useRef(null),_e=V.useRef([]),Be=V.useRef(null),Fe=V.useRef(null),Oe=V.useMemo(()=>p?URL.createObjectURL(p):"",[p]);V.useEffect(()=>()=>{Oe&&URL.revokeObjectURL(Oe)},[Oe]);const X=V.useCallback(()=>{if(H(null),j(""),oe(0),I(!1),R([]),P(0),E(0),k(0),Ge(!1),A.current){try{A.current.stop()}catch{}A.current=null}we.current=!1,d.current&&(d.current.pause(),d.current.currentTime=0),r.current&&(r.current.value="")},[]),K=async()=>{try{const ve=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!0});Be.current=ve,Re(!0);const Ie={mimeType:"video/webm; codecs=vp9"},Pe=new MediaRecorder(ve,Ie);ae.current=Pe,_e.current=[],Pe.addEventListener("dataavailable",Je=>{Je.data.size>0&&_e.current.push(Je.data)}),Pe.addEventListener("stop",()=>{const Je=new Blob(_e.current,{type:"video/webm"}),mt=`invert-recording-${Date.now()}.webm`,Ze=new File([Je],mt,{type:"video/webm"});ve.getTracks().forEach(It=>It.stop()),Be.current=null,Re(!1),X(),f(Ze)}),Pe.start()}catch(ve){console.error("Error accessing camera:",ve),alert("Could not access camera. Please check permissions and try again."),Re(!1)}},ye=()=>{ae.current&&ae.current.state==="recording"&&ae.current.stop()};V.useEffect(()=>{Ve&&Fe.current&&Be.current&&(Fe.current.srcObject=Be.current)},[Ve]);const Se=V.useCallback(async()=>{if(ue)return!0;try{const ve=new(window.AudioContext||window.webkitAudioContext);te.current=ve,ve.state==="suspended"&&await ve.resume();const Ie=ve.createGain();C.current=Ie;const Pe=ve.createGain();return he.current=Pe,Ie.connect(Pe),Pe.connect(ve.destination),Le(!0),!0}catch(ve){return console.error("Failed to setup audio engine:",ve),alert("Could not initialize audio preview for music. Your browser might not be supported."),!1}},[ue]);V.useEffect(()=>{C.current&&(C.current.gain.value=W),d.current&&Math.abs(d.current.volume-i)>.01&&(d.current.volume=i)},[i,W,ue]),V.useEffect(()=>{const ve=d.current;if(!ve)return;const Ie=()=>{Math.abs(ve.volume-i)>.01&&a(ve.volume)};return ve.addEventListener("volumechange",Ie),()=>{ve.removeEventListener("volumechange",Ie)}},[Oe,a,i]),V.useEffect(()=>{const ve=d.current;if(!ve||!Oe)return;const Ie=()=>{const Pe=ve.duration||0;_(Pe),E(0),k(Pe),P(0);const Je=ve.videoWidth||0,mt=ve.videoHeight||0;Je>0&&mt>0?S(Je/mt):S(null)};return ve.addEventListener("loadedmetadata",Ie,{once:!0}),()=>{ve.removeEventListener("loadedmetadata",Ie)}},[Oe]);function xe(ve){const Ie=ve.target,Pe=Ie.files?.[0];Ie.value="",Pe&&(X(),f(Pe))}async function Me(ve){const Ie=ve.target,Pe=Ie.files?.[0];if(Ie.value="",!Pe||!d.current||!ue&&!await Se())return;Z(Pe),U(0);const Je=new FileReader;Je.onload=async mt=>{if(te.current)try{const Ze=await te.current.decodeAudioData(mt.target.result);re(Ze),Ee&&await Ue()}catch(Ze){console.error("Error decoding audio file:",Ze),alert("Could not process this audio file. Please try a different one."),Z(null),re(null)}},Je.readAsArrayBuffer(Pe)}const ut=!p||M||g<=0,tt=V.useCallback(()=>{if(A.current){A.current.onended=null;try{A.current.stop()}catch{}A.current=null}we.current=!1},[]),Ue=V.useCallback(async()=>{if(tt(),!Q||!te.current||!d.current||!C.current){we.current=!1;return}te.current.state==="suspended"&&await te.current.resume();const ve=te.current.createBufferSource();ve.buffer=Q,ve.connect(C.current);const Pe=d.current.currentTime-fe;let Je=!1;if(Pe>=0&&Pe<Q.duration)ve.start(0,Pe),A.current=ve,Je=!0;else if(Pe<0){const mt=-Pe;ve.start(te.current.currentTime+mt,0),A.current=ve,Je=!0}we.current=Je,Je&&(ve.onended=()=>{A.current===ve&&(A.current=null,we.current=!1)})},[Q,fe,tt]),Ht=V.useCallback(async()=>{te.current&&te.current.state==="suspended"&&await te.current.resume(),Ee&&ue&&await Ue()},[Ee,Ue,ue]),Lt=V.useCallback(async()=>{const ve=d.current;if(ve)if(ve.paused||ve.ended){let Ie=ue;if(!Ie&&q){if(!await Se())return;Ie=!0}Ie&&te.current&&te.current.state==="suspended"&&await te.current.resume();try{await ve.play()}catch(Pe){console.error("Failed to start video playback:",Pe);return}Ge(!0),Ie&&await Ue()}else ve.pause(),Ge(!1),ue&&tt()},[ue,q,Ue,Se,tt]),kt=V.useCallback(async()=>{if(te.current&&te.current.state==="suspended"&&await te.current.resume(),Ee&&ue){const ve=d.current;if(ve&&ve.paused)try{await ve.play()}catch(Ie){console.error("Failed to resume video after audio drag:",Ie)}await Ue()}},[Ee,Ue,ue]);V.useEffect(()=>()=>{te.current?.close().catch(console.error)},[]);async function Rt(){if(!p)return;d.current&&(d.current.pause(),d.current.currentTime=G),Ge(!1),tt();const ve=FA();F(!0),H(null),oe(0),j("");let Ie=null,Pe=!1;try{if(ve){j("Using fast WebCodecs export (downscaled to max 1080p)...");try{Ie=await HA({file:p,inStart:w,inEnd:N,duration:g,speedEffects:L,audioFile:q,audioOffset:fe,musicVolume:W,videoVolume:i,previewAudioBuffer:Q,onProgress:(It,an)=>{oe(It),an&&j(an)},onLog:It=>{j(an=>`${an}
${It}`.slice(-1e3))}}),Pe=!0}catch(Ze){console.warn("[INVERT CLIPS] Fast WebCodecs export failed, falling back to FFmpeg.",Ze),j("Fast WebCodecs export failed, falling back to classic export (slower)"),Pe=!1,Ie=null}}if(!Ie){j(je=>(je?je+`
`:"")+"Loading FFmpeg (slow path)");const Ze=await OA(),It="output.mp4",an=Math.max(0,w),Vn=Math.min(g,N);Ze.on("progress",({progress:je})=>{oe(Math.max(0,Math.min(1,typeof je=="number"?je:0)))}),Ze.on("log",({message:je})=>{j($e=>`${$e}
${je}`.slice(-1e3))}),j(je=>(je?je+`
`:"")+"Writing input file(s) to memory");const Oi=await p.arrayBuffer();await Ze.writeFile("input.mp4",new Uint8Array(Oi));const Fs=!!q;if(q){const je=await q.arrayBuffer();await Ze.writeFile("input.m4a",new Uint8Array(je))}j(je=>(je?je+`
`:"")+"Building FFmpeg command (segments + speed ramps)");const Ui=Array.isArray(L)?[...L].sort((je,$e)=>je.start-$e.start):[],En=[];let Gs=an;for(const je of Ui){const $e=Math.max(an,je.start),st=Math.min(Vn,je.end);if(st<=$e)continue;Gs<$e&&En.push({start:Gs,end:$e,factor:1});const hn=typeof je.factor=="number"&&je.factor>0?je.factor:1;En.push({start:$e,end:st,factor:hn}),Gs=st}Gs<Vn&&En.push({start:Gs,end:Vn,factor:1}),En.length===0&&En.push({start:an,end:Vn,factor:1});const ea=je=>{let $e=je||1;const st=[];for(;$e>2+.001;)st.push("atempo=2.0"),$e/=2;for(;$e<.5-.001;)st.push("atempo=0.5"),$e/=.5;const hn=Math.min(2,Math.max(.5,$e));return Math.abs(hn-1)>.001&&st.push(`atempo=${hn.toFixed(3)}`),st.join(",")},Gt=[],ai=[],Bs=[];En.forEach((je,$e)=>{const st=`v${$e}`,hn=`a${$e}`;ai.push(`[${st}]`),Bs.push(`[${hn}]`);const qi=je.factor||1;Gt.push(`[0:v]trim=start=${je.start}:end=${je.end},setpts=PTS-STARTPTS,setpts=PTS/${qi.toFixed(6)}[${st}]`);const Cs=ea(je.factor||1);let Eo=`atrim=start=${je.start}:end=${je.end},asetpts=PTS-STARTPTS`;Cs&&(Eo+=`,${Cs}`),Gt.push(`[0:a]${Eo}[${hn}]`)}),Gt.push(`${ai.join("")}concat=n=${En.length}:v=1:a=0[vcat]`),Gt.push(`${Bs.join("")}concat=n=${En.length}:v=0:a=1[acat]`),Fs?Gt.push("[acat][1:a]amix=inputs=2:duration=first:dropout_transition=0[aout]"):Gt.push("[acat]anull[aout]");const js=Gt.join(";"),us=[];us.push("-i","input.mp4"),Fs&&us.push("-i","input.m4a"),us.push("-filter_complex",js,"-map","[vcat]","-map","[aout]","-c:v","libx264","-c:a","aac","-preset","veryfast","-movflags","faststart",It),j(je=>(je?je+`
`:"")+`Executing: ffmpeg ${us.join(" ")}`),await Ze.exec(us),j(je=>(je?je+`
`:"")+"Done! Reading file from memory...");const zs=await Ze.readFile(It);Ie=new Blob([zs instanceof Uint8Array?zs:new Uint8Array(zs)],{type:"video/mp4"}),Pe=!1}if(!Ie)throw new Error("Export failed (no result blob).");const mt=URL.createObjectURL(Ie);H(mt);try{const Ze=document.createElement("a");Ze.href=mt,Ze.download="invert-edit.webm",Pe||(Ze.download="invert-edit.mp4"),document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze)}catch(Ze){console.warn("Automatic download failed, user can tap the Download button instead.",Ze)}oe(1),j(Pe?"Export complete (fast WebCodecs, 1080p).":"Export complete (FFmpeg fallback, slower).");try{const[Ze,It]=await Promise.all([BA(p),zA(p)]),an={id:Date.now().toString(),name:p.name,dataUrl:It,thumbnailUrl:Ze};n(Vn=>[an,...Vn.filter(Oi=>Oi.id!==an.id)].slice(0,GA))}catch(Ze){console.error("Could not save to recent clips:",Ze)}}catch(Je){console.error(Je),j(`Error: ${Je?.message||"Export failed."}`),alert(Je?.message||"Export failed.")}finally{F(!1),d.current&&d.current.pause(),Ge(!1)}}const Yt=async ve=>{try{const Ie=await jA(ve.dataUrl,ve.name);X(),f(Ie)}catch(Ie){console.error("Failed to load recent clip:",Ie),alert("Could not load the selected clip.")}},Ot=()=>{if(L.length>=2||g<=0)return;const ve="#f97316",Ie=[...L].sort((Ze,It)=>Ze.start-It.start);let Pe=w,Je=w+g*.2;if(Ie.length>0){const Ze=Ie[Ie.length-1];Pe=Math.min(N-.2,Ze.end+.1),Je=Math.min(N,Pe+g*.2)}if(Pe>=Je&&Ie.length>0){const Ze=Ie[0];Je=Math.max(w,Ze.start-.1),Pe=Math.max(w,Je-g*.2)}if(Pe>=Je)return;const mt={id:Date.now(),start:Pe,end:Je,factor:1,color:ve};R(Ze=>[...Ze,mt].sort((It,an)=>It.start-an.start))},Tn=ve=>{R(Ie=>{const Pe=Ie.filter(Je=>Je.id!==ve);return Pe.length===0&&I(!1),Pe})},Qt=h.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col items-center justify-center",children:[h.jsx("video",{ref:Fe,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute bottom-10",children:h.jsxs("button",{onClick:ye,className:"w-20 h-20 bg-red-600 rounded-full border-4 border-white flex items-center justify-center active:scale-95 transition-transform","aria-label":"Stop recording",children:[h.jsx("div",{className:"w-8 h-8 bg-white rounded-md"})," "]})})]});return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6",children:[Ve&&Qt,h.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[h.jsx("header",{className:"w-full my-8 relative",children:h.jsxs("div",{className:"w-full max-w-4xl mx-auto relative flex items-center justify-center",children:[h.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors z-10 p-2 -ml-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("div",{className:"logo-block text-left leading-none",children:h.jsx(id,{variant:"tv",className:"text-[70px] md:text-[80px]"})})]})}),p?h.jsx(h.Fragment,{children:h.jsxs("div",{className:`max-w-3xl mx-auto mb-0 ${b!==null&&b<1?"px-5":""}`,children:[h.jsx("video",{ref:d,src:Oe,className:`w-full rounded-xl bg-black ${b!==null&&b<1?"aspect-[9/16]":"aspect-video"}`,onSeeked:Ht,onEnded:()=>{Ge(!1),ue&&tt()},onTimeUpdate:ve=>{const Ie=ve.target,Pe=Ie.currentTime;P(Pe);let Je=1;for(const mt of L)if(Pe>=mt.start&&Pe<mt.end){Je=mt.factor||1;break}(!isFinite(Je)||Je<=0)&&(Je=1),Ie.playbackRate!==Je&&(Ie.playbackRate=Je),!Ie.paused&&Q&&!M&&Pe>=fe&&Pe<fe+Q.duration&&!we.current&&Ue()},onClick:Lt}),h.jsx("div",{className:"flex justify-center mt-2",children:h.jsx("button",{type:"button",onClick:Lt,className:"flex items-center justify-center w-10 h-10 rounded-full bg.white text-black shadow-md bg-white hover:bg-gray-200 active:scale-[0.96] transition","aria-label":Ee?"Pause video":"Play video",children:Ee?h.jsx(gl,{className:"w-5 h-5"}):h.jsx(yl,{className:"w-5 h-5"})})}),h.jsx("div",{className:"mt-2 space-y-2",children:g>0&&h.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4",children:[q&&Q&&h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{className:"flex items.end gap-4 mb-3",children:[h.jsxs("div",{className:"flex-grow grid grid-cols-2 gap-x-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs text-neutral-400",children:"Video Audio"}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:ve=>a(parseFloat(ve.target.value)),className:"w-full h-1 bg-neutral-600 rounded-full appearance-none accent-white/70"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs text-neutral-400",children:"Music Volume"}),h.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:W,onChange:ve=>de(parseFloat(ve.target.value)),className:"w-full h-1 bg-neutral-600 rounded-full appearance-none accent-white/70"})]})]}),h.jsxs("button",{onClick:()=>{Z(null),re(null),tt(),c.current&&(c.current.value="")},className:"flex items-center gap-1 text-xs text-red-400 hover:text-red-300 shrink-0",children:[h.jsx(ul,{})," Remove"]})]}),h.jsx(VA,{audioBuffer:Q,videoDuration:g,trimStart:w,trimEnd:N,offset:fe,onOffsetChange:U,onDragEnd:kt}),h.jsx("style",{children:`
                          input[type="range"].accent-white\\/70::-webkit-slider-thumb {
                              -webkit-appearance: none; appearance: none;
                              width: 8px; height: 16px; background: #d4d4d4;
                              border-radius: 2px; cursor: pointer; margin-top: -7px;
                          }
                          input[type="range"].accent-white\\/70::-moz-range-thumb {
                              width: 8px; height: 16px; background: #d4d4d4;
                              border: none; border-radius: 2px; cursor: pointer;
                          }
                        `})]}),h.jsx(UA,{file:p,duration:g,inStart:w,inEnd:N,effects:L,playhead:G,onTrimChange:({inStart:ve,inEnd:Ie})=>{E(ve),k(Ie)},onEffectChange:R,onPlayheadChange:ve=>{P(ve),d.current&&(d.current.currentTime=ve)},height:84,thumbs:12,showEffectHandles:O}),h.jsx("div",{className:"flex justify-end mt-1 text-xs text-neutral-300",children:h.jsxs("span",{children:["Length: ",(N-w).toFixed(2),"s"]})})]})}),O&&h.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 mt-2",children:[L.map((ve,Ie)=>h.jsxs("div",{className:"flex items-center gap-3 text-white mb-2",children:[h.jsxs("div",{className:"font-semibold shrink-0 flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded-sm",style:{backgroundColor:ve.color}}),h.jsxs("span",{className:"text-sm",children:["Speed ",Ie+1]})]}),h.jsx(YA,{value:ve.factor,onChange:Pe=>{R(Je=>Je.map(mt=>mt.id===ve.id?{...mt,factor:Pe}:mt))}}),h.jsxs("span",{className:"text-sm font-mono w-16 text-center",children:[ve.factor.toFixed(2),"x"]}),h.jsx("button",{onClick:()=>Tn(ve.id),title:"Remove speed ramp",className:"group shrink-0",children:h.jsx(WA,{})})]},ve.id)),L.length>0&&L.length<2&&h.jsx("div",{className:"mt-3 text-center",children:h.jsx("button",{onClick:Ot,className:"text-sm text-blue-400 hover:text-blue-300 font-semibold",children:"+ Add another speed ramp"})})]}),h.jsxs("div",{className:"flex justify-center items-end gap-10 mt-8",children:[h.jsxs("button",{onClick:()=>c.current?.click(),className:"flex flex-col items-center gap-1 text-white",children:[h.jsx("input",{ref:c,type:"file",accept:"audio/*",className:"hidden",onChange:Me}),h.jsx("div",{className:"h-12 w-12 flex items-center justify-center",children:h.jsx(T2,{className:`w-9 h-9 transition-colors ${q?"text-[#c52323]":"text-white"}`,style:{transform:"translateY(5px)"}})}),h.jsx("span",{className:"text-xs font-semibold tracking-wide",children:"Add Music"})]}),h.jsxs("button",{onClick:()=>{if(!O&&L.length===0&&g>0){const ve=g*.2,Ie=g*.4,Pe={id:Date.now(),start:ve,end:Ie,factor:1,color:"#eab308"};R([Pe])}I(ve=>!ve)},className:"relative flex flex-col items-center gap-1 transition-colors textWhite",children:[h.jsx("div",{className:"h-12 w-12 flex items-center justify-center",children:h.jsx(qA,{className:`w-11 h-11 transition-colors ${O?"text-[#c52323]":"text-white"}`,style:{transform:"translateY(12px)"}})}),h.jsx("span",{className:"text-xs font-semibold tracking-wide",children:"Speed Control"})]}),h.jsxs("button",{onClick:()=>r.current?.click(),className:"flex flex-col items-center gap-1 transition-colors text-white hover:text-neutral-300",children:[h.jsx("input",{ref:r,type:"file",accept:"video/*",className:"hidden",onChange:xe}),h.jsx("div",{className:"h-12 w-12 flex items-center justify-center",children:h.jsx(C5,{className:"w-11 h-11",style:{transform:"translateY(8px)"}})}),h.jsx("span",{className:"text-xs font-semibold tracking-wide",children:"Change Video"})]})]}),h.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 mt-4",children:h.jsx("button",{disabled:ut,onClick:Rt,className:"px-6 py-2 rounded-lg bg-[#c52323] disabled:bg-gray-600 text-white hover:bg-[#a91f1f] active:scale-[0.98] font-bold text-base transition",children:M?"Exporting":"Export Video"})}),M&&h.jsxs("div",{className:"space-y-2 mt-4",children:[h.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2.5",children:h.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${$*100}%`}})}),h.jsx("div",{className:"text-xs font-mono opacity-70 text-white truncate",children:z})]}),!M&&z&&h.jsx("div",{className:"text-xs font-mono opacity-70 text-white mt-4",children:z}),B&&h.jsxs("div",{className:"space-y-3 mt-6",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Result"}),h.jsx("video",{controls:!0,className:"w-full max-w-2xl mx-auto rounded-xl",src:B}),h.jsx("a",{download:"invert-edit.mp4",href:B,className:"inline-block px-4 py-2 bg-white text-black rounded-lg font-semibold hover:bg-neutral-200",children:"Download Video"})]})]})}):h.jsxs("div",{className:"flex flex-col items-center justify-center pt-8 pb-4",children:[h.jsx("input",{ref:r,type:"file",accept:"video/*",className:"hidden",onChange:xe}),h.jsx("p",{className:"text-neutral-400 text-center max-w-xs mt-1 mb-6",children:"Record a new clip or choose an existing one to start editing."}),h.jsx("button",{onClick:K,className:"w-28 h-28 rounded-full bg-[#c52323] flex items-center justify-center mb-6 shadow-lg transition-transform transform hover:scale-105","aria-label":"Start recording",children:h.jsx(C5,{className:"w-14 h-14 text-white"})}),h.jsxs("div",{className:"w-full max-w-xs text-center",children:[h.jsxs("div",{className:"relative flex items-center my-4",children:[h.jsx("div",{className:"flex-grow border-t border-gray-600"}),h.jsx("span",{className:"flex-shrink mx-4 text-gray-500 text-sm",children:"OR"}),h.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),h.jsx("button",{onClick:()=>r.current?.click(),className:"w-full px-6 py-3 rounded-lg bg-gray-700 text-white hover:bg-gray-600 font-bold transition",children:"Choose Existing File"})]}),e.length>0&&h.jsx("div",{className:"w-full max-w-xs mt-4 flex justify-center gap-2",children:e.slice(0,4).map(ve=>h.jsxs("button",{onClick:()=>Yt(ve),className:"group w-16 h-16 rounded-md bg-neutral-800 overflow-hidden relative focus:outline-none focus:ring-2 focus:ring-[#c52323]",children:[h.jsx("img",{src:ve.thumbnailUrl,alt:ve.name,className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(w2,{className:"w-5 h-5 text-white"})})]},ve.id))})]})]})]})}var Fa=(t=>(t.Regular="regular",t.Goofy="goofy",t))(Fa||{}),Ks=(t=>(t[t.Onboarding=0]="Onboarding",t[t.SessionTracker=1]="SessionTracker",t[t.SessionHistory=2]="SessionHistory",t))(Ks||{});const qh=[{id:"push",name:"Push"},{id:"drop-in",name:"Drop In"},{id:"pump",name:"Pump"},{id:"bs-turn",name:"BS Turn"},{id:"fs-turn",name:"FS Turn"},{id:"bs-ollie-180",name:"BS Ollie 180"},{id:"fs-ollie-180",name:"FS Ollie 180"},{id:"bs-50-50",name:"BS 50/50"},{id:"fs-50-50",name:"FS 50/50"},{id:"tail-tap",name:"Tail Tap"},{id:"fakie-rock",name:"Fakie Rock"},{id:"rock-n-roll",name:"Rock n Roll"},{id:"bs-grind",name:"BS Grind"},{id:"fs-grind",name:"FS Grind"},{id:"ollie-to-fakie",name:"Ollie to Fakie"},{id:"fakie-ollie",name:"Fakie Ollie"},{id:"fakie-disaster",name:"Fakie Disaster"},{id:"fs-disaster",name:"FS Disaster"},{id:"bs-disaster",name:"BS Disaster"},{id:"nollie-bs-180",name:"Nollie BS 180"}];qh.map(t=>t.id);const S5=({onComplete:t})=>{const[e,n]=V.useState(Fa.Regular),i=()=>{t({stance:e})},a=({onClick:r,label:c,isActive:d})=>h.jsx("button",{onClick:r,className:`w-full py-3 px-4 rounded-lg border-2 transition-all duration-200 ${d?"bg-cyan-400 text-gray-900 border-cyan-400 font-bold":"bg-gray-800 border-gray-600 hover:border-cyan-400"}`,children:c});return h.jsxs("div",{className:"flex flex-col items-center text-center p-4 bg-gray-800 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2 text-cyan-300",children:"Welcome, Skater!"}),h.jsx("p",{className:"text-gray-400 mb-8",children:"Let's get you set up for accurate tracking."}),h.jsx("div",{className:"w-full space-y-6",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"What's your stance?"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(a,{onClick:()=>n(Fa.Regular),label:"Regular",isActive:e===Fa.Regular}),h.jsx(a,{onClick:()=>n(Fa.Goofy),label:"Goofy",isActive:e===Fa.Goofy})]})]})}),h.jsx("button",{onClick:i,className:"mt-10 w-full bg-green-500 text-gray-900 font-bold py-3 rounded-lg hover:bg-green-400 transition-colors duration-200 shadow-lg",children:"Start Skating"})]})},w5=5,ZA=1.8,T5=1200,XA=({onSessionComplete:t,previousSessions:e,onBack:n,motions:i})=>{const[a,r]=V.useState("uninitialized"),[c,d]=V.useState(0),[p,f]=V.useState(w5),[g,_]=V.useState(1),[b,S]=V.useState(0),[w,E]=V.useState(0),[N,k]=V.useState(!1),L=V.useRef(a),R=V.useRef([]),O=V.useRef([]),I=V.useRef([]),G=V.useRef(0),P=V.useRef(0),M=V.useRef(null),F=V.useRef(null),B=Q=>{L.current=Q,r(Q)},H=V.useRef({accRaw:{x:0,y:0,z:9.81},rotRaw:{alpha:0,beta:0,gamma:0},gForce:1,rotRate:0,hasMotion:!1}),z=V.useRef({accumulatedTurn:0,lastStableAngle:0,sampleCount:0,pendingTurn:null}),j=Q=>{const re=Q.accelerationIncludingGravity||{x:0,y:0,z:9.81},fe=Q.rotationRate||{alpha:0,beta:0,gamma:0},U=Math.sqrt((re.x||0)**2+(re.y||0)**2+(re.z||0)**2)/9.81,W=Math.sqrt((fe.alpha||0)**2+(fe.beta||0)**2+(fe.gamma||0)**2);if(H.current.accRaw={x:re.x||0,y:re.y||0,z:re.z||9.81},H.current.rotRaw={alpha:fe.alpha||0,beta:fe.beta||0,gamma:fe.gamma||0},H.current.gForce=U,H.current.rotRate=W,H.current.hasMotion=!0,_(U),L.current==="armed"&&U>ZA){const de=Date.now(),te=de-P.current;te<T5&&te>100?oe():(k(!0),setTimeout(()=>k(!1),T5)),P.current=de}},$=()=>{const Q=Date.now(),re=H.current,fe=z.current;if(fe.sampleCount++,re.hasMotion){const U=re.accRaw,W=re.rotRaw,de=Math.sqrt(U.x**2+U.y**2+U.z**2);if(de>.3){const te=(W.beta*U.x+W.gamma*U.y+W.alpha*U.z)/de,A=.01;Math.abs(te)>1.5&&(fe.accumulatedTurn+=te*A),fe.sampleCount%5===0&&S(Math.round(fe.accumulatedTurn));const C=fe.accumulatedTurn-fe.lastStableAngle;Math.abs(C)>=20&&Math.abs(te)<100&&(fe.pendingTurn=Math.round(C),fe.lastStableAngle=fe.accumulatedTurn)}}if(L.current==="tracking"&&fe.sampleCount%10===0){const U=(Q-G.current)/1e3,W={timestamp:parseFloat(U.toFixed(2)),intensity:parseFloat(re.gForce.toFixed(2)),rotation:parseFloat(re.rotRate.toFixed(2)),turnAngle:fe.pendingTurn||void 0};fe.pendingTurn=null,R.current.push(W),E(R.current.length)}};V.useEffect(()=>{if(a==="calibrating"&&p>0){const Q=setTimeout(()=>f(re=>re-1),1e3);return()=>clearTimeout(Q)}else a==="calibrating"&&p===0&&B("armed")},[a,p]);const oe=()=>{L.current!=="tracking"&&(R.current=[],O.current=[],I.current=[],G.current=Date.now(),z.current.accumulatedTurn=0,z.current.lastStableAngle=0,z.current.sampleCount=0,z.current.pendingTurn=null,E(0),d(0),B("tracking"),navigator.vibrate&&navigator.vibrate([150,100,150]),navigator.geolocation&&(F.current=navigator.geolocation.watchPosition(Q=>{const re=(Q.coords.speed||0)*3.6;O.current.push(re),I.current.push({lat:Q.coords.latitude,lon:Q.coords.longitude,timestamp:Q.timestamp,speed:re})},null,{enableHighAccuracy:!0})))};V.useEffect(()=>{if(a==="tracking"){const Q=setInterval(()=>d(Math.floor((Date.now()-G.current)/1e3)),1e3);return()=>clearInterval(Q)}},[a]);const q=async()=>{const Q=()=>{window.removeEventListener("devicemotion",j,!0),window.addEventListener("devicemotion",j,!0),M.current&&clearInterval(M.current),M.current=window.setInterval($,10),B("calibrating"),f(w5)};if(typeof DeviceMotionEvent.requestPermission=="function")try{await DeviceMotionEvent.requestPermission()==="granted"&&Q()}catch{Q()}else Q()},Z=()=>{M.current&&clearInterval(M.current),F.current&&navigator.geolocation.clearWatch(F.current),window.removeEventListener("devicemotion",j,!0);const Q=O.current,re=Q.length>0?Math.max(...Q):0,fe=Q.length>0?Q.reduce((W,de)=>W+de,0)/Q.length:0,U={id:`session-${Date.now()}`,date:new Date().toISOString(),duration:c,trickSummary:{},totalTricks:0,maxSpeed:parseFloat(re.toFixed(1)),avgSpeed:parseFloat(fe.toFixed(1)),timelineData:[...R.current],path:I.current.length>1?[...I.current]:void 0};t(U),r("uninitialized")};return h.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-gray-800 rounded-lg shadow-lg min-h-[520px]",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 text-cyan-300 uppercase tracking-tighter",children:"Skate Sense Tracker"}),a==="uninitialized"&&h.jsxs("div",{className:"w-full text-center",children:[h.jsx("div",{className:"mb-10 p-6 bg-gray-900 rounded-xl border border-gray-700",children:h.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Sensors must be initialized.",h.jsx("br",{}),"Tap the button to authorize."]})}),h.jsx("button",{onClick:q,className:"w-full bg-blue-600 text-white font-black py-5 text-xl rounded-2xl shadow-xl active:scale-95 transition-transform",children:"INITIALIZE SENSORS"})]}),a==="calibrating"&&h.jsxs("div",{className:"text-center w-full",children:[h.jsx("div",{className:"w-32 h-32 border-4 border-cyan-500 rounded-full mx-auto flex items-center justify-center mb-8 animate-pulse",children:h.jsx("span",{className:"text-4xl font-black text-white",children:p})}),h.jsx("p",{className:"text-cyan-400 font-bold tracking-widest text-xl uppercase",children:"Calibrating..."}),h.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Hold phone completely still."})]}),a==="armed"&&h.jsxs("div",{className:"text-center w-full",children:[h.jsx("div",{className:`w-32 h-32 border-4 rounded-full mx-auto flex items-center justify-center mb-8 transition-all duration-75 ${N?"bg-yellow-500 border-yellow-300 scale-110":"bg-red-600/10 border-red-600 shadow-[0_0_30px_rgba(220,38,38,0.4)] animate-pulse"}`,children:h.jsx("div",{className:`w-16 h-16 rounded-full ${N?"bg-white":"bg-red-600"}`})}),h.jsx("h3",{className:"text-3xl font-black text-white mb-2 italic uppercase",children:"System Armed"}),h.jsxs("p",{className:"text-gray-400 text-sm mb-8 leading-relaxed",children:["Put phone in pocket.",h.jsx("br",{}),h.jsx("span",{className:`${N?"text-yellow-400 scale-110 font-black":"text-red-500 font-bold"} inline-block transition-all underline decoration-2`,children:"Double-tap phone"})," to start."]}),h.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-700 mb-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Sensor Activity"}),h.jsxs("span",{className:"text-[10px] text-cyan-400 font-mono",children:["Angle: ",b,""]})]}),h.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-cyan-500 transition-all duration-75",style:{width:`${Math.min(100,g/3*100)}%`}})}),h.jsxs("div",{className:"mt-2 text-left text-[9px] text-gray-600 font-mono",children:["Input: ",g.toFixed(3)," G"]})]}),h.jsx("button",{onClick:oe,className:"w-full bg-green-500 text-gray-900 font-black py-4 text-xl rounded-xl shadow-lg active:scale-95 mb-4",children:"START MANUALLY"})]}),a==="tracking"&&h.jsxs("div",{className:"text-center w-full",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-[10px] text-white font-black mb-8 bg-red-600 animate-pulse uppercase tracking-widest",children:[h.jsx("span",{className:"w-2 h-2 bg-white rounded-full"})," Tracking Active"]}),h.jsxs("div",{className:"text-8xl font-black text-white mb-10 tabular-nums tracking-tighter",children:[Math.floor(c/60).toString().padStart(2,"0"),":",(c%60).toString().padStart(2,"0")]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[h.jsxs("div",{className:"bg-gray-900 p-4 rounded-2xl border border-gray-700",children:[h.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Rotation"}),h.jsxs("p",{className:"text-3xl font-black text-cyan-400 tabular-nums",children:[b,""]})]}),h.jsxs("div",{className:"bg-gray-900 p-4 rounded-2xl border border-gray-700",children:[h.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Last Force"}),h.jsxs("p",{className:"text-3xl font-black text-white tabular-nums",children:[g.toFixed(1),"G"]})]})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500 font-mono mb-8 uppercase",children:[h.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-ping"}),w," data captured"]}),h.jsx("button",{onClick:Z,className:"w-full bg-red-600 text-white font-black py-5 text-2xl rounded-2xl shadow-2xl active:scale-95 transition-all",children:"STOP & SAVE"})]}),a!=="tracking"&&h.jsx("div",{className:"mt-auto w-full pt-4",children:h.jsx("button",{onClick:n,className:"w-full bg-transparent text-gray-500 font-bold py-2 rounded-lg hover:text-white transition-all text-[10px] uppercase tracking-[0.3em]",children:"Cancel"})})]})},KA="4gpXL4qS0zO5bGwk6mFK",QA=`https://api.maptiler.com/maps/hybrid/style.json?key=${KA}`,N2=({path:t=[],markers:e=[],center:n,zoom:i,className:a})=>{const r=V.useRef(null),c=V.useRef(null),[d,p]=V.useState(null),[f,g]=V.useState(!1);return V.useEffect(()=>{if(c.current||!r.current)return;const _=window.maplibregl;if(!_){console.error("MapLibre GL JS not loaded on window object."),p("Map library could not load. Check internet connection.");return}try{const b=n||(t.length>0?[t[0].lon,t[0].lat]:[13.405,52.52]);c.current=new _.Map({container:r.current,style:QA,center:b,zoom:i||14,attributionControl:!1}),c.current.addControl(new _.NavigationControl({showCompass:!0,showZoom:!0}),"top-right"),c.current.addControl(new _.AttributionControl({compact:!0}),"bottom-right"),c.current.on("load",()=>{g(!0)}),c.current.on("error",S=>{console.error("Map Error:",S),S.error&&S.error.message&&(S.error.message.includes("style")||S.error.message.includes("Forbidden"))&&p(S.error.message)})}catch(b){console.error("Failed to initialize map:",b),p(b.message||"Map failed to load")}return()=>{c.current?.remove(),c.current=null}},[]),V.useEffect(()=>{const _=window.maplibregl;if(!c.current||!f||t.length<2||!_)return;const b=t.map(w=>[w.lon,w.lat]);c.current.getSource("session-route")&&(c.current.getLayer("session-path")&&c.current.removeLayer("session-path"),c.current.getLayer("session-path-glow")&&c.current.removeLayer("session-path-glow"),c.current.removeSource("session-route")),c.current.addSource("session-route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:b}}}),c.current.addLayer({id:"session-path-glow",type:"line",source:"session-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#c52323","line-width":10,"line-opacity":.3,"line-blur":4}}),c.current.addLayer({id:"session-path",type:"line",source:"session-route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ff4444","line-width":4}});const S=new _.LngLatBounds;b.forEach(w=>S.extend(w));try{c.current.fitBounds(S,{padding:50,animate:!0})}catch(w){console.warn("Could not fit bounds (invalid coords?)",w)}},[f,t]),V.useEffect(()=>{const _=window.maplibregl;!c.current||!f||e.length===0||!_||e.forEach(b=>{const S=document.createElement("div");S.className="skate-marker",S.style.backgroundColor="#c52323",S.style.width="15px",S.style.height="15px",S.style.borderRadius="50%",S.style.border="2px solid white",S.style.cursor="pointer";const w=new _.Popup({offset:25}).setText(b.title);new _.Marker({element:S}).setLngLat([b.lon,b.lat]).setPopup(w).addTo(c.current)})},[f,e]),h.jsxs("div",{className:`relative w-full overflow-hidden rounded-lg bg-neutral-900 ${a||"h-64"}`,children:[d&&h.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-gray-900/80 p-4 text-center",children:h.jsxs("div",{children:[h.jsx("p",{className:"text-red-500 font-bold mb-2",children:"Map Error"}),h.jsx("p",{className:"text-gray-300 text-sm",children:d})]})}),h.jsx("div",{ref:r,className:"w-full h-full"})]})},A2=t=>{let e=0;for(let i=0;i<t.length;i++)e=t.charCodeAt(i)+((e<<5)-e);const n=(e&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-n.length)+n},$A=({data:t,selectedIndices:e,onTogglePoint:n})=>{const i=V.useRef(null),a=V.useRef(null),[r,c]=V.useState({width:0,height:250}),d=V.useMemo(()=>{if(!t.length)return r.width||300;const S=t.length*14;return Math.max(r.width||300,S)},[t.length,r.width]),p=V.useMemo(()=>t.length>0?Math.max(t[t.length-1].timestamp,.1):1,[t]),f=V.useMemo(()=>Math.max(...t.map(b=>b.intensity),3),[t]);V.useEffect(()=>{const b=()=>{if(i.current){const{clientWidth:w,clientHeight:E}=i.current;c({width:w||300,height:E||250})}};b();const S=new ResizeObserver(b);return i.current&&S.observe(i.current),()=>S.disconnect()},[]);const g=V.useMemo(()=>{if(!d||!r.height)return[];const b=20,S=40,E=r.height-S-20,N=d-b*2;return t.map((k,L)=>{const R=b+k.timestamp/p*N,O=S+E-k.intensity/f*E;return{x:R,y:O,index:L,data:k}})},[t,d,r.height,p,f]),_=V.useMemo(()=>{if(g.length===0)return"";let b=`M ${g[0].x} ${g[0].y}`;for(let S=1;S<g.length;S++)b+=` L ${g[S].x} ${g[S].y}`;return b},[g]);return t.length===0?h.jsx("div",{className:"text-gray-500 text-center py-8 text-xs font-mono uppercase",children:"No movement logs found."}):h.jsxs("div",{className:"relative w-full bg-gray-900 rounded-lg mb-4 border border-gray-700 overflow-hidden shadow-inner",children:[h.jsxs("div",{className:"flex justify-between items-center bg-gray-800/50 p-2 border-b border-gray-700 relative z-20",children:[h.jsx("h5",{className:"text-xs text-gray-400 font-mono uppercase ml-2 tracking-tighter font-bold",children:"Motion Timeline"}),h.jsx("div",{className:"text-[9px] text-gray-500 mr-2 uppercase font-bold",children:"Tap markers to name tricks"})]}),h.jsx("div",{ref:i,className:"relative w-full h-64",children:h.jsx("div",{ref:a,className:"w-full h-full overflow-x-auto overflow-y-hidden",style:{scrollBehavior:"smooth"},children:h.jsx("div",{style:{width:d,height:"100%"},className:"relative",children:h.jsxs("svg",{width:d,height:r.height,className:"absolute inset-0",children:[(()=>{const b=r.height-60,S=40+b-1/f*b;return h.jsx("line",{x1:"0",y1:S,x2:d,y2:S,stroke:"#374151",strokeDasharray:"4",strokeWidth:"1"})})(),h.jsx("path",{d:_,fill:"none",stroke:"#4b5563",strokeWidth:"1.5",strokeLinejoin:"round"}),g.map(b=>{const S=e.has(b.index),w=!!b.data.label,E=b.data.turnAngle!==void 0&&Math.abs(b.data.turnAngle)>0,N=b.data.intensity>1.8;if(!E&&!w&&!N&&!S)return null;let k=E?b.data.turnAngle>0?"#22d3ee":"#ef4444":N?"#f59e0b":"#4b5563",L=N?5:4,R="#fff",O=1;return w&&(k=A2(b.data.label),b.data.isGroupStart&&(L=6)),S&&(k="#ef4444",L=7,R="#fff",O=2),h.jsxs("g",{style:{cursor:"pointer"},onClick:I=>{I.stopPropagation(),n(b.index)},children:[h.jsx("circle",{cx:b.x,cy:b.y,r:22,fill:"transparent"}),S&&h.jsx("circle",{cx:b.x,cy:b.y,r:14,fill:"#ef4444",fillOpacity:"0.3",children:h.jsx("animate",{attributeName:"r",values:"12;14;12",dur:"2s",repeatCount:"indefinite"})}),h.jsx("circle",{cx:b.x,cy:b.y,r:L,fill:k,stroke:R,strokeWidth:O}),E&&!S&&h.jsxs("g",{children:[h.jsx("text",{x:b.x,y:b.y-24,textAnchor:"middle",fill:b.data.turnAngle>0?"#22d3ee":"#ef4444",fontSize:"9",fontWeight:"900",style:{textShadow:"0px 1px 2px black",textTransform:"uppercase"},children:b.data.turnAngle>0?"R":"L"}),h.jsxs("text",{x:b.x,y:b.y-12,textAnchor:"middle",fill:b.data.turnAngle>0?"#22d3ee":"#ef4444",fontSize:"10",fontWeight:"bold",fontFamily:"monospace",style:{textShadow:"0px 1px 2px black"},children:[Math.abs(b.data.turnAngle),""]})]}),w&&b.data.isGroupStart&&!S&&h.jsxs("g",{pointerEvents:"none",children:[h.jsx("line",{x1:b.x,y1:b.y,x2:b.x,y2:b.y+15,stroke:k,strokeWidth:"1"}),h.jsx("text",{x:b.x,y:b.y+25,textAnchor:"middle",fill:k,fontSize:"10",fontWeight:"bold",style:{textShadow:"0px 1px 2px black"},children:b.data.label})]})]},b.index)})]})})})})]})},eM=({sessions:t,onDateSelect:e,selectedDate:n,currentMonth:i,setCurrentMonth:a})=>{const r=new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),c=new Date(i.getFullYear(),i.getMonth(),1).getDay(),d=V.useMemo(()=>new Set(t.map(_=>new Date(_.date).toDateString())),[t]),p=Array(c).fill(null),f=Array.from({length:r},(_,b)=>b+1),g=_=>{a(new Date(i.getFullYear(),i.getMonth()+_,1))};return h.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("button",{onClick:()=>g(-1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-cyan-400",children:""}),h.jsx("h3",{className:"font-black text-white uppercase tracking-widest",children:i.toLocaleString("default",{month:"long",year:"numeric"})}),h.jsx("button",{onClick:()=>g(1),className:"p-2 hover:bg-gray-700 rounded-full transition-colors text-cyan-400",children:""})]}),h.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-[10px] font-black text-gray-500 mb-2 uppercase tracking-tighter",children:[h.jsx("div",{children:"Su"}),h.jsx("div",{children:"Mo"}),h.jsx("div",{children:"Tu"}),h.jsx("div",{children:"We"}),h.jsx("div",{children:"Th"}),h.jsx("div",{children:"Fr"}),h.jsx("div",{children:"Sa"})]}),h.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[p.map((_,b)=>h.jsx("div",{},`blank-${b}`)),f.map(_=>{const b=new Date(i.getFullYear(),i.getMonth(),_),S=d.has(b.toDateString()),w=n?.toDateString()===b.toDateString();return h.jsxs("div",{onClick:()=>e(b),className:`p-2 rounded-lg cursor-pointer transition-all text-center relative ${w?"bg-cyan-500 text-gray-900 font-black":"hover:bg-gray-700 text-gray-400"}`,children:[_,S&&h.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1.5 h-1.5 bg-green-400 rounded-full"})]},_)})]})]})},tM=({onSave:t,onClose:e,motions:n,onAddMotion:i,onDeleteMotion:a,selectionCount:r})=>{const[c,d]=V.useState(""),[p,f]=V.useState(!1),[g,_]=V.useState(""),b=()=>{c&&(t(c),e())},S=()=>{g.trim()&&(i(g.trim()),_(""),f(!1))},w=(E,N)=>{E.stopPropagation(),confirm("Delete this trick definition?")&&(a(N),c===n.find(k=>k.id===N)?.name&&d(""))};return h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:h.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 w-full max-w-md border border-cyan-500 shadow-2xl flex flex-col max-h-[90vh]",children:[h.jsx("h3",{className:"text-xl font-black text-white mb-2 uppercase tracking-tighter italic",children:"Tag Move"}),h.jsxs("p",{className:"text-gray-400 text-[10px] uppercase font-bold mb-4 tracking-widest",children:["Grouping ",h.jsx("span",{className:"text-cyan-400",children:r})," data points"]}),h.jsxs("div",{className:"flex-1 overflow-y-auto mb-6 pr-2 custom-scrollbar",children:[h.jsx("div",{className:"grid grid-cols-1 gap-2",children:n.map(E=>h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>d(E.name),className:`flex-1 text-left px-4 py-3 rounded-xl border transition-all text-sm font-black uppercase tracking-widest ${c===E.name?"bg-cyan-900 border-cyan-400 text-cyan-400":"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600"}`,children:E.name}),h.jsx("button",{onClick:N=>w(N,E.id),className:"px-4 rounded-xl border border-gray-600 bg-gray-800 text-gray-500 hover:text-red-400 hover:border-red-400 transition-colors",children:""})]},E.id))}),h.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:p?h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("input",{type:"text",value:g,onChange:E=>_(E.target.value),placeholder:"New trick name...",className:"w-full bg-gray-900 border border-gray-600 rounded-xl p-3 text-white focus:border-cyan-400 outline-none font-bold",autoFocus:!0}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-2 text-gray-500 text-xs font-bold uppercase",children:"Cancel"}),h.jsx("button",{onClick:S,className:"flex-1 py-2 bg-green-600 text-white rounded-xl text-xs font-black uppercase",children:"Add"})]})]}):h.jsx("button",{onClick:()=>f(!0),className:"w-full py-3 border-2 border-dashed border-gray-600 text-gray-500 hover:text-cyan-400 hover:border-cyan-400 rounded-xl text-xs font-black uppercase tracking-widest transition-colors",children:"+ Create New Label"})})]}),h.jsxs("div",{className:"flex gap-3 mt-auto pt-4 border-t border-gray-700",children:[h.jsx("button",{onClick:e,className:"flex-1 bg-gray-700 py-4 rounded-xl text-gray-300 font-black uppercase tracking-widest",children:"Back"}),h.jsx("button",{onClick:b,disabled:!c,className:"flex-1 bg-cyan-500 py-4 rounded-xl text-gray-900 font-black uppercase tracking-widest hover:bg-cyan-400 disabled:opacity-50 shadow-lg",children:"Save"})]})]})})},nM=({sessions:t,onSessionUpdate:e,onDeleteSession:n,motions:i,onAddMotion:a,onDeleteMotion:r})=>{const[c,d]=V.useState(null),[p,f]=V.useState(new Set),[g,_]=V.useState(!1),[b,S]=V.useState({}),w=L=>{S(R=>({...R,[L]:!R[L]}))};if(t.length===0)return h.jsx("p",{className:"text-gray-500 mt-10 text-center font-bold uppercase tracking-widest text-xs",children:"No sessions recorded for this date."});const E=L=>{const R=Math.floor(L/3600),O=Math.floor(L%3600/60),I=L%60;return[R,O,I].map(G=>G.toString().padStart(2,"0")).join(":")},N=(L,R)=>{if(c!==L)d(L),f(new Set([R]));else{const O=new Set(p);O.has(R)?O.delete(R):O.add(R),f(O)}},k=L=>{if(!c||p.size===0)return;const R=t.find(P=>P.id===c);if(!R)return;const O=JSON.parse(JSON.stringify(R)),I=`group-${Date.now()}`,G=Array.from(p).sort((P,M)=>P-M);G.forEach(P=>{const M=O.timelineData[P];if(M.label&&M.isGroupStart){const F=O.trickSummary[M.label]||0;F>0&&(O.trickSummary[M.label]=F-1),O.trickSummary[M.label]<=0&&delete O.trickSummary[M.label]}M.label=L,M.groupId=I,M.isGroupStart=!1}),G.length>0&&(O.timelineData[G[0]].isGroupStart=!0),O.trickSummary[L]=(O.trickSummary[L]||0)+1,O.totalTricks=Object.values(O.trickSummary).reduce((P,M)=>P+M,0),e(O),_(!1),f(new Set)};return h.jsxs("div",{className:"mt-6 space-y-4",children:[g&&h.jsx(tM,{onSave:k,onClose:()=>_(!1),motions:i,onAddMotion:a,onDeleteMotion:r,selectionCount:p.size}),t.map((L,R)=>{const O=!!b[L.id],I=c===L.id,G=I&&p.size>0;let P=G&&p.size>1?`Group (${p.size})`:"Tag Selection";return h.jsxs("div",{className:"bg-gray-800 rounded-2xl border-l-4 border-cyan-500 overflow-hidden shadow-xl mb-4",children:[h.jsxs("div",{className:"flex",children:[h.jsxs("div",{className:"flex-grow flex justify-between items-center p-5 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:()=>w(L.id),children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{className:`text-cyan-500 text-xs transform transition-transform duration-300 ${O?"rotate-90":"rotate-0"}`,children:""}),h.jsxs("div",{children:[h.jsxs("h4",{className:"font-black text-white text-lg uppercase tracking-tighter italic",children:["Session ",R+1]}),h.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:new Date(L.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),!O&&h.jsxs("span",{className:"text-[9px] font-black text-gray-400 bg-gray-900 px-3 py-1.5 rounded-full border border-gray-700 uppercase tracking-widest",children:[h.jsx("span",{className:"text-green-400",children:L.totalTricks})," Tricks"]})]}),h.jsx("button",{onClick:()=>n(L.id),className:"px-5 text-gray-600 hover:text-red-500 transition-colors border-l border-gray-700",children:""})]}),O&&h.jsxs("div",{className:"p-4 border-t border-gray-700 bg-gray-800",children:[h.jsx($A,{data:L.timelineData,selectedIndices:I?p:new Set,onTogglePoint:M=>N(L.id,M)}),h.jsx("div",{className:"flex justify-end mb-6",children:h.jsx("button",{onClick:()=>_(!0),disabled:!G,className:`px-6 py-2 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${G?"bg-cyan-500 text-gray-900 shadow-lg":"bg-gray-700 text-gray-500 cursor-not-allowed opacity-50"}`,children:P})}),h.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4 bg-gray-900 p-4 rounded-xl border border-gray-700",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Duration"}),h.jsx("p",{className:"font-mono font-bold text-cyan-400 text-lg",children:E(L.duration)})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Tricks"}),h.jsx("p",{className:"font-mono font-bold text-green-400 text-lg",children:L.totalTricks})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Max Speed"}),h.jsxs("p",{className:"font-mono font-bold text-white text-lg",children:[L.maxSpeed||0," ",h.jsx("span",{className:"text-[10px]",children:"km/h"})]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase tracking-widest mb-1",children:"Avg Speed"}),h.jsxs("p",{className:"font-mono font-bold text-white text-lg",children:[L.avgSpeed||0," ",h.jsx("span",{className:"text-[10px]",children:"km/h"})]})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("p",{className:"text-gray-400 text-[10px] font-black mb-3 uppercase tracking-widest",children:"Move Breakdown"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(L.trickSummary).length>0?Object.entries(L.trickSummary).map(([M,F])=>F>0&&h.jsxs("span",{className:"px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-wider text-white border border-white/10 shadow-sm flex items-center gap-2",style:{backgroundColor:A2(M)},children:[M," ",h.jsx("span",{className:"bg-black/30 px-2 py-0.5 rounded-full text-[9px]",children:F})]},M)):h.jsx("p",{className:"text-gray-600 text-[10px] font-bold uppercase italic",children:"No tricks tagged yet."})})]}),L.path&&L.path.length>0&&h.jsxs("div",{className:"mt-8",children:[h.jsx("p",{className:"text-gray-400 text-[10px] font-black mb-3 uppercase tracking-widest",children:"Session Path"}),h.jsx("div",{className:"rounded-2xl overflow-hidden border border-gray-700 bg-gray-900 shadow-2xl",children:h.jsx(N2,{path:L.path,className:"h-60 w-full"})})]})]})]},L.id)})]})},sM=({sessions:t,navigate:e,onSessionUpdate:n,onDeleteSession:i,motions:a,onAddMotion:r,onDeleteMotion:c,onBack:d})=>{const[p,f]=V.useState(new Date),[g,_]=V.useState(new Date),b=V.useMemo(()=>g?t.filter(w=>new Date(w.date).toDateString()===g.toDateString()):[],[t,g]),S=w=>_(w);return h.jsxs("div",{className:"w-full",children:[h.jsx(eM,{sessions:t,onDateSelect:S,selectedDate:g,currentMonth:p,setCurrentMonth:f}),g&&h.jsx(nM,{sessions:b,onSessionUpdate:n,onDeleteSession:i,motions:a,onAddMotion:r,onDeleteMotion:c}),h.jsxs("div",{className:"mt-10 flex flex-col gap-3",children:[h.jsxs("button",{onClick:()=>e(Ks.SessionTracker),className:"w-full bg-green-500 text-gray-900 font-black py-5 rounded-2xl hover:bg-green-400 transition-all shadow-xl flex items-center justify-center gap-2 uppercase tracking-widest italic",children:[h.jsx("span",{children:""})," Start Tracking"]}),h.jsx("button",{onClick:d,className:"w-full bg-gray-800 text-gray-500 font-black py-3 rounded-2xl hover:bg-gray-700 hover:text-gray-300 transition-all uppercase tracking-widest text-xs",children:"Exit"})]})]})},E5=({onClose:t})=>{const[e,n]=V.useState({page:Ks.Onboarding,userSettings:null,sessions:[]}),[i,a]=V.useState(()=>{try{const S=localStorage.getItem("skate_sense_motions");return S?JSON.parse(S):qh}catch{return qh}});V.useEffect(()=>{try{const S=localStorage.getItem("skate_sense_settings"),w=localStorage.getItem("skate_sense_sessions"),E=S?JSON.parse(S):null,N=w?JSON.parse(w):[];n(E?{page:Ks.SessionHistory,userSettings:E,sessions:N}:k=>({...k,sessions:N}))}catch(S){console.error("Failed to load data from localStorage",S)}},[]);const r=S=>{const w={id:S.toLowerCase().replace(/\s+/g,"-"),name:S};if(i.some(N=>N.id===w.id))return;const E=[w,...i];a(E),localStorage.setItem("skate_sense_motions",JSON.stringify(E))},c=S=>{const w=i.filter(E=>E.id!==S);a(w),localStorage.setItem("skate_sense_motions",JSON.stringify(w))},d=S=>{localStorage.setItem("skate_sense_settings",JSON.stringify(S)),n(w=>({...w,userSettings:S,page:Ks.SessionTracker}))},p=V.useCallback(S=>{n(w=>{const E=[...w.sessions,S];return localStorage.setItem("skate_sense_sessions",JSON.stringify(E)),{...w,sessions:E,page:Ks.SessionHistory}})},[]),f=V.useCallback(S=>{n(w=>{const E=w.sessions.map(N=>N.id===S.id?S:N);return localStorage.setItem("skate_sense_sessions",JSON.stringify(E)),{...w,sessions:E}})},[]),g=V.useCallback(S=>{n(w=>{const E=w.sessions.filter(N=>N.id!==S);return localStorage.setItem("skate_sense_sessions",JSON.stringify(E)),{...w,sessions:E}})},[]),_=S=>{n(w=>({...w,page:S}))},b=()=>{switch(e.page){case Ks.Onboarding:return h.jsx(S5,{onComplete:d});case Ks.SessionTracker:return h.jsx(XA,{onSessionComplete:p,previousSessions:e.sessions,onBack:()=>_(Ks.SessionHistory),motions:i});case Ks.SessionHistory:return h.jsx(sM,{navigate:_,sessions:e.sessions,onSessionUpdate:f,onDeleteSession:g,motions:i,onAddMotion:r,onDeleteMotion:c,onBack:t});default:return h.jsx(S5,{onComplete:d})}};return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-100 font-mono flex flex-col items-center p-4 sm:p-6",children:[h.jsxs("header",{className:"flex items-center justify-between mb-6 relative h-10 w-full max-w-4xl",children:[h.jsx("button",{onClick:t,className:"text-white hover:text-gray-300 transition-colors z-10 p-2 -ml-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsxs("div",{className:"text-center w-full absolute left-1/2 -translate-x-1/2 pointer-events-none flex flex-col items-center",children:[h.jsx("h1",{className:"text-xl font-bold tracking-wider text-cyan-400",children:"SKATE SENSE"}),h.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Motion Tracker"})]})]}),h.jsx("div",{className:"w-full max-w-lg mx-auto flex-grow",children:b()})]})},iM=t=>{const e=Math.floor(t/3600).toString().padStart(2,"0"),n=Math.floor(t%3600/60).toString().padStart(2,"0"),i=Math.floor(t%60).toString().padStart(2,"0");return`${e}:${n}:${i}`},oM=t=>t<1e3?`${t.toFixed(0)} m`:`${(t/1e3).toFixed(2)} km`,aM=({session:t,onClose:e})=>{const n=new Date(t.startTime).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),i=new Date(t.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 flex flex-col",children:[h.jsxs("header",{className:"flex items-center justify-between mb-6 relative h-10",children:[h.jsx("button",{onClick:e,className:"text-white hover:text-gray-300 transition-colors z-10 p-2 -ml-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("div",{className:"text-center w-full absolute left-1/2 -translate-x-1/2 pointer-events-none",children:h.jsx("h1",{className:"text-xl font-bold tracking-wider text-gray-100",children:"SESSION REVIEW"})})]}),h.jsx("main",{className:"w-full max-w-4xl mx-auto space-y-6",children:h.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-white/5",children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"text-gray-400 text-sm uppercase tracking-widest",children:n}),h.jsx("div",{className:"text-3xl font-black text-white",children:i})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[h.jsxs("div",{className:"bg-neutral-900/50 p-3 rounded-lg text-center",children:[h.jsx("div",{className:"text-2xl font-bold font-mono",children:iM(t.activeTime)}),h.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Duration"})]}),h.jsxs("div",{className:"bg-neutral-900/50 p-3 rounded-lg text-center",children:[h.jsx("div",{className:"text-2xl font-bold font-mono text-green-400",children:oM(t.totalDistance)}),h.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Distance"})]}),h.jsxs("div",{className:"bg-neutral-900/50 p-3 rounded-lg text-center",children:[h.jsxs("div",{className:"text-2xl font-bold font-mono text-blue-400",children:[(t.topSpeed*3.6).toFixed(1)," ",h.jsx("span",{className:"text-sm",children:"km/h"})]}),h.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Top Speed"})]}),h.jsxs("div",{className:"bg-neutral-900/50 p-3 rounded-lg text-center",children:[h.jsx("div",{className:"text-2xl font-bold font-mono text-yellow-400",children:t.counts.slams}),h.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Slams"})]})]}),h.jsx("div",{className:"h-64 rounded-lg overflow-hidden border border-white/10 mb-4",children:h.jsx(N2,{path:t.path})}),h.jsxs("div",{className:"bg-neutral-900/40 p-4 rounded-lg",children:[h.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-3 uppercase tracking-wider",children:"Tricks Landed"}),h.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8 text-sm",children:[h.jsxs("div",{className:"flex justify-between border-b border-gray-800 pb-1",children:[h.jsx("span",{children:"Ollies"}),h.jsx("span",{className:"font-mono font-bold text-white",children:t.counts.ollies})]}),h.jsxs("div",{className:"flex justify-between border-b border-gray-800 pb-1",children:[h.jsx("span",{children:"FS Grinds"}),h.jsx("span",{className:"font-mono font-bold text-white",children:t.counts.fsGrinds})]}),h.jsxs("div",{className:"flex justify-between border-b border-gray-800 pb-1",children:[h.jsx("span",{children:"BS Grinds"}),h.jsx("span",{className:"font-mono font-bold text-white",children:t.counts.bsGrinds})]}),h.jsxs("div",{className:"flex justify-between border-b border-gray-800 pb-1",children:[h.jsx("span",{children:"Pumps"}),h.jsx("span",{className:"font-mono font-bold text-white",children:t.counts.pumps})]}),h.jsxs("div",{className:"flex justify-between border-b border-gray-800 pb-1",children:[h.jsx("span",{children:"Airs"}),h.jsx("span",{className:"font-mono font-bold text-white",children:t.counts.airs})]}),h.jsxs("div",{className:"flex justify-between border-b border-gray-800 pb-1",children:[h.jsx("span",{children:"Stalls"}),h.jsx("span",{className:"font-mono font-bold text-white",children:t.counts.stalls})]})]})]})]})})]})};function An(t,e){const[n,i]=V.useState(()=>{try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch{return e}});return[n,r=>{try{const c=r instanceof Function?r(n):r;i(c),window.localStorage.setItem(t,JSON.stringify(c))}catch{}}]}const rM=["Ollie","Kickflip","Heelflip","Pop Shuvit","Frontside 180","Backside 180","Rock to Fakie","Axle Stall","50-50 Grind","Boardslide"],N5=({onBack:t,onSelectTrick:e})=>{const[n]=An("invert-trained-tricks",{}),[i,a]=V.useState(""),r=c=>{const d=n[c];return d?d.filter(p=>p&&p.length>0).length:0};return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 flex flex-col",children:[h.jsxs("header",{className:"flex items-center justify-between mb-8 relative h-10",children:[h.jsx("button",{onClick:t,className:"text-white hover:text-gray-300 transition-colors z-10 p-2 -ml-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("div",{className:"text-center w-full absolute left-1/2 -translate-x-1/2 pointer-events-none",children:h.jsx("h1",{className:"text-xl font-bold tracking-wider text-gray-100",children:"TRICK TRAINER"})})]}),h.jsxs("main",{className:"w-full max-w-2xl mx-auto flex-grow",children:[h.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-white/5 mb-6",children:[h.jsx("h2",{className:"text-lg font-bold mb-4",children:"Train Custom Trick"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:i,onChange:c=>a(c.target.value),placeholder:"e.g. Tre Flip",className:"flex-grow bg-gray-700 rounded-lg px-4 py-2 border border-gray-600 focus:border-indigo-500 outline-none"}),h.jsx("button",{onClick:()=>{i.trim()&&e(i.trim())},disabled:!i.trim(),className:"bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Train"})]})]}),h.jsx("div",{className:"space-y-3",children:rM.map(c=>{const d=r(c),p=d>=3;return h.jsxs("button",{onClick:()=>e(c),className:"w-full bg-neutral-800 p-4 rounded-lg border border-white/5 flex items-center justify-between hover:bg-neutral-700 transition-colors group",children:[h.jsxs("div",{className:"text-left",children:[h.jsx("div",{className:"font-bold text-lg group-hover:text-indigo-400 transition-colors",children:c}),h.jsx("div",{className:"text-xs text-gray-400",children:p?"Training Complete":`${d} / 3 takes recorded`})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"flex gap-1",children:[1,2,3].map(f=>h.jsx("div",{className:`w-2 h-2 rounded-full ${f<=d?"bg-green-500":"bg-gray-700"}`},f))}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500 group-hover:text-white ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},c)})})]})]})},A5=[{level:1,question:"What is the wooden part of a skateboard called?",answers:["The Plank","The Deck","The Beam","The Hull"],correctIndex:1,question_es:"Cmo se llama la parte de madera de un skateboard?",answers_es:["La Tabla","El Deck (Tabla)","La Viga","El Casco"],question_de:"Wie nennt man den hlzernen Teil eines Skateboards?",answers_de:["Die Planke","Das Deck","Der Balken","Der Rumpf"]},{level:1,question:"How many wheels does a standard skateboard have?",answers:["Two","Four","Six","Eight"],correctIndex:1,question_es:"Cuntas ruedas tiene un skateboard estndar?",answers_es:["Dos","Cuatro","Seis","Ocho"],question_de:"Wie viele Rollen hat ein Standard-Skateboard?",answers_de:["Zwei","Vier","Sechs","Acht"]},{level:1,question:"What protects your head while skating?",answers:["Beanie","Cap","Helmet","Bandana"],correctIndex:2,question_es:"Qu protege tu cabeza mientras patinas?",answers_es:["Gorro","Gorra","Casco","Pauelo"],question_de:"Was schtzt deinen Kopf beim Skaten?",answers_de:["Mtze","Kappe","Helm","Bandana"]},{level:1,question:"Which foot is forward in 'Regular' stance?",answers:["Left","Right","Both","Neither"],correctIndex:0,question_es:"Qu pie va adelante en la postura 'Regular'?",answers_es:["Izquierdo","Derecho","Ambos","Ninguno"],question_de:"Welcher Fu ist bei 'Regular' vorne?",answers_de:["Links","Rechts","Beide","Keiner"]},{level:2,question:"Pushing with your front foot is called?",answers:["Mongo","Goofy","Switch","Regular"],correctIndex:0,question_es:"Cmo se llama empujar con el pie delantero?",answers_es:["Mongo","Goofy","Switch","Regular"],question_de:"Wie nennt man das Pushen mit dem vorderen Fu?",answers_de:["Mongo","Goofy","Switch","Regular"]},{level:2,question:"What trick involves jumping with the board?",answers:["Wheelie","Ollie","Hop","Jump"],correctIndex:1,question_es:"Qu truco implica saltar con la tabla?",answers_es:["Wheelie","Ollie","Hop","Jump"],question_de:"Welcher Trick beinhaltet das Springen mit dem Board?",answers_de:["Wheelie","Ollie","Hop","Jump"]},{level:3,question:"What prevents 'wheelbite'?",answers:["Riser pads","Larger wheels","Looser trucks","Wax"],correctIndex:0,question_es:"Qu previene el 'wheelbite'?",answers_es:["Riser pads (Elevadores)","Ruedas ms grandes","Ejes ms sueltos","Cera"],question_de:"Was verhindert 'Wheelbite'?",answers_de:["Riser Pads","Grere Rollen","Lockere Achsen","Wachs"]},{level:3,question:"Soft wheels are best for?",answers:["Skateparks","Filming/Cruising","Powersliding","Vert"],correctIndex:1,question_es:"Para qu son mejores las ruedas blandas?",answers_es:["Skateparks","Filmar/Cruising","Derrapes","Vert"],question_de:"Wofr sind weiche Rollen am besten?",answers_de:["Skateparks","Filmen/Cruisen","Powerslides","Vert"]},{level:4,question:"Who is credited with inventing the kickflip?",answers:["Rodney Mullen","Tony Hawk","Steve Caballero","Mark Gonzales"],correctIndex:0,question_es:"A quin se le atribuye la invencin del kickflip?",answers_es:["Rodney Mullen","Tony Hawk","Steve Caballero","Mark Gonzales"],question_de:"Wem wird die Erfindung des Kickflips zugeschrieben?",answers_de:["Rodney Mullen","Tony Hawk","Steve Caballero","Mark Gonzales"]},{level:4,question:"SOTY stands for?",answers:["Skater of the Year","Skate or the Yard","Style of the Youth","Stunt of the Year"],correctIndex:0,question_es:"Qu significa SOTY?",answers_es:["Skater of the Year (Patinador del Ao)","Skate or the Yard","Style of the Youth","Stunt of the Year"],question_de:"Wofr steht SOTY?",answers_de:["Skater of the Year","Skate or the Yard","Style of the Youth","Stunt of the Year"]},{level:5,question:"Board flips towards the toes?",answers:["Heelflip","Kickflip","Varial Flip","Hardflip"],correctIndex:1,question_es:"La tabla gira hacia los dedos de los pies?",answers_es:["Heelflip","Kickflip","Varial Flip","Hardflip"],question_de:"Das Board dreht sich zu den Zehen?",answers_de:["Heelflip","Kickflip","Varial Flip","Hardflip"]},{level:5,question:"Grind on the back truck, front lifted?",answers:["5-0","50-50","Nosegrind","Smith"],correctIndex:0,question_es:"Grind en el eje trasero, frente levantado?",answers_es:["5-0","50-50","Nosegrind","Smith"],question_de:"Grind auf der Hinterachse, vorne angehoben?",answers_de:["5-0","50-50","Nosegrind","Smith"]},{level:6,question:"Logo featuring a screaming hand?",answers:["Powell Peralta","Santa Cruz","Creature","Toy Machine"],correctIndex:1,question_es:"Logotipo con una mano gritando?",answers_es:["Powell Peralta","Santa Cruz","Creature","Toy Machine"],question_de:"Logo mit einer schreienden Hand?",answers_de:["Powell Peralta","Santa Cruz","Creature","Toy Machine"]},{level:6,question:"Brand founded by Ed Templeton?",answers:["Toy Machine","Foundation","RVCA","Emerica"],correctIndex:0,question_es:"Marca fundada por Ed Templeton?",answers_es:["Toy Machine","Foundation","RVCA","Emerica"],question_de:"Marke gegrndet von Ed Templeton?",answers_de:["Toy Machine","Foundation","RVCA","Emerica"]},{level:7,question:"Famous 25-stair set in France?",answers:["Macba","Lyon 25","El Toro","Wallenberg"],correctIndex:1,question_es:"Famoso conjunto de 25 escaleras en Francia?",answers_es:["Macba","Lyon 25","El Toro","Wallenberg"],question_de:"Berhmtes 25-Stufen-Set in Frankreich?",answers_de:["Macba","Lyon 25","El Toro","Wallenberg"]},{level:7,question:"Street League Skateboarding (SLS) uses what scoring max?",answers:["100","10","10.0 (formerly)","50"],correctIndex:2,question_es:"Qu puntuacin mxima usa Street League Skateboarding (SLS)?",answers_es:["100","10","10.0 (anteriormente)","50"],question_de:"Welche Maximalpunktzahl verwendet die Street League Skateboarding (SLS)?",answers_de:["100","10","10.0 (ehemals)","50"]},{level:8,question:"Video: 'Yeah Right!' (2003) is by?",answers:["Girl","Chocolate","Lakaii","Flip"],correctIndex:0,question_es:"El video 'Yeah Right!' (2003) es de?",answers_es:["Girl","Chocolate","Lakaii","Flip"],question_de:"Video: 'Yeah Right!' (2003) ist von?",answers_de:["Girl","Chocolate","Lakaii","Flip"]},{level:8,question:"Who won SOTY in 2003?",answers:["Mark Appleyard","Daewon Song","Marc Johnson","Chris Cole"],correctIndex:0,question_es:"Quin gan el SOTY en 2003?",answers_es:["Mark Appleyard","Daewon Song","Marc Johnson","Chris Cole"],question_de:"Wer gewann SOTY im Jahr 2003?",answers_de:["Mark Appleyard","Daewon Song","Marc Johnson","Chris Cole"]},{level:9,question:"Jamie Thomas nickname?",answers:["The King","The Chief","The Boss","The General"],correctIndex:1,question_es:"Apodo de Jamie Thomas?",answers_es:["The King","The Chief","The Boss","The General"],question_de:"Spitzname von Jamie Thomas?",answers_de:["The King","The Chief","The Boss","The General"]},{level:9,question:"Who invented the crooked grind?",answers:["Eric Koston","Dan Peterka","Ricky Oyola","Disputed (Koston/Oyola)"],correctIndex:3,question_es:"Quin invent el crooked grind?",answers_es:["Eric Koston","Dan Peterka","Ricky Oyola","Disputado (Koston/Oyola)"],question_de:"Wer hat den Crooked Grind erfunden?",answers_de:["Eric Koston","Dan Peterka","Ricky Oyola","Umstritten (Koston/Oyola)"]},{level:10,question:"Who invented the McTwist?",answers:["Tony Hawk","Mike McGill","Steve Caballero","Lance Mountain"],correctIndex:1,question_es:"Quin invent el McTwist?",answers_es:["Tony Hawk","Mike McGill","Steve Caballero","Lance Mountain"],question_de:"Wer hat den McTwist erfunden?",answers_de:["Tony Hawk","Mike McGill","Steve Caballero","Lance Mountain"]},{level:10,question:"The Fakie 360 is also known as?",answers:["Caballerial","Gazelle","Bigspin","Helipop"],correctIndex:0,question_es:"El Fakie 360 tambin se conoce como?",answers_es:["Caballerial","Gazelle","Bigspin","Helipop"],question_de:"Der Fakie 360 ist auch bekannt als?",answers_de:["Caballerial","Gazelle","Bigspin","Helipop"]},{level:11,question:"What is a 'Gazelle Flip'?",answers:["360 Flip","Bigspin 360 Kickflip","Varial double flip","Laser flip 180"],correctIndex:1,question_es:"Qu es un 'Gazelle Flip'?",answers_es:["360 Flip","Bigspin 360 Kickflip","Varial double flip","Laser flip 180"],question_de:"Was ist ein 'Gazelle Flip'?",answers_de:["360 Flip","Bigspin 360 Kickflip","Varial double flip","Laser flip 180"]},{level:11,question:"Who invented the Darkslide?",answers:["Tony Hawk","Rodney Mullen","Natas Kaupas","Mark Gonzales"],correctIndex:1,question_es:"Quin invent el Darkslide?",answers_es:["Tony Hawk","Rodney Mullen","Natas Kaupas","Mark Gonzales"],question_de:"Wer hat den Darkslide erfunden?",answers_de:["Tony Hawk","Rodney Mullen","Natas Kaupas","Mark Gonzales"]},{level:12,question:"Founder of World Industries?",answers:["Rodney Mullen","Steve Rocco","Mike Vallely","Spike Jonze"],correctIndex:1,question_es:"Fundador de World Industries?",answers_es:["Rodney Mullen","Steve Rocco","Mike Vallely","Spike Jonze"],question_de:"Grnder von World Industries?",answers_de:["Rodney Mullen","Steve Rocco","Mike Vallely","Spike Jonze"]},{level:12,question:"Who owns Baker Boys Distribution?",answers:["Andrew Reynolds","Erik Ellington","Jim Greco","All of the above"],correctIndex:3,question_es:"Quin es dueo de Baker Boys Distribution?",answers_es:["Andrew Reynolds","Erik Ellington","Jim Greco","Todos los anteriores"],question_de:"Wem gehrt Baker Boys Distribution?",answers_de:["Andrew Reynolds","Erik Ellington","Jim Greco","Alle oben genannten"]},{level:13,question:"Highest Ollie official record holder?",answers:["Danny Way","Aldrin Garcia","Reese Forbes","Xavier Alford"],correctIndex:1,question_es:"Poseedor del rcord oficial de Ollie ms alto?",answers_es:["Danny Way","Aldrin Garcia","Reese Forbes","Xavier Alford"],question_de:"Offizieller Rekordhalter fr den hchsten Ollie?",answers_de:["Danny Way","Aldrin Garcia","Reese Forbes","Xavier Alford"]},{level:13,question:"Who ollied the Great Wall of China?",answers:["Bob Burnquist","Danny Way","Tony Hawk","Rob Dyrdek"],correctIndex:1,question_es:"Quin salt la Gran Muralla China con un Ollie?",answers_es:["Bob Burnquist","Danny Way","Tony Hawk","Rob Dyrdek"],question_de:"Wer hat einen Ollie ber die Chinesische Mauer gemacht?",answers_de:["Bob Burnquist","Danny Way","Tony Hawk","Rob Dyrdek"]},{level:14,question:"Who directed 'Mind Field'?",answers:["Spike Jonze","Greg Hunt","Ty Evans","French Fred"],correctIndex:1,question_es:"Quin dirigi 'Mind Field'?",answers_es:["Spike Jonze","Greg Hunt","Ty Evans","French Fred"],question_de:"Wer fhrte Regie bei 'Mind Field'?",answers_de:["Spike Jonze","Greg Hunt","Ty Evans","French Fred"]},{level:14,question:"Song in Jerry Hsu's 'Bag of Suck' part?",answers:["Just Like Honey","Build Me Up Buttercup","Where is my Mind","Maps"],correctIndex:0,question_es:"Cancin en la parte de Jerry Hsu en 'Bag of Suck'?",answers_es:["Just Like Honey","Build Me Up Buttercup","Where is my Mind","Maps"],question_de:"Song in Jerry Hsus 'Bag of Suck' Part?",answers_de:["Just Like Honey","Build Me Up Buttercup","Where is my Mind","Maps"]},{level:15,question:"Rodney Mullen's autobiography title?",answers:["The Mutt","The Hawk","Street King","Flatground"],correctIndex:0,question_es:"Ttulo de la autobiografa de Rodney Mullen?",answers_es:["The Mutt","The Hawk","Street King","Flatground"],question_de:"Titel von Rodney Mullens Autobiografie?",answers_de:["The Mutt","The Hawk","Street King","Flatground"]},{level:15,question:"Who is 'The Gonz'?",answers:["Mark Gonzales","Gonzalo Rodriguez","Steve Gonzalez","Mike Gonzales"],correctIndex:0,question_es:"Quin es 'The Gonz'?",answers_es:["Mark Gonzales","Gonzalo Rodriguez","Steve Gonzalez","Mike Gonzales"],question_de:"Wer ist 'The Gonz'?",answers_de:["Mark Gonzales","Gonzalo Rodriguez","Steve Gonzalez","Mike Gonzales"]}],lM=()=>{const t=[];for(let i=1;i<=15;i++){const a=A5.filter(c=>c.level===i),r=a.length>0?a:A5;for(let c=0;c<100;c++){const d=r[c%r.length];t.push({...d,level:i,question:d.question,question_es:d.question_es,answers_es:d.answers_es,question_de:d.question_de,answers_de:d.answers_de})}}return t},M5=lM(),eu=["Newbie","Pusher","Local","Grommet","Amateur","Flow","Sponsored","Ripper","Pro","Legend","Icon","Hall of Fame","GOAT","Godlike","THE MILLION"],cM=({onClose:t})=>{const[e,n]=V.useState("intro"),[i,a]=V.useState(0),[r,c]=V.useState(null),[d,p]=V.useState(null),[f,g]=V.useState([]),[_,b]=V.useState("en"),[S,w]=V.useState(!0),[E,N]=V.useState(!0);V.useEffect(()=>{if(e==="playing"){const P=i+1,M=M5.filter(F=>F.level===P);if(M.length>0){const F=Math.floor(Math.random()*M.length),B=M[F],H=[0,1,2,3];for(let q=H.length-1;q>0;q--){const Z=Math.floor(Math.random()*(q+1));[H[q],H[Z]]=[H[Z],H[q]]}const z=H.map(q=>B.answers[q]),j=B.answers_es?H.map(q=>B.answers_es[q]):void 0,$=B.answers_de?H.map(q=>B.answers_de[q]):void 0,oe=H.indexOf(B.correctIndex);c({...B,answers:z,answers_es:j,answers_de:$,correctIndex:oe})}else console.error(`No questions found for level ${P}`),c(M5[0])}},[i,e]);const k=P=>{d!==null||!r||(p(P),setTimeout(()=>{P===r.correctIndex?i===eu.length-1?n("won"):(a(M=>M+1),p(null),g([])):n("lost")},1500))},L=()=>{if(!S||!r)return;const M=r.answers.map((F,B)=>B).filter(F=>F!==r.correctIndex).sort(()=>.5-Math.random()).slice(0,2);g(M),w(!1)},R=async()=>{if(!E||!r)return;const M={title:"INVERT FM Skate Quiz",text:`I'm testing my skate knowledge on INVERT FM! Can you help me with this question: ${I(r)}`,url:window.location.href};try{navigator.share?await navigator.share(M):(await navigator.clipboard.writeText(M.text),alert("Question copied to clipboard! Send it to a friend.")),N(!1),p(r.correctIndex),setTimeout(()=>{i===eu.length-1?n("won"):(a(F=>F+1),p(null),g([]))},1e3)}catch(F){console.log("Share canceled or failed",F)}},O=()=>{n("intro"),a(0),p(null),g([]),w(!0),N(!0)},I=P=>_==="es"?P.question_es||P.question:_==="de"&&P.question_de||P.question,G=P=>_==="es"?P.answers_es||P.answers:_==="de"&&P.answers_de||P.answers;return e==="intro"?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-800 to-gray-900 z-0"}),h.jsxs("div",{className:"z-10 text-center max-w-md w-full",children:[h.jsxs("h1",{className:"text-5xl font-black mb-6 tracking-tighter",children:[h.jsx("span",{className:"text-white",children:"SKATE"}),h.jsx("span",{className:"text-[#c52323]",children:"QUIZ"})]}),h.jsxs("p",{className:"text-gray-400 mb-8 text-lg",children:["15 Questions.",h.jsx("br",{}),"2 Lifelines.",h.jsx("br",{}),"1 Million imaginary dollars."]}),h.jsx("button",{onClick:()=>n("playing"),className:"w-full bg-[#c52323] hover:bg-[#a91f1f] text-white font-bold py-4 rounded-xl text-xl transition-transform transform active:scale-95 shadow-lg mb-4",children:"START GAME"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white",children:"Back to Menu"})]})]}):e==="won"||e==="lost"?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 text-center",children:[h.jsx("h2",{className:"text-4xl font-bold mb-4",children:e==="won"?"LEGENDARY!":"BAILED!"}),h.jsxs("p",{className:"text-xl text-gray-300 mb-2",children:["You reached level ",i+1]}),h.jsx("p",{className:"text-[#c52323] font-bold text-2xl mb-8",children:eu[Math.max(0,i-(e==="lost"?1:0))]}),h.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[h.jsx("button",{onClick:O,className:"bg-white text-black font-bold py-3 rounded-lg hover:bg-gray-200",children:"Try Again"}),h.jsx("button",{onClick:t,className:"border border-gray-600 text-gray-400 font-bold py-3 rounded-lg hover:border-white hover:text-white",children:"Exit"})]})]}):r?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-800/50 backdrop-blur-sm",children:[h.jsxs("span",{className:"font-bold text-lg",children:["Lv. ",i+1," / 15"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>b("en"),className:`px-2 py-1 rounded text-xs font-bold ${_==="en"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"EN"}),h.jsx("button",{onClick:()=>b("es"),className:`px-2 py-1 rounded text-xs font-bold ${_==="es"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"ES"}),h.jsx("button",{onClick:()=>b("de"),className:`px-2 py-1 rounded text-xs font-bold ${_==="de"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"DE"})]}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"Exit"})]}),h.jsxs("div",{className:"flex-grow flex flex-col md:flex-row max-w-6xl mx-auto w-full p-4 gap-6",children:[h.jsx("div",{className:"md:order-2 md:w-64 flex-shrink-0 flex flex-col-reverse gap-1 p-4 bg-black/20 rounded-xl border border-white/5 overflow-y-auto max-h-[30vh] md:max-h-none",children:eu.map((P,M)=>{let F="text-gray-600 bg-gray-800/50";return M<i&&(F="text-yellow-500 font-bold bg-yellow-500/10 border border-yellow-500/30"),M===i&&(F="text-white font-bold bg-[#c52323] shadow-[0_0_15px_rgba(197,35,35,0.5)] scale-105 z-10"),h.jsxs("div",{className:`flex justify-between px-3 py-1.5 rounded text-xs md:text-sm transition-all ${F}`,children:[h.jsx("span",{children:M+1}),h.jsx("span",{children:P})]},M)})}),h.jsxs("div",{className:"flex-grow flex flex-col justify-center md:order-1",children:[h.jsxs("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 border border-gray-700 p-6 md:p-10 rounded-2xl shadow-2xl text-center mb-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[#c52323]"}),h.jsx("h2",{className:"text-xl md:text-3xl font-bold leading-relaxed",children:I(r)})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G(r).map((P,M)=>{const F=d===M,B=M===r.correctIndex,H=f.includes(M),z=d!==null;let j="bg-gray-800 border-2 border-gray-700 hover:border-gray-500 hover:bg-gray-750";return H?j="bg-gray-900 border-transparent opacity-0 pointer-events-none":z?F?j=B?"bg-green-600 border-green-400 animate-pulse":"bg-red-600 border-red-400":B?j="bg-green-600 border-green-400":j="bg-gray-800 border-gray-700 opacity-50":F&&(j="bg-[#c52323] border-white"),h.jsxs("button",{onClick:()=>k(M),disabled:d!==null||H,className:`py-4 px-6 rounded-xl text-lg font-semibold transition-all duration-200 flex items-center gap-4 text-left ${j}`,children:[h.jsxs("span",{className:"text-[#c52323] font-black text-xl",children:[String.fromCharCode(65+M),":"]}),P]},M)})}),h.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[h.jsx("button",{onClick:L,disabled:!S||d!==null,className:`flex flex-col items-center gap-1 transition-opacity ${S?"opacity-100 hover:scale-105":"opacity-30 cursor-not-allowed"}`,title:"50/50: Remove two wrong answers",children:h.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-[#c52323] flex items-center justify-center font-bold text-xl bg-gray-800",children:"50:50"})}),h.jsx("button",{onClick:R,disabled:!E||d!==null,className:`flex flex-col items-center gap-1 transition-opacity ${E?"opacity-100 hover:scale-105":"opacity-30 cursor-not-allowed"}`,title:"Ask a Friend: Skip this question",children:h.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-[#c52323] flex items-center justify-center bg-gray-800",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})})]})]})]})]}):h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:"Loading..."})},tu=["Novice","Beginner","Learner","Amateur","Educated","Competent","Skilled","Proficient","Expert","Scholar","Master","Grandmaster","Genius","Sage","Omniscient"],k5=[{level:1,question:"What is the capital of France?",answers:["Berlin","Madrid","Paris","Rome"],correctIndex:2,question_es:"Cul es la capital de Francia?",answers_es:["Berln","Madrid","Pars","Roma"],question_de:"Was ist die Hauptstadt von Frankreich?",answers_de:["Berlin","Madrid","Paris","Rom"]},{level:1,question:"How many legs does a spider have?",answers:["Six","Eight","Ten","Twelve"],correctIndex:1,question_es:"Cuntas patas tiene una araa?",answers_es:["Seis","Ocho","Diez","Doce"],question_de:"Wie viele Beine hat eine Spinne?",answers_de:["Sechs","Acht","Zehn","Zwlf"]},{level:1,question:"Which planet is known as the Red Planet?",answers:["Mars","Jupiter","Venus","Saturn"],correctIndex:0,question_es:"Qu planeta es conocido como el Planeta Rojo?",answers_es:["Marte","Jpiter","Venus","Saturno"],question_de:"Welcher Planet ist als der Rote Planet bekannt?",answers_de:["Mars","Jupiter","Venus","Saturn"]},{level:1,question:"What is H2O commonly known as?",answers:["Salt","Sugar","Water","Gold"],correctIndex:2,question_es:"Cmo se conoce comnmente al H2O?",answers_es:["Sal","Azcar","Agua","Oro"],question_de:"Als was ist H2O gemeinhin bekannt?",answers_de:["Salz","Zucker","Wasser","Gold"]},{level:2,question:"Who painted the Mona Lisa?",answers:["Van Gogh","Picasso","Da Vinci","Monet"],correctIndex:2,question_es:"Quin pint la Mona Lisa?",answers_es:["Van Gogh","Picasso","Da Vinci","Monet"],question_de:"Wer malte die Mona Lisa?",answers_de:["Van Gogh","Picasso","Da Vinci","Monet"]},{level:2,question:"What is the largest ocean on Earth?",answers:["Atlantic","Indian","Pacific","Arctic"],correctIndex:2,question_es:"Cul es el ocano ms grande de la Tierra?",answers_es:["Atlntico","ndico","Pacfico","rtico"],question_de:"Welches ist der grte Ozean der Erde?",answers_de:["Atlantik","Indischer Ozean","Pazifik","Arktis"]},{level:3,question:"What is the chemical symbol for Gold?",answers:["Go","Gd","Au","Ag"],correctIndex:2,question_es:"Cul es el smbolo qumico del oro?",answers_es:["Go","Gd","Au","Ag"],question_de:"Was ist das chemische Symbol fr Gold?",answers_de:["Go","Gd","Au","Ag"]},{level:3,question:"Which country invented pizza?",answers:["France","Italy","USA","Greece"],correctIndex:1,question_es:"Qu pas invent la pizza?",answers_es:["Francia","Italia","EE. UU.","Grecia"],question_de:"Welches Land hat die Pizza erfunden?",answers_de:["Frankreich","Italien","USA","Griechenland"]},{level:4,question:"Who wrote 'Romeo and Juliet'?",answers:["Charles Dickens","William Shakespeare","Mark Twain","Jane Austen"],correctIndex:1,question_es:"Quin escribi 'Romeo y Julieta'?",answers_es:["Charles Dickens","William Shakespeare","Mark Twain","Jane Austen"],question_de:"Wer schrieb 'Romeo und Julia'?",answers_de:["Charles Dickens","William Shakespeare","Mark Twain","Jane Austen"]},{level:4,question:"How many continents are there?",answers:["5","6","7","8"],correctIndex:2,question_es:"Cuntos continentes hay?",answers_es:["5","6","7","8"],question_de:"Wie viele Kontinente gibt es?",answers_de:["5","6","7","8"]},{level:5,question:"What year did World War II end?",answers:["1940","1942","1945","1950"],correctIndex:2,question_es:"En qu ao termin la Segunda Guerra Mundial?",answers_es:["1940","1942","1945","1950"],question_de:"In welchem Jahr endete der Zweite Weltkrieg?",answers_de:["1940","1942","1945","1950"]},{level:5,question:"What is the hardest natural substance?",answers:["Gold","Iron","Diamond","Platinum"],correctIndex:2,question_es:"Cul es la sustancia natural ms dura?",answers_es:["Oro","Hierro","Diamante","Platino"],question_de:"Was ist die hrteste natrliche Substanz?",answers_de:["Gold","Eisen","Diamant","Platin"]},{level:6,question:"Which element is needed for combustion?",answers:["Helium","Oxygen","Carbon","Nitrogen"],correctIndex:1,question_es:"Qu elemento es necesario para la combustin?",answers_es:["Helio","Oxgeno","Carbono","Nitrgeno"],question_de:"Welches Element wird fr die Verbrennung bentigt?",answers_de:["Helium","Sauerstoff","Kohlenstoff","Stickstoff"]},{level:6,question:"What is the capital of Japan?",answers:["Beijing","Seoul","Tokyo","Bangkok"],correctIndex:2,question_es:"Cul es la capital de Japn?",answers_es:["Pekn","Sel","Tokio","Bangkok"],question_de:"Was ist die Hauptstadt von Japan?",answers_de:["Peking","Seoul","Tokio","Bangkok"]},{level:7,question:"Who discovered penicillin?",answers:["Alexander Fleming","Marie Curie","Isaac Newton","Albert Einstein"],correctIndex:0,question_es:"Quin descubri la penicilina?",answers_es:["Alexander Fleming","Marie Curie","Isaac Newton","Albert Einstein"],question_de:"Wer entdeckte das Penicillin?",answers_de:["Alexander Fleming","Marie Curie","Isaac Newton","Albert Einstein"]},{level:7,question:"How many bones are in the adult human body?",answers:["200","206","212","250"],correctIndex:1,question_es:"Cuntos huesos tiene el cuerpo humano adulto?",answers_es:["200","206","212","250"],question_de:"Wie viele Knochen hat der erwachsene menschliche Krper?",answers_de:["200","206","212","250"]},{level:8,question:"What is the speed of light (approx)?",answers:["300,000 km/s","150,000 km/s","1,000 km/s","Sound speed"],correctIndex:0,question_es:"Cul es la velocidad de la luz (aprox)?",answers_es:["300,000 km/s","150,000 km/s","1,000 km/s","Velocidad del sonido"],question_de:"Wie hoch ist die Lichtgeschwindigkeit (ca.)?",answers_de:["300.000 km/s","150.000 km/s","1.000 km/s","Schallgeschwindigkeit"]},{level:8,question:"Which planet has the most moons?",answers:["Earth","Mars","Jupiter","Saturn"],correctIndex:3,question_es:"Qu planeta tiene ms lunas?",answers_es:["Tierra","Marte","Jpiter","Saturno"],question_de:"Welcher Planet hat die meisten Monde?",answers_de:["Erde","Mars","Jupiter","Saturn"]},{level:9,question:"Who developed the theory of relativity?",answers:["Newton","Einstein","Galileo","Hawking"],correctIndex:1,question_es:"Quin desarroll la teora de la relatividad?",answers_es:["Newton","Einstein","Galileo","Hawking"],question_de:"Wer entwickelte die Relativittstheorie?",answers_de:["Newton","Einstein","Galileo","Hawking"]},{level:9,question:"What is the smallest country in the world?",answers:["Monaco","Vatican City","San Marino","Liechtenstein"],correctIndex:1,question_es:"Cul es el pas ms pequeo del mundo?",answers_es:["Mnaco","Ciudad del Vaticano","San Marino","Liechtenstein"],question_de:"Welches ist das kleinste Land der Welt?",answers_de:["Monaco","Vatikanstadt","San Marino","Liechtenstein"]},{level:10,question:"What is the capital of Australia?",answers:["Sydney","Melbourne","Canberra","Perth"],correctIndex:2,question_es:"Cul es la capital de Australia?",answers_es:["Sdney","Melbourne","Canberra","Perth"],question_de:"Was ist die Hauptstadt von Australien?",answers_de:["Sydney","Melbourne","Canberra","Perth"]},{level:10,question:"Which gas is most abundant in the Earth's atmosphere?",answers:["Oxygen","Carbon Dioxide","Nitrogen","Hydrogen"],correctIndex:2,question_es:"Qu gas es ms abundante en la atmsfera de la Tierra?",answers_es:["Oxgeno","Dixido de carbono","Nitrgeno","Hidrgeno"],question_de:"Welches Gas ist in der Erdatmosphre am hufigsten vorhanden?",answers_de:["Sauerstoff","Kohlendioxid","Stickstoff","Wasserstoff"]},{level:11,question:"Who wrote '1984'?",answers:["Aldous Huxley","George Orwell","Ray Bradbury","H.G. Wells"],correctIndex:1,question_es:"Quin escribi '1984'?",answers_es:["Aldous Huxley","George Orwell","Ray Bradbury","H.G. Wells"],question_de:"Wer schrieb '1984'?",answers_de:["Aldous Huxley","George Orwell","Ray Bradbury","H.G. Wells"]},{level:11,question:"In which year did the Titanic sink?",answers:["1910","1912","1914","1920"],correctIndex:1,question_es:"En qu ao se hundi el Titanic?",answers_es:["1910","1912","1914","1920"],question_de:"In welchem Jahr sank die Titanic?",answers_de:["1910","1912","1914","1920"]},{level:12,question:"What is the longest river in the world?",answers:["Amazon","Nile","Yangtze","Mississippi"],correctIndex:1,question_es:"Cul es el ro ms largo del mundo?",answers_es:["Amazonas","Nilo","Yangts","Misisipi"],question_de:"Welches ist der lngste Fluss der Welt?",answers_de:["Amazonas","Nil","Jangtsekiang","Mississippi"]},{level:12,question:"Which organ has four chambers?",answers:["Liver","Brain","Heart","Lungs"],correctIndex:2,question_es:"Qu rgano tiene cuatro cmaras?",answers_es:["Hgado","Cerebro","Corazn","Pulmones"],question_de:"Welches Organ hat vier Kammern?",answers_de:["Leber","Gehirn","Herz","Lungen"]},{level:13,question:"What represents 'K' in the periodic table?",answers:["Krypton","Potassium","Calcium","Iron"],correctIndex:1,question_es:"Qu representa la 'K' en la tabla peridica?",answers_es:["Kriptn","Potasio","Calcio","Hierro"],question_de:"Was steht fr 'K' im Periodensystem?",answers_de:["Krypton","Kalium","Calcium","Eisen"]},{level:13,question:"Who was the first man in space?",answers:["Neil Armstrong","Buzz Aldrin","Yuri Gagarin","John Glenn"],correctIndex:2,question_es:"Quin fue el primer hombre en el espacio?",answers_es:["Neil Armstrong","Buzz Aldrin","Yuri Gagarin","John Glenn"],question_de:"Wer war der erste Mensch im Weltraum?",answers_de:["Neil Armstrong","Buzz Aldrin","Juri Gagarin","John Glenn"]},{level:14,question:"What is the square root of 144?",answers:["10","11","12","14"],correctIndex:2,question_es:"Cul es la raz cuadrada de 144?",answers_es:["10","11","12","14"],question_de:"Was ist die Quadratwurzel aus 144?",answers_de:["10","11","12","14"]},{level:14,question:"In computer science, what does CPU stand for?",answers:["Central Processing Unit","Central Process Utility","Computer Personal Unit","Control Processing Unit"],correctIndex:0,question_es:"En informtica, qu significa CPU?",answers_es:["Unidad Central de Procesamiento","Utilidad de Proceso Central","Unidad Personal de Computadora","Unidad de Procesamiento de Control"],question_de:"Wofr steht CPU in der Informatik?",answers_de:["Central Processing Unit","Central Process Utility","Computer Personal Unit","Control Processing Unit"]},{level:15,question:"What is the powerhouse of the cell?",answers:["Nucleus","Ribosome","Mitochondria","Cytoplasm"],correctIndex:2,question_es:"Cul es la central energtica de la clula?",answers_es:["Ncleo","Ribosoma","Mitocondria","Citoplasma"],question_de:"Was ist das Kraftwerk der Zelle?",answers_de:["Zellkern","Ribosom","Mitochondrium","Zytoplasma"]},{level:15,question:"Which year did the Berlin Wall fall?",answers:["1987","1989","1991","1993"],correctIndex:1,question_es:"En qu ao cay el Muro de Berln?",answers_es:["1987","1989","1991","1993"],question_de:"In welchem Jahr fiel die Berliner Mauer?",answers_de:["1987","1989","1991","1993"]}],uM=()=>{const t=[];for(let i=1;i<=15;i++){const a=k5.filter(c=>c.level===i),r=a.length>0?a:k5;for(let c=0;c<100;c++){const d=r[c%r.length];t.push({...d,level:i,question:d.question})}}return t},R5=uM(),dM=({onClose:t})=>{const[e,n]=V.useState("intro"),[i,a]=V.useState(0),[r,c]=V.useState(null),[d,p]=V.useState(null),[f,g]=V.useState([]),[_,b]=V.useState("en"),[S,w]=V.useState(!0),[E,N]=V.useState(!0);V.useEffect(()=>{if(e==="playing"){const P=i+1,M=R5.filter(F=>F.level===P);if(M.length>0){const F=Math.floor(Math.random()*M.length),B=M[F],H=[0,1,2,3];for(let q=H.length-1;q>0;q--){const Z=Math.floor(Math.random()*(q+1));[H[q],H[Z]]=[H[Z],H[q]]}const z=H.map(q=>B.answers[q]),j=B.answers_es?H.map(q=>B.answers_es[q]):void 0,$=B.answers_de?H.map(q=>B.answers_de[q]):void 0,oe=H.indexOf(B.correctIndex);c({...B,answers:z,answers_es:j,answers_de:$,correctIndex:oe})}else console.error(`No questions found for level ${P}`),c(R5[0])}},[i,e]);const k=P=>{d!==null||!r||(p(P),setTimeout(()=>{P===r.correctIndex?i===tu.length-1?n("won"):(a(M=>M+1),p(null),g([])):n("lost")},1500))},L=()=>{if(!S||!r)return;const M=r.answers.map((F,B)=>B).filter(F=>F!==r.correctIndex).sort(()=>.5-Math.random()).slice(0,2);g(M),w(!1)},R=async()=>{if(!E||!r)return;const M={title:"INVERT FM General Quiz",text:`Help! I'm stuck on this question: ${I(r)}`,url:window.location.href};try{navigator.share?await navigator.share(M):(await navigator.clipboard.writeText(M.text),alert("Question copied! Send it to a friend.")),N(!1),p(r.correctIndex),setTimeout(()=>{i===tu.length-1?n("won"):(a(F=>F+1),p(null),g([]))},1e3)}catch(F){console.log("Share canceled or failed",F)}},O=()=>{n("intro"),a(0),p(null),g([]),w(!0),N(!0)},I=P=>_==="es"?P.question_es||P.question:_==="de"&&P.question_de||P.question,G=P=>_==="es"?P.answers_es||P.answers:_==="de"&&P.answers_de||P.answers;return e==="intro"?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900 to-gray-900 z-0"}),h.jsxs("div",{className:"z-10 text-center max-w-md w-full",children:[h.jsxs("h1",{className:"text-5xl font-black mb-2 tracking-tighter",children:[h.jsx("span",{className:"text-white",children:"GENERAL"}),h.jsx("span",{className:"text-blue-500",children:" QUIZ"})]}),h.jsx("p",{className:"text-xl text-white font-semibold mb-6 tracking-wide",children:"Test your general knowledge"}),h.jsxs("p",{className:"text-gray-400 mb-8 text-lg",children:["1500 Questions.",h.jsx("br",{}),"15 Levels of difficulty.",h.jsx("br",{}),"Become Omniscient."]}),h.jsx("button",{onClick:()=>n("playing"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl text-xl transition-transform transform active:scale-95 shadow-lg mb-4",children:"START GAME"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white",children:"Back to Menu"})]})]}):e==="won"||e==="lost"?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 text-center",children:[h.jsx("h2",{className:"text-4xl font-bold mb-4",children:e==="won"?"OMNISCIENT!":"GAME OVER"}),h.jsxs("p",{className:"text-xl text-gray-300 mb-2",children:["You reached level ",i+1]}),h.jsx("p",{className:"text-blue-500 font-bold text-2xl mb-8",children:tu[Math.max(0,i-(e==="lost"?1:0))]}),h.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[h.jsx("button",{onClick:O,className:"bg-white text-black font-bold py-3 rounded-lg hover:bg-gray-200",children:"Try Again"}),h.jsx("button",{onClick:t,className:"border border-gray-600 text-gray-400 font-bold py-3 rounded-lg hover:border-white hover:text-white",children:"Exit"})]})]}):r?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-800/50 backdrop-blur-sm",children:[h.jsxs("span",{className:"font-bold text-lg text-blue-400",children:["Lv. ",i+1," / 15"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>b("en"),className:`px-2 py-1 rounded text-xs font-bold ${_==="en"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"EN"}),h.jsx("button",{onClick:()=>b("es"),className:`px-2 py-1 rounded text-xs font-bold ${_==="es"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"ES"}),h.jsx("button",{onClick:()=>b("de"),className:`px-2 py-1 rounded text-xs font-bold ${_==="de"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"DE"})]}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"Exit"})]}),h.jsxs("div",{className:"flex-grow flex flex-col md:flex-row max-w-6xl mx-auto w-full p-4 gap-6",children:[h.jsx("div",{className:"md:order-2 md:w-64 flex-shrink-0 flex flex-col-reverse gap-1 p-4 bg-black/20 rounded-xl border border-white/5 overflow-y-auto max-h-[30vh] md:max-h-none",children:tu.map((P,M)=>{let F="text-gray-600 bg-gray-800/50";return M<i&&(F="text-blue-300 font-bold bg-blue-900/20 border border-blue-500/30"),M===i&&(F="text-white font-bold bg-blue-600 shadow-[0_0_15px_rgba(37,99,235,0.5)] scale-105 z-10"),h.jsxs("div",{className:`flex justify-between px-3 py-1.5 rounded text-xs md:text-sm transition-all ${F}`,children:[h.jsx("span",{children:M+1}),h.jsx("span",{children:P})]},M)})}),h.jsxs("div",{className:"flex-grow flex flex-col justify-center md:order-1",children:[h.jsxs("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 border border-gray-700 p-6 md:p-10 rounded-2xl shadow-2xl text-center mb-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-blue-500"}),h.jsx("h2",{className:"text-xl md:text-3xl font-bold leading-relaxed",children:I(r)})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G(r).map((P,M)=>{const F=d===M,B=M===r.correctIndex,H=f.includes(M),z=d!==null;let j="bg-gray-800 border-2 border-gray-700 hover:border-gray-500 hover:bg-gray-750";return H?j="bg-gray-900 border-transparent opacity-0 pointer-events-none":z?F?j=B?"bg-green-600 border-green-400 animate-pulse":"bg-red-600 border-red-400":B?j="bg-green-600 border-green-400":j="bg-gray-800 border-gray-700 opacity-50":F&&(j="bg-blue-600 border-white"),h.jsxs("button",{onClick:()=>k(M),disabled:d!==null||H,className:`py-4 px-6 rounded-xl text-lg font-semibold transition-all duration-200 flex items-center gap-4 text-left ${j}`,children:[h.jsxs("span",{className:"text-blue-400 font-black text-xl",children:[String.fromCharCode(65+M),":"]}),P]},M)})}),h.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[h.jsx("button",{onClick:L,disabled:!S||d!==null,className:`flex flex-col items-center gap-1 transition-opacity ${S?"opacity-100 hover:scale-105":"opacity-30 cursor-not-allowed"}`,title:"50/50",children:h.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-blue-500 flex items-center justify-center font-bold text-xl bg-gray-800",children:"50:50"})}),h.jsx("button",{onClick:R,disabled:!E||d!==null,className:`flex flex-col items-center gap-1 transition-opacity ${E?"opacity-100 hover:scale-105":"opacity-30 cursor-not-allowed"}`,title:"Ask a Friend",children:h.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-blue-500 flex items-center justify-center bg-gray-800",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})})]})]})]})]}):h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:"Loading..."})},nu=["Tourist","Backpacker","Traveler","Voyager","Explorer","Navigator","Nomad","Cartographer","Diplomat","Ambassador","Minister","President","Emperor","Global Citizen","THE MILLION"],M2=[{level:1,country:{en:"France",es:"Francia",de:"Frankreich"},capital:{en:"Paris",es:"Pars",de:"Paris"}},{level:1,country:{en:"USA",es:"EE. UU.",de:"USA"},capital:{en:"Washington D.C.",es:"Washington D.C.",de:"Washington D.C."}},{level:1,country:{en:"United Kingdom",es:"Reino Unido",de:"Vereinigtes Knigreich"},capital:{en:"London",es:"Londres",de:"London"}},{level:1,country:{en:"Germany",es:"Alemania",de:"Deutschland"},capital:{en:"Berlin",es:"Berln",de:"Berlin"}},{level:1,country:{en:"Italy",es:"Italia",de:"Italien"},capital:{en:"Rome",es:"Roma",de:"Rom"}},{level:1,country:{en:"Spain",es:"Espaa",de:"Spanien"},capital:{en:"Madrid",es:"Madrid",de:"Madrid"}},{level:1,country:{en:"Japan",es:"Japn",de:"Japan"},capital:{en:"Tokyo",es:"Tokio",de:"Tokio"}},{level:2,country:{en:"China",es:"China",de:"China"},capital:{en:"Beijing",es:"Pekn",de:"Peking"}},{level:2,country:{en:"Russia",es:"Rusia",de:"Russland"},capital:{en:"Moscow",es:"Mosc",de:"Moskau"}},{level:2,country:{en:"Egypt",es:"Egipto",de:"gypten"},capital:{en:"Cairo",es:"El Cairo",de:"Kairo"}},{level:2,country:{en:"Brazil",es:"Brasil",de:"Brasilien"},capital:{en:"Braslia",es:"Brasilia",de:"Braslia"}},{level:2,country:{en:"Argentina",es:"Argentina",de:"Argentinien"},capital:{en:"Buenos Aires",es:"Buenos Aires",de:"Buenos Aires"}},{level:2,country:{en:"Mexico",es:"Mxico",de:"Mexiko"},capital:{en:"Mexico City",es:"Ciudad de Mxico",de:"Mexiko-Stadt"}},{level:3,country:{en:"Canada",es:"Canad",de:"Kanada"},capital:{en:"Ottawa",es:"Ottawa",de:"Ottawa"}},{level:3,country:{en:"Australia",es:"Australia",de:"Australien"},capital:{en:"Canberra",es:"Camberra",de:"Canberra"}},{level:3,country:{en:"India",es:"India",de:"Indien"},capital:{en:"New Delhi",es:"Nueva Delhi",de:"Neu-Delhi"}},{level:3,country:{en:"Greece",es:"Grecia",de:"Griechenland"},capital:{en:"Athens",es:"Atenas",de:"Athen"}},{level:3,country:{en:"Netherlands",es:"Pases Bajos",de:"Niederlande"},capital:{en:"Amsterdam",es:"msterdam",de:"Amsterdam"}},{level:3,country:{en:"Portugal",es:"Portugal",de:"Portugal"},capital:{en:"Lisbon",es:"Lisboa",de:"Lissabon"}},{level:4,country:{en:"Sweden",es:"Suecia",de:"Schweden"},capital:{en:"Stockholm",es:"Estocolmo",de:"Stockholm"}},{level:4,country:{en:"Norway",es:"Noruega",de:"Norwegen"},capital:{en:"Oslo",es:"Oslo",de:"Oslo"}},{level:4,country:{en:"Turkey",es:"Turqua",de:"Trkei"},capital:{en:"Ankara",es:"Ankara",de:"Ankara"}},{level:4,country:{en:"South Korea",es:"Corea del Sur",de:"Sdkorea"},capital:{en:"Seoul",es:"Sel",de:"Seoul"}},{level:4,country:{en:"Thailand",es:"Tailandia",de:"Thailand"},capital:{en:"Bangkok",es:"Bangkok",de:"Bangkok"}},{level:4,country:{en:"Austria",es:"Austria",de:"sterreich"},capital:{en:"Vienna",es:"Viena",de:"Wien"}},{level:5,country:{en:"Colombia",es:"Colombia",de:"Kolumbien"},capital:{en:"Bogot",es:"Bogot",de:"Bogot"}},{level:5,country:{en:"Peru",es:"Per",de:"Peru"},capital:{en:"Lima",es:"Lima",de:"Lima"}},{level:5,country:{en:"South Africa",es:"Sudfrica",de:"Sdafrika"},capital:{en:"Pretoria",es:"Pretoria",de:"Pretoria"}},{level:5,country:{en:"Kenya",es:"Kenia",de:"Kenia"},capital:{en:"Nairobi",es:"Nairobi",de:"Nairobi"}},{level:5,country:{en:"Morocco",es:"Marruecos",de:"Marokko"},capital:{en:"Rabat",es:"Rabat",de:"Rabat"}},{level:5,country:{en:"Chile",es:"Chile",de:"Chile"},capital:{en:"Santiago",es:"Santiago",de:"Santiago"}},{level:6,country:{en:"Poland",es:"Polonia",de:"Polen"},capital:{en:"Warsaw",es:"Varsovia",de:"Warschau"}},{level:6,country:{en:"Ukraine",es:"Ucrania",de:"Ukraine"},capital:{en:"Kyiv",es:"Kiev",de:"Kiew"}},{level:6,country:{en:"Vietnam",es:"Vietnam",de:"Vietnam"},capital:{en:"Hanoi",es:"Hani",de:"Hanoi"}},{level:6,country:{en:"Iran",es:"Irn",de:"Iran"},capital:{en:"Tehran",es:"Tehern",de:"Teheran"}},{level:6,country:{en:"Iraq",es:"Irak",de:"Irak"},capital:{en:"Baghdad",es:"Bagdad",de:"Bagdad"}},{level:6,country:{en:"Saudi Arabia",es:"Arabia Saudita",de:"Saudi-Arabien"},capital:{en:"Riyadh",es:"Riad",de:"Riad"}},{level:7,country:{en:"New Zealand",es:"Nueva Zelanda",de:"Neuseeland"},capital:{en:"Wellington",es:"Wellington",de:"Wellington"}},{level:7,country:{en:"Finland",es:"Finlandia",de:"Finnland"},capital:{en:"Helsinki",es:"Helsinki",de:"Helsinki"}},{level:7,country:{en:"Pakistan",es:"Pakistn",de:"Pakistan"},capital:{en:"Islamabad",es:"Islamabad",de:"Islamabad"}},{level:7,country:{en:"Nigeria",es:"Nigeria",de:"Nigeria"},capital:{en:"Abuja",es:"Abuya",de:"Abuja"}},{level:7,country:{en:"Philippines",es:"Filipinas",de:"Philippinen"},capital:{en:"Manila",es:"Manila",de:"Manila"}},{level:7,country:{en:"Hungary",es:"Hungra",de:"Ungarn"},capital:{en:"Budapest",es:"Budapest",de:"Budapest"}},{level:8,country:{en:"Switzerland",es:"Suiza",de:"Schweiz"},capital:{en:"Bern",es:"Berna",de:"Bern"}},{level:8,country:{en:"Romania",es:"Rumania",de:"Rumnien"},capital:{en:"Bucharest",es:"Bucarest",de:"Bukarest"}},{level:8,country:{en:"Cuba",es:"Cuba",de:"Kuba"},capital:{en:"Havana",es:"La Habana",de:"Havanna"}},{level:8,country:{en:"Venezuela",es:"Venezuela",de:"Venezuela"},capital:{en:"Caracas",es:"Caracas",de:"Caracas"}},{level:8,country:{en:"Ethiopia",es:"Etiopa",de:"thiopien"},capital:{en:"Addis Ababa",es:"Ads Abeba",de:"Addis Abeba"}},{level:8,country:{en:"Jamaica",es:"Jamaica",de:"Jamaika"},capital:{en:"Kingston",es:"Kingston",de:"Kingston"}},{level:9,country:{en:"Senegal",es:"Senegal",de:"Senegal"},capital:{en:"Dakar",es:"Dakar",de:"Dakar"}},{level:9,country:{en:"Iceland",es:"Islandia",de:"Island"},capital:{en:"Reykjavik",es:"Reikiavik",de:"Reykjavik"}},{level:9,country:{en:"Lebanon",es:"Lbano",de:"Libanon"},capital:{en:"Beirut",es:"Beirut",de:"Beirut"}},{level:9,country:{en:"Uruguay",es:"Uruguay",de:"Uruguay"},capital:{en:"Montevideo",es:"Montevideo",de:"Montevideo"}},{level:9,country:{en:"Bulgaria",es:"Bulgaria",de:"Bulgarien"},capital:{en:"Sofia",es:"Sofa",de:"Sofia"}},{level:10,country:{en:"Mongolia",es:"Mongolia",de:"Mongolei"},capital:{en:"Ulaanbaatar",es:"Uln Bator",de:"Ulaanbaatar"}},{level:10,country:{en:"Kazakhstan",es:"Kazajistn",de:"Kasachstan"},capital:{en:"Astana",es:"Astan",de:"Astana"}},{level:10,country:{en:"Slovakia",es:"Eslovaquia",de:"Slowakei"},capital:{en:"Bratislava",es:"Bratislava",de:"Bratislava"}},{level:10,country:{en:"Ecuador",es:"Ecuador",de:"Ecuador"},capital:{en:"Quito",es:"Quito",de:"Quito"}},{level:10,country:{en:"Madagascar",es:"Madagascar",de:"Madagaskar"},capital:{en:"Antananarivo",es:"Antananarivo",de:"Antananarivo"}},{level:11,country:{en:"Uzbekistan",es:"Uzbekistn",de:"Usbekistan"},capital:{en:"Tashkent",es:"Taskent",de:"Taschkent"}},{level:11,country:{en:"Lithuania",es:"Lituania",de:"Litauen"},capital:{en:"Vilnius",es:"Vilna",de:"Vilnius"}},{level:11,country:{en:"Jordan",es:"Jordania",de:"Jordanien"},capital:{en:"Amman",es:"Amn",de:"Amman"}},{level:11,country:{en:"Ghana",es:"Ghana",de:"Ghana"},capital:{en:"Accra",es:"Accra",de:"Accra"}},{level:11,country:{en:"Bolivia",es:"Bolivia",de:"Bolivien"},capital:{en:"Sucre",es:"Sucre",de:"Sucre"}},{level:12,country:{en:"Azerbaijan",es:"Azerbaiyn",de:"Aserbaidschan"},capital:{en:"Baku",es:"Bak",de:"Baku"}},{level:12,country:{en:"Oman",es:"Omn",de:"Oman"},capital:{en:"Muscat",es:"Mascate",de:"Maskat"}},{level:12,country:{en:"Ivory Coast",es:"Costa de Marfil",de:"Elfenbeinkste"},capital:{en:"Yamoussoukro",es:"Yamusukro",de:"Yamoussoukro"}},{level:12,country:{en:"Slovenia",es:"Eslovenia",de:"Slowenien"},capital:{en:"Ljubljana",es:"Liubliana",de:"Ljubljana"}},{level:12,country:{en:"Laos",es:"Laos",de:"Laos"},capital:{en:"Vientiane",es:"Vientin",de:"Vientiane"}},{level:13,country:{en:"Burkina Faso",es:"Burkina Faso",de:"Burkina Faso"},capital:{en:"Ouagadougou",es:"Uagadug",de:"Ouagadougou"}},{level:13,country:{en:"Kyrgyzstan",es:"Kirguistn",de:"Kirgisistan"},capital:{en:"Bishkek",es:"Biskek",de:"Bischkek"}},{level:13,country:{en:"Suriname",es:"Surinam",de:"Suriname"},capital:{en:"Paramaribo",es:"Paramaribo",de:"Paramaribo"}},{level:13,country:{en:"Liechtenstein",es:"Liechtenstein",de:"Liechtenstein"},capital:{en:"Vaduz",es:"Vaduz",de:"Vaduz"}},{level:13,country:{en:"Malta",es:"Malta",de:"Malta"},capital:{en:"Valletta",es:"La Valeta",de:"Valletta"}},{level:14,country:{en:"Bhutan",es:"Butn",de:"Bhutan"},capital:{en:"Thimphu",es:"Timbu",de:"Thimphu"}},{level:14,country:{en:"Vanuatu",es:"Vanuatu",de:"Vanuatu"},capital:{en:"Port Vila",es:"Port Vila",de:"Port Vila"}},{level:14,country:{en:"Seychelles",es:"Seychelles",de:"Seychellen"},capital:{en:"Victoria",es:"Victoria",de:"Victoria"}},{level:14,country:{en:"Tajikistan",es:"Tayikistn",de:"Tadschikistan"},capital:{en:"Dushanbe",es:"Dusamb",de:"Duschanbe"}},{level:14,country:{en:"Djibouti",es:"Yibuti",de:"Dschibuti"},capital:{en:"Djibouti City",es:"Yibuti",de:"Dschibuti-Stadt"}},{level:15,country:{en:"Nauru",es:"Nauru",de:"Nauru"},capital:{en:"Yaren (de facto)",es:"Yaren",de:"Yaren"}},{level:15,country:{en:"Palau",es:"Palaos",de:"Palau"},capital:{en:"Ngerulmud",es:"Ngerulmud",de:"Ngerulmud"}},{level:15,country:{en:"Comoros",es:"Comoras",de:"Komoren"},capital:{en:"Moroni",es:"Moroni",de:"Moroni"}},{level:15,country:{en:"Tuvalu",es:"Tuvalu",de:"Tuvalu"},capital:{en:"Funafuti",es:"Funafuti",de:"Funafuti"}},{level:15,country:{en:"Saint Kitts and Nevis",es:"San Cristbal y Nieves",de:"St. Kitts und Nevis"},capital:{en:"Basseterre",es:"Basseterre",de:"Basseterre"}}],fM=(t,e)=>[...M2].sort(()=>.5-Math.random()).filter(i=>i.capital.en!==e).slice(0,t),hM=()=>{const t=[];for(const e of M2){const n=fM(3,e.capital.en),i=[e,...n];for(let r=i.length-1;r>0;r--){const c=Math.floor(Math.random()*(r+1));[i[r],i[c]]=[i[c],i[r]]}const a=i.findIndex(r=>r.capital.en===e.capital.en);t.push({level:e.level,question:{en:"What is the capital of {country}?",es:"Cul es la capital de {country}?",de:"Was ist die Hauptstadt von {country}?"},countryName:e.country,answers:i.map(r=>r.capital),correctIndex:a})}return t},I5=hM(),pM=({onClose:t})=>{const[e,n]=V.useState("intro"),[i,a]=V.useState(0),[r,c]=V.useState(null),[d,p]=V.useState(null),[f,g]=V.useState([]),[_,b]=V.useState("en"),[S,w]=V.useState(!1),[E,N]=V.useState(!0),[k,L]=V.useState(!0),[R,O]=V.useState([]);V.useEffect(()=>{if(e==="playing"){const z=i+1,j=I5.filter($=>$.level===z);if(j.length>0){const $=Math.floor(Math.random()*j.length);c(j[$]),w(!1)}else console.error(`No questions found for level ${z}`),c(I5[0]),w(!1)}},[i,e]);const I=z=>{d!==null||!r||(p(z),setTimeout(()=>{z===r.correctIndex?i===nu.length-1?n("won"):(a(j=>j+1),p(null),g([])):n("lost")},1500))},G=()=>{if(!E||!r)return;const j=r.answers.map(($,oe)=>oe).filter($=>$!==r.correctIndex).sort(()=>.5-Math.random()).slice(0,2);g(j),N(!1),w(!0)},P=async()=>{if(!k||!r)return;const j={title:"INVERT FM Capitals Quiz",text:`Help! ${B(r)}`,url:window.location.href};try{navigator.share?await navigator.share(j):(await navigator.clipboard.writeText(j.text),alert("Question copied! Send it to a friend.")),L(!1),p(r.correctIndex),setTimeout(()=>{i===nu.length-1?n("won"):(a($=>$+1),p(null),g([]))},1e3)}catch($){console.log("Share canceled or failed",$)}},M=()=>{n("intro"),a(0),p(null),g([]),N(!0),L(!0),w(!1)},F=z=>z[_]||z.en,B=z=>{const j=F(z.question),$=F(z.countryName);return j.replace("{country}",$)},H=()=>{switch(_){case"de":return"Antworten zeigen";case"es":return"Mostrar opciones";default:return"Show Options"}};return e==="intro"?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-teal-900 to-gray-900 z-0"}),h.jsxs("div",{className:"z-10 text-center max-w-md w-full",children:[h.jsxs("h1",{className:"text-5xl font-black mb-2 tracking-tighter",children:[h.jsx("span",{className:"text-white",children:"CAPITALS"}),h.jsx("span",{className:"text-teal-500",children:" QUIZ"})]}),h.jsx("p",{className:"text-xl text-white font-semibold mb-6 tracking-wide",children:"Travel the world"}),h.jsxs("p",{className:"text-gray-400 mb-8 text-lg",children:["15 Questions.",h.jsx("br",{}),"From Paris to Ngerulmud.",h.jsx("br",{}),"Rule the World."]}),h.jsx("button",{onClick:()=>n("playing"),className:"w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-4 rounded-xl text-xl transition-transform transform active:scale-95 shadow-lg mb-4",children:"START GAME"}),h.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white",children:"Back to Menu"})]})]}):e==="won"||e==="lost"?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 text-center",children:[h.jsx("h2",{className:"text-4xl font-bold mb-4",children:e==="won"?"WORLD RULER!":"LOST IN TRANSIT"}),h.jsxs("p",{className:"text-xl text-gray-300 mb-2",children:["You reached level ",i+1]}),h.jsx("p",{className:"text-teal-500 font-bold text-2xl mb-8",children:nu[Math.max(0,i-(e==="lost"?1:0))]}),h.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[h.jsx("button",{onClick:M,className:"bg-white text-black font-bold py-3 rounded-lg hover:bg-gray-200",children:"Try Again"}),h.jsx("button",{onClick:t,className:"border border-gray-600 text-gray-400 font-bold py-3 rounded-lg hover:border-white hover:text-white",children:"Exit"})]})]}):r?h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-800/50 backdrop-blur-sm",children:[h.jsxs("span",{className:"font-bold text-lg text-teal-400",children:["Lv. ",i+1," / 15"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>b("en"),className:`px-2 py-1 rounded text-xs font-bold ${_==="en"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"EN"}),h.jsx("button",{onClick:()=>b("es"),className:`px-2 py-1 rounded text-xs font-bold ${_==="es"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"ES"}),h.jsx("button",{onClick:()=>b("de"),className:`px-2 py-1 rounded text-xs font-bold ${_==="de"?"bg-white text-black":"bg-gray-700 text-gray-400"}`,children:"DE"})]}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"Exit"})]}),h.jsxs("div",{className:"flex-grow flex flex-col md:flex-row max-w-6xl mx-auto w-full p-4 gap-6",children:[h.jsx("div",{className:"md:order-2 md:w-64 flex-shrink-0 flex flex-col-reverse gap-1 p-4 bg-black/20 rounded-xl border border-white/5 overflow-y-auto max-h-[30vh] md:max-h-none",children:nu.map((z,j)=>{let $="text-gray-600 bg-gray-800/50";return j<i&&($="text-teal-300 font-bold bg-teal-900/20 border border-teal-500/30"),j===i&&($="text-white font-bold bg-teal-600 shadow-[0_0_15px_rgba(20,184,166,0.5)] scale-105 z-10"),h.jsxs("div",{className:`flex justify-between px-3 py-1.5 rounded text-xs md:text-sm transition-all ${$}`,children:[h.jsx("span",{children:j+1}),h.jsx("span",{children:z})]},j)})}),h.jsxs("div",{className:"flex-grow flex flex-col justify-center md:order-1",children:[h.jsxs("div",{className:"bg-gradient-to-b from-gray-800 to-gray-900 border border-gray-700 p-6 md:p-10 rounded-2xl shadow-2xl text-center mb-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-teal-500"}),h.jsx("h2",{className:"text-xl md:text-3xl font-bold leading-relaxed",children:B(r)})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 min-h-[200px] content-center",children:S?r.answers.map((z,j)=>{const $=d===j,oe=j===r.correctIndex,q=f.includes(j),Z=d!==null;let Q="bg-gray-800 border-2 border-gray-700 hover:border-gray-500 hover:bg-gray-700";return q?Q="bg-gray-900 border-transparent opacity-0 pointer-events-none":Z?$?Q=oe?"bg-green-600 border-green-400 animate-pulse":"bg-red-600 border-red-400":oe?Q="bg-green-600 border-green-400":Q="bg-gray-800 border-gray-700 opacity-50":$&&(Q="bg-teal-600 border-white"),h.jsxs("button",{onClick:()=>I(j),disabled:d!==null||q,className:`py-4 px-6 rounded-xl text-lg font-semibold transition-all duration-200 flex items-center gap-4 text-left ${Q}`,children:[h.jsxs("span",{className:"text-teal-400 font-black text-xl",children:[String.fromCharCode(65+j),":"]}),F(z)]},j)}):h.jsx("div",{className:"col-span-1 md:col-span-2 flex justify-center items-center",children:h.jsx("button",{onClick:()=>w(!0),className:"py-4 px-8 rounded-xl text-xl font-bold bg-teal-600 hover:bg-teal-500 text-white shadow-lg transition-all transform hover:scale-105 animate-pulse",children:H()})})}),h.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[h.jsx("button",{onClick:G,disabled:!E||d!==null,className:`flex flex-col items-center gap-1 transition-opacity ${E?"opacity-100 hover:scale-105":"opacity-30 cursor-not-allowed"}`,title:"50/50",children:h.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-teal-500 flex items-center justify-center font-bold text-xl bg-gray-800",children:"50:50"})}),h.jsx("button",{onClick:P,disabled:!k||d!==null,className:`flex flex-col items-center gap-1 transition-opacity ${k?"opacity-100 hover:scale-105":"opacity-30 cursor-not-allowed"}`,title:"Ask a Friend",children:h.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-teal-500 flex items-center justify-center bg-gray-800",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})})]})]})]})]}):h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:"Loading..."})};class mM{constructor(){this.loop=null,this.bassLoop=null,this.leadLoop=null,this.isMuted=!1,this.currentMusicType="NONE",this.kick=new Dl({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4},volume:-8}).toDestination(),this.snare=new rl({noise:{type:"pink"},envelope:{attack:.005,decay:.1,sustain:0},volume:-12}).toDestination(),this.hihat=new al({frequency:200,envelope:{attack:.001,decay:.05,release:.01},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5,volume:-14}).toDestination(),this.bass=new bp({oscillator:{type:"square"},envelope:{attack:.01,decay:.2,sustain:.2,release:.2},filterEnvelope:{attack:.01,decay:.2,sustain:.5,release:.2,baseFrequency:300,octaves:2},volume:-10}).toDestination(),this.lead=new ll(Ms,{oscillator:{type:"triangle"},envelope:{attack:.02,decay:.1,sustain:.3,release:1},volume:-14}).toDestination(),this.jumpSynth=new Ms({oscillator:{type:"square"},envelope:{attack:.01,decay:.1,sustain:0,release:.1},volume:-10}).toDestination(),this.doubleJumpSynth=new ll(Ms,{volume:-10,envelope:{attack:.01,decay:.1,sustain:0,release:.1}}).toDestination(),this.trickSynth=new ll(Ms,{volume:-10,oscillator:{type:"sawtooth"}}).toDestination(),this.grindSynth=new al({harmonicity:12,resonance:800,modulationIndex:20,envelope:{decay:.1,release:.1},volume:-15}).toDestination(),this.crashSynth=new rl({volume:-5}).toDestination(),this.launchSynth=new Ms({oscillator:{type:"triangle"},envelope:{attack:.01,decay:.5,sustain:0,release:.1},volume:-8}).toDestination(),this.sirenSynth=new Ms({oscillator:{type:"sawtooth"},envelope:{attack:.1,decay:0,sustain:1,release:.5},volume:-10}).toDestination(),this.sirenLFO=new Ha(2,600,900).start(),this.sirenLFO.connect(this.sirenSynth.frequency),this.metalImpactSynth=new al({frequency:200,envelope:{attack:.001,decay:.2,release:.1},harmonicity:3.1,modulationIndex:16,resonance:2e3,octaves:1.5,volume:-5}).toDestination(),this.firecrackerSynth=new rl({noise:{type:"white"},envelope:{attack:.001,decay:.01,sustain:0},volume:-5}).toDestination()}async startMusic(){this.playMainMusic()}async playMainMusic(){if(this.currentMusicType==="MAIN"){mn.state!=="started"&&mn.start();return}this.stopCurrentMusic(),this.currentMusicType="MAIN";try{await cu(),mn.state!=="started"&&mn.start(),mn.bpm.value=165;const e=["C2","C2","C2","C2","C2","C2","C2","C2","C2","C2","E2","E2","F2","F2","G2","G2","G1","G1","G1","G1","G1","G1","G1","G1","G1","G1","B1","B1","C2","C2","D2","D2","A1","A1","A1","A1","A1","A1","A1","A1","A1","A1","C2","C2","D2","D2","E2","E2","F1","F1","F1","F1","F1","F1","F1","F1","F1","F1","A1","A1","C2","C2","G2","G2"],n=["E4",null,"E4","D4","C4",null,"G3",null,"C4","D4","E4","F4","E4","D4","C4","G3","D4",null,"D4","C4","B3",null,"G3",null,"B3","C4","D4","E4","D4","C4","B3","A3","C4",null,"C4","B3","A3",null,"E3",null,"A3","B3","C4","D4","E4","F4","G4","A4","F4",null,"A4",null,"C5",null,"A4",null,"G4","F4","E4","D4","C4","B3","C4",null],i=["A1","A1","A1","A1","A1","A1","A1","A1","A1","A1","C2","C2","E2","E2","G2","G2","F1","F1","F1","F1","F1","F1","F1","F1","F1","F1","A1","A1","C2","C2","E2","E2","C2","C2","C2","C2","C2","C2","C2","C2","C2","C2","G2","G2","E2","E2","D2","D2","G1","G1","G1","G1","G1","G1","G1","G1","G1","G1","B1","B1","D2","D2","G2","G2"],a=["A4",null,"C5","B4","A4","G4","A4","E4","A4","B4","C5","D5","E5","C5","A4","G4","F4",null,"A4","G4","F4","E4","F4","C4","F4","G4","A4","B4","C5","A4","F4","E4","E5",null,"G5","F5","E5","D5","C5","B4","C5","D5","E5","G5","E5","D5","C5","B4","D5",null,"B4","A4","G4","F#4","G4","D4","G4","A4","B4","C5","D5","C5","B4","A4"],r=[...e,...e,...i],c=[...n,...n,...a];this.bassLoop=new Xs((p,f)=>{this.isMuted||!f||this.bass.triggerAttackRelease(f,"8n",p)},r,"8n").start(0),this.leadLoop=new Xs((p,f)=>{this.isMuted||!f||this.lead.triggerAttackRelease(f,"8n",p)},c,"8n").start(0);const d=[{k:!0,s:!1,h:!0},{k:!1,s:!1,h:!0},{k:!1,s:!0,h:!0},{k:!1,s:!1,h:!0},{k:!1,s:!1,h:!0},{k:!0,s:!1,h:!0},{k:!1,s:!0,h:!0},{k:!1,s:!1,h:!0},{k:!0,s:!1,h:!0},{k:!0,s:!1,h:!0},{k:!1,s:!0,h:!0},{k:!1,s:!1,h:!0},{k:!1,s:!1,h:!0},{k:!1,s:!1,h:!0},{k:!0,s:!0,h:!0},{k:!1,s:!0,h:!0}];this.loop=new Xs((p,f)=>{if(this.isMuted)return;const g=d[f%d.length];g.k&&this.kick.triggerAttackRelease("C1","8n",p),g.s&&this.snare.triggerAttackRelease("8n",p),g.h&&this.hihat.triggerAttackRelease("32n",p,.3)},Array.from({length:16},(p,f)=>f),"8n").start(0)}catch(e){console.error("Main music start failed",e)}}async playSpaceMusic(){if(this.currentMusicType==="SPACE"){mn.state!=="started"&&mn.start();return}this.stopCurrentMusic(),this.currentMusicType="SPACE";try{await cu(),mn.state!=="started"&&mn.start(),mn.bpm.value=108;const e=["D1",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"A1",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"B1",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"G1",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.bassLoop=new Xs((r,c)=>{this.isMuted||!c||this.bass.triggerAttackRelease(c,"1n",r,.8)},e,"16n").start(0);const n=[null,"F#5",null,"A5",null,"D6",null,null,null,null,"A5","F#5","E5",null,null,null,null,"E5",null,"C#6",null,"E6",null,"A5",null,"C#6","A5","E5",null,null,null,null,"D5",null,"F#5",null,"B5",null,null,null,null,"D6","B5","F#5",null,null,null,null,null,"G5",null,"B5",null,"D6",null,"G5","F#5","E5",null,null,null,null,null,null];this.leadLoop=new Xs((r,c)=>{this.isMuted||!c||this.lead.triggerAttackRelease(c,"32n",r,.4)},n,"16n").start(0);const i=64,a=[];for(let r=0;r<i;r++){let c=!1,d=!1,p=!1;const f=r%16;f===0&&(c=!0),(r===10||r===26||r===36||r===58)&&(c=!0),f===8&&(d=!0),f%2===0&&(p=!0),(r%16===14||r%16===15)&&(p=Math.random()>.5),(r===33||r===34||r===35)&&(p=!0),a.push({k:c,s:d,h:p})}this.loop=new Xs((r,c)=>{if(this.isMuted)return;const d=a[c%a.length];d.k&&this.kick.triggerAttackRelease("C1","8n",r),d.s&&this.snare.triggerAttackRelease("16n",r,.5),d.h&&this.hihat.triggerAttackRelease("64n",r,.15+Math.random()*.1)},Array.from({length:i},(r,c)=>c),"16n").start(0)}catch(e){console.error("Space music start failed",e)}}async playUnderworldMusic(){if(this.currentMusicType==="UNDERWORLD"){mn.state!=="started"&&mn.start();return}this.stopCurrentMusic(),this.currentMusicType="UNDERWORLD";try{await cu(),mn.state!=="started"&&mn.start(),mn.bpm.value=110;const e=["C1",null,null,null,"G1",null,"F1",null];this.bassLoop=new Xs((n,i)=>{this.isMuted||!i||this.bass.triggerAttackRelease(i,"1n",n,.9)},e,"2n").start(0),this.loop=new Xs((n,i)=>{this.isMuted||(i===0&&this.kick.triggerAttackRelease("C1","8n",n),i===4&&this.metalImpactSynth.triggerAttackRelease(100,"16n",n,.6),i===8&&this.kick.triggerAttackRelease("C1","8n",n),i===12&&this.snare.triggerAttackRelease("8n",n,.5))},[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],"16n").start(0)}catch(e){console.error("Underworld music start failed",e)}}stopCurrentMusic(){this.loop&&(this.loop.dispose(),this.loop=null),this.bassLoop&&(this.bassLoop.dispose(),this.bassLoop=null),this.leadLoop&&(this.leadLoop.dispose(),this.leadLoop=null)}pauseMusic(){this.currentMusicType!=="NONE"&&mn.pause()}resumeMusic(){this.currentMusicType!=="NONE"&&mn.start()}stopMusic(){this.currentMusicType="NONE";try{mn.stop(),mn.cancel(0),this.stopCurrentMusic()}catch(e){console.error("Audio stop failed",e)}}getSafeTime(){return IT()+.05}playJump(){if(!this.isMuted)try{this.jumpSynth.triggerAttackRelease("A4","16n",this.getSafeTime())}catch{}}playDoubleJump(){if(!this.isMuted)try{this.doubleJumpSynth.triggerAttackRelease(["E4","G4"],"16n",this.getSafeTime())}catch{}}playTrick(){if(!this.isMuted)try{this.trickSynth.triggerAttackRelease(["C5","E5"],"16n",this.getSafeTime())}catch{}}playGrind(){if(!this.isMuted)try{this.grindSynth.triggerAttackRelease(200,"32n",this.getSafeTime())}catch{}}playLaunch(){if(!this.isMuted)try{const e=this.getSafeTime();this.launchSynth.triggerAttackRelease("C5","8n",e),this.launchSynth.frequency.rampTo("C6",.3,e)}catch{}}playCrash(){if(!this.isMuted)try{this.crashSynth.triggerAttackRelease("8n",this.getSafeTime())}catch{}}playMetalHit(){if(!this.isMuted)try{this.metalImpactSynth.triggerAttackRelease(300,"16n",this.getSafeTime())}catch{}}playSiren(){if(!this.isMuted)try{this.sirenSynth.triggerAttackRelease("C4",1.5,this.getSafeTime())}catch{}}playFirecracker(){if(!this.isMuted)try{const e=this.getSafeTime();this.firecrackerSynth.triggerAttackRelease("32n",e),this.firecrackerSynth.triggerAttackRelease("32n",e+.05),this.firecrackerSynth.triggerAttackRelease("32n",e+.1)}catch{}}toggleMute(){this.isMuted=!this.isMuted,DT.mute=this.isMuted}}let _h=null;const We=()=>{if(!_h)try{_h=new mM}catch(t){return console.error("Tone.js init failed",t),{startMusic:async()=>{},playMainMusic:async()=>{},playUnderworldMusic:async()=>{},playSpaceMusic:async()=>{},pauseMusic:()=>{},resumeMusic:()=>{},stopMusic:()=>{},playJump:()=>{},playDoubleJump:()=>{},playTrick:()=>{},playGrind:()=>{},playLaunch:()=>{},playCrash:()=>{},playSiren:()=>{},playMetalHit:()=>{},playFirecracker:()=>{},toggleMute:()=>{},isMuted:!0}}return _h},gM="/invert11/assets/kai/kai_intro.png",D5=.6,su=-18,Dt=250,P5=7,_s={RIDE:[new Image,new Image,new Image,new Image],PUSH:[new Image,new Image]};_s.RIDE[0].src="/invert11/assets/kai/kai_ride_1.png";_s.RIDE[1].src="/invert11/assets/kai/kai_ride_2.png";_s.RIDE[2].src="/invert11/assets/kai/kai_ride_3.png";_s.RIDE[3].src="/invert11/assets/kai/kai_ride_4.png";_s.PUSH[0].src="/invert11/assets/kai/kai_push_1.png";_s.PUSH[1].src="/invert11/assets/kai/kai_push_2.png";const L5=[{type:"hydrant",w:30,h:40,grind:!0,gap:!1},{type:"police_car",w:100,h:50,grind:!1,gap:!1},{type:"cybertruck",w:120,h:50,grind:!0,gap:!1},{type:"cart",w:50,h:50,grind:!1,gap:!1},{type:"ledge",w:150,h:30,grind:!0,gap:!1},{type:"curb",w:40,h:15,grind:!0,gap:!1},{type:"rail",w:100,h:40,grind:!0,gap:!1},{type:"flat_rail",w:120,h:20,grind:!0,gap:!1},{type:"bin",w:40,h:60,grind:!1,gap:!1},{type:"grey_bin",w:40,h:60,grind:!1,gap:!1},{type:"ramp",w:160,h:40,grind:!1,gap:!1,isPlatform:!0},{type:"gap",w:100,h:10,grind:!1,gap:!0,yOffset:10}],er=t=>{const e=Math.floor(Math.abs(t)).toString().padStart(6,"0");return t<0?`-${e}`:e};function qa(t){const e=new Image;return e.src=t,e}(!_s.PUSH?.length||!_s.RIDE?.length)&&(_s.PUSH=[qa("/assets/kai/kai_push_1.png"),qa("/assets/kai/kai_push_2.png")],_s.RIDE=[qa("/assets/kai/kai_ride_1.png"),qa("/assets/kai/kai_ride_2.png"),qa("/assets/kai/kai_ride_3.png"),qa("/assets/kai/kai_ride_4.png")]);const iu=[{id:"female_long",name:"Bali",defaultName:"Bali"},{id:"male_cap",name:"Kai",defaultName:"Kai"},{id:"female_short",name:"Rayssa",defaultName:"Rayssa"},{id:"male_short",name:"Dubs",defaultName:"Dubs"},{id:"alien",name:"Area 51",defaultName:"Gnarls"}];function k2(t,e,n,i,a=0){const c=t*2.5,d=n-a,p=t/2,f=d*.08,g=((p-f)%c+c)%c,_=e*.3+i*.08;return{x:g,y:_}}function yM(t,e,n,i){t.save();const a=i*.05;t.globalCompositeOperation="screen";const r=e/2,c=n/2,d=Math.sqrt(e*e+n*n);for(let p=0;p<8;p++){const f=(a*50+p*45)%360;t.beginPath(),t.strokeStyle=`hsla(${f}, 80%, 50%, 0.4)`,t.lineWidth=15+Math.sin(a+p)*10;const g=a*(p%2===0?1:-1)*.2;for(let _=0;_<d;_+=20){const b=g+_*.02+p,S=r+Math.cos(b)*_,w=c+Math.sin(b)*_;_===0?t.moveTo(S,w):t.lineTo(S,w)}t.stroke()}for(let p=0;p<6;p++){const f=(Math.sin(a*.2+p)*.5+.5)*e,g=(Math.cos(a*.3+p*2)*.5+.5)*n,_=60+Math.sin(a*1.5+p)*40,b=(a*30+p*60)%360,S=t.createRadialGradient(f,g,0,f,g,_);S.addColorStop(0,`hsla(${b}, 100%, 60%, 0.5)`),S.addColorStop(1,`hsla(${b}, 100%, 40%, 0)`),t.fillStyle=S,t.beginPath(),t.arc(f,g,_,0,Math.PI*2),t.fill()}t.restore()}function vM(t,e,n,i){t.fillStyle="#0f172a",t.fillRect(0,0,e,n),t.save(),t.translate(0,i),t.fillStyle="#2c1810",t.fillRect(0,250,e,2250);const c=160,d=180,p=d+300;t.beginPath(),t.moveTo(d,250),t.lineTo(p,1e3),t.lineTo(p-c*.5,1e3+c),t.lineTo(d-c*.5,250+c),t.closePath(),t.fillStyle="#0f0f0f",t.fill();const f=t.createLinearGradient(d,250,d,250+c);f.addColorStop(0,"#111"),f.addColorStop(.2,"#222"),f.addColorStop(.5,"#3a3a3a"),f.addColorStop(.8,"#222"),f.addColorStop(1,"#111"),t.beginPath(),t.moveTo(d,250),t.lineTo(p,1e3),t.lineTo(p-c*.5,1e3+c),t.lineTo(d-c*.5,250+c),t.closePath(),t.fillStyle=f,t.fill(),t.strokeStyle="#000",t.lineWidth=3,t.globalAlpha=.3;const g=20,_=(p-d)/g,b=750/g;for(let S=0;S<g;S++){const w=d+_*S,E=250+b*S;t.beginPath(),t.ellipse(w,E+c/2,30,c/2,Math.PI/5,0,Math.PI*2),t.stroke()}t.restore()}function _M(t,e,n,i,a=0,r=!1,c=!1,d=0,p=0){c?(t.fillStyle="#000000",t.fillRect(0,0,e,n),yM(t,e,n,d)):(t.fillStyle="#000000",t.fillRect(0,0,e,n));const f=(R,O,I,G)=>{t.fillStyle=G;for(let P=0;P<R;P++){const M=Math.abs(Math.sin(P*132.1))*e,F=Math.abs(Math.cos(P*53.7))*n,B=((M-i*O)%e+e)%e,H=((F+a*O*.5)%n+n)%n,z=I*(.5+Math.abs(Math.sin(P))*.5);t.beginPath(),t.arc(B,H,z,0,Math.PI*2),t.fill()}};c||(f(100,.1,1.5,"#64748b"),f(80,.3,2,"#94a3b8"),f(40,.6,3,"#ffffff"));const g=.05,_=e*1.5,S=((e*.5-i*g)%_+_)%_;if(S>-100&&S<e+100){const R=120+a*.03;t.save(),t.translate(S,R),t.rotate(.2),t.fillStyle="#eab308",t.fillRect(-45,-15,35,30),t.fillRect(10,-15,35,30),t.strokeStyle="#a16207",t.lineWidth=1,t.strokeRect(-45,-15,35,30),t.strokeRect(10,-15,35,30),t.fillStyle="#94a3b8",t.fillRect(-10,-15,20,30),t.fillStyle="#cbd5e1",t.beginPath(),t.ellipse(0,15,10,5,0,0,Math.PI),t.fill(),t.restore()}if(r){const R=k2(e,n,i,a,p),O=R.x,I=R.y;if(O>-200&&O<e+200){t.save(),t.translate(O,I);const G=t.createRadialGradient(-30,-30,10,0,0,100);G.addColorStop(0,"#fef08a"),G.addColorStop(.5,"#facc15"),G.addColorStop(1,"#ca8a04"),t.fillStyle=G,t.beginPath(),t.arc(0,0,90,0,Math.PI*2),t.fill(),t.shadowColor="#fde047",t.shadowBlur=20,t.strokeStyle="rgba(253, 224, 71, 0.3)",t.lineWidth=5,t.stroke(),t.shadowBlur=0,t.rotate(-.2),t.translate(0,-88),t.fillStyle="#dc2626",t.fillRect(-30,-30,60,35),t.fillStyle="#fbbf24",t.fillRect(-30,-30,60,8),t.fillStyle="white",t.font="bold 16px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText("OXXO",0,-12),t.fillStyle="#bae6fd",t.fillRect(-20,5,40,25),t.restore()}}const w=.15,E=e*4,k=((e*.8-i*w)%E+E)%E,L=n*.6+a*.1;if(k>-100&&k<e+100){t.save(),t.translate(k,L);const R=t.createRadialGradient(-20,-20,10,0,0,80);R.addColorStop(0,"#ef4444"),R.addColorStop(.6,"#b91c1c"),R.addColorStop(1,"#7f1d1d"),t.fillStyle=R,t.beginPath(),t.arc(0,0,70,0,Math.PI*2),t.fill(),t.fillStyle="rgba(0,0,0,0.2)",t.beginPath(),t.ellipse(-20,-10,10,5,.2,0,Math.PI*2),t.fill(),t.beginPath(),t.ellipse(30,20,15,8,-.1,0,Math.PI*2),t.fill(),t.beginPath(),t.ellipse(10,-40,8,4,0,0,Math.PI*2),t.fill(),t.restore();const O=k+160,I=L+Math.sin(Date.now()/500)*10;O>-50&&O<e+50&&(t.save(),t.translate(O,I),t.rotate(-Math.PI/4),t.scale(.6,.6),t.fillStyle="#f59e0b",t.beginPath(),t.moveTo(-10,25),t.lineTo(0,50+Math.random()*10),t.lineTo(10,25),t.fill(),t.fillStyle="#e2e8f0",t.beginPath(),t.ellipse(0,0,15,40,0,0,Math.PI*2),t.fill(),t.fillStyle="#38bdf8",t.beginPath(),t.arc(0,-10,6,0,Math.PI*2),t.fill(),t.fillStyle="#c52323",t.beginPath(),t.moveTo(-15,10),t.lineTo(-25,35),t.lineTo(-5,25),t.moveTo(15,10),t.lineTo(25,35),t.lineTo(5,25),t.fill(),t.restore())}}function xM(t,e,n,i,a,r=0){let c=15,d=23,p=42;if(r>0){const E=Math.max(0,Math.min(1,(r-300)/1200));c=Math.floor(15*(1-E)),d=Math.floor(23*(1-E)),p=Math.floor(42*(1-E))}t.fillStyle=`rgb(${c}, ${d}, ${p})`,t.fillRect(0,0,e,n);const f=r;if(f<n){const S=t.createLinearGradient(0,f,0,n+f);S.addColorStop(0,"#0f172a"),S.addColorStop(1,"#334155"),t.fillStyle=S,t.fillRect(0,f,e,n),r<800&&(t.save(),t.translate(e*.8,n*.25+f*.8),t.fillStyle="#c52323",t.shadowColor="#c52323",t.shadowBlur=40,t.beginPath(),t.arc(0,0,50,0,Math.PI*2),t.fill(),t.restore())}if(r>300){const S=e/2,w=-350+(r-300)*.6;if(w<n+400){t.save(),t.translate(S,w);const E=t.createRadialGradient(-20,-20,10,0,0,80);E.addColorStop(0,"#ef4444"),E.addColorStop(.6,"#b91c1c"),E.addColorStop(1,"#7f1d1d"),t.fillStyle=E,t.beginPath(),t.arc(0,0,70,0,Math.PI*2),t.fill(),t.fillStyle="rgba(0,0,0,0.2)",t.beginPath(),t.ellipse(-20,-10,10,5,.2,0,Math.PI*2),t.fill(),t.beginPath(),t.ellipse(30,20,15,8,-.1,0,Math.PI*2),t.fill(),t.beginPath(),t.ellipse(10,-40,8,4,0,0,Math.PI*2),t.fill(),t.restore();const N=S+160,k=w+Math.sin(Date.now()/500)*10;t.save(),t.translate(N,k),t.rotate(-Math.PI/4),t.scale(.6,.6),t.fillStyle="#f59e0b",t.beginPath(),t.moveTo(-10,25),t.lineTo(0,50+Math.random()*10),t.lineTo(10,25),t.fill(),t.fillStyle="#e2e8f0",t.beginPath(),t.ellipse(0,0,15,40,0,0,Math.PI*2),t.fill(),t.fillStyle="#38bdf8",t.beginPath(),t.arc(0,-10,6,0,Math.PI*2),t.fill(),t.fillStyle="#c52323",t.beginPath(),t.moveTo(-15,10),t.lineTo(-25,35),t.lineTo(-5,25),t.moveTo(15,10),t.lineTo(25,35),t.lineTo(5,25),t.fill(),t.restore()}}const g=S=>Math.abs(Math.sin(S*12.9898)*43758.5453)%1,_=[{speed:.05,color:"#1e293b",width:120,heightMod:200,baseH:150,seed:1,windows:!1},{speed:.15,color:"#334155",width:80,heightMod:150,baseH:80,seed:2,windows:!1},{speed:.3,color:"#475569",width:60,heightMod:100,baseH:50,seed:3,windows:!0}],b=a+r;b>-200&&_.forEach(S=>{t.fillStyle=S.color;const w=i*S.speed,E=Math.floor(w/S.width),N=E+Math.ceil(e/S.width)+1;for(let k=E;k<=N;k++){const L=g(k*S.seed),R=S.baseH+L*S.heightMod,O=Math.floor(k*S.width-w),I=b-R;if(I<n&&(t.fillRect(O,I,S.width+1,R+500),S.windows&&L>.4)){t.fillStyle="#1e293b";const G=4,P=10,M=Math.floor((S.width-P)/(G+P)),F=Math.floor((R-30)/(G+P));for(let B=0;B<F;B++)for(let H=0;H<M;H++)g(k*B*H+S.seed)>.3&&t.fillRect(O+P+H*(G+P),I+15+B*(G+P),G,G);t.fillStyle=S.color}}})}function bM(t,e,n,i){t.fillStyle="#1a0505",t.fillRect(0,0,e,n),t.fillStyle="#2b0a0a";const r=i*.2,c=50;for(let g=-(r%c);g<e;g+=c){const _=50+Math.abs(Math.sin((g+r)*.01))*100;t.beginPath(),t.moveTo(g,0),t.lineTo(g+c/2,_),t.lineTo(g+c,0),t.fill()}t.fillStyle="#3f1010";const p=i*.5,f=150;for(let g=-(p%f);g<e+f;g+=f){const _=150+Math.abs(Math.sin((g+p)*.02))*80;t.beginPath(),t.moveTo(g+20,n),t.lineTo(g+f/2,n-_),t.lineTo(g+f-20,n),t.fill()}}function CM(t,e,n,i){t.fillStyle="#000000",t.fillRect(0,0,e,n);const a=e/2,r=100+Math.sin(Date.now()/100)*20,c=t.createLinearGradient(0,0,0,n);c.addColorStop(0,"rgba(56, 189, 248, 0.8)"),c.addColorStop(1,"rgba(56, 189, 248, 0)"),t.fillStyle=c,t.beginPath(),t.moveTo(a-r/2,0),t.lineTo(a+r/2,0),t.lineTo(a+r,n),t.lineTo(a-r,n),t.fill(),t.fillStyle="#ffffff";for(let d=0;d<20;d++){const p=a+(Math.random()-.5)*r*2,f=Math.random()*n,g=10+Math.random()*20,_=20+Math.random()*30,b=(f-Date.now()/10*g)%n;b<0||(t.globalAlpha=Math.random()*.5+.2,t.fillRect(p,(b+n)%n,2,_))}t.globalAlpha=1}function Vh(t,e,n,i,a,r,c=0,d="",p=!1,f=!1){t.save(),t.translate(n,i);const g=a||0;if(r==="ABDUCTED"){const N=Math.sin(g*.1)*3;t.translate(0,N);const k=1+Math.sin(g*.15)*.05;t.scale(k,k),t.rotate(g*.05)}if(e==="male_cap"){if(p&&t.scale(-1,1),r==="NATAS_SPIN"){const R=Math.cos(c);t.scale(R,1)}else if(d==="180"||d==="360"){const R=Math.cos(c);t.scale(R,1)}else(r==="TUMBLING"||r==="JUMPING"||r==="GRINDING"||d!=="")&&t.rotate(c);let N=null;if(r==="RUNNING"){const R=Math.floor(g/15)%2;N=_s.PUSH[R]}else{const R=Math.floor(g/10)%4;N=_s.RIDE[R]}const k=50,L=75;f&&r!=="JUMPING"&&(t.scale(1.1,.8),t.translate(0,15)),N&&N.complete?t.drawImage(N,-k/2,-L+25,k,L):(t.fillStyle="#c52323",t.font="10px Arial",t.fillText("Loading",-15,-10)),t.restore();return}if(p&&t.scale(-1,1),(r==="TUMBLING"||r==="RUNNING"||r==="COASTING"||r==="GRINDING")&&t.rotate(c),r==="NATAS_SPIN"){const N=Math.cos(c);t.scale(N,1)}if(d==="180"||d==="360"){const N=Math.cos(c);t.scale(N,1)}const _=e==="alien",b=_?"#39ff14":"#ffffff",S=_?"#39ff14":"#ffffff";t.strokeStyle=S,t.lineWidth=3,t.lineCap="round",t.lineJoin="round",t.fillStyle=b;const w=r==="RUNNING"?Math.sin(g*.25)*.5:-.5,E=r==="JUMPING"?-5:f?8:0;if(r!=="CRASHED"&&r!=="ABDUCTED"&&(t.save(),t.translate(0,25+E),d==="KICKFLIP"&&t.rotate(c),t.fillStyle="#333",t.beginPath(),t.moveTo(-24,-4),t.quadraticCurveTo(-18,0,-12,0),t.lineTo(12,0),t.quadraticCurveTo(18,0,24,-4),t.lineTo(24,-1),t.quadraticCurveTo(18,5,12,5),t.lineTo(-12,5),t.quadraticCurveTo(-18,5,-24,-1),t.closePath(),t.fill(),t.strokeStyle="#111",t.lineWidth=2,t.beginPath(),t.moveTo(-23,-4),t.quadraticCurveTo(-18,0,-12,0),t.lineTo(12,0),t.quadraticCurveTo(18,0,23,-4),t.stroke(),t.fillStyle="#fff",e==="alien"&&(t.fillStyle="#cc00ff"),t.beginPath(),t.arc(-13,5,3.5,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(13,5,3.5,0,Math.PI*2),t.fill(),t.fillStyle="#999",t.beginPath(),t.arc(-13,5,1.5,0,Math.PI*2),t.arc(13,5,1.5,0,Math.PI*2),t.fill(),t.restore()),t.fillStyle=b,t.strokeStyle=S,t.lineWidth=3,t.beginPath(),r==="RUNNING"){const N=g*.25,k=Math.sin(N)*15,R=Math.cos(N)>0?Math.abs(Math.cos(N))*8:0,O=k-5,I=25-R+E;t.moveTo(0,10+E),t.lineTo(O,I),t.moveTo(0,10+E),t.lineTo(10,25+E)}else if(r==="COASTING"||r==="NATAS_SPIN"||r==="ARRESTED"||r==="ABDUCTED")t.moveTo(0,10+E),t.lineTo(-12,25+E),t.moveTo(0,10+E),t.lineTo(10,25+E);else if(r==="JUMPING"||r==="GRINDING"||r==="TUMBLING"||r==="CRASHED"){const N=25+E,k=20+E;t.moveTo(0,10+E),t.lineTo(-5,k),t.lineTo(-10,N),t.moveTo(0,10+E),t.lineTo(5,k),t.lineTo(10,N)}t.stroke(),t.beginPath(),t.moveTo(0,10+E),t.lineTo(0,-15+E),t.stroke(),t.beginPath(),t.moveTo(0,-10+E),r==="NATAS_SPIN"?(t.lineTo(-15,-12+E),t.moveTo(0,-10+E),t.lineTo(15,-12+E)):r==="ARRESTED"||r==="ABDUCTED"?(t.lineTo(-10,-25+E),t.moveTo(0,-10+E),t.lineTo(10,-25+E)):(t.lineTo(-10,-10+w*10+E),t.moveTo(0,-10+E),t.lineTo(10,-10-w*10+E)),t.stroke(),t.beginPath(),_?(t.ellipse(0,-22+E,6,8,0,0,Math.PI*2),t.fill(),t.fillStyle="black",t.beginPath(),t.ellipse(-2,-22+E,2,3,.2,0,Math.PI*2),t.ellipse(2,-22+E,2,3,-.2,0,Math.PI*2),t.fill()):(t.arc(0,-22+E,6,0,Math.PI*2),t.fill()),t.fillStyle=S,e==="female_long"&&(t.strokeStyle="#ffcc00",t.lineWidth=2,t.beginPath(),t.moveTo(0,-28+E),t.quadraticCurveTo(-10,-20+E,-8,-10+E),t.stroke()),e==="female_short"&&(t.fillStyle="#8B4513",t.beginPath(),t.arc(0,-22+E,7,Math.PI,0),t.lineTo(7,-18+E),t.lineTo(-7,-18+E),t.fill()),t.restore()}function SM(t,e,n,i,a){t.save(),t.translate(e,n),t.fillStyle="#ffffff",t.shadowColor="#4ade80",t.shadowBlur=15,t.fillRect(0,-2,i,4),t.strokeStyle="#4ade80",t.lineWidth=6,t.lineCap="round",t.beginPath(),t.moveTo(0,0),t.lineTo(i,0),t.stroke(),t.restore()}function wM(t,e,n,i,a){t.save(),t.translate(n,i);const r=Math.sin(a*.1)*5;t.translate(0,r);const c=Math.cos(a*.15);e==="COIN"?(t.fillStyle="#fbbf24",t.beginPath(),t.ellipse(0,0,15*Math.abs(c),15,0,0,Math.PI*2),t.fill(),t.strokeStyle="#f59e0b",t.lineWidth=2,t.beginPath(),t.ellipse(0,0,15*Math.abs(c),15,0,0,Math.PI*2),t.stroke(),t.fillStyle="#fcd34d",t.beginPath(),t.ellipse(0,0,10*Math.abs(c),10,0,0,Math.PI*2),t.fill(),c>.2&&(t.fillStyle="rgba(255, 255, 255, 0.6)",t.beginPath(),t.ellipse(-5*c,-5,3*c,3,0,0,Math.PI*2),t.fill())):(t.fillStyle="#22d3ee",t.beginPath(),t.moveTo(0,-15),t.lineTo(12*Math.abs(c),0),t.lineTo(0,15),t.lineTo(-12*Math.abs(c),0),t.closePath(),t.fill(),t.strokeStyle="#cffafe",t.lineWidth=1,t.beginPath(),t.moveTo(0,-15),t.lineTo(0,15),t.moveTo(-12*Math.abs(c),0),t.lineTo(12*Math.abs(c),0),t.stroke()),t.restore()}function TM(t,e,n,i,a,r,c,d){switch(t.save(),t.translate(n,i),e){case"fireball":const p=t.createRadialGradient(a/2,r/2,2,a/2,r/2,a/2);p.addColorStop(0,"#fef08a"),p.addColorStop(.4,"#f97316"),p.addColorStop(1,"#dc2626"),t.fillStyle=p,t.beginPath(),t.arc(a/2,r/2,a/2,0,Math.PI*2),t.fill();break;case"big_ufo":t.fillStyle="#334155",t.beginPath(),t.ellipse(a/2,r/2,a/2,r/2,0,0,Math.PI*2),t.fill(),t.strokeStyle="#94a3b8",t.lineWidth=4,t.stroke(),t.fillStyle="#0f172a",t.beginPath(),t.ellipse(a/2,r/2+10,a/2.2,r/2.5,0,0,Math.PI*2),t.fill();const f=8;for(let te=0;te<f;te++){const A=te/f*Math.PI*2,C=a/2+Math.cos(A)*(a/2.1),he=r/2+Math.sin(A)*(r/2.2);t.fillStyle=(Math.floor(Date.now()/150)+te)%2===0?"#facc15":"#ef4444",t.beginPath(),t.arc(C,he,8,0,Math.PI*2),t.fill()}t.fillStyle="#000000",t.beginPath(),t.moveTo(a/2-50,r/2+40),t.lineTo(a/2+50,r/2+40),t.lineTo(a/2+30,r+30),t.lineTo(a/2-30,r+30),t.fill();const g=t.createLinearGradient(0,r/2,0,r+400);g.addColorStop(0,"rgba(56, 189, 248, 0.9)"),g.addColorStop(1,"rgba(56, 189, 248, 0)"),t.fillStyle=g,t.beginPath(),t.moveTo(a/2-30,r/2+40),t.lineTo(a/2+30,r/2+40),t.lineTo(a/2+100,r+400),t.lineTo(a/2-100,r+400),t.fill();break;case"solar_panel":t.fillStyle="#334155",t.fillRect(0,0,a,r),t.fillStyle="#1d4ed8";const _=Math.floor(a/25),b=2,S=(a-10)/_,w=(r-6)/b;for(let te=0;te<b;te++)for(let A=0;A<_;A++)t.fillRect(5+A*S,3+te*w,S-2,w-2);t.fillStyle="rgba(255,255,255,0.1)",t.beginPath(),t.moveTo(0,0),t.lineTo(a,0),t.lineTo(a-20,r),t.lineTo(0,r),t.fill();break;case"station_girder":t.strokeStyle="#94a3b8",t.lineWidth=3,t.lineCap="round",t.beginPath(),t.moveTo(0,2),t.lineTo(a,2),t.moveTo(0,r-2),t.lineTo(a,r-2),t.stroke(),t.lineWidth=2,t.beginPath();const E=30;for(let te=0;te<a;te+=E)t.moveTo(te,2),t.lineTo(te+E/2,r-2),t.lineTo(te+E,2);t.stroke();break;case"space_platform":const N=30,k=t.createLinearGradient(0,0,0,r);k.addColorStop(0,"#cbd5e1"),k.addColorStop(1,"#94a3b8"),t.fillStyle=k,t.fillRect(0,0,a,r),t.strokeStyle="#475569",t.lineWidth=2,t.beginPath(),t.moveTo(0,r+N),t.lineTo(a,r+N),t.stroke();const L=20;t.beginPath();for(let te=0;te<a;te+=L)t.moveTo(te,r),t.lineTo(te+L/2,r+N),t.lineTo(te+L,r);t.stroke(),t.fillStyle="#1e293b";for(let te=0;te<a;te+=40)t.beginPath(),t.arc(te+5,r/2,1.5,0,Math.PI*2),t.fill();break;case"alien_ship":t.scale(1,1),t.shadowColor="#a3e635",t.shadowBlur=10,t.fillStyle="#38bdf8",t.globalAlpha=.8,t.beginPath(),t.arc(a/2,r/2-5,15,Math.PI,0),t.fill(),t.globalAlpha=1,t.fillStyle="#94a3b8",t.beginPath(),t.ellipse(a/2,r/2+5,30,8,0,0,Math.PI*2),t.fill(),t.shadowBlur=5,t.fillStyle="#a3e635",t.beginPath(),t.arc(a/2-20,r/2+5,3,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(a/2,r/2+8,3,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(a/2+20,r/2+5,3,0,Math.PI*2),t.fill(),t.shadowBlur=0;break;case"police_car":t.save(),t.translate(a,0),t.scale(-1,1);const R=9,O=r;t.fillStyle="#111827",t.beginPath(),t.moveTo(0,r*.4),t.lineTo(a,r*.45),t.lineTo(a,r-5),t.lineTo(0,r-5),t.closePath(),t.fill(),t.fillStyle="#ffffff",t.fillRect(a*.25,r*.4,a*.45,r*.45),t.strokeStyle="#d1d5db",t.lineWidth=1,t.beginPath(),t.moveTo(a*.48,r*.4),t.lineTo(a*.48,r*.85),t.stroke(),t.fillStyle="#ffffff",t.beginPath(),t.moveTo(a*.25,r*.4),t.lineTo(a*.3,r*.1),t.lineTo(a*.65,r*.1),t.lineTo(a*.75,r*.4),t.closePath(),t.fill(),t.fillStyle="#38bdf8",t.globalAlpha=.7,t.beginPath(),t.moveTo(a*.32,r*.15),t.lineTo(a*.47,r*.15),t.lineTo(a*.47,r*.4),t.lineTo(a*.28,r*.4),t.closePath(),t.fill(),t.beginPath(),t.moveTo(a*.51,r*.15),t.lineTo(a*.62,r*.15),t.lineTo(a*.68,r*.4),t.lineTo(a*.51,r*.4),t.closePath(),t.fill(),t.globalAlpha=1,t.save(),t.translate(a*.48,r*.65),t.scale(-1,1),t.fillStyle="#000",t.font="bold 9px sans-serif",t.textAlign="center",t.fillText("POLICE",0,0),t.restore();const I=18,G=5,P=a*.48-I/2,M=r*.1-G;t.fillStyle="#374151",t.fillRect(P,M+2,I,3);const F=Math.floor(Date.now()/150)%2===0;t.fillStyle=F?"#ef4444":"#7f1d1d",t.fillRect(P,M,I/2-1,4),t.fillStyle=F?"#1e3a8a":"#3b82f6",t.fillRect(P+I/2+1,M,I/2-1,4),F?(t.shadowColor="#ef4444",t.shadowBlur=10,t.fillStyle="rgba(239, 68, 68, 0.3)",t.beginPath(),t.arc(P,M,15,0,Math.PI*2),t.fill(),t.shadowBlur=0):(t.shadowColor="#3b82f6",t.shadowBlur=10,t.fillStyle="rgba(59, 130, 246, 0.3)",t.beginPath(),t.arc(P+I,M,15,0,Math.PI*2),t.fill(),t.shadowBlur=0),t.fillStyle="#fef08a",t.beginPath(),t.ellipse(a-2,r*.5,2,5,0,0,Math.PI*2),t.fill();const B=te=>{t.fillStyle="#111",t.beginPath(),t.arc(te,O-2,R,0,Math.PI*2),t.fill(),t.fillStyle="#9ca3af",t.beginPath(),t.arc(te,O-2,R*.6,0,Math.PI*2),t.fill(),t.fillStyle="#4b5563",t.beginPath(),t.arc(te,O-2,R*.2,0,Math.PI*2),t.fill()};B(a*.2),B(a*.8),d&&(t.fillStyle="#000",t.fillRect(a*.55,r*.42,a*.15,r*.4)),t.restore();break;case"cybertruck":const H=a*.4;t.fillStyle="#c0c0c0",t.beginPath(),t.moveTo(a,r-15),t.lineTo(H,0),t.lineTo(5,r-20),t.lineTo(5,r-10),t.lineTo(a,r-10),t.closePath(),t.fill(),t.strokeStyle="#999",t.lineWidth=1,t.stroke(),t.fillStyle="#000",t.beginPath(),t.moveTo(H,5),t.lineTo(a-10,r-20),t.lineTo(20,r-24),t.closePath(),t.fill(),t.fillStyle="#fff",t.shadowColor="#fff",t.shadowBlur=10,t.fillRect(0,r-25,10,2),t.shadowBlur=0,t.fillStyle="#f00",t.shadowColor="#f00",t.shadowBlur=5,t.fillRect(a-5,r-20,5,2),t.shadowBlur=0,t.fillStyle="#111",t.beginPath(),t.arc(25,r-5,16,0,Math.PI*2),t.fill(),t.fillStyle="#333",t.beginPath(),t.arc(25,r-5,8,0,Math.PI*2),t.fill(),t.fillStyle="#111",t.beginPath(),t.arc(a-30,r-5,16,0,Math.PI*2),t.fill(),t.fillStyle="#333",t.beginPath(),t.arc(a-30,r-5,8,0,Math.PI*2),t.fill();break;case"hydrant":if(t.fillStyle="#cc0000",t.fillRect(a/4,r/3,a/2,r*.66),t.fillRect(0,r/2,a,r/5),t.fillStyle="#990000",t.beginPath(),t.arc(a/2,r/3,a/3,Math.PI,0),t.fill(),c){t.save(),t.translate(a/2,0),t.rotate(-Math.PI/4),t.strokeStyle="#38bdf8",t.lineWidth=3,t.globalAlpha=.8;for(let te=0;te<5;te++){const A=30+Math.random()*40,C=Math.random()*10-5;t.beginPath(),t.moveTo(0,0),t.quadraticCurveTo(A/2,C*2,A,C*5),t.stroke()}t.restore()}break;case"cart":t.save(),t.fillStyle="#ef4444",t.fillRect(5,5,5,10),t.strokeStyle="#cbd5e1",t.lineWidth=2,t.beginPath(),t.moveTo(10,15),t.lineTo(15,r-10),t.lineTo(a-10,r-10),t.lineTo(a,15),t.closePath(),t.moveTo(20,15),t.lineTo(23,r-10),t.moveTo(30,15),t.lineTo(31,r-10),t.moveTo(40,15),t.lineTo(39,r-10),t.moveTo(12,25),t.lineTo(a-5,25),t.moveTo(14,35),t.lineTo(a-8,35),t.stroke(),t.strokeStyle="#64748b",t.beginPath(),t.moveTo(15,r-10),t.lineTo(15,r-5),t.lineTo(a-10,r-5),t.stroke(),t.fillStyle="#333",t.beginPath(),t.arc(15,r,4,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(a-10,r,4,0,Math.PI*2),t.fill(),t.restore();break;case"ledge":t.fillStyle="#555",t.fillRect(0,0,a,r),t.fillStyle="#777",t.fillRect(0,0,a,4),t.fillStyle="#444",t.fillRect(0,4,a,2);break;case"curb":t.fillStyle="#9ca3af",t.fillRect(0,10,a,r-10),t.fillStyle="#ef4444",t.fillRect(0,10,a,5),t.fillStyle="#ffffff",t.fillRect(10,10,10,5),t.fillRect(30,10,10,5);break;case"rail":t.strokeStyle="#ccc",t.lineWidth=4,t.beginPath(),t.moveTo(10,r),t.lineTo(10,5),t.moveTo(a-10,r),t.lineTo(a-10,5),t.stroke(),t.strokeStyle="#fff",t.lineWidth=4,t.beginPath(),t.moveTo(5,5),t.lineTo(a-5,5),t.stroke();break;case"flat_rail":t.strokeStyle="#999",t.lineWidth=3,t.beginPath(),t.moveTo(5,r),t.lineTo(5,r-10),t.moveTo(a-5,r),t.lineTo(a-5,r-10),t.stroke(),t.strokeStyle="#ddd",t.lineWidth=3,t.beginPath(),t.moveTo(0,r-10),t.lineTo(a,r-10),t.stroke();break;case"bin":t.fillStyle="#2e7d32",t.fillRect(5,0,a-10,r),t.fillStyle="#1b5e20",t.fillRect(5,10,a-10,2),t.fillRect(5,25,a-10,2),t.fillRect(5,40,a-10,2);break;case"grey_bin":t.fillStyle="#64748b",t.fillRect(5,0,a-10,r),t.fillStyle="#475569",t.fillRect(5,10,a-10,2),t.fillRect(5,25,a-10,2),t.fillRect(5,40,a-10,2);break;case"ramp":t.fillStyle="#d2b48c",t.beginPath(),t.moveTo(0,r),t.lineTo(a,r),t.lineTo(a,0),t.closePath(),t.fill(),t.fillStyle="#666",t.beginPath(),t.arc(a,0,3,0,Math.PI*2),t.fill();break;case"gap":t.strokeStyle="#333",t.lineWidth=2,t.beginPath(),t.moveTo(0,0),t.lineTo(0,100),t.moveTo(a,0),t.lineTo(a,100),t.stroke();const z=t.createLinearGradient(0,0,0,100);z.addColorStop(0,"rgba(0,0,0,0.5)"),z.addColorStop(1,"rgba(0,0,0,0.9)"),t.fillStyle=z,t.fillRect(0,0,a,100);break;case"concrete_structure":const j=100;t.fillStyle="#444",t.beginPath(),t.moveTo(0,r),t.lineTo(j,0),t.lineTo(a,0),t.lineTo(a,r),t.closePath(),t.fill(),t.strokeStyle="#555",t.lineWidth=2,t.beginPath(),t.moveTo(0,r),t.lineTo(j,0),t.lineTo(a,0),t.stroke();break;case"platform":t.fillStyle="#444",t.fillRect(0,0,a,r),t.fillStyle="#333",t.fillRect(0,0,a,2);break;case"stairs_down":t.fillStyle="#444";const $=4,oe=a/$,q=r/$;t.beginPath(),t.moveTo(0,0);for(let te=1;te<=$;te++)t.lineTo(te*oe,(te-1)*q),t.lineTo(te*oe,te*q);t.lineTo(0,r),t.closePath(),t.fill(),t.strokeStyle="#c52323",t.lineWidth=3,t.beginPath(),t.moveTo(0,-15),t.lineTo(a,r-15),t.stroke(),t.lineWidth=2,t.beginPath(),t.moveTo(10,-12),t.lineTo(10,0),t.moveTo(a/2,r/2-15),t.lineTo(a/2,r/2),t.moveTo(a-10,r-18),t.lineTo(a-10,r),t.stroke();break;case"mega_ramp":const Z=Math.max(a,1),Q=Math.max(r,1),re=(Z*Z-Q*Q)/(2*Z),fe=Z-re,U=Math.atan2(r,-re),W=0;t.save(),t.beginPath(),t.moveTo(0,r),t.arc(re,0,fe,U,W,!0),t.lineTo(a,r),t.lineTo(0,r),t.closePath(),t.clip(),t.strokeStyle="#374151",t.lineWidth=2;const de=40;for(let te=0;te<a;te+=de)t.beginPath(),t.moveTo(te,0),t.lineTo(te,r+200),t.stroke();for(let te=0;te<r;te+=de)t.beginPath(),t.moveTo(0,te),t.lineTo(a,te),t.stroke();t.globalAlpha=.5;for(let te=0;te<a;te+=de)t.beginPath(),t.moveTo(te,0),t.lineTo(te+de,r),t.stroke();t.restore(),t.beginPath(),t.arc(re,0,fe,U,W,!0),t.lineTo(a+100,0),t.lineTo(a+100,15),t.lineTo(a,15),t.arc(re,0,fe-15,W,U,!1),t.closePath(),t.fillStyle="#9ca3af",t.fill(),t.strokeStyle="#d1d5db",t.lineWidth=2,t.stroke(),t.beginPath(),t.arc(a,0,6,0,Math.PI*2),t.fillStyle="#f3f4f6",t.fill(),t.strokeStyle="#1f2937",t.lineWidth=1,t.stroke(),t.beginPath(),t.arc(a-2,-2,2,0,Math.PI*2),t.fillStyle="white",t.fill(),t.fillStyle="#4b5563",t.fillRect(a,10,100,r);break;default:t.fillStyle="#c52323",t.fillRect(0,0,a,r)}t.restore()}function EM(){const t=V.useRef(null),e=V.useRef(null),n=V.useRef(0),i=V.useRef({status:"MENU",score:0,jumpsPerformed:0,count180:0,count360:0,grindsPerformed:0,lives:3,frame:0,player:{x:100,y:0,vy:0,state:"RUNNING",rotation:0,trickName:"",isFakie:!1,pushTimer:0,pushCount:0,targetPushes:3,coastingDuration:0,natasSpinCount:0,natasSpinTarget:0,natasTapCount:0,lastNatasTapTime:0,platformId:null,isCrouching:!1,isSpinReady:!1},obstacles:[],collectibles:[],projectiles:[],floatingTexts:[],selectedChar:"male_cap",lastTapTime:0,tapCount:0,touchStartY:0,touchStartX:0,touchStartTime:0,currentFloorY:Dt,nextObstacleDist:0,totalScroll:0,arrestTimer:0,world:"NORMAL",underworldTimer:0,spawnedExit:!1,transitionY:0,ufoKillCount:0,spaceDuration:0,abductionActive:!1,beamDownTimer:0,ufoLocked:!1,powerups:{has360Laser:!1,speedBoostTimer:0,psychedelicMode:!1,doubleSpawnRate:!1,doubleCoins:!1},shopCooldown:0,hasVisitedShop:!1,spaceEntryScroll:0}),[a,r]=V.useState("MENU"),[c,d]=V.useState(0),[p,f]=V.useState({grinds:0,jumps:0,c180:0,c360:0}),[g,_]=V.useState(3),[b,S]=V.useState("male_cap"),[w,E]=V.useState(0),[N,k]=V.useState(""),[L,R]=V.useState(!1),[O,I]=V.useState(We().isMuted);V.useEffect(()=>{try{const A=localStorage.getItem("invert-skate-highscore");A&&E(parseInt(A,10));const C=localStorage.getItem("invert-skate-username");C&&k(C)}catch(A){console.error(A)}return()=>{try{We().stopMusic()}catch{}e.current&&cancelAnimationFrame(e.current)}},[]);const G=A=>{A>w&&(E(A),localStorage.setItem("invert-skate-highscore",A.toString()))},P=()=>{const A=!L;R(A),A?We().pauseMusic():(We().resumeMusic(),n.current=0)},M=()=>{const A=We();A.toggleMute(),I(A.isMuted)},F=A=>{const C=i.current;let he=0,ue=!1;A==="CHIPS"?(he=5e3,C.score>=he&&(C.powerups.has360Laser=!0,C.powerups.doubleSpawnRate=!0,q(C.player.x,C.currentFloorY-100,"LASER + TRIPLE UFOs!","#fbbf24"),ue=!0)):A==="COKE"?(he=1e4,C.score>=he&&(C.powerups.speedBoostTimer=20,C.powerups.doubleCoins=!0,q(C.player.x,C.currentFloorY-100,"SPEED + RICHES!","#ef4444"),ue=!0)):A==="KOROVA"?(he=67,C.score>=he&&(C.powerups.psychedelicMode=!0,q(C.player.x,C.currentFloorY-100,"WHOA... DUDE...","#a855f7"),ue=!0)):A==="LIFE"&&(he=5e4,C.score>=he&&(C.lives+=1,_(C.lives),q(C.player.x,C.currentFloorY-100,"1-UP!","#22c55e"),ue=!0)),ue&&(C.score-=he,C.spaceDuration-=20,d(C.score))},B=()=>{const A=i.current;r("PLAYING"),A.status="PLAYING",A.shopCooldown=300,A.hasVisitedShop=!0,We().resumeMusic(),n.current=0},H=()=>{const A=i.current;A.world="TRANSITION_DOWN",A.transitionY=0,A.player.x=180,A.player.state="COASTING",A.player.vy=0,A.player.platformId=null,A.spawnedExit=!1,We().playMetalHit(),We().playUnderworldMusic()},z=()=>{const A=i.current;A.world="NORMAL",A.player.x=100,A.player.vy=-25,A.player.y=0,A.player.state="JUMPING",A.player.platformId=null,A.player.rotation=0,A.transitionY=0,A.underworldTimer=0,A.spawnedExit=!1,A.nextObstacleDist=400,A.obstacles=[],A.collectibles=[],A.projectiles=[],We().playLaunch(),We().playMainMusic()},j=()=>{const A=i.current;A.world="SPACE",A.obstacles=[],A.collectibles=[],A.projectiles=[],A.spaceEntryScroll=A.totalScroll;const C=250,he={id:Date.now(),x:200,y:C,w:1500,h:20,type:"space_platform",isGrindable:!0,isGap:!1,isPlatform:!0,passed:!1};A.obstacles.push(he),A.currentFloorY=C,A.player.platformId=null,A.player.vy=su*1,A.player.state="JUMPING",A.player.x=100,A.player.y=-10,A.nextObstacleDist=1200,A.transitionY=0,A.spaceDuration=0,A.abductionActive=!1,A.ufoLocked=!1,A.shopCooldown=0,A.hasVisitedShop=!1,A.powerups.has360Laser=!1,A.powerups.speedBoostTimer=0,A.powerups.psychedelicMode=!1,A.powerups.doubleSpawnRate=!1,A.powerups.doubleCoins=!1,We().playLaunch(),We().playSpaceMusic()},$=()=>{const A=i.current;A.world="NORMAL",A.obstacles=[],A.collectibles=[],A.projectiles=[],A.player.platformId=null,A.player.state="TUMBLING",A.player.x=100,A.player.y=-2500,A.player.vy=0,A.currentFloorY=Dt,A.nextObstacleDist=1e3,A.transitionY=0,A.ufoKillCount=0,A.spaceDuration=0,A.abductionActive=!1,A.ufoLocked=!1,A.powerups.has360Laser=!1,A.powerups.speedBoostTimer=0,A.powerups.psychedelicMode=!1,A.powerups.doubleSpawnRate=!1,A.powerups.doubleCoins=!1,We().playCrash(),q(200,200,"RE-ENTRY!","#ef4444"),We().playMainMusic()},oe=()=>{const A=i.current;A.obstacles=[],A.collectibles=[],A.projectiles=[];const C=Dt-50,he={id:Date.now(),x:0,y:C,w:1e3,h:20,type:"platform",isGrindable:!1,isGap:!1,isPlatform:!0,passed:!1};A.obstacles.push(he),A.player.platformId=he.id,A.currentFloorY=C,A.player.x=100,A.player.y=0,A.player.vy=0,A.player.state="RUNNING",A.player.pushTimer=0,A.player.rotation=0,A.player.trickName="",A.spawnedExit=!1,A.nextObstacleDist=0,A.lives--,_(A.lives),A.lives<=0&&(A.status="GAME_OVER",r("GAME_OVER"),G(A.score),We().stopMusic()),We().playCrash()},q=(A,C,he,ue)=>{i.current.floatingTexts.push({id:Date.now(),x:A,y:C,text:he,color:ue,life:60})},Z=()=>{const A=i.current;A.player.state!=="CRASHED"&&(A.player.state="CRASHED",A.player.isCrouching=!1,We().playCrash(),A.lives--,_(A.lives),A.lives<=0?(A.status="GAME_OVER",r("GAME_OVER"),G(A.score),We().stopMusic()):setTimeout(()=>{A.world==="UNDERWORLD"?oe():A.world==="SPACE"?$():(A.player.y=-200,A.player.vy=0,A.player.state="JUMPING",A.player.platformId=null,A.obstacles=A.obstacles.filter(C=>C.x>400)),A.nextObstacleDist>2e3&&(A.nextObstacleDist=500),A.player.rotation=0,A.player.trickName="",A.player.isFakie=!1,A.player.isCrouching=!1},250))},Q=()=>{const A=i.current;if(!(A.world!=="SPACE"||A.player.state==="CRASHED"||A.player.state==="ABDUCTED"||A.abductionActive)){if(A.powerups.has360Laser)for(let he=0;he<16;he++){const ue=Math.PI*2/16*he;A.projectiles.push({id:Date.now()+he,x:A.player.x+30,y:A.currentFloorY+A.player.y-35,vx:Math.cos(ue)*20,vy:Math.sin(ue)*20,life:2})}else[0,-20,20].forEach((he,ue)=>{A.projectiles.push({id:Date.now()+ue,x:A.player.x+30,y:A.currentFloorY+A.player.y-35+he,vx:20,vy:0,life:2})});We().playLaunch()}},re=A=>{const C=i.current,he=t.current;if(!he)return;const ue=he.getContext("2d");if(!ue)return;n.current||(n.current=A);const Le=A-n.current;n.current=A;const Ee=L||C.status!=="PLAYING"?0:Math.min(Le/16.667,4);if(C.status==="PLAYING"&&!L){C.frame+=Ee,C.shopCooldown>0&&(C.shopCooldown-=Ee),C.powerups.speedBoostTimer>0&&(C.powerups.speedBoostTimer-=Le/1e3);const Ge=C.powerups.speedBoostTimer>0?P5*2:P5,we=C.player.state==="NATAS_SPIN",Ve=C.player.state==="ARRESTED",Re=C.player.state==="ABDUCTED";if(C.projectiles.forEach(ae=>{ae.x+=ae.vx*Ee,ae.y+=ae.vy*Ee,ae.life-=Ee/60}),C.projectiles=C.projectiles.filter(ae=>ae.life>0),C.projectiles.forEach(ae=>{for(let _e=C.obstacles.length-1;_e>=0;_e--){const Be=C.obstacles[_e];if(Be.type==="alien_ship"&&ae.x+30>Be.x&&ae.x<Be.x+Be.w&&Math.abs(ae.y-Be.y)<40){C.obstacles.splice(_e,1),ae.life=0,C.score+=500,C.ufoKillCount++,q(Be.x,Be.y,"BLASTED! +500","#a3e635"),We().playMetalHit();break}}}),C.projectiles=C.projectiles.filter(ae=>ae.life>0),C.world==="BEAM_DOWN")C.transitionY-=15*Ee,C.player.x=he.width/2,C.player.y=he.height/2,C.player.state="ABDUCTED",C.player.rotation+=.05*Ee,C.transitionY<=0&&(C.world="NORMAL",C.obstacles=[],C.collectibles=[],C.projectiles=[],C.player.state="JUMPING",C.player.rotation=0,C.player.x=100,C.player.y=-200,C.player.vy=0,C.player.platformId=null,C.currentFloorY=Dt,C.nextObstacleDist=500,C.transitionY=0,C.spaceDuration=0,C.abductionActive=!1,C.ufoLocked=!1,C.player.isCrouching=!1,C.powerups.has360Laser=!1,C.powerups.speedBoostTimer=0,C.powerups.psychedelicMode=!1,C.powerups.doubleSpawnRate=!1,C.powerups.doubleCoins=!1,We().playMainMusic(),q(200,200,"TOUCHDOWN!","#38bdf8"));else if(C.world==="TRANSITION_DOWN"){C.player.x+=6*Ee;const K=250+(C.player.x-180)*2.5;C.player.y=K-Dt,C.player.rotation=Math.atan(2.5),C.player.state="JUMPING";const ye=(C.player.x-180)/300;if(C.transitionY=-ye*750,ye>=1||C.player.x>=480){C.world="UNDERWORLD",C.obstacles=[],C.collectibles=[],C.projectiles=[],C.underworldTimer=0,C.transitionY=0,C.currentFloorY=Dt,C.player.rotation=0,C.player.x=100,C.player.isCrouching=!1;const Se=Dt-50,xe={id:Date.now(),x:50,y:Se,w:800,h:20,type:"platform",isGrindable:!1,isGap:!1,isPlatform:!0,passed:!1};C.obstacles.push(xe),C.player.platformId=xe.id,C.currentFloorY=Se,C.player.y=0,C.player.vy=0,C.player.state="RUNNING",C.player.pushTimer=0,C.nextObstacleDist=0,C.spawnedExit=!1}}else{if(!we&&!Ve&&!C.ufoLocked&&C.player.state!=="CRASHED"){const X=Ge*Ee;C.totalScroll+=X,C.nextObstacleDist-=X,C.obstacles.forEach(K=>{if(K.x-=X,K.type==="fireball"){const ye=K.fireballSpeed||.005,Se=K.fireballOffset||0,xe=K.fireballHeight||200,Me=K.fireballBaseY||400,ut=Math.abs(Math.sin(C.frame*ye+Se))*xe;K.y=Me-ut}}),C.collectibles.forEach(K=>K.x-=X)}if(C.world==="UNDERWORLD"){if(C.underworldTimer+=Ee,C.player.y>200){oe(),e.current=requestAnimationFrame(re);return}C.underworldTimer>1020&&!C.spawnedExit&&C.nextObstacleDist>0&&(C.nextObstacleDist=0)}else if(C.world==="SPACE"){if(C.shopCooldown<=0&&!C.abductionActive&&!C.ufoLocked&&C.player.state!=="CRASHED"&&!C.hasVisitedShop){const X=k2(he.width,he.height,C.totalScroll,0,C.spaceEntryScroll),K=C.player.x,ye=C.currentFloorY+C.player.y,Se=X.y-88,xe=X.x;Math.sqrt(Math.pow(K-xe,2)+Math.pow(ye-Se,2))<60&&(r("OXXO_SHOP"),C.status="OXXO_SHOP",We().pauseMusic())}if(C.spaceDuration+=Ee/60,C.spaceDuration>20&&!C.abductionActive&&(C.abductionActive=!0,C.obstacles.push({id:Date.now(),x:he.width+200,y:100,w:300,h:120,type:"big_ufo",isGrindable:!1,isGap:!1,isPlatform:!1,passed:!1}),q(he.width-100,200,"ABDUCTION IMMINENT!","#ef4444")),C.abductionActive){const X=C.obstacles.find(K=>K.type==="big_ufo");if(X){const K=X.x+X.w/2,ye=he.width/2,Se=C.player.state!=="CRASHED"&&C.player.state!=="TUMBLING"&&C.player.state!=="ARRESTED";if(K<=ye&&!C.ufoLocked&&Se){C.ufoLocked=!0;const xe=ye-K;X.x+=xe}if(C.ufoLocked&&!Se&&(C.ufoLocked=!1),C.ufoLocked){C.player.platformId=null,C.player.vy=0,C.player.isCrouching=!1;const xe=X.x+X.w/2,Me=X.y+X.h/2+40,ut=C.currentFloorY+C.player.y,tt=xe-C.player.x,Ue=Me-ut;C.player.x+=tt*.05*Ee,C.player.y+=Ue*.05*Ee,C.player.rotation+=.15*Ee,Math.abs(tt)<10&&Math.abs(Ue)<10&&(C.world="BEAM_DOWN",C.transitionY=3e3,We().playLaunch())}}}else{if(C.player.y>600){$(),e.current=requestAnimationFrame(re);return}C.player.y<-350&&(C.player.vy<0&&(C.player.vy=0),C.player.y=-350)}}if(C.player.state==="RUNNING"?C.player.isFakie?C.player.state="COASTING":(C.player.pushTimer+=Ee,C.selectedChar==="male_cap"?C.player.pushTimer>60&&(C.player.state="COASTING",C.player.pushTimer=0,C.player.coastingDuration=300):C.player.pushTimer>90&&(C.player.state="COASTING",C.player.pushTimer=0,C.player.coastingDuration=120+Math.random()*180)):C.player.state==="COASTING"&&(C.player.pushTimer+=Ee,C.player.pushTimer>C.player.coastingDuration&&(C.player.isFakie||(C.player.state="RUNNING"),C.player.pushTimer=0)),C.nextObstacleDist<=0&&!Ve&&!C.abductionActive&&!Re){const X=he.width+50;if(C.world==="SPACE"){const K=200+Math.random()*300,ye=150+Math.random()*250,Se=C.obstacles[C.obstacles.length-1];let xe=250;Se&&(Se.isPlatform||Se.isGrindable)&&(xe=Se.y+(Math.random()*200-100),xe<100&&(xe=100),xe>320&&(xe=320));const Me=Math.random()>.6,ut=Me?"station_girder":"solar_panel",tt=Me?40:20;C.obstacles.push({id:Date.now(),x:X,y:xe,w:K,h:tt,type:ut,isGrindable:!0,isGap:!1,isPlatform:!0,passed:!1});const Ue=C.powerups.doubleCoins?30:60,Ht=Math.floor(K/Ue);for(let Lt=0;Lt<Ht;Lt++)if(Math.random()>.3){const kt=50+Math.random()*100;C.collectibles.push({id:Date.now()+Lt*10,x:X+30+Lt*Ue,y:xe-kt,type:Math.random()>.9?"DIAMOND":"COIN",collected:!1})}if(Math.random()>.2){const kt=C.powerups.doubleSpawnRate?9:3;for(let Rt=0;Rt<kt;Rt++){const Yt=Math.random()*800-200,Ot=Math.random()*150-50,Tn=X+Yt,Qt=xe-200+Ot;C.obstacles.push({id:Date.now()+999+Rt,x:Tn,y:Qt,w:40,h:20,type:"alien_ship",isGrindable:!1,isGap:!1,isPlatform:!1,passed:!1})}}C.nextObstacleDist=K+ye}else if(C.world==="UNDERWORLD"){if(C.underworldTimer>1020&&!C.spawnedExit){const K=C.obstacles.filter(xe=>xe.isPlatform).pop(),ye=K?K.y:Dt,Se=250;C.obstacles.push({id:Date.now(),x:X,y:ye-Se,w:300,h:Se,type:"mega_ramp",isGrindable:!1,isGap:!1,isPlatform:!0,passed:!1}),C.spawnedExit=!0,C.nextObstacleDist=99999}else if(!C.spawnedExit){const K=60+Math.random()*100,ye=300+Math.random()*200,Se=C.obstacles[C.obstacles.length-1];let xe=Dt-80;Se&&Se.isPlatform&&(xe=Se.y+(Math.random()>.5?30:-30),xe>Dt-40&&(xe=Dt-40),xe<Dt-150&&(xe=Dt-150)),C.obstacles.push({id:Date.now(),x:X,y:xe,w:ye,h:20,type:"platform",isGrindable:!1,isGap:!1,isPlatform:!0,passed:!1});const Me=50,ut=Math.floor((ye-100)/Me);for(let kt=0;kt<ut;kt++)Math.random()>.1&&C.collectibles.push({id:Date.now()+kt*10,x:X+50+kt*Me,y:xe-40,type:"COIN",collected:!1});const tt=C.collectibles.filter(kt=>kt.type==="DIAMOND").length;Math.random()>.9&&tt===0&&C.collectibles.push({id:Date.now()+999,x:X+ye/2,y:xe-80,type:"DIAMOND",collected:!1});const Ue=X+ye+K/2,Ht=Dt+300,Lt=450+Math.random()*200;C.obstacles.push({id:Date.now()+1234,x:Ue-15,y:Ht,w:30,h:30,type:"fireball",isGrindable:!1,isGap:!1,isPlatform:!1,passed:!1,fireballBaseY:Ht,fireballHeight:Lt,fireballSpeed:.02+Math.random()*.02,fireballOffset:Math.random()*Math.PI*2}),C.nextObstacleDist=ye+K}}else if(Math.random()<.15){const Se=100+(Math.random()>.5?150:300),xe=50;C.obstacles.push({id:Date.now(),x:X,y:Dt-xe,w:Se,h:xe,type:"concrete_structure",isGrindable:!1,isGap:!1,isPlatform:!0,passed:!1});const Me=120;C.obstacles.push({id:Date.now()+1,x:X+Se,y:Dt-xe,w:Me,h:xe,type:"stairs_down",isGrindable:!0,isGap:!1,isPlatform:!0,passed:!1}),C.obstacles.push({id:Date.now()+2,x:X+Se+Me,y:Dt,w:200,h:0,type:"platform",isGrindable:!1,isGap:!1,isPlatform:!0,passed:!1}),C.nextObstacleDist=Se+Me+300}else{const K=L5[Math.floor(Math.random()*L5.length)];C.obstacles.push({id:Date.now(),x:X,y:Dt-K.h+(K.yOffset||0),w:K.w,h:K.h,type:K.type,isGrindable:K.grind,isGap:K.gap,isPlatform:K.isPlatform,passed:!1}),Math.random()>.5&&C.collectibles.push({id:Date.now()+99,x:X+K.w/2,y:Dt-K.h-60,type:"COIN",collected:!1}),C.nextObstacleDist=Math.random()*300+300}}C.obstacles=C.obstacles.filter(X=>X.x+X.w>-200),C.collectibles=C.collectibles.filter(X=>X.x>-200&&!X.collected),C.floatingTexts.forEach(X=>{X.y-=1*Ee,X.life-=Ee}),C.floatingTexts=C.floatingTexts.filter(X=>X.life>0);const ae=C.player.x;if(!C.ufoLocked){const X=C.obstacles.find(K=>K.type==="mega_ramp"&&ae>=K.x&&ae<=K.x+K.w+50);if(X)C.player.platformId=X.id;else if(!C.player.platformId&&C.player.y>-20&&C.player.vy>=0){const K=C.obstacles.find(ye=>(ye.type==="ramp"||ye.type==="ramp_up"||ye.type==="concrete_structure")&&ae>=ye.x&&ae<=ye.x+ye.w);if(K){C.player.platformId=K.id;let ye=K.y;if(K.type==="concrete_structure"){const xe=ae-K.x;if(xe<100){const Me=Math.max(0,xe/100);ye=K.y+K.h-K.h*Me}else ye=K.y}else{const Se=(ae-K.x)/K.w;ye=K.y+K.h-K.h*Se}C.currentFloorY=ye,C.player.y=0,C.player.vy=0}}if(C.player.platformId){const K=C.obstacles.find(ye=>ye.id===C.player.platformId);if(K)if(ae<K.x||ae>K.x+K.w)if(K.type==="mega_ramp"&&ae>K.x+K.w)z();else if(K.type==="ramp"&&ae>K.x+K.w)C.player.vy=su,C.player.state="JUMPING",C.player.platformId=null,We().playLaunch();else{const ye=C.obstacles.find(Se=>Se.isPlatform&&Se.id!==K.id&&ae>=Se.x&&ae<=Se.x+Se.w);if(ye){C.player.platformId=ye.id;let Se=ye.y;if(ye.type==="ramp"||ye.type==="ramp_up"){const xe=(ae-ye.x)/ye.w;Se=ye.y+ye.h-ye.h*xe}else if(ye.type==="mega_ramp"){const xe=ye.w,Me=ye.h,ut=ae-ye.x,tt=Math.max(xe,1),Ue=Math.max(Me,1),Ht=(tt*tt-Ue*Ue)/(2*tt),Lt=tt-Ht,kt=ut-Ht,Rt=Lt*Lt-kt*kt;if(Rt>=0)Se=ye.y+Math.sqrt(Rt);else{const Yt=Math.max(0,Math.min(1,ut/xe));Se=ye.y+ye.h-ye.h*Yt}}else if(ye.type==="stairs_down"){const xe=(ae-ye.x)/ye.w;Se=ye.y+ye.h*xe}else if(ye.type==="concrete_structure"){const Me=ae-ye.x;if(Me<100){const ut=Me/100;Se=ye.y+ye.h-ye.h*ut}else Se=ye.y}else(ye.type==="space_platform"||ye.type==="solar_panel"||ye.type==="station_girder")&&(Se=ye.y);C.currentFloorY=Se,C.player.y=0,C.player.vy=0}else{const Se=C.currentFloorY;C.player.platformId=null,C.world==="SPACE"||(C.currentFloorY=Dt),Se<C.currentFloorY?C.player.y=Se-C.currentFloorY:C.player.y=0}}else{if(K.type==="ramp"||K.type==="ramp_up"){const ye=(ae-K.x)/K.w;C.currentFloorY=K.y+K.h-K.h*ye}else if(K.type==="mega_ramp"){const ye=K.w,Se=K.h,xe=ae-K.x,Me=Math.max(ye,1),ut=Math.max(Se,1),tt=(Me*Me-ut*ut)/(2*Me),Ue=Me-tt,Ht=xe-tt,Lt=Ue*Ue-Ht*Ht;if(Lt>=0){C.currentFloorY=K.y+Math.sqrt(Lt);const kt=Math.sqrt(Lt),Yt=-(xe-tt)/kt;C.player.rotation=-Math.atan(Yt)}else{const kt=Math.max(0,Math.min(1,xe/ye));C.currentFloorY=K.y+K.h-K.h*kt}}else if(K.type==="stairs_down"){const ye=(ae-K.x)/K.w;C.currentFloorY=K.y+K.h*ye,Math.random()<.2*Ee&&(C.player.state==="RUNNING"||C.player.state==="COASTING")&&(C.score+=10,We().playFirecracker(),K.firecrackerTriggered||(K.firecrackerTriggered=!0,q(ae,C.currentFloorY-80,"Firecracker +100","#ef4444"),C.score+=100))}else if(K.type==="concrete_structure"){const Se=ae-K.x;if(Se<100){const xe=Math.max(0,Se/100);C.currentFloorY=K.y+K.h-K.h*xe}else C.currentFloorY=K.y}else C.currentFloorY=K.y;C.player.y=0,C.player.vy=0}else C.player.platformId=null,C.world!=="SPACE"&&(C.currentFloorY=Dt)}else C.world!=="SPACE"&&(C.currentFloorY=Dt)}if(!C.player.platformId&&C.player.state!=="GRINDING"&&C.player.state!=="NATAS_SPIN"&&C.player.state!=="ARRESTED"&&C.player.state!=="ABDUCTED"&&!C.ufoLocked){const X=C.world==="SPACE"?D5*.5:D5;C.player.vy+=X*Ee,C.player.y+=C.player.vy*Ee}const _e=C.currentFloorY+C.player.y;if(C.player.state==="TUMBLING")C.player.rotation+=.4*Ee,C.world!=="SPACE"&&C.player.y>=0&&C.player.vy>0&&(C.player.y=0,C.player.vy=0,C.player.rotation=0,C.player.state="RUNNING",C.player.pushTimer=0);else if(C.player.state==="NATAS_SPIN"){C.player.rotation+=.1*Ee,C.player.rotation>=C.player.natasSpinTarget&&C.player.rotation>=C.player.natasSpinTarget&&(C.player.state="JUMPING",C.player.vy=-5,C.player.rotation=0,C.player.trickName="");const X=Math.floor(C.player.rotation/(Math.PI*2));X>C.player.natasSpinCount&&(C.player.natasSpinCount=X,X<=3&&(C.score+=300,q(120,C.currentFloorY-80,"SPIN +300","#fbbf24"),We().playGrind()))}else if(C.player.vy>0&&!C.player.platformId&&!Re){const X=C.obstacles.filter(K=>K.isPlatform&&ae>=K.x&&ae<=K.x+K.w);for(const K of X){let ye=K.y;if(K.type==="ramp"||K.type==="ramp_up"){const Me=(ae-K.x)/K.w;ye=K.y+K.h-K.h*Me}else if(K.type==="mega_ramp"){const Me=K.w,ut=K.h,tt=ae-K.x,Ue=Math.max(Me,1),Ht=Math.max(ut,1),Lt=(Ue*Ue-Ht*Ht)/(2*Ue),kt=Ue-Lt,Rt=tt-Lt,Yt=kt*kt-Rt*Rt;if(Yt>=0)ye=K.y+Math.sqrt(Yt);else{const Ot=Math.max(0,Math.min(1,tt/Me));ye=K.y+K.h-K.h*Ot}}else if(K.type==="stairs_down"){const Me=(ae-K.x)/K.w;ye=K.y+K.h*Me}else if(K.type==="concrete_structure"){const ut=ae-K.x;if(ut<100){const tt=Math.max(0,ut/100);ye=K.y+K.h-K.h*tt}else ye=K.y}else ye=K.y;const Se=_e-C.player.vy*Ee,xe=K.type==="space_platform"||K.type==="solar_panel"||K.type==="station_girder"?5:15;if(Se<=ye+xe&&_e>=ye){C.player.platformId=K.id,C.currentFloorY=ye,C.player.y=0,C.player.vy=0,C.player.rotation=0,C.player.state="RUNNING",C.player.pushTimer=0,We().playGrind();break}}}if(C.player.y>0&&!C.player.platformId&&C.world!=="SPACE"&&C.world!=="UNDERWORLD"){let X=!1;for(const K of C.obstacles)if(K.isGap&&ae>K.x&&ae<K.x+K.w){X=!0;break}if(X)C.player.state!=="CRASHED"&&(C.player.vy+=1.5*Ee,Z());else{if(C.player.y=0,C.player.vy=0,C.player.trickName){const K=Math.abs(C.player.rotation%(Math.PI*2)),ye=K,Se=Math.abs(K-Math.PI),xe=Math.abs(K-Math.PI*2),Me=.6;ye<Me||Se<Me||xe<Me?C.player.trickName==="180"?(C.score+=50,C.count180++,q(ae,C.currentFloorY-80,"180 +50","#fbbf24")):C.player.trickName==="360"?(C.score+=100,C.count360++,q(ae,C.currentFloorY-80,"360 +100","#fbbf24")):C.score+=500:q(ae,C.currentFloorY-80,"Sketchy","#94a3b8"),C.player.rotation=0,C.player.trickName="",We().playGrind()}C.player.state!=="CRASHED"&&C.player.state!=="ARRESTED"&&C.player.state!=="TUMBLING"&&(C.player.rotation=0,C.player.state=C.player.isFakie?"COASTING":"RUNNING",C.player.pushTimer=0,C.player.isSpinReady=!1)}}C.player.trickName==="KICKFLIP"?(C.player.rotation+=.4*Ee,C.player.rotation>Math.PI*2&&(C.player.rotation=0,C.player.trickName="",C.score+=100)):C.player.trickName==="180"?C.player.rotation<Math.PI&&(C.player.rotation+=.15*Ee):C.player.trickName==="360"&&C.player.rotation<Math.PI*2&&(C.player.rotation+=.3*Ee);const Be={x:C.player.x,y:C.currentFloorY+C.player.y-50,w:30,h:50};C.collectibles.forEach(X=>{if(Be.x<X.x+20&&Be.x+Be.w>X.x-20&&Be.y<X.y+20&&Be.y+Be.h>X.y-20){X.collected=!0;const K=X.type==="COIN"?100:500;C.score+=K,q(X.x,X.y,`+${K}`,X.type==="COIN"?"#fbbf24":"#22d3ee"),We().playMetalHit()}});const Fe={x:C.player.x,y:C.currentFloorY+C.player.y-40,w:20,h:40};let Oe=!1;for(const X of C.obstacles){if(X.type==="big_ufo"){const K={x:X.x,y:X.y,w:X.w,h:X.h};if(C.abductionActive||C.player.state==="ABDUCTED")continue;if(Fe.x<K.x+K.w&&Fe.x+Fe.w>K.x&&Math.abs(C.currentFloorY+C.player.y-X.y)<X.h/2){Z();continue}}if(X.type==="alien_ship"){const K={x:X.x,y:X.y,w:X.w,h:X.h},ye=Fe.x<K.x+K.w+20&&Fe.x+Fe.w>K.x-20,Se=Fe.y<K.y+K.h&&Fe.y+Fe.h>K.y;if(ye&&Se){const xe=C.currentFloorY+C.player.y,Me=X.y;if(C.player.vy>0&&xe>=Me-20&&xe<=Me+30){C.player.vy=-12,C.player.state="JUMPING",C.player.platformId=null,We().playMetalHit();continue}else{Z();continue}}}if(X.type==="fireball"){const K={x:X.x,y:X.y,w:X.w,h:X.h};if(Fe.x<K.x+K.w&&Fe.x+Fe.w>K.x&&Fe.y<K.y+K.h&&Fe.y+Fe.h>K.y){Z();continue}}if(X.type==="stairs_down"&&!X.passed&&ae>X.x+X.w&&(X.passed=!0,C.player.state==="JUMPING"&&(C.score+=200,q(ae,C.currentFloorY-100,"STAIRS +200","#22c55e"),We().playJump())),!(X.isPlatform&&!X.isGrindable)&&X.x<Fe.x+Fe.w&&X.x+X.w>Fe.x){if(C.player.state==="TUMBLING"||C.player.state==="CRASHED"||C.player.state==="ARRESTED"||C.player.state==="ABDUCTED"||X.type==="ramp"&&C.player.y<-10)continue;if(X.isGap){const Me=C.player.x+15;Me>X.x&&Me<X.x+20&&C.player.y>0&&Z();continue}if(X.type==="bin"&&C.world==="NORMAL"&&!X.passed){const Me=C.currentFloorY+C.player.y,ut=X.y;if(C.player.vy>0&&Math.abs(Me-ut)<20){H(),X.passed=!0;continue}}const K=C.currentFloorY+C.player.y;let ye=X.y;if(X.type==="stairs_down"){const Me=Math.max(0,Math.min(1,(ae-X.x)/X.w));ye=X.y-15+X.h*Me}else X.type==="flat_rail"?ye=X.y+X.h-10:X.type==="rail"?ye=X.y+5:(X.type==="ledge"||X.type==="curb"||X.type==="cybertruck"||X.type==="hydrant"||X.type==="space_platform"||X.type==="solar_panel"||X.type==="station_girder")&&(ye=X.y);const xe=Math.abs(K-ye)<35;if(xe&&X.isGrindable&&C.player.vy>0)X.type==="hydrant"?(C.player.y=X.y-C.currentFloorY,C.player.vy=0,C.player.state="NATAS_SPIN",C.player.rotation=0,C.player.natasSpinCount=0,C.player.natasSpinTarget=Math.PI*2,C.player.natasTapCount=0,X.passed||(X.passed=!0,We().playGrind())):(C.player.y=ye-C.currentFloorY,C.player.vy=0,C.player.state="GRINDING",Oe=!0,X.passed||(We().playGrind(),X.passed=!0,C.grindsPerformed++,X.type==="stairs_down"?(C.score+=300,q(120,C.currentFloorY-50,"300","#fbbf24")):X.type==="rail"?(C.score+=200,q(120,C.currentFloorY-50,"200","#fbbf24")):X.type==="flat_rail"||X.type==="ledge"||X.type==="curb"||X.type==="cybertruck"?(C.score+=100,q(120,C.currentFloorY-50,"100","#fbbf24")):C.score+=100));else if(!xe&&!X.isPlatform&&X.type!=="ramp_up"&&X.type!=="stairs_down"&&X.type!=="concrete_structure"&&X.type!=="alien_ship"&&X.type!=="big_ufo"&&X.type!=="fireball"){if(X.type==="rail"||X.type==="flat_rail")continue;C.currentFloorY+C.player.y>X.y+5&&(X.type==="police_car"?X.passed||(X.passed=!0,X.doorOpen=!0,C.lives--,_(C.lives),C.lives<=0?(C.status="GAME_OVER",r("GAME_OVER"),G(C.score),We().stopMusic()):(C.player.state="ARRESTED",C.score-=1e3,q(120,C.currentFloorY-100,"BUSTED! -1 LIFE","#ef4444"),We().playSiren(),C.arrestTimer=0)):X.type==="bin"?X.passed||(X.passed=!0,C.score-=500,q(120,C.currentFloorY-50,"-500","#ef4444"),(()=>{const Ue=i.current;Ue.player.state="TUMBLING",Ue.player.vy=-8,Ue.player.rotation=0,We().playCrash()})()):X.type==="grey_bin"?X.passed||(X.passed=!0,C.score-=300,q(120,C.currentFloorY-50,"-300","#94a3b8"),(()=>{const Ue=i.current;Ue.player.state="TUMBLING",Ue.player.vy=-8,Ue.player.rotation=0,We().playCrash()})()):X.type==="cart"?X.passed||(X.passed=!0,C.score-=400,q(120,C.currentFloorY-50,"-400","#cbd5e1"),We().playMetalHit(),(()=>{const Ue=i.current;Ue.player.state="TUMBLING",Ue.player.vy=-8,Ue.player.rotation=0,We().playCrash()})()):X.type==="cybertruck"?X.passed||(X.passed=!0,C.score-=1e3,q(120,C.currentFloorY-100,"-1000","#ef4444"),(()=>{const Ue=i.current;Ue.player.state="TUMBLING",Ue.player.vy=-45,Ue.player.rotation=0,We().playLaunch()})()):X.type==="hydrant"?X.passed||(X.passed=!0,X.sprayingWater=!0,C.score-=200,(()=>{const Ue=i.current;Ue.player.state="TUMBLING",Ue.player.vy=-25,Ue.player.rotation=0,We().playLaunch(),q(120,Ue.currentFloorY-80,"Slam!","#38bdf8")})()):Z())}}}C.player.state==="GRINDING"&&!Oe&&(C.player.state="JUMPING"),d(C.score),f({grinds:C.grindsPerformed,jumps:C.jumpsPerformed,c180:C.count180,c360:C.count360})}}fe(ue,C),e.current=requestAnimationFrame(re)};V.useEffect(()=>(e.current=requestAnimationFrame(re),()=>{e.current&&cancelAnimationFrame(e.current)}),[L]);const fe=(A,C)=>{let he=C.transitionY;if(C.player.y<-150&&(he=-C.player.y-150),C.world==="BEAM_DOWN"?CM(A,A.canvas.width,A.canvas.height,C.transitionY):C.world==="UNDERWORLD"?bM(A,A.canvas.width,A.canvas.height,C.totalScroll):C.world==="TRANSITION_DOWN"?vM(A,A.canvas.width,A.canvas.height,he):C.world==="SPACE"?_M(A,A.canvas.width,A.canvas.height,C.totalScroll,he,!0,C.powerups.psychedelicMode,C.frame,C.spaceEntryScroll):xM(A,A.canvas.width,A.canvas.height,C.totalScroll,Dt,he),A.save(),A.translate(0,he),C.world==="NORMAL"){A.strokeStyle="#333",A.lineWidth=2,A.beginPath();const ue=C.obstacles.filter(Ge=>Ge.type==="gap").sort((Ge,we)=>Ge.x-we.x);let Le=0;const Ee=Dt;ue.forEach(Ge=>{Ge.x+Ge.w>0&&Ge.x<A.canvas.width&&(Ge.x>Le&&(A.moveTo(Le,Ee),A.lineTo(Ge.x,Ee)),Le=Math.max(Le,Ge.x+Ge.w))}),Le<A.canvas.width&&(A.moveTo(Le,Ee),A.lineTo(A.canvas.width,Ee)),A.stroke()}if(C.world!=="TRANSITION_DOWN"&&C.world!=="BEAM_DOWN"&&C.obstacles.forEach(ue=>{TM(A,ue.type,ue.x,ue.y,ue.w,ue.h,ue.sprayingWater,ue.doorOpen)}),C.collectibles.forEach(ue=>{ue.collected||wM(A,ue.type,ue.x,ue.y,C.frame)}),C.status!=="GAME_OVER"&&C.world!=="BEAM_DOWN"&&C.status!=="OXXO_SHOP"&&!(C.player.state==="ARRESTED"&&C.arrestTimer>40)){const Le=C.currentFloorY+C.player.y;Vh(A,C.selectedChar,C.player.x,Le-25,C.frame,C.player.state,C.player.rotation,C.player.trickName,C.player.isFakie,C.player.isCrouching)}C.projectiles.forEach(ue=>{SM(A,ue.x,ue.y,30)}),C.player.trickName&&C.player.state!=="CRASHED"&&(A.fillStyle="#c52323",A.font="bold 20px Arial",A.fillText(C.player.trickName,90,C.currentFloorY+C.player.y-70)),C.floatingTexts.forEach(ue=>{A.save(),A.fillStyle=ue.color,A.font="bold 24px Arial",A.globalAlpha=ue.life/30,A.fillText(ue.text,ue.x,ue.y),A.restore()}),A.restore(),C.world==="BEAM_DOWN"&&Vh(A,C.selectedChar,C.player.x,C.player.y,C.frame,"ABDUCTED",C.player.rotation,"",!1,!1)},U=V.useCallback(()=>{const A=i.current;if(A.world==="SPACE"){Q();return}A.player.state!=="NATAS_SPIN"&&A.player.state!=="ARRESTED"&&A.player.state!=="CRASHED"&&A.player.state!=="ABDUCTED"&&(A.player.trickName="KICKFLIP",A.player.rotation=0,We().playTrick())},[]),W=V.useCallback(A=>{const C=A.target;if(C.closest(".hud-button")||C.closest(".c3d-area")||a==="OXXO_SHOP"||a!=="PLAYING"||L)return;const he=i.current;if(he.player.state==="ARRESTED"||he.player.state==="ABDUCTED"||he.abductionActive)return;"touches"in A?(he.touchStartY=A.touches[0].clientY,he.touchStartX=A.touches[0].clientX):(he.touchStartY=A.clientY,he.touchStartX=A.clientX),he.touchStartTime=Date.now();const ue=Date.now();ue-he.lastTapTime<400?he.tapCount++:he.tapCount=1,he.lastTapTime=ue;const Le=he.player.state;he.world!=="SPACE"&&(Le==="RUNNING"||Le==="COASTING"||Le==="GRINDING"?he.player.isCrouching=!0:Le==="JUMPING"&&he.player.isSpinReady&&(he.tapCount===2?(he.player.trickName="180",he.player.rotation=0,he.player.isFakie=!he.player.isFakie,We().playDoubleJump()):he.tapCount===3&&(he.player.trickName="360",he.player.rotation=0,he.player.isFakie=!he.player.isFakie,We().playDoubleJump())))},[a,L]),de=V.useCallback(A=>{if(a!=="PLAYING"||L)return;const C=i.current;if(C.player.state==="ARRESTED"||C.player.state==="ABDUCTED"||C.abductionActive)return;let he="changedTouches"in A?A.changedTouches[0].clientX:A.clientX,ue="changedTouches"in A?A.changedTouches[0].clientY:A.clientY;const Le=he-C.touchStartX,Ee=ue-C.touchStartY;if(Math.abs(Le)>30||Math.abs(Ee)>30){U(),C.player.isCrouching=!1;return}const Ge=Date.now()-C.touchStartTime;if(C.world==="SPACE"){if(Ge>150){const we=C.player.state;if(we==="JUMPING"||we==="RUNNING"||we==="COASTING"||C.player.platformId){if(C.player.platformId){const Ve=C.currentFloorY+C.player.y;C.player.platformId=null,C.player.y=Ve-C.currentFloorY}C.player.vy=su*.5,C.player.state="JUMPING",We().playJump(),C.jumpsPerformed++}}return}if(C.player.isCrouching){const we=C.obstacles.find(Re=>Re.id===C.player.platformId),Ve=we&&we.type==="ramp";if(C.player.platformId){const Re=C.currentFloorY+C.player.y;C.player.platformId=null,C.world!=="SPACE"&&(C.currentFloorY=Dt),C.player.y=Re-C.currentFloorY}if(Ve)C.score+=500,q(C.player.x,C.currentFloorY-100,"BOOST +500","#3b82f6"),j();else{const _e=Math.min(Ge,350)/350,Be=su*(.45+(1-.45)*_e);C.player.vy=Be,We().playJump()}C.player.state="JUMPING",C.player.y-=1,C.jumpsPerformed++,C.player.isCrouching=!1,Ge>200?C.player.isSpinReady=!0:C.player.isSpinReady=!1}else C.world!=="SPACE"&&C.player.state==="JUMPING"&&C.player.vy<-5},[a,L,U]);return{canvasRef:t,uiState:a,setUiState:r,score:c,stats:p,lives:g,character:b,setCharacter:S,highScore:w,userName:N,setUserName:k,isPaused:L,isMuted:O,togglePause:P,toggleMute:M,startGame:()=>{const A=i.current;A.status="PLAYING",A.score=0,A.lives=3,A.obstacles=[],A.player.x=100,A.player.y=0,A.player.state="RUNNING",A.player.trickName="",A.player.isFakie=!1,A.selectedChar=b,A.nextObstacleDist=0,A.currentFloorY=Dt,A.jumpsPerformed=0,A.count180=0,A.count360=0,A.grindsPerformed=0,A.totalScroll=0,A.player.pushTimer=0,A.player.pushCount=0,A.player.targetPushes=3,A.arrestTimer=0,A.player.natasSpinCount=0,A.player.natasSpinTarget=0,A.player.natasTapCount=0,A.player.lastNatasTapTime=0,A.player.platformId=null,A.player.isCrouching=!1,A.player.isSpinReady=!1,A.world="NORMAL",A.underworldTimer=0,A.spawnedExit=!1,A.transitionY=0,A.collectibles=[],A.projectiles=[],A.ufoKillCount=0,A.spaceDuration=0,A.abductionActive=!1,A.ufoLocked=!1,A.powerups.has360Laser=!1,A.powerups.speedBoostTimer=0,A.powerups.psychedelicMode=!1,A.powerups.doubleSpawnRate=!1,A.powerups.doubleCoins=!1,A.shopCooldown=0,A.hasVisitedShop=!1,d(0),f({grinds:0,jumps:0,c180:0,c360:0}),_(3),r("PLAYING"),R(!1),n.current=0,We().startMusic()},handleTouchStart:W,handleTouchEnd:de,triggerAction:U,buyItem:F,closeShop:B}}const NM=({className:t="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:h.jsx("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H7.5a.75.75 0 01-.75-.75V5.25zm7.5 0A.75.75 0 0115 4.5h1.5a.75.75 0 01.75.75v13.5a.75.75 0 01-.75-.75H15a.75.75 0 01-.75-.75V5.25z",clipRule:"evenodd"})}),AM=({className:t="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:h.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"})}),MM=({className:t="w-6 h-6"})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:[h.jsx("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06zM18.584 5.106a.75.75 0 011.06 0c3.808 3.807 3.808 9.98 0 13.788a.75.75 0 11-1.06-1.06 8.25 8.25 0 000-11.668.75.75 0 010-1.06z"}),h.jsx("path",{d:"M15.932 7.757a.75.75 0 011.061 0 6 6 0 010 8.486.75.75 0 01-1.06-1.061 4.5 4.5 0 000-6.364.75.75 0 010-1.06z"})]}),kM=({className:t="w-6 h-6"})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:h.jsx("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.659 1.905h1.93l4.5 4.5c.945.945 2.561.276 2.561-1.06V4.06zM17.78 9.22a.75.75 0 10-1.06 1.06L18.44 12l-1.72 1.72a.75.75 0 001.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L20.56 12l1.72-1.72a.75.75 0 00-1.06-1.06l-1.72 1.72-1.72-1.72z"})}),RM=({score:t,highScore:e,lives:n,isMuted:i,toggleMute:a,isPaused:r,togglePause:c,onExit:d,stats:p,showStats:f})=>{const g=Array.from({length:Math.max(3,n)});return h.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none z-10",children:[h.jsxs("div",{className:"w-full bg-gray-900/95 backdrop-blur-sm border-b border-white/10 p-1 md:p-3 grid grid-cols-3 items-center pointer-events-auto h-[60px] md:h-auto",children:[h.jsxs("div",{className:"flex flex-col justify-center justify-self-start",children:[h.jsxs("div",{className:"flex items-baseline gap-1",children:[h.jsx("h1",{className:"text-lg md:text-3xl font-black italic tracking-tighter text-[#c52323]",children:"INVERT"}),h.jsx("span",{className:"hidden md:inline text-white font-bold text-sm tracking-normal opacity-80",children:"- THE GAME"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs md:text-sm text-gray-400 font-mono leading-none",children:[h.jsx("span",{className:"uppercase tracking-wider font-bold text-[9px] md:text-xs",children:"High Score"}),h.jsx("span",{className:"text-white font-bold",children:er(e)})]})]}),h.jsx("div",{className:"flex justify-center justify-self-center items-center w-full",children:h.jsx("div",{className:"font-mono text-3xl md:text-5xl font-black text-white drop-shadow-lg tracking-wider leading-none",children:er(t)})}),h.jsxs("div",{className:"flex items-center gap-2 justify-self-end",children:[h.jsx("div",{className:"flex gap-0.5 md:gap-1 bg-black/30 p-1 rounded-full border border-white/5 overflow-hidden max-w-[150px]",children:g.map((_,b)=>h.jsx(E2,{className:`w-3 h-3 md:w-5 md:h-5 transition-all duration-300 ${b<n?"text-[#c52323]":"text-gray-700"}`},b))}),h.jsxs("div",{className:"flex gap-1 md:gap-2",children:[h.jsx("button",{onClick:a,className:"bg-gray-800 p-1.5 rounded-md hover:bg-gray-700 border border-gray-600 text-gray-200",title:i?"Unmute":"Mute",children:i?h.jsx(kM,{className:"w-4 h-4 md:w-5 md:h-5"}):h.jsx(MM,{className:"w-4 h-4 md:w-5 md:h-5"})}),h.jsx("button",{onClick:c,className:"bg-gray-800 p-1.5 rounded-md hover:bg-gray-700 border border-gray-600 text-gray-200",title:r?"Resume":"Pause",children:r?h.jsx(AM,{className:"w-4 h-4 md:w-5 md:h-5"}):h.jsx(NM,{className:"w-4 h-4 md:w-5 md:h-5"})}),h.jsx("button",{onClick:d,className:"bg-gray-800 px-2 py-1.5 rounded-md hover:bg-gray-700 border border-gray-600 text-[10px] md:text-xs font-bold uppercase tracking-wider text-gray-200",children:"Exit"})]})]})]}),f&&h.jsx("div",{className:"w-full bg-gray-900/95 backdrop-blur-sm border-t border-white/10 p-1 md:p-2 pointer-events-auto",children:h.jsxs("div",{className:"flex justify-around items-center max-w-3xl mx-auto",children:[h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[8px] md:text-[10px] uppercase tracking-wider text-gray-500 font-bold",children:"Grinds"}),h.jsx("span",{className:"font-mono font-bold text-white text-sm md:text-xl leading-none",children:p.grinds})]}),h.jsx("div",{className:"w-px h-6 bg-white/10"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[8px] md:text-[10px] uppercase tracking-wider text-gray-500 font-bold",children:"Jumps"}),h.jsx("span",{className:"font-mono font-bold text-white text-sm md:text-xl leading-none",children:p.jumps})]}),h.jsx("div",{className:"w-px h-6 bg-white/10"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[8px] md:text-[10px] uppercase tracking-wider text-yellow-500 font-bold",children:"180s"}),h.jsx("span",{className:"font-mono font-bold text-white text-sm md:text-xl leading-none",children:p.c180})]}),h.jsx("div",{className:"w-px h-6 bg-white/10"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[8px] md:text-[10px] uppercase tracking-wider text-cyan-500 font-bold",children:"360s"}),h.jsx("span",{className:"font-mono font-bold text-white text-sm md:text-xl leading-none",children:p.c360})]})]})})]})},IM=({items:t,selectedIndex:e,onSelect:n})=>{const i=r=>{r==="next"?n((e+1)%t.length):r==="prev"&&n(e===0?t.length-1:e-1)},a=r=>{const c=t.length,d=(r-e+c)%c;return d===0?"c3d-item selected":d===1?"c3d-item next":d===2?"c3d-item nextRightSecond":d===c-1?"c3d-item prev":d===c-2?"c3d-item prevLeftSecond":d>2?"c3d-item hideRight":"c3d-item hideLeft"};return h.jsxs("div",{id:"carousel-area",className:"c3d-area",children:[h.jsx("div",{id:"carousel",className:"c3d-carousel",children:t.map((r,c)=>h.jsx("div",{className:a(c),onClick:()=>n(c),children:h.jsxs("div",{className:"c3d-img-wrap",children:[h.jsx("div",{className:"c3d-content-inner",children:r.content}),h.jsx("span",{className:"c3d-text",children:r.label})]})},r.id))}),h.jsxs("div",{className:"c3d-buttons",children:[h.jsx("button",{className:"c3d-icon-btn",onClick:r=>{r.stopPropagation(),i("prev")},children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"c3d-icon-svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),h.jsx("button",{className:"c3d-icon-btn",onClick:r=>{r.stopPropagation(),i("next")},children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"c3d-icon-svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M9 5l7 7-7 7"})})})]})]})},DM=({charId:t,className:e})=>{const n=V.useRef(null);return V.useEffect(()=>{const i=n.current?.getContext("2d");i&&(i.clearRect(0,0,200,300),i.save(),i.translate(100,180),i.scale(2.5,2.5),Vh(i,t,0,0,0,"RUNNING",0,"",!1),i.restore())},[t]),h.jsx("canvas",{ref:n,width:200,height:300,className:e||"w-full h-full object-contain"})},PM=({highScore:t,userName:e,setUserName:n,character:i,setCharacter:a,startGame:r,onExit:c})=>{const d=iu.find(g=>g.id===i),p=d?d.defaultName.toUpperCase():"PLAYER",f=iu.findIndex(g=>g.id===i);return h.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-20 p-6 overflow-y-auto",children:[h.jsxs("button",{onClick:c,className:"absolute top-6 left-6 flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),h.jsx("span",{className:"font-bold tracking-wider",children:"EXIT"})]}),h.jsx("img",{src:"./asstes/game/invert_the_game_transpartent_small.png",alt:"INVERT THE GAME",className:"w-32 max-w-full h-auto mb-2 object-contain drop-shadow-[0_0_15px_rgba(197,35,35,0.5)]"}),h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold",children:"High Score"}),h.jsx("div",{className:"text-2xl font-mono font-bold text-[#c52323]",children:er(t)})]}),h.jsxs("p",{className:"text-gray-400 mb-4 text-center text-xs md:text-sm max-w-md leading-relaxed",children:["Tap=Ollie | Swipe=Flip | Hold & Release=Charge Spin",h.jsx("br",{}),"Air Tap x2 = 180 | Air Tap x3 = 360",h.jsx("br",{}),"Rapid Tap on Hydrant = Natas Spin"]}),h.jsx(IM,{items:iu.map(g=>({id:g.id,label:g.name,content:g.id==="male_cap"?h.jsx("img",{src:gM,alt:"Kai",className:"w-full h-full object-cover",style:{transform:"scale(1.2)"}}):h.jsx(DM,{charId:g.id})})),selectedIndex:f!==-1?f:0,onSelect:g=>{g===f?r():a(iu[g].id)}}),h.jsxs("div",{className:"relative group w-full max-w-xs mb-8 text-center",children:[h.jsx("label",{className:"block text-[10px] text-gray-500 uppercase tracking-[0.2em] font-bold mb-2",children:"Choose your own name"}),h.jsx("input",{type:"text",value:e,onClick:g=>g.stopPropagation(),onChange:g=>{n(g.target.value),localStorage.setItem("invert-skate-username",g.target.value)},placeholder:p,className:"bg-transparent border-b border-gray-700 w-full text-white text-center font-bold text-xl py-2 focus:border-[#c52323] outline-none uppercase tracking-widest transition-colors placeholder-gray-600 focus:placeholder-gray-800"})]})]})},LM=({score:t,highScore:e,stats:n,startGame:i,onMenu:a})=>h.jsxs("div",{className:"absolute inset-0 bg-red-900/90 flex flex-col items-center justify-center z-20 p-6",children:[h.jsx("h2",{className:"text-5xl font-black text-white mb-4",children:"GAME OVER"}),h.jsx("div",{className:"text-3xl font-mono mb-2",children:er(t)}),h.jsxs("div",{className:"text-sm text-white/80 mb-8",children:["High Score: ",er(e)]}),h.jsxs("div",{className:"flex gap-4 text-center mb-8 bg-black/20 p-4 rounded-lg",children:[h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-xl",children:n.grinds}),h.jsx("div",{className:"text-xs text-gray-300",children:"GRINDS"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-xl",children:n.c180}),h.jsx("div",{className:"text-xs text-gray-300",children:"180s"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-bold text-xl",children:n.c360}),h.jsx("div",{className:"text-xs text-gray-300",children:"360s"})]})]}),h.jsx("button",{onClick:i,className:"bg-white text-black font-bold py-3 px-8 rounded-xl text-lg shadow-lg",children:"TRY AGAIN"}),h.jsx("button",{onClick:a,className:"mt-4 text-white/70 hover:text-white",children:"Menu"})]}),OM=({onBuy:t,onClose:e,currentScore:n})=>{const[i,a]=V.useState(null);V.useEffect(()=>{if(i){const g=setTimeout(()=>a(null),2e3);return()=>clearTimeout(g)}},[i]);const r=(g,_)=>{n>=_?(t(g),a("Bought!")):a("Not enough money!")},c=n>=5e3,d=n>=1e4,p=n>=67,f=n>=5e4;return h.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-50 p-2 md:p-4",children:h.jsxs("div",{className:"bg-gray-800 border-4 border-[#fbbf24] rounded-xl shadow-2xl overflow-hidden w-full max-w-3xl relative flex flex-col max-h-full",children:[h.jsxs("div",{className:"bg-[#dc2626] p-2 md:p-3 flex justify-between items-center border-b-4 border-[#fbbf24] sticky top-0 z-30 shrink-0",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("h2",{className:"text-white font-black text-xl md:text-2xl tracking-widest drop-shadow-md",children:"OXXO SPACE"}),h.jsxs("span",{className:"text-xs text-yellow-200 font-mono font-bold",children:["PTS: ",er(n)]})]}),h.jsx("button",{onClick:e,className:"bg-yellow-500 hover:bg-yellow-400 text-black font-bold px-3 py-1 md:px-4 rounded shadow-lg uppercase text-xs md:text-sm border-2 border-white",children:"Exit Shop"})]}),h.jsxs("div",{className:"overflow-y-auto flex-grow",children:[h.jsxs("div",{className:"relative h-24 md:h-64 bg-gray-900 overflow-hidden shrink-0",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800 to-gray-700"}),i&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:h.jsx("div",{className:"bg-red-600/90 text-white px-6 py-3 rounded-lg font-black text-xl shadow-xl animate-bounce border-2 border-white",children:i})}),h.jsx("div",{className:"absolute top-2 md:top-10 left-1/2 -translate-x-1/2 w-16 h-24 md:w-40 md:h-60",children:h.jsxs("svg",{viewBox:"0 0 100 150",className:"w-full h-full drop-shadow-lg",children:[h.jsx("path",{d:"M30 150 L30 100 Q50 90 70 100 L70 150 Z",fill:"#dc2626"})," ",h.jsx("path",{d:"M40 100 L40 150 M60 100 L60 150",stroke:"#fbbf24",strokeWidth:"2"})," ",h.jsx("ellipse",{cx:"50",cy:"60",rx:"35",ry:"45",fill:"#39ff14"}),h.jsx("ellipse",{cx:"35",cy:"55",rx:"12",ry:"18",fill:"black"}),h.jsx("ellipse",{cx:"65",cy:"55",rx:"12",ry:"18",fill:"black"}),h.jsx("circle",{cx:"38",cy:"50",r:"3",fill:"white"}),h.jsx("circle",{cx:"68",cy:"50",r:"3",fill:"white"}),h.jsx("path",{d:"M45 85 Q50 90 55 85",stroke:"black",fill:"none",strokeWidth:"1"})]})}),h.jsx("div",{className:"absolute top-1 left-2 bg-white text-black p-1 md:p-2 rounded-xl rounded-bl-none max-w-[100px] md:max-w-[150px] text-[9px] md:text-xs font-bold shadow-lg animate-bounce",children:"Chips, Coke, Korova?"}),h.jsx("div",{className:"absolute bottom-0 w-full h-6 md:h-12 bg-gray-600 border-t-4 border-gray-500"}),h.jsx("div",{className:"absolute -bottom-4 md:-bottom-10 left-1/2 -translate-x-1/2 w-20 h-20 md:w-48 md:h-48",children:h.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[h.jsx("path",{d:"M10 100 Q50 80 90 100",fill:"#333"}),h.jsx("path",{d:"M30 60 Q50 90 70 60 L75 90 L25 90 Z",fill:"#facc15"}),h.jsx("path",{d:"M25 50 Q50 20 75 50",fill:"#1d4ed8"}),h.jsx("rect",{x:"35",y:"48",width:"30",height:"5",fill:"#1e3a8a"})," "]})})]}),h.jsxs("div",{className:"bg-gray-800 p-2 md:p-4 grid grid-cols-4 gap-2 md:gap-4",children:[h.jsxs("button",{onClick:()=>r("CHIPS",5e3),className:`flex flex-col items-center gap-1 md:gap-2 p-1 md:p-2 rounded-lg transition-colors group relative hover:bg-gray-700 cursor-pointer ${c?"":"opacity-70"}`,children:[h.jsxs("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-yellow-400 rounded-md flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform relative overflow-hidden",children:[h.jsx("span",{className:"font-black text-red-600 -rotate-12 text-[8px] md:text-[10px]",children:"CHIPS"}),h.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-white/30 rounded-bl-full"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-bold text-yellow-400 text-[10px] md:text-xs",children:"Chips"}),h.jsx("div",{className:"text-[8px] md:text-[9px] text-gray-400 leading-tight mb-1",children:"Laser + UFOs"}),h.jsx("div",{className:`text-[10px] font-mono font-bold ${c?"text-green-400":"text-red-500"}`,children:"5,000"})]})]}),h.jsxs("button",{onClick:()=>r("COKE",1e4),className:`flex flex-col items-center gap-1 md:gap-2 p-1 md:p-2 rounded-lg transition-colors group relative hover:bg-gray-700 cursor-pointer ${d?"":"opacity-70"}`,children:[h.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:h.jsxs("svg",{viewBox:"0 0 40 100",className:"h-8 md:h-10 w-auto",children:[h.jsx("path",{d:"M10 10 L30 10 L35 30 L35 90 Q35 100 20 100 Q5 100 5 90 L5 30 Z",fill:"#4a0404"})," ",h.jsx("rect",{x:"5",y:"45",width:"30",height:"20",fill:"#dc2626"})," ",h.jsx("path",{d:"M12 55 L28 55",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})," ",h.jsx("rect",{x:"12",y:"0",width:"16",height:"10",fill:"#ef4444"})," "]})}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-bold text-red-500 text-[10px] md:text-xs",children:"Coke"}),h.jsx("div",{className:"text-[8px] md:text-[9px] text-gray-400 leading-tight mb-1",children:"Speed + Riches"}),h.jsx("div",{className:`text-[10px] font-mono font-bold ${d?"text-green-400":"text-red-500"}`,children:"10,000"})]})]}),h.jsxs("button",{onClick:()=>r("KOROVA",67),className:`flex flex-col items-center gap-1 md:gap-2 p-1 md:p-2 rounded-lg transition-colors group relative hover:bg-gray-700 cursor-pointer ${p?"":"opacity-70"}`,children:[h.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:h.jsxs("svg",{viewBox:"0 0 60 80",className:"h-8 md:h-10 w-auto",children:[h.jsx("path",{d:"M10 20 L50 20 L50 80 L10 80 Z",fill:"white",stroke:"#ccc",strokeWidth:"1"}),h.jsx("path",{d:"M10 20 L30 0 L50 20",fill:"#f3f4f6",stroke:"#ccc",strokeWidth:"1"}),h.jsx("text",{x:"30",y:"50",textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"black",children:"MILK"}),h.jsx("path",{d:"M25 55 L35 55",stroke:"black",strokeWidth:"2"})]})}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-bold text-white text-[10px] md:text-xs",children:"Korova +"}),h.jsx("div",{className:"text-[8px] md:text-[9px] text-gray-400 leading-tight mb-1",children:"Psychedelic"}),h.jsx("div",{className:`text-[10px] font-mono font-bold ${p?"text-green-400":"text-red-500"}`,children:"67"})]})]}),h.jsxs("button",{onClick:()=>r("LIFE",5e4),className:`flex flex-col items-center gap-1 md:gap-2 p-1 md:p-2 rounded-lg transition-colors group relative hover:bg-gray-700 cursor-pointer ${f?"":"opacity-70"}`,children:[h.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-600 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform border-2 border-white",children:h.jsx("span",{className:"font-black text-white text-base md:text-lg",children:"1UP"})}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"font-bold text-green-400 text-[10px] md:text-xs",children:"Extra Life"}),h.jsx("div",{className:"text-[8px] md:text-[9px] text-gray-400 leading-tight mb-1",children:"+1 Skateboard"}),h.jsx("div",{className:`text-[10px] font-mono font-bold ${f?"text-green-400":"text-red-500"}`,children:"50,000"})]})]})]}),h.jsx("div",{className:"bg-gray-900 p-2 text-center text-[9px] text-gray-500 shrink-0",children:"Buying extends space time by 20s. Effects stack!"})]})]})})};function UM({onClose:t}){const[e,n]=V.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!0),[i,a]=V.useState(!1);V.useEffect(()=>{const B=()=>{n(window.innerWidth>window.innerHeight)};return(()=>{const z=typeof navigator<"u"&&(navigator.userAgent||navigator.vendor||window.opera)||"",j=typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches,$=/android|ipad|iphone|ipod|blackberry|iemobile|opera mini/i.test(z.toLowerCase());a(!!(j||$))})(),window.addEventListener("resize",B),window.addEventListener("orientationchange",B),()=>{window.removeEventListener("resize",B),window.removeEventListener("orientationchange",B)}},[]),V.useEffect(()=>{const B=()=>{document.documentElement.style.setProperty("--vh",`${window.innerHeight*.01}px`)};return B(),window.addEventListener("resize",B),window.addEventListener("orientationchange",B),()=>{window.removeEventListener("resize",B),window.removeEventListener("orientationchange",B)}},[]);const{canvasRef:r,uiState:c,setUiState:d,score:p,stats:f,lives:g,character:_,setCharacter:b,highScore:S,userName:w,setUserName:E,isPaused:N,isMuted:k,togglePause:L,toggleMute:R,startGame:O,handleTouchStart:I,handleTouchEnd:G,triggerAction:P,buyItem:M,closeShop:F}=EM();return V.useEffect(()=>{const B=r.current;if(!B)return;const H=j=>{for(let $ of j){const oe=$.contentRect.width,q=$.contentRect.height,Z=window.devicePixelRatio||1;if(oe===0||q===0)continue;const Q=Math.round(oe*Z),re=Math.round(q*Z);if(B.width!==Q||B.height!==re){B.width=Q,B.height=re;const fe=B.getContext("2d");fe&&fe.scale(Z,Z)}}},z=new ResizeObserver(H);return z.observe(B),()=>{z.disconnect()}},[r]),V.useEffect(()=>{const B=H=>{H.code==="Space"&&(H.preventDefault(),c==="PLAYING"&&!N&&P())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[c,N,P]),i&&!e?h.jsxs("div",{className:"fixed inset-0 z-[100] bg-gray-900 text-white flex flex-col items-center justify-center p-6",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-16 h-16 mb-6 animate-pulse text-[#c52323]",children:h.jsx("path",{d:"M14.25 2.25H18a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V4.56l-2.65 2.65a.75.75 0 1 1-1.06-1.06l2.65-2.65h-1.94a.75.75 0 0 1 0-1.5Zm-10.5 4.5a.75.75 0 0 1 0-1.06l2.65-2.65h-1.94a.75.75 0 0 1 0-1.5h3.75a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V4.56l-2.65 2.65a.75.75 0 0 1-1.06 0ZM20.25 12v5.25c0 1.243-1.007 2.25-2.25 2.25H6c-1.243 0-2.25-1.007-2.25-2.25V12c0-1.243 1.007-2.25 2.25-2.25h12c1.243 0 2.25 1.007 2.25 2.25ZM18.75 12a.75.75 0 0 0-.75-.75H6a.75.75 0 0 0-.75.75v5.25c0 .414.336.75.75.75h12a.75.75 0 0 0 .75-.75V12Z"})}),h.jsx("h2",{className:"text-2xl font-bold uppercase tracking-widest mb-2 text-center",children:"Rotate Device"}),h.jsx("p",{className:"text-gray-400 text-center mb-8",children:"Please play in landscape mode."}),h.jsx("button",{onClick:t,className:"border border-gray-600 text-gray-400 px-6 py-2 rounded hover:text-white hover:border-white transition-colors",children:"Exit Game"})]}):h.jsxs("div",{className:"fixed inset-0 bg-gray-900 text-white flex flex-col z-0",onMouseDown:I,onMouseUp:G,onTouchStart:I,onTouchEnd:G,children:[h.jsx(RM,{score:p,highScore:S,lives:g,isMuted:k,toggleMute:R,isPaused:N,togglePause:L,onExit:t,stats:f,showStats:c==="PLAYING"}),N&&c==="PLAYING"&&h.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-20",children:h.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-600 text-center shadow-2xl",children:[h.jsx("h2",{className:"text-3xl font-bold mb-4",children:"PAUSED"}),h.jsx("button",{onClick:L,className:"hud-button bg-[#c52323] text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg hover:bg-red-600",children:"RESUME"})]})}),h.jsx("canvas",{ref:r,className:"w-full flex-grow bg-gray-900",style:{width:"100%",height:"100%",display:"block"}}),c==="MENU"&&h.jsx(PM,{highScore:S,userName:w,setUserName:E,character:_,setCharacter:b,startGame:O,onExit:t}),c==="GAME_OVER"&&h.jsx(LM,{score:p,highScore:S,stats:f,startGame:O,onMenu:()=>d("MENU")}),c==="OXXO_SHOP"&&h.jsx(OM,{onBuy:M,onClose:F,currentScore:p})]})}const qM=.2,VM=800,FM=2,GM=1.2,BM=5e3,jM=()=>{const t=V.useRef("idle"),[e,n]=V.useState("idle"),i=k=>{t.current=k,n(k)},a=V.useRef([]),r=V.useRef([]),c=V.useRef(null),d=V.useRef(null),p=V.useRef(null),[f,g]=V.useState(null),_=()=>{c.current&&(clearTimeout(c.current),c.current=null),d.current&&(clearTimeout(d.current),d.current=null),p.current&&(clearTimeout(p.current),p.current=null)},b=V.useCallback(k=>{const L=t.current;if(L==="idle"||L==="confirming"||L==="error"||L==="denied")return;const R=k.accelerationIncludingGravity,O=k.rotationRate;if(!R||!O)return;const I={ax:R.x??0,ay:R.y??0,az:R.z??0,gx:O.alpha??0,gy:O.beta??0,gz:O.gamma??0,timestamp:k.timeStamp||Date.now()},G=Math.sqrt(I.ax**2+I.ay**2+I.az**2)/9.81;if(L==="arming"){if(r.current.push(G),r.current.length>40&&r.current.shift(),r.current.length>=10){const P=r.current.reduce((F,B)=>F+B,0)/r.current.length;r.current.map(F=>(F-P)**2).reduce((F,B)=>F+B,0)/r.current.length<qM?c.current||(c.current=window.setTimeout(()=>{t.current==="arming"&&(i("armed"),a.current=[],p.current&&(clearTimeout(p.current),p.current=null))},VM)):c.current&&(clearTimeout(c.current),c.current=null)}}else L==="armed"?G>FM&&(i("recording"),a.current.push(I),d.current=window.setTimeout(()=>S(),BM)):L==="recording"&&(a.current.push(I),G<GM&&a.current.length>10&&(d.current,S()))},[]),S=V.useCallback(()=>{window.removeEventListener("devicemotion",b),_(),g([...a.current]),i("confirming")},[b]),w=V.useCallback(async()=>{if(_(),i("permission"),typeof DeviceMotionEvent.requestPermission=="function")try{if(await DeviceMotionEvent.requestPermission()!=="granted"){i("denied");return}}catch(k){console.error(k),i("error");return}a.current=[],r.current=[],window.addEventListener("devicemotion",b),i("arming"),p.current=window.setTimeout(()=>{t.current==="arming"&&(console.log("Force arming due to timeout."),i("armed"),a.current=[])},5e3)},[b]),E=()=>{window.removeEventListener("devicemotion",b),_(),i("idle"),g(null)},N=()=>{window.removeEventListener("devicemotion",b),_(),i("idle"),g(null)};return V.useEffect(()=>()=>{window.removeEventListener("devicemotion",b),_()},[b]),{status:e,startRecordingAttempt:w,confirmTake:E,discardTake:N,recordedData:f}},zM=5,O5={idle:"Ready to Record",permission:"Requesting sensor access...",arming:"Place phone in pocket. Waiting for you to be still...",armed:"ARMED! Perform the trick now.",recording:"RECORDING...",confirming:"Was that a good take?",denied:"Sensor access was denied. Please grant permission in your browser settings.",error:"An error occurred with the motion sensors."},HM=({trickName:t,onBack:e})=>{const[n,i]=An("invert-trained-tricks",{}),{status:a,startRecordingAttempt:r,confirmTake:c,discardTake:d,recordedData:p}=jM(),[f,g]=V.useState(null),_=n[t]||[],b=k=>{g(k),r()},S=()=>{if(f===null||!p)return;const k=[..._];k[f]=p,i(L=>({...L,[t]:k})),c(),g(null)},w=()=>{d(),g(null)},E=a!=="idle"&&a!=="error"&&a!=="denied",N=()=>h.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex flex-col items-center justify-center p-6 text-center",children:[h.jsxs("div",{className:"text-4xl mb-6 animate-pulse",children:[a==="arming"&&"",a==="armed"&&"",a==="recording"&&"",a==="confirming"&&""]}),h.jsx("p",{className:"text-2xl font-bold text-white mb-8",children:O5[a]}),a==="confirming"?h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:S,className:"bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg transition-colors",children:"Yes, Save"}),h.jsx("button",{onClick:w,className:"bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-8 rounded-lg transition-colors",children:"No, Discard"})]}):h.jsx("button",{onClick:w,className:"mt-8 text-gray-400 hover:text-white border border-gray-600 hover:border-white px-6 py-2 rounded-full transition-colors text-sm uppercase tracking-widest",children:"Cancel"})]});return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 flex flex-col",children:[E&&N(),h.jsxs("header",{className:"flex items-center justify-between mb-8 relative h-10",children:[h.jsx("button",{onClick:e,className:"text-white hover:text-gray-300 transition-colors z-10 p-2 -ml-2",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),h.jsx("div",{className:"text-center w-full absolute left-1/2 -translate-x-1/2 pointer-events-none",children:h.jsxs("h1",{className:"text-xl font-bold tracking-wider text-gray-100",children:["Train: ",t]})})]}),h.jsxs("main",{className:"w-full max-w-2xl mx-auto flex-grow",children:[h.jsx("p",{className:"text-gray-400 text-center mb-6 text-sm",children:"Record at least 3 clean takes of the trick. The more, the better the recognition will be."}),h.jsx("div",{className:"space-y-3",children:Array.from({length:zM}).map((k,L)=>{const R=!!_[L];return h.jsxs("div",{className:"bg-neutral-800 rounded-lg p-4 flex items-center justify-between border border-white/5",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${R?"bg-green-500 text-white":"bg-neutral-700 text-gray-400"}`,children:R?"":L+1}),h.jsxs("span",{className:`font-semibold ${R?"text-white":"text-gray-400"}`,children:[t," #",L+1]})]}),h.jsx("button",{onClick:()=>b(L),className:`font-bold py-2 px-5 rounded-md transition-colors text-sm ${R?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-[#c52323] text-white hover:bg-[#a91f1f]"}`,children:R?"Redo":"Record"})]},L)})}),(a==="error"||a==="denied")&&h.jsx("div",{className:"mt-6 p-4 bg-red-900/50 text-red-200 border border-red-500/30 rounded-lg text-center",children:O5[a]})]})]})},YM=({song:t,isPlaying:e,onPlayPause:n,onSetPage:i})=>h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-2 border-t border-gray-700 flex items-center justify-between shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>i("player"),children:[h.jsx("img",{src:t.album_image,alt:t.name,className:"w-12 h-12 rounded-md object-cover"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold text-sm truncate",children:t.name}),h.jsx("p",{className:"text-xs text-gray-400 truncate",children:t.artist_name})]})]}),h.jsx("div",{className:"flex items-center gap-4 pr-4",children:h.jsx("button",{onClick:a=>{a.stopPropagation(),n()},className:"text-white",children:e?h.jsx(gl,{}):h.jsx(yl,{})})})]});function ou(t){return{id:t.id,name:t.name,artist_name:t.artist_name,album_image:t.album_image,audio:t.audio,audio_hq:t.audio_hq,audio_nq:t.audio_nq,genre:t.genre,license:t.license,artist_url:t.artist_url,audiodownload_allowed:t.audiodownload_allowed}}const WM=({song:t,onClose:e,onAddToPlaylist:n,onCreatePlaylist:i,playlists:a})=>{const[r,c]=V.useState(""),d=()=>{r.trim()&&(i(r.trim(),t),e())},p=f=>{n(f,t),e()};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-sm w-full text-white",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Add to Playlist"}),h.jsx("button",{onClick:e,className:"text-3xl text-gray-400 hover:text-white",children:""})]}),h.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"This song has been added to your general favorites. You can move it to a specific playlist below."}),h.jsx("div",{className:"mb-4 max-h-40 overflow-y-auto",children:a.map(f=>h.jsx("button",{onClick:()=>p(f.id),className:"w-full text-left p-3 hover:bg-gray-700 rounded-md transition-colors",children:f.name},f.id))}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx("input",{type:"text",value:r,onChange:f=>c(f.target.value),placeholder:"New playlist name...",className:"flex-grow p-3 bg-gray-700 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[180px]"}),h.jsx("button",{onClick:d,className:"bg-indigo-600 text-white font-bold py-3 px-5 rounded-md hover:bg-indigo-700 transition-colors disabled:opacity-50 shrink-0",disabled:!r.trim(),children:"Create"})]})]})})},JM=({song:t,onClose:e})=>{const n=w=>{const E=w.license||"",N=!!w.audiodownload_allowed,k={description:"License information could not be determined. Please check the full license details.",canDownload:N,canUseNonCommercially:!1,canUseCommercially:!1,canSell:!1,licenseName:"Unknown License",deedUrl:E};if(!E||typeof E!="string")return k;const L=E.toLowerCase();let R="Unknown",O="4.0";const I=L.match(/(\d\.\d)/);if(I&&(O=I[1]),L.includes("/publicdomain/zero/"))return{description:"This song is in the Public Domain. View full license details.",canDownload:N,canUseNonCommercially:!0,canUseCommercially:!0,canSell:!0,licenseName:`CC0 ${O}`,deedUrl:`https://creativecommons.org/publicdomain/zero/${O}/`};let G="";if(L.includes("/licenses/by-nc-sa/"))G="by-nc-sa";else if(L.includes("/licenses/by-nc-nd/"))G="by-nc-nd";else if(L.includes("/licenses/by-nc/"))G="by-nc";else if(L.includes("/licenses/by-sa/"))G="by-sa";else if(L.includes("/licenses/by-nd/"))G="by-nd";else if(L.includes("/licenses/by/"))G="by";else return k;R=`CC ${G.toUpperCase()}`;const P=!G.includes("nd"),M=!G.includes("nc");let F=`You are free to use this song for ${M?"commercial purposes":"non-commercial purposes only"}, as long as you give credit to the artist.`;P||(F+=" You may not modify the original work.");const B=parseFloat(O),H=!Number.isNaN(B)&&B<4?"4.0":O;return{description:F,canDownload:N,canUseNonCommercially:!0,canUseCommercially:M,canSell:!1,licenseName:`${R} ${O}`,deedUrl:`https://creativecommons.org/licenses/${G}/${H}/deed.en`}},{description:i,canDownload:a,canUseNonCommercially:r,canUseCommercially:c,canSell:d,licenseName:p,deedUrl:f}=n(t),[g,_]=V.useState(!1),b=a&&g,S=({label:w,allowed:E})=>h.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700 text-white",children:[h.jsx("span",{className:"text-gray-300",children:w}),E?h.jsx("span",{className:"text-green-400 font-bold flex items-center gap-1",children:" YES"}):h.jsx("span",{className:"text-red-400 font-bold flex items-center gap-1",children:" NO"})]});return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-lg w-full text-white",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-2xl font-bold",children:p}),h.jsx("button",{onClick:e,className:"text-3xl text-gray-400 hover:text-white","aria-label":"Close license information",children:""})]}),h.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:i}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("p",{className:"text-gray-400 text-sm",children:["Artist: ",t.artist_name]}),t.artist_url&&h.jsx("a",{href:t.artist_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:underline",children:"Visit artist's page"})]}),h.jsxs("div",{className:"space-y-2 my-4",children:[h.jsx(S,{label:"Download the song",allowed:a}),h.jsx(S,{label:"Use in non-commercial projects",allowed:r}),h.jsx(S,{label:"Use in commercial projects",allowed:c}),h.jsx(S,{label:"Sell the song",allowed:d})]}),h.jsxs("div",{className:"mt-4 flex flex-col items-center",children:[h.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:underline text-center",children:"View full license details"}),h.jsxs("label",{className:"mt-3 flex items-center gap-2 text-xs text-gray-300 text-center cursor-pointer",children:[h.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:g,onChange:w=>_(w.target.checked)}),h.jsx("span",{children:"I have read and understood which license this song is subject to."})]}),a&&h.jsxs("a",{href:b?t.audio:void 0,download:b?t.name:void 0,target:b?"_blank":void 0,rel:b?"noopener noreferrer":void 0,onClick:w=>{b||w.preventDefault()},className:`mt-3 inline-flex items-center justify-center gap-2 px-4 py-2 rounded text-sm w-full sm:w-auto ${b?"bg-emerald-700 text-white hover:bg-emerald-600 cursor-pointer":"bg-gray-600 text-gray-300 opacity-60 cursor-not-allowed"}`,"aria-disabled":!b,children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),h.jsx("polyline",{points:"7 10 12 15 17 10"}),h.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),h.jsx("span",{children:"Download the song!"})]})]})]})})},ZM=({onClose:t,commercialOnly:e,onSetCommercialOnly:n,sortOrder:i,onSetSortOrder:a})=>{const r=d=>{a(d.target.value)},c=async()=>{if(confirm("This will clear all app data and force a reload. Continue?")){if("serviceWorker"in navigator){const d=await navigator.serviceWorker.getRegistrations();for(const p of d)await p.unregister()}if("caches"in window){const d=await caches.keys();for(const p of d)await caches.delete(p)}window.location.reload()}};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-sm w-full text-white shadow-lg",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Search Settings"}),h.jsx("button",{onClick:t,className:"text-3xl text-gray-400 hover:text-white transition-colors",children:""})]}),h.jsxs("div",{className:"space-y-5",children:[h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-md hover:bg-gray-700 transition-colors",children:[h.jsx("input",{type:"checkbox",checked:e,onChange:d=>n(d.target.checked),className:"w-5 h-5 rounded bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500 shrink-0"}),h.jsx("span",{className:"text-gray-300",children:"Show only songs for commercial projects"})]}),h.jsx("hr",{className:"border-gray-700"}),h.jsxs("fieldset",{children:[h.jsx("legend",{className:"sr-only",children:"Sort Order"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-md hover:bg-gray-700 transition-colors",children:[h.jsx("input",{type:"radio",name:"sortOrder",value:"random",checked:i==="random",onChange:r,className:"w-5 h-5 bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500 shrink-0"}),h.jsx("span",{className:"text-gray-300",children:"Play randomly songs of the chosen genre(s)"})]}),h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-md hover:bg-gray-700 transition-colors",children:[h.jsx("input",{type:"radio",name:"sortOrder",value:"popularity_total",checked:i==="popularity_total",onChange:r,className:"w-5 h-5 bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500 shrink-0"}),h.jsx("span",{className:"text-gray-300",children:"Play most popular songs first"})]}),h.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-md hover:bg-gray-700 transition-colors",children:[h.jsx("input",{type:"radio",name:"sortOrder",value:"id_desc",checked:i==="id_desc",onChange:r,className:"w-5 h-5 bg-gray-700 border-gray-600 text-indigo-600 focus:ring-indigo-500 shrink-0"}),h.jsx("span",{className:"text-gray-300",children:"Play newest songs first"})]})]})]})]}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:h.jsx("button",{onClick:c,className:"w-full bg-red-900/50 hover:bg-red-900 text-red-200 text-xs font-bold py-3 px-4 rounded-md transition-colors border border-red-800",children:" FORCE REFRESH"})}),h.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[h.jsx("span",{className:"text-xs text-green-400 font-mono",children:"v4.3 (Logos Fixed)"}),h.jsx("button",{onClick:t,className:"bg-indigo-600 text-white font-bold py-2 px-6 rounded-md hover:bg-indigo-700 transition-colors",children:"Done"})]})]})})};function XM(t){const{bands:e,onChangeGain:n,onClose:i,presets:a,onSavePreset:r,onLoadPreset:c,onDeletePreset:d}=t,[p,f]=V.useState(""),g=150,_=6,b=8,S=12,w=4,E=6,N=g/(E*2),k=V.useMemo(()=>{const R=g/2,O=Number.isFinite(R)?R:0,I=[],G=[];for(let P=1;P<=E;P++)I.push(O-P*N),G.push(O+P*N);return{ups:I,downs:G,center:O}},[g]),L=R=>{const O=g/2,I=Math.min(O,Math.abs(R)/12*O),G=R>0?O-I:O,P=R===0?0:I,M=R>0?"#c52323":R<0?"#265c7e":"transparent";return{top:G,height:P,color:M,half:O}};return h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:[h.jsxs("div",{className:"w-full max-w-3xl rounded-xl overflow-hidden bg-gray-900 shadow-2xl",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-800",children:[h.jsx("h2",{className:"text-gray-100 font-semibold",children:"Equalizer"}),h.jsx("button",{className:"px-3 py-1 rounded bg-gray-700 text-gray-200 hover:bg-gray-600",onClick:i,children:"Close"})]}),h.jsxs("div",{className:"p-4 metal-bg",children:[h.jsx("div",{className:"grid grid-cols-5 gap-1 sm:gap-2 md:gap-3 justify-items-center items-end w-full",style:{minHeight:g},children:e.map(({key:R,label:O,gain:I})=>{const{top:G,height:P,color:M}=L(I);return h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsxs("div",{className:"relative flex items-center",style:{height:g},children:[h.jsx("div",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 h-[2px] bg-gray-300 rounded",style:{width:S,left:`calc(50% - ${b}px - ${S}px)`},"aria-hidden":!0}),h.jsx("div",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 h-[2px] bg-gray-300 rounded",style:{width:S,left:`calc(50% + ${b}px)`},"aria-hidden":!0}),k.ups.map((F,B)=>h.jsxs(dl.Fragment,{children:[h.jsx("div",{className:"pointer-events-none absolute h-[2px] bg-gray-400/80 rounded",style:{width:w,top:F,left:`calc(50% - ${b}px - ${w}px)`,transform:"translateY(-50%)"},"aria-hidden":!0}),h.jsx("div",{className:"pointer-events-none absolute h-[2px] bg-gray-400/80 rounded",style:{width:w,top:F,left:`calc(50% + ${b}px)`,transform:"translateY(-50%)"},"aria-hidden":!0})]},`up-${B}`)),k.downs.map((F,B)=>h.jsxs(dl.Fragment,{children:[h.jsx("div",{className:"pointer-events-none absolute h-[2px] bg-gray-400/80 rounded",style:{width:w,top:F,left:`calc(50% - ${b}px - ${w}px)`,transform:"translateY(-50%)"},"aria-hidden":!0}),h.jsx("div",{className:"pointer-events-none absolute h-[2px] bg-gray-400/80 rounded",style:{width:w,top:F,left:`calc(50% + ${b}px)`,transform:"translateY(-50%)"},"aria-hidden":!0})]},`down-${B}`)),h.jsx("div",{className:"pointer-events-none absolute rounded-full",style:{left:`calc(50% - ${_/2}px)`,width:`${_}px`,top:G,height:P,backgroundColor:M,boxShadow:M==="transparent"?"none":"0 0 6px rgba(0,0,0,0.25) inset"},"aria-hidden":!0}),h.jsx("input",{type:"range",min:-12,max:12,step:.5,value:I,onChange:F=>n(R,Number(F.currentTarget.value)),style:{width:g,position:"absolute",left:"50%",transform:"translateX(-50%) rotate(-90deg)",transformOrigin:"center"},className:"eq-vert relative z-10 block appearance-none bg-transparent","aria-label":`${O} gain`})]}),h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"text-sm text-gray-100",children:[Math.round(I)," dB"]}),h.jsx("div",{className:"text-xs text-gray-400",children:O})]}),h.jsx("button",{type:"button",className:"relative z-20 text-xs text-gray-300 hover:text-white underline",onClick:()=>n(R,0),children:"Reset"})]},R)})}),h.jsxs("div",{className:"mt-6 border-t border-gray-700 pt-4",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.jsx("input",{value:p,onChange:R=>f(R.target.value),placeholder:"Preset name (e.g., Bass Boost)",className:"flex-1 min-w-[0] px-3 py-2 rounded bg-gray-800 text-gray-100 placeholder-gray-500"}),h.jsx("button",{className:"px-4 py-2 rounded bg-emerald-700 text-white hover:bg-emerald-600 flex-shrink-0 w-full sm:w-auto",onClick:()=>{r(p),f("")},children:"Save"})]}),a.length>0&&h.jsx("div",{className:"mt-4 grid sm:grid-cols-2 gap-3",children:a.map(R=>h.jsxs("div",{className:"flex items-center justify-between rounded bg-gray-800 px-3 py-2",children:[h.jsx("div",{className:"text-sm text-gray-100",children:R.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{className:"px-2 py-1 rounded bg-gray-700 text-gray-200 hover:bg-gray-600 text-xs",onClick:()=>c(R.id),children:"Load"}),h.jsx("button",{className:"px-2 py-1 rounded bg-rose-700 text-white hover:bg-rose-600 text-xs",onClick:()=>d(R.id),children:"Delete"})]})]},R.id))}),h.jsx("p",{className:"mt-3 text-xs text-gray-400",children:"You can save up to 5 presets. Saving a new one will keep the 5 most recent."})]})]})]}),h.jsx("style",{children:`
        .eq-vert::-webkit-slider-runnable-track { width: 100%; }
        .eq-vert::-moz-range-track { width: 100%; }

        /* Smoother metal background (lines removed) */
        .metal-bg {
          background-color: #2a2d31;
        }
      `})]})}function KM(t={}){const{maxWet:e=.7,decay:n=2,preDelay:i=.04,alignDryMs:a=6,loCut:r=160,hiCut:c=7600,wetPresenceDb:d=2.5,wetWarmthDb:p=2,maxMakeup:f=1.5}=t,g=new at,_=new at,b=new Wo(a/1e3),S=new at(1),w=new at(0),E=rs().rawContext;function N(W){const de=E.sampleRate,te=Math.max(1,Math.floor(W*de)),A=E.createBuffer(2,te,de),C=W*1.25,he=Math.max(.8,W*.7),ue=.25,Le=.1;for(let Ee=0;Ee<2;Ee++){const Ge=A.getChannelData(Ee);for(let _e=0;_e<te;_e++){const Be=_e/de,Fe=Math.pow(Math.max(1-Be/C,0),2.2),Oe=Math.pow(Math.max(1-Be/he,0),3),X=Math.min(1,Fe*.85+Oe*.55),K=Math.random()+Math.random()-1;Ge[_e]=K*X*.6}for(let _e=3;_e<te;_e++)Ge[_e]+=ue*Ge[_e-1]+ue*.5*Ge[_e-3];let we=0;const Ve=75e-5+Le*35e-5;for(let _e=0;_e<te;_e++)we+=(Ge[_e]-we)*Ve,Ge[_e]+=we*Le;let Re=0;for(let _e=0;_e<te;_e++)Re=Math.max(Re,Math.abs(Ge[_e]));const ae=Re>0?.9/Re:1;for(let _e=0;_e<te;_e++)Ge[_e]*=ae}return A}const k=new Np(void 0);k.buffer=new vt(N(n));const L=new Wo(i),R=new Ni({type:"highpass",frequency:r,Q:.707}),O=new Ni({type:"lowshelf",frequency:200,gain:p}),I=new Ni({type:"peaking",frequency:2400,Q:.9,gain:d}),G=new Ni({type:"lowpass",frequency:c,Q:.7}),P=new $u({threshold:-28,ratio:2.2,attack:.008,release:.16,knee:24}),M=new at(1),F=new at(1),B=new Ep(-1);g.fan(b,L),b.connect(S),S.connect(M),L.chain(R,k,O,I,G,P,w),w.connect(M),M.chain(F,B,_);const H=W=>Math.min(1,Math.max(0,W)),z=(W,de,te)=>Math.min(te,Math.max(de,W));function j(W){const de=H(W);w.gain.value=de*e;const te=1+(f-1)*Math.pow(de,.8);F.gain.value=te}function $(W){const de=z(W,.5,8);k.buffer=new vt(N(de))}function oe(W){L.delayTime.value=z(W,0,.08)}function q(W){b.delayTime.value=z(W/1e3,0,.02)}function Z(W){G.frequency.value=z(W,4e3,2e4)}function Q(W){R.frequency.value=z(W,60,600)}function re(W){I.gain.value=z(W,-6,6)}function fe(W){O.gain.value=z(W,-6,6)}function U(){[g,_,b,S,w,L,R,k,O,I,G,P,M,F,B].forEach(W=>W.dispose())}return j(0),re(d),q(a),{input:g,output:_,setMix:j,setDecay:$,setPreDelay:oe,setHiCut:Z,setLoCut:Q,setPresenceDb:re,setWarmthDb:fe,setAlignMs:q,dispose:U,nodes:{dryDelayAlign:b,dryGain:S,wetGain:w,preDelayNode:L,hp:R,convolver:k,wetLowShelf:O,wetPresence:I,lp:G,wetComp:P,sum:M,makeup:F,limiter:B}}}const QM=[{id:"en",label:"English"},{id:"es",label:"Espaol"},{id:"de",label:"Deutsch"}],$M=[{id:"invert-white",label:"Invert white buttons"},{id:"invert-black",label:"Invert black buttons"},{id:"colors",label:"Colors"}],ek=({isOpen:t,onClose:e,language:n,setLanguage:i,activeTemplate:a,setActiveTemplate:r,customTemplates:c,onAddCustomTemplate:d,onDeleteCustomTemplate:p})=>{const f=V.useRef(null),g=V.useRef(null),[_,b]=V.useState("templates"),[S,w]=V.useState(""),[E,N]=V.useState("");V.useEffect(()=>{if(!t)return;const R=O=>{O.key==="Escape"&&e()};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[t,e]);const k=R=>{const O=R.target.files?.[0];if(!O)return;if(!S.trim()){N("Please enter a name first.");return}N("");const I=new FileReader;I.onload=G=>{const P=G.target?.result;let M=null;if(O.type.startsWith("image/"))M="image";else if(O.type.startsWith("video/"))M="video";else{N("Unsupported file. Use image or video.");return}d(S,P,M),w("")},I.readAsDataURL(O),R.target.value=""},L=({sectionId:R,title:O})=>h.jsxs("button",{onClick:()=>b(_===R?"":R),className:"w-full text-left flex justify-between items-center p-3 rounded-lg bg-gray-800 hover:bg-gray-700 transition","aria-expanded":_===R,children:[h.jsx("span",{className:"font-semibold",children:O}),h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",className:`transition-transform transform ${_===R?"rotate-180":""}`,children:h.jsx("path",{d:"M7 10l5 5 5-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]});return t?h.jsxs("div",{className:"fixed inset-0 z-50",children:[h.jsx("button",{className:"absolute inset-0 bg-black/50","aria-label":"Close adjustments",onClick:e}),h.jsx("div",{ref:f,role:"dialog","aria-modal":"true","aria-labelledby":"adj-title",className:"relative z-10 mx-auto mt-20 w-[92%] max-w-md rounded-2xl bg-[#0f172a] text-white shadow-2xl border border-white/10",children:h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{id:"adj-title",className:"text-lg font-semibold",children:"Adjustments"}),h.jsx("button",{onClick:e,className:"px-3 py-1 rounded-lg bg-white text-black hover:bg-white/90",children:"Close"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(L,{sectionId:"templates",title:"Templates"}),_==="templates"&&h.jsx("div",{className:"pl-4 space-y-2",children:$M.map(({id:R,label:O})=>{const I=a.type==="predefined"&&a.id===R;return h.jsx("button",{onClick:()=>r({type:"predefined",id:R}),className:`w-full text-left px-3 py-2 rounded-md text-sm transition ${I?"bg-indigo-600":"hover:bg-gray-700"}`,children:O},R)})}),h.jsx(L,{sectionId:"my-templates",title:"My Templates"}),_==="my-templates"&&h.jsxs("div",{className:"pl-4 space-y-2",children:[c.map(R=>h.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-700",children:[h.jsx("span",{className:"text-sm truncate flex-1",children:R.name}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>r({type:"custom",id:R.id}),className:`text-xs px-2 py-1 rounded ${a.type==="custom"&&a.id===R.id?"bg-indigo-600":"bg-gray-600 hover:bg-indigo-600"}`,children:"Select"}),h.jsx("button",{onClick:()=>p(R.id),className:"p-1 text-gray-400 hover:text-red-400",children:h.jsx(ul,{})})]})]},R.id)),c.length<10?h.jsxs("div",{className:"pt-2 mt-2 border-t border-white/10",children:[h.jsx("p",{className:"text-xs uppercase tracking-widest opacity-80 mb-2",children:"Create New"}),h.jsx("input",{type:"text",value:S,onChange:R=>{w(R.target.value),N("")},placeholder:"Template Name",className:"w-full px-3 py-2 rounded-md bg-gray-700 text-white border border-gray-600 mb-2"}),h.jsx("button",{onClick:()=>g.current?.click(),className:"w-full px-4 py-2 rounded-xl bg-white/10 border border-white/40 hover:border-white/80 transition text-sm disabled:opacity-50",disabled:!S.trim(),children:"Upload Background"}),E&&h.jsx("p",{className:"text-red-400 text-xs mt-1",children:E}),h.jsx("input",{type:"file",accept:"image/*,video/*",ref:g,onChange:k,className:"hidden"})]}):h.jsx("p",{className:"text-xs text-gray-500 pt-2",children:"You have reached the maximum of 10 templates."})]})]}),h.jsxs("section",{className:"mt-6",children:[h.jsx("h3",{className:"text-xs uppercase tracking-widest opacity-80 mb-2",children:"Language"}),h.jsx("div",{className:"grid grid-cols-3 gap-3",children:QM.map(R=>{const O=n===R.id;return h.jsx("button",{onClick:()=>i(R.id),"aria-pressed":O,className:`px-3 py-2 rounded-xl border transition text-sm ${O?"bg-white text-black border-white":"bg-transparent text-white border-white/40 hover:border-white/80"}`,children:R.label},R.id)})})]})]})})]}):null},tk=WM,nk=JM,sk=ZM,ik=XM,ok=ek,U5=t=>{if(!t)return!1;const e=t.toLowerCase();return e.includes("by-nd")||e.includes("by-nc-nd")||e.includes("/nd/")||e.includes("-nd")||e.includes("no-derivatives")},q5=t=>{if(!t)return!1;const e=t.toLowerCase(),n=e.includes("/licenses/by/"),i=e.includes("/licenses/by-sa/"),a=e.includes("nc"),r=e.includes("nd");return a||r?!1:n||i},ak=(()=>{try{return window.self!==window.top}catch{return!0}})(),au="PLACEHOLDER_API_KEY";let Fh=null;try{au&&au.trim()&&!ak?Fh=new WN({apiKey:au}):console.info("Gemini disabled:",au?"running inside iframe/sandbox":"no API_KEY in process.env")}catch(t){console.warn("Gemini disabled (init failed):",t),Fh=null}const rk=[{f:60,label:"60 Hz"},{f:230,label:"230 Hz"},{f:910,label:"910 Hz"},{f:3e3,label:"3 kHz"},{f:14e3,label:"14 kHz"}],lk={main:"Main Mix",rock:"Rock Mix",mellow:"Mellow Mix",world:"World/ECM Mix"},ck={main:{primary:"https://stream.radioparadise.com/aac-320",fallback:"https://stream.radioparadise.com/mp3-192"},rock:{primary:"https://stream.radioparadise.com/rock-320",fallback:"https://stream.radioparadise.com/rock-192"},mellow:{primary:"https://stream.radioparadise.com/mellow-320",fallback:"https://stream.radioparadise.com/mellow-192"},world:{primary:"https://stream.radioparadise.com/world-320",fallback:"https://stream.radioparadise.com/world-192"}},uk=({onClose:t})=>h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-6 z-[9999]",children:h.jsxs("div",{className:"bg-gray-900 p-6 rounded-xl max-w-md text-center border border-white/10 shadow-xl",children:[h.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight mb-4",children:[h.jsx("span",{style:{color:"#ffffff"},children:"INVERT"}),h.jsx("span",{style:{color:"#c52323"},children:" FM"})]}),h.jsx("p",{className:"text-gray-200 leading-relaxed mb-4",children:"This app is free and non-commercial. Therefore, Creative Commons Non-Commercial (CC-NC) tracks are legally allowed. You may use all available songs for private and personal video edits."}),h.jsx("button",{onClick:()=>{try{localStorage.setItem("invertfm_first_start_seen","1")}catch{}t()},className:"mt-2 px-6 py-3 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white font-semibold",children:"Continue"})]})}),dk=()=>{const[t,e]=V.useState("home"),[n,i]=V.useState("home");V.useEffect(()=>{window.history.state||window.history.replaceState({page:"home"},"","");const ce=be=>{const Ce=be.state?.page||"home";e(Ce)};return window.addEventListener("popstate",ce),()=>window.removeEventListener("popstate",ce)},[]);const a=V.useCallback(ce=>{e(ce),window.history.pushState({page:ce},"","")},[]),[r,c]=V.useState([]),[d,p]=V.useState(0),[f,g]=V.useState(!1),[_,b]=V.useState(!1),[S,w]=V.useState(null),[E,N]=V.useState(()=>{if(typeof window>"u")return!1;try{return localStorage.getItem("invertfm_first_start_seen")!=="1"}catch{return!1}}),[k,L]=An("mooseek-favorites",[]),[R,O]=An("mooseek-playlists",[]),[I,G]=An("mooseek-jamendo-id",""),[P,M]=An("mooseek-selected-genres",[]),[F,B]=An("invert-clips-recent",[]),[H,z]=V.useState(!1),[j,$]=V.useState("random"),[oe,q]=V.useState(!1),[Z,Q]=V.useState(null),[re,fe]=V.useState(!1),[U,W]=V.useState(!1),[de,te]=V.useState(!1),[A,C]=V.useState("en-US"),[he,ue]=V.useState({}),[Le,Ee]=V.useState(!0),[Ge,we]=V.useState(.5),[Ve,Re]=An("mooseek-video-volume",1),[ae,_e]=V.useState(0),[Be,Fe]=V.useState(1),[Oe,X]=V.useState(0),[K,ye]=V.useState(0),[Se,xe]=V.useState(0),[Me,ut]=V.useState(!1),tt=V.useCallback(()=>ut(ce=>!ce),[]),[Ue,Ht]=V.useState(0),[Lt,kt]=V.useState(0),[Rt,Yt]=An("ui.activeTemplate",{type:"predefined",id:"invert-white"}),[Ot,Tn]=An("ui.customTemplates",[]),[Qt,ve]=An("ui.lang","en"),[Ie,Pe]=V.useState(!1),Je=Rt.type==="custom"?Ot.find(ce=>ce.id===Rt.id)??null:null,mt=Rt.type==="predefined"?Rt.id:"custom";V.useEffect(()=>{Rt.type==="custom"&&(Ot.some(be=>be.id===Rt.id)||(console.warn("[UI] Active custom template missing, falling back to invert-white",Rt),Yt({type:"predefined",id:"invert-white"})))},[Rt,Ot,Yt]);const[Ze,It]=An("mooseek-yt-slots",[{id:0,channelId:"UC-Pk-TTaSrDOjkPKQ7C8HXQ",channelName:"Skate IQ"},{id:1,channelId:"UCf9ZbGG906ADVVtNMgctVrA",channelName:"ThrasherMagazine"},{id:2,channelId:"UCt16NSYjauKclK67LCXvQyA",channelName:"Braille Skateboarding"},{id:3,channelId:"UC2SikNrCZlWKjyjuW9RE1mQ",channelName:"Santa Cruz Skateboards"}]),[an,Vn]=An("invert-rollometer-unlocked",!1),[Oi,Fs]=An("invert-skate-sessions",[]),[Ui,En]=V.useState(null),[Gs,ea]=V.useState(""),Gt=V.useRef(null),ai=V.useRef(null),Bs=V.useRef(null),js=V.useRef(null),us=V.useRef(null),zs=V.useRef(null),je=V.useRef(null),$e=V.useRef(null),st=V.useRef(null),hn=V.useRef(null),qi=V.useRef({60:null,230:null,910:null,3e3:null,14e3:null}),[Cs,Eo]=An("mooseek-eq-gains",{60:0,230:0,910:0,3e3:0,14e3:0}),[dr,Vi]=An("mooseek-eq-presets",[]),Dn=r[d];V.useEffect(()=>{try{const ce=window.top!==window,be=document.ancestorOrigins?.[0]||"";ce&&console.warn("[Environment] Within a frame:",be||"(unknown)")}catch{console.warn("[Environment] Possibly sandboxed frame.")}},[]),V.useEffect(()=>{(async()=>{if(he[A])return;Ee(!0);const be=await ZN(A,Fh);ue(Ce=>({...Ce,[A]:be})),Ee(!1)})()},[A,he]);const Fn=V.useCallback(ce=>{const be=ce?.target,Ce=be?.currentSrc||be?.src,Ye=be?.error?.code??ce?.target?.error?.code;console.warn("Audio playback error",{code:Ye,src:Ce,raw:ce})},[]),Qn=V.useCallback(async()=>{if(js.current&&Bs.current?.state==="running")return!0;let ce=Bs.current;if(!ce)try{ce=new(window.AudioContext||window.webkitAudioContext),Bs.current=ce,await Gv(ce)}catch{return w("Your browser does not support the Web Audio API, which is required for effects."),!1}if(ce.state!=="running")try{await ce.resume(),await cu()}catch{return w("Audio playback requires user interaction. Please click the play button again."),!1}const be=Gt.current;if(!be)return!1;if(be.crossOrigin||(be.crossOrigin="anonymous"),!js.current)try{const Ce=ce.createMediaElementSource(be),Ye=new wp(ae),xt=ce.createBiquadFilter();xt.type="highshelf",xt.frequency.value=3e3,xt.gain.value=Oe*20;const Bn=ce.createBiquadFilter();Bn.type="lowshelf",Bn.frequency.value=250,Bn.gain.value=K*20;const wt={60:ce.createBiquadFilter(),230:ce.createBiquadFilter(),910:ce.createBiquadFilter(),3e3:ce.createBiquadFilter(),14e3:ce.createBiquadFilter()};Object.keys(wt).forEach($t=>{const ws=wt[$t];ws.type="peaking",ws.frequency.value=Number($t),ws.Q.value=1,ws.gain.value=Cs[$t]??0}),st.current||(st.current=KM({maxWet:.8,decay:2.2,preDelay:.045}),st.current.setMix(0),st.current.setHiCut?.(1e4),st.current.setLoCut?.(140),st.current.setPresenceDb?.(3),st.current.setAlignMs?.(8));const Bt=ce.createGain();Bt.gain.value=Ge,Ps(Ce,Ye),Ye.connect(xt),xt.connect(Bn),Bn.connect(wt[60]),wt[60].connect(wt[230]),wt[230].connect(wt[910]),wt[910].connect(wt[3e3]),wt[3e3].connect(wt[14e3]),wt[14e3].connect(Bt),Ps(wt[14e3],st.current.input),st.current.output.connect(Bt),Bt.connect(ce.destination),js.current=Ce,zs.current=Ye,je.current=xt,$e.current=Bn,us.current=Bt,qi.current=wt}catch(Ce){return console.error(Ce),w("Could not initialize audio effects. Your browser may not support them."),js.current=null,!1}return!0},[ae,Oe,K,Ge,Cs]);V.useEffect(()=>{const ce=qi.current;Object.keys(ce).forEach(be=>{const Ce=ce[be];Ce&&(Ce.gain.value=Cs[be]??0)})},[Cs]),V.useEffect(()=>{Gt.current&&(Gt.current.playbackRate=Be)},[Be]),V.useEffect(()=>{us.current&&(us.current.gain.value=Ge)},[Ge]),V.useEffect(()=>{zs.current&&(zs.current.pitch=ae)},[ae]),V.useEffect(()=>{je.current&&(je.current.gain.value=Oe*20)},[Oe]),V.useEffect(()=>{$e.current&&($e.current.gain.value=K*20)},[K]),V.useEffect(()=>{const ce=Math.max(0,Math.min(1,Se));st.current?.setMix(ce)},[Se]),V.useEffect(()=>{Gt.current&&(Gt.current.loop=Me)},[Me]);const No=V.useCallback(ce=>{Gt.current&&(Gt.current.currentTime=ce,Ht(ce))},[]),Hs=V.useCallback(async()=>{const ce=Gt.current;if(ce)if(f)ce.pause(),g(!1);else{if(!await Qn())return;try{await ce.play(),g(!0)}catch(Ce){Fn(Ce)}}},[f,Qn,Fn]),rn=async ce=>{if(ce.length===0)return;if(b(!0),w(null),!await Qn()){b(!1);return}try{const Ce=j==="random"?"popularity_total":j,Bn=(await Promise.all(ce.map($t=>g5($t,I,H,Ce)))).flat().filter($t=>{const ws=$t.license||$t.license_url||$t.license_ccurl||null;return H?q5(ws):!U5(ws)}),wt=Array.from(new Map(Bn.map($t=>[$t.id,$t])).values());if(wt.length===0)throw new Error(H?"No songs with commercially usable CC licenses (CC BY / CC BY-SA) found for these genres.":"No songs found for the selected genres.");const Bt=j==="random"?wt.sort(()=>.5-Math.random()):wt;c(Bt),p(0),a("player"),g(!0)}catch(Ce){w(Ce.message||"An unknown error occurred."),g(!1)}finally{b(!1)}},Pl=async ce=>{if(!await Qn())return;const{primary:Ce,fallback:Ye}=ck[ce],xt={id:`radio-paradise-${ce}`,name:`Radio Paradise  ${lk[ce]}`,artist_name:"Live Stream",genre:"Live Radio",album_image:"data:image/svg+xml;utf8,"+encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
            <rect x="6" y="12" width="52" height="36" rx="6" fill="#111827" stroke="#374151" stroke-width="2"/>
            <path d="M10 10 L52 2" stroke="#4B5563" stroke-width="2" stroke-linecap="round"/>
            <line x1="16" y1="22" x2="40" y2="22" stroke="#6B7280" stroke-width="2"/>
            <line x1="16" y1="27" x2="40" y2="27" stroke="#6B7280" stroke-width="2"/>
            <line x1="16" y1="32" x2="40" y2="32" stroke="#6B7280" stroke-width="2"/>
            <circle cx="48" cy="34" r="6" fill="none" stroke="#9CA3AF" stroke-width="2"/>
            <circle cx="48" cy="34" r="2" fill="#9CA3AF"/>
          </svg>
        `),audio:Ce,audio_nq:Ye||Ce,audiodownload_allowed:!1};c([xt]),p(0),a("player"),g(!0)},Ll=async(ce,be=0)=>{if(ce.length===0){w("This playlist is empty and cannot be played."),a("home");return}await Qn()&&(c(ce),p(be),a("player"),g(!0))},ri=async ce=>{const be=ce.target.files?.[0];if(!be||!await Qn())return;const Ye=URL.createObjectURL(be),xt={id:`local-${be.name}`,name:be.name.replace(/\.[^/.]+$/,""),artist_name:"Local File",album_image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZmZmZiI+PHBhdGggZD0iTTEyIDN2MTAuNTVBNC4wMDEgNC4wMDEgMCAwMDEwIDIyYTQgNCAwIDEwNC00VjdoNFYzdi02eiIvPjwvc3ZnPg==",audio:Ye,audio_nq:Ye,genre:"Local"};c([xt]),p(0),a("player"),g(!0)},Fi=(ce,be,Ce)=>{if(!ce.trim())return;const Ye={id:Date.now().toString(),name:ce.trim(),background:be,bgType:Ce,overlayOpacity:0},xt=[Ye,...Ot].slice(0,10);Tn(xt),Yt({type:"custom",id:Ye.id})},Ol=(ce,be)=>{Tn(Ce=>Ce.map(Ye=>Ye.id===ce?{...Ye,...be}:Ye))},Ul=ce=>{Tn(be=>be.filter(Ce=>Ce.id!==ce)),Rt.type==="custom"&&Rt.id===ce&&Yt({type:"predefined",id:"invert-white"})},Gi=V.useCallback(()=>{r.length<=1||(Ht(0),p(ce=>(ce+1)%r.length))},[r.length]),od=V.useCallback(()=>{if(Me){const Ce=Gt.current;Ce&&(Ce.currentTime=0,Ce.play().catch(()=>{}));return}const ce=d===r.length-1,be=r[d]?.genre;ce&&be&&be!=="Local"&&I?(async()=>{try{const xt=(await g5(be,I,H,j==="random"?"popularity_total":j)).filter(Bt=>{const $t=Bt.license||Bt.license_url||Bt.license_ccurl||null;return H?q5($t):!U5($t)}),Bn=new Set(r.map(Bt=>Bt.id)),wt=xt.find(Bt=>!Bn.has(Bt.id));wt?(c(Bt=>{const $t=[...Bt,wt];return p($t.length-1),$t}),Ht(0)):Gi()}catch{Gi()}})():Gi()},[Me,d,r,I,H,j,Gi]),ta=V.useCallback(()=>{r.length<=1||(Ht(0),p(ce=>(ce-1+r.length)%r.length))},[r.length]),Bi=ce=>k.some(be=>be.id===ce),Ss=ce=>{if(Bi(ce.id))L(be=>be.filter(Ce=>Ce.id!==ce.id));else{const be=ou(ce);L(Ce=>[be,...Ce]),Q(be),q(!0)}},Pn=(ce,be)=>{O(Ce=>Ce.map(Ye=>Ye.id===ce&&!Ye.songs.some(xt=>xt.id===be.id)?{...Ye,songs:[ou(be),...Ye.songs]}:Ye))},ql=ce=>{const be={id:Date.now().toString(),name:ce,songs:[]};O(Ce=>[be,...Ce])},ad=ce=>{O(be=>be.filter(Ce=>Ce.id!==ce))},na=ce=>{L(be=>be.filter(Ce=>Ce.id!==ce))},fr=(ce,be)=>{O(Ce=>Ce.map(Ye=>Ye.id===ce?{...Ye,songs:Ye.songs.filter(xt=>xt.id!==be)}:Ye))},sa=(ce,be)=>{const Ce=k.find(Ye=>Ye.id.toString()===ce);Ce&&(Pn(be,Ce),na(ce))},rd=(ce,be)=>{const Ye=R.find(xt=>xt.id===be)?.songs.find(xt=>xt.id.toString()===ce);Ye&&!Bi(Ye.id)&&(L(xt=>[ou(Ye),...xt]),fr(be,Ye.id))},Gn=(ce,be)=>{const Ce={id:Date.now().toString(),name:ce,songs:[ou(be)]};O(Ye=>[Ce,...Ye])},ia=V.useCallback(ce=>{En(ce),a("session-review")},[a]),hr=V.useCallback(ce=>{Fs(be=>[ce,...be.filter(Ce=>Ce.id!==ce.id)])},[Fs]),oa=V.useCallback(ce=>{Fs(be=>be.filter(Ce=>Ce.id!==ce))},[Fs]),li=ce=>{ea(ce),a("trick-recording")};V.useEffect(()=>{const ce=Gt.current;ce&&(f?ce.play().catch(Fn):ce.pause())},[f,Fn]),V.useEffect(()=>{const ce=Gt.current;ce&&Dn&&(ce.src!==Dn.audio&&(ce.src=Dn.audio),f&&ce.play().catch(Fn))},[Dn,f,Fn]),V.useEffect(()=>{const ce=Gt.current;if(!ce)return;const be=()=>{ce.paused||Ht(ce.currentTime),hn.current=requestAnimationFrame(be)},Ce=()=>kt(ce.duration);return ce.addEventListener("canplay",Ce),hn.current=requestAnimationFrame(be),()=>{ce.removeEventListener("canplay",Ce),hn.current&&cancelAnimationFrame(hn.current)}},[]),V.useEffect(()=>{ai.current||(ai.current=new Audio);const ce=(d+1)%r.length;r.length>1&&r[ce]&&(ai.current.src=r[ce].audio)},[d,r]);const pr=()=>{i(t),a("disclaimer")},Vl=()=>{a(n)},ji=ce=>{if(!ce.trim())return;const be={id:Date.now().toString(),name:ce.trim(),gains:Cs};Vi(Ce=>[be,...Ce].slice(0,5))},ld=ce=>{const be=dr.find(Ce=>Ce.id===ce);be&&Eo(be.gains)},Fl=ce=>{Vi(be=>be.filter(Ce=>Ce.id!==ce))},Gl=rk.map(({f:ce,label:be})=>{const Ce=String(ce);return{freq:ce,key:Ce,label:be,gain:Cs[Ce]??0}}),mr=()=>{switch(t){case"home":return h.jsx(vh,{onSetPage:a,youTubeSlots:Ze,onSetYouTubeSlots:It});case"music":return h.jsx(bA,{onPlaySelectedGenres:rn,onSetPage:a,onLocalFileSelect:ri,isLoading:_,error:S,onErrorDismiss:()=>w(null),jamendoClientId:I,onSetJamendoClientId:G,onShowSettings:()=>W(!0),onShowDisclaimer:pr,selectedGenres:P,onSetSelectedGenres:M,onPlayRadioParadise:Pl,onOpenAdjustments:()=>Pe(!0),uiTemplate:mt,uiLang:Qt,activeCustomTemplate:Je,onUpdateCustomTemplate:Ol,showRollometer:an,onToggleRollometer:()=>Vn(ce=>!ce)});case"games":return h.jsx(TA,{onSetPage:a});case"player":return Dn?h.jsx(EA,{song:Dn,onSetPage:a,isPlaying:f,onPlayPause:Hs,onPrevSong:ta,onNextSong:Gi,playlistLength:r.length,isFavorited:Bi,onHeartClick:Ss,currentTime:Ue,duration:Lt,onSeek:No,volume:Ge,onVolumeChange:we,speed:Be,onSpeedChange:Fe,keyVal:ae,onKeyChange:_e,treble:Oe,onTrebleChange:X,booster:K,onBoosterChange:ye,reverb:Se,onReverbChange:xe,onShowLicense:()=>fe(!0),onShowEqualizer:()=>te(!0),repeat:Me,onToggleRepeat:tt}):h.jsx(vh,{onSetPage:a,youTubeSlots:Ze,onSetYouTubeSlots:It});case"my-music":return h.jsx(NA,{onSetPage:a,favorites:k,playlists:R,onPlayPlaylist:Ll,onCreateEmptyPlaylist:ql,onDeletePlaylist:ad,onDeleteFromFavorites:na,onDeleteFromPlaylist:fr,onMoveFavoriteToPlaylist:sa,onMovePlaylistSongToFavorites:rd,onShowDisclaimer:pr,currentSong:Dn,isPlaying:f,onPlayPause:Hs});case"disclaimer":return h.jsx(RA,{text:he[A]||"",isLoading:Le,onClose:Vl,currentLang:A,onSetLang:C});case"editor":return h.jsx(JA,{onClose:()=>a("home"),recentClips:F,onSetRecentClips:B,videoVolume:Ve,onVideoVolumeChange:Re});case"rollometer":return h.jsx(E5,{onClose:()=>a("home"),sessions:Oi,onAddSession:hr,onDeleteSession:oa,onViewSession:ia,onSetPage:a});case"session-review":return Ui?h.jsx(aM,{session:Ui,onClose:()=>a("rollometer")}):h.jsx(E5,{onClose:()=>a("home"),sessions:Oi,onAddSession:hr,onDeleteSession:oa,onViewSession:ia,onSetPage:a});case"skate-quiz":return h.jsx(cM,{onClose:()=>a("games")});case"general-quiz":return h.jsx(dM,{onClose:()=>a("games")});case"capitals-quiz":return h.jsx(pM,{onClose:()=>a("games")});case"skate-game":return h.jsx(UM,{onClose:()=>a("games")});case"trick-training":return h.jsx(N5,{onBack:()=>a("rollometer"),onSelectTrick:li});case"trick-recording":return Gs?h.jsx(HM,{trickName:Gs,onBack:()=>a("trick-training")}):h.jsx(N5,{onBack:()=>a("rollometer"),onSelectTrick:li});default:return h.jsx(vh,{onSetPage:a,youTubeSlots:Ze,onSetYouTubeSlots:It})}};return h.jsxs("div",{className:`app-container font-sans theme-${mt}`,children:[h.jsx("audio",{ref:Gt,onEnded:od,onError:Fn}),E&&h.jsx(uk,{onClose:()=>N(!1)}),mr(),Dn&&!["player","editor","rollometer","session-review","skate-quiz","general-quiz","capitals-quiz","skate-game"].includes(t)&&h.jsx(YM,{song:Dn,isPlaying:f,onPlayPause:Hs,onSetPage:a}),oe&&Z&&h.jsx(tk,{song:Z,playlists:R,onAddToPlaylist:Pn,onCreatePlaylist:Gn,onClose:()=>q(!1)}),re&&Dn&&h.jsx(nk,{song:Dn,onClose:()=>fe(!1)}),U&&h.jsx(sk,{onClose:()=>W(!1),jamendoClientId:I,onSetJamendoClientId:G,commercialOnly:H,onSetCommercialOnly:z,sortOrder:j,onSetSortOrder:$,uiLang:Qt,onSetUiLang:ve}),Ie&&h.jsx(ok,{isOpen:Ie,onClose:()=>Pe(!1),activeTemplate:Rt,setActiveTemplate:Yt,customTemplates:Ot,onAddCustomTemplate:Fi,onUpdateCustomTemplate:Ol,onDeleteCustomTemplate:Ul,language:Qt,setLanguage:ve,genres:fu}),de&&h.jsx(ik,{bands:Gl,onChangeGain:(ce,be)=>{Eo(Ce=>({...Ce,[ce]:be}))},presets:dr,onSavePreset:ji,onLoadPreset:ld,onDeletePreset:Fl,onClose:()=>te(!1)})]})};class fk extends dl.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col items-center justify-center p-6 text-center",children:h.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl shadow-2xl max-w-2xl w-full border border-red-500/30",children:[h.jsx("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Something went wrong."}),h.jsx("p",{className:"text-gray-300 mb-6",children:"The application encountered a critical error. Please try reloading."}),h.jsxs("div",{className:"bg-black/50 p-4 rounded-lg text-left overflow-auto max-h-64 mb-6 border border-white/10",children:[h.jsx("p",{className:"text-red-400 font-mono text-sm font-bold mb-2",children:this.state.error&&this.state.error.toString()}),h.jsx("pre",{className:"text-gray-500 font-mono text-xs whitespace-pre-wrap",children:this.state.errorInfo?.componentStack})]}),h.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-colors",children:"Reload Application"})]})}):this.props.children}}window.__BUILD_ID__="build-"+new Date().toISOString();console.log("Loaded",window.__BUILD_ID__);const R2=document.getElementById("root");if(!R2)throw new Error("Could not find root element to mount to");const hk=zx.createRoot(R2);hk.render(h.jsx(dl.StrictMode,{children:h.jsx(fk,{children:h.jsx(dk,{})})}));
